/*! jindo-mobile-component - v1.17.0 - 2014-12-23
* http://jindo.dev.naver.com/jindo_home/Mobile.html
* Copyright (c) 2014 ; Licensed LGPL v2 */
var raf=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,caf=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame;if(raf&&!caf){var keyInfo={},oldraf=raf;raf=function(a){function b(){keyInfo[c]&&a()}var c=oldraf(b);return keyInfo[c]=!0,c},caf=function(a){delete keyInfo[a]}}else raf&&caf||(raf=function(a){return window.setTimeout(a,16)},caf=window.clearTimeout);window.requestAnimationFrame=raf,window.cancelAnimationFrame=caf,jindo.m=function(){function _initTouchEventName(){"ontouchstart"in window?(_htTouchEventName.start="touchstart",_htTouchEventName.move="touchmove",_htTouchEventName.end="touchend",_htTouchEventName.cancel="touchcancel"):window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0&&(_htTouchEventName.start="MSPointerDown",_htTouchEventName.move="MSPointerMove",_htTouchEventName.end="MSPointerUp",_htTouchEventName.cancel="MSPointerCancel")}function _getOrientationChangeEvt(){var a="onorientationchange"in window?"orientationchange":"resize";return _htOsInfo.android&&"2.1"===_htOsInfo.version&&(a="resize"),a}function _getVertical(){var a=null,b=_getOrientationChangeEvt();if("resize"===b){var c=document.documentElement.clientWidth;a=-1==_nPreWidth?c<document.documentElement.clientHeight:_nPreWidth>c?!0:c==_nPreWidth?_isVertical:!1,_nPreWidth=c}else{var d=window.orientation;0===d||180==d?a=!0:(90==d||-90==d)&&(a=!1)}return a}function _attachEvent(){jindo.$Fn(_onOrientationChange,this).attach(window,_getOrientationChangeEvt()).attach(window,"load"),jindo.$Fn(_onPageshow,this).attach(window,"pageshow")}function _initDeviceInfo(){function a(a,b){return(b||"").indexOf(a)>-1}_setOsInfo(),_setBrowserInfo();var b=navigator.userAgent;_htDeviceInfo={iphone:_htOsInfo.iphone,ipad:_htOsInfo.ipad,android:_htOsInfo.android,win:a("Windows Phone",b),galaxyTab:/SHW-M180/.test(b),galaxyTab2:/SHW-M380/.test(b),galaxyS:/SHW-M110/.test(b),galaxyS2:/SHW-M250|GT-I9100/.test(b),galaxyS2LTE:/SHV-E110/.test(b),galaxyS3:/SHV-E210|SHW-M440|GT-I9300/.test(b),galaxyNote:/SHV-E160/.test(b),galaxyNote2:/SHV-E250/.test(b),galaxyNexus:/Galaxy Nexus/.test(b),optimusLte2:/LG-F160/.test(b),optimusVu:/LG-F100/.test(b),optimusLte:/LG-LU6200|LG-SU640|LG-F120K'/.test(b),galaxyS4:/SHV-E300|GT-I9500|GT-I9505|SGH-M919|SPH-L720|SGH-I337|SCH-I545/.test(b),bChrome:_htBrowserInfo.chrome,bSBrowser:_htBrowserInfo.bSBrowser,bInapp:!1,version:_htOsInfo.version,browserVersion:_htBrowserInfo.version};for(var c in _htDeviceInfo)"boolean"==typeof _htDeviceInfo[c]&&_htDeviceInfo[c]&&_htDeviceInfo.hasOwnProperty(c)&&"b"!==c[0]&&(_htDeviceInfo.name=c);_htDeviceInfo.samsung=/GT-|SCH-|SHV-|SHW-|SPH|SWT-|SGH-|EK-|Galaxy Nexus|SAMSUNG/.test(b),_htDeviceInfo.lg=/LG-/.test(b),_htDeviceInfo.pantech=/IM-/.test(b),_htDeviceInfo.iphone||_htDeviceInfo.ipad?a("Safari",b)||(_htDeviceInfo.bInapp=!0):_htDeviceInfo.android&&(b=b.toLowerCase(),(a("inapp",b)||a("app",b.replace("applewebkit","")))&&(_htDeviceInfo.bInapp=!0))}function _setOsInfo(){_htOsInfo=jindo.$Agent().os(),_isInapp(),_htOsInfo.version=_htOsInfo.version||_getOsVersion(),_htOsInfo.ios="undefined"==typeof _htOsInfo.ios?_htOsInfo.ipad||_htOsInfo.iphone:_htOsInfo.ios}function _setBrowserInfo(){_htBrowserInfo=jindo.$Agent().navigator(),_htOsInfo.ios&&/CriOS/.test(navigator.userAgent)&&(_htBrowserInfo.chrome=!0),"undefined"==typeof _htBrowserInfo.firefox&&(_htBrowserInfo.firefox=/Firefox/.test(navigator.userAgent)),_isSBrowser(),_updateUnderVersion()}function _updateUnderVersion(){_htBrowserInfo.msafari&&_htBrowserInfo.chrome?_htBrowserInfo.version=parseFloat(_htOsInfo.ios?navigator.userAgent.match(/CriOS[ \/]([0-9.]+)/)[1]:navigator.userAgent.match(/Chrome[ \/]([0-9.]+)/)[1]):_htBrowserInfo.firefox&&(_htBrowserInfo.version=parseFloat(navigator.userAgent.match(/Firefox[ \/]([0-9.]+)/)[1]))}function _isInapp(){var a=navigator.userAgent;_htOsInfo.bInapp=!1,_htOsInfo.ios?-1==a.indexOf("Safari")&&(_htOsInfo.bInapp=!0):_htOsInfo.android&&(a=a.toLowerCase(),(-1!=a.indexOf("inapp")||-1!=a.replace("applewebkit","").indexOf("app"))&&(_htOsInfo.bInapp=!0))}function _isSBrowser(){_htBrowserInfo.bSBrowser=!1;var a=navigator.userAgent,b=a.match(/(SAMSUNG|Chrome)/gi)||"";b.length>1&&(_htBrowserInfo.bSBrowser=!0)}function _getOsVersion(){if(!_htOsInfo.version){var a,b=navigator.userAgent,c="";return _htOsInfo.iphone||_htOsInfo.ipad?(a=b.match(/OS\s([\d|\_]+\s)/i),null!==a&&a.length>1&&(c=a[1])):_htOsInfo.android?(a=b.match(/Android\s([^\;]*)/i),null!==a&&a.length>1&&(c=a[1])):_htOsInfo.mwin&&(a=b.match(/Windows Phone\s([^\;]*)/i),null!==a&&a.length>1&&(c=a[1])),c.replace(/\_/g,".").replace(/\s/g,"")}}function _onOrientationChange(a){if("load"===a.type)return _nPreWidth=document.documentElement.clientWidth,void(_isVertical=_htOsInfo.bInapp||!_htOsInfo.iphone&&!_htOsInfo.ipad&&"resize"===_getOrientationChangeEvt()?_nPreWidth>document.documentElement.clientHeight?!1:!0:_getVertical());if("resize"===_getOrientationChangeEvt())setTimeout(function(){_orientationChange(a)},0);else{var b=jindo.$Document().clientSize().width,c=300;if(_htDeviceInfo.android){if("orientationchange"==a.type&&b==_nPreWidth)return setTimeout(function(){_onOrientationChange(a)},500),!1;_nPreWidth=b}clearTimeout(_nRotateTimer),_nRotateTimer=setTimeout(function(){_orientationChange(a)},c)}}function _orientationChange(a){var b=_isVertical;_isVertical=_getVertical(),(jindo.$Agent().navigator().mobile||jindo.$Agent().os().ipad)&&b!==_isVertical&&(a.sType="rotate",a.isVertical=_isVertical,_fireEvent("mobilerotate",a))}function _onPageshow(a){_isVertical=_getVertical(),a.sType="pageShow",setTimeout(function(){_fireEvent("mobilePageshow",a)},300)}function _getTranslateOffsetFromCSSMatrix(a){var b=new WebKitCSSMatrix(window.getComputedStyle(a).webkitTransform);return{top:b.m42,left:b.m41}}function _fireEvent(a,b){if(_htHandler[a])for(var c=_htHandler[a].concat(),d=0,e=c.length;e>d;d++)c[d].call(this,b)}function _getTranslateOffsetFromStyle(a){var b=0,c=0,d=[],e=[],f=a.style[""==jindo.m.getCssPrefix()?"transform":jindo.m.getCssPrefix()+"Transform"];if(f&&f.length>0){if(/translate[XY]/.test(f)){var g=f.match(/translateX\(([-0-9px]*)\)/),h=f.match(/translateY\(([-0-9px]*)\)/);e.push(g&&g.length>1?g[1]:"0px"),e.push(h&&h.length>1?h[1]:"0px"),d[1]=e.join(",")}else d=f.match(/translate.{0,2}\((.*)\)/);if(d&&d.length>1){var i=d[1].split(",");i&&i.length>1&&(b=parseInt(i[1],10),c=parseInt(i[0],10))}}return{top:b,left:c}}var _isVertical=null,_nPreWidth=-1,_nRotateTimer=null,_htHandler={},_htDeviceInfo={},_htAddPatch={},_htOsInfo={},_htBrowserInfo={},_htTouchEventName={start:"mousedown",move:"mousemove",end:"mouseup",cancel:null},_htDeviceList={galaxyTab:["SHW-M180"],galaxyTab2:["SHW-M380"],galaxyS:["SHW-M110"],galaxyS2:["SHW-M250","GT-I9100"],galaxyS2LTE:["SHV-E110"],galaxyS3:["SHV-E210","SHW-M440","GT-I9300"],galaxyNote:["SHV-E160"],galaxyNote2:["SHV-E250"],galaxyNexus:["Galaxy Nexus"],optimusLte2:["LG-F160"],optimusVu:["LG-F100"],optimusLte:["LG-LU6200","LG-SU640","LG-F120K"]},__M__={MOVETYPE:{0:"hScroll",1:"vScroll",2:"dScroll",3:"tap",4:"longTap",5:"doubleTap",6:"pinch",7:"rotate",8:"pinch-rotate"},KITKAT_HIGHLIGHT_CLASS:"_jmc_no_tap_highlight_",KITKAT_HIGHLIGHT_ID:"_jmc_no_tap_highlight_tag_",sVersion:"unknown",$init:function(){_initDeviceInfo(),_initTouchEventName(),_attachEvent();var a=jindo.$(this.KITKAT_HIGHLIGHT_ID);if(!a){a=document.createElement("style");var b=document.getElementsByTagName("html")[0];a.type="text/css",a.id=this.KITKAT_HIGHLIGHT_ID,b.insertBefore(a,b.firstChild);var c=a.sheet||a.styleSheet;c.insertRule("."+this.KITKAT_HIGHLIGHT_CLASS+" { -webkit-tap-highlight-color: rgba(0,0,0,0); }",0),c.insertRule("."+this.KITKAT_HIGHLIGHT_CLASS+" * { -webkit-tap-highlight-color: rgba(0,0,0,0); }",0)}},bindRotate:function(a){var b=_htHandler.mobilerotate;"undefined"==typeof b&&(b=_htHandler.mobilerotate=[]),b.push(a)},unbindRotate:function(a){var b=_htHandler.mobilerotate;if(b)for(var c,d=0;c=b[d];d++)if(c===a){b.splice(d,1);break}},bindPageshow:function(a){var b=_htHandler.mobilePageshow;"undefined"==typeof b&&(b=_htHandler.mobilePageshow=[]),b.push(a)},unbindPageshow:function(a){var b=_htHandler.mobilePageshow;if(b)for(var c,d=0;c=b[d];d++)if(c===a){b.splice(d,1);break}},getDeviceInfo:function(){return _htDeviceInfo},getOsInfo:function(){return _htOsInfo},getBrowserInfo:function(){return _htBrowserInfo},isVertical:function(){return null===_isVertical?_isVertical=_getVertical():_isVertical},getNodeElement:function(a){for(;1!=a.nodeType;)a=a.parentNode;return a},getTranslateOffset:function(a){a=jindo.$Element(a);var b,c=a.$value();return b=_htOsInfo.android&&3===parseInt(_htOsInfo.version,10)?_getTranslateOffsetFromStyle(c):"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix?_getTranslateOffsetFromCSSMatrix(c):_getTranslateOffsetFromStyle(c)},getStyleOffset:function(a){var b=parseInt(a.css("left"),10),c=parseInt(a.css("top"),10);return b=isNaN(b)?0:b,c=isNaN(c)?0:c,{left:b,top:c}},attachTransitionEnd:function(a,b){var c=(jindo.$Jindo.VERSION||jindo.$Jindo().version||jindo.VERSION).replace(/[a-z.]/gi,"");if(c>230)a._jindo_fn_=jindo.$Fn(b,this).attach(a,"transitionend");else{var d=("ms"===this.getCssPrefix()?"MS":this.getCssPrefix())+"TransitionEnd";a.addEventListener(d,b,!1)}},detachTransitionEnd:function(a,b){var c=(jindo.$Jindo.VERSION||jindo.$Jindo().version||jindo.VERSION).replace(/[a-z.]/gi,"");if(c>230)a._jindo_fn_&&(a._jindo_fn_.detach(a,"transitionend"),delete a._jindo_fn_);else{var d=("ms"===this.getCssPrefix()?"MS":this.getCssPrefix())+"TransitionEnd";a.removeEventListener(d,b,!1)}},_attachFakeJindo:function(a,b,c){var d=(jindo.$Jindo.VERSION||jindo.$Jindo().version||jindo.VERSION).replace(/[a-z.]/gi,""),e=null;return e=230>d&&"undefined"!=typeof _notSupport?_notSupport.$Fn(b).attach(a,c):jindo.$Fn(b).attach(a,c)},_getTouchEventName:function(){return _htTouchEventName},getCssPrefix:function(){var a="";return"undefined"!=typeof document.body.style.webkitTransition?a="webkit":"undefined"!=typeof document.body.style.transition||("undefined"!=typeof document.body.style.MozTransition?a="Moz":"undefined"!=typeof document.body.style.OTransition?a="O":"undefined"!=typeof document.body.style.msTransition&&(a="ms")),jindo.m.getCssPrefix=function(){return a},a},getClosest:function(a,b){var c,d=jindo.$Element(b),e=/<\/?(?:h[1-5]|[a-z]+(?:\:[a-z]+)?)[^>]*>/gi;return e.test(a)?"<"+b.tagName.toUpperCase()+">"==a.toUpperCase()?c=b:(c=d.parent(function(b){return"<"+b.$value().tagName.toUpperCase()+">"==a.toUpperCase()?b:void 0}),c=c.length?c[0].$value():!1):(0==a.indexOf(".")&&(a=a.substring(1,a.length)),d.hasClass(a)?c=b:(c=d.parent(function(b){return b.hasClass(a)?b:void 0}),c=c.length?c[0].$value():!1)),c},useCss3d:function(){if(_htAddPatch.useCss3d&&"function"==typeof _htAddPatch.useCss3d)switch(_htAddPatch.useCss3d()){case-1:return!1;case 1:return!0}var a=!1;if(_htBrowserInfo.chrome&&_htBrowserInfo.version<"25"&&!_htBrowserInfo.bSBrowser)return a;if(_htOsInfo.ios)a=!0;else if(_htBrowserInfo.firefox)a=!0;else if(_htOsInfo.android){var b=navigator.userAgent.match(/\(.*\)/);b instanceof Array&&b.length>0&&(b=b[0]),_htOsInfo.version>="4.1.0"?a=/EK-GN120|SM-G386F/.test(b)?!1:!0:(_htOsInfo.version>="4.0"&&(a=!0),_htOsInfo.version>="4.0.3"&&/SHW-|SHV-|GT-|SCH-|SGH-|SPH-|LG-F160|LG-F100|LG-F180|LG-F200|EK-|IM-A|LG-F240|LG-F260/.test(b)&&!/SHW-M420|SHW-M200|GT-S7562/.test(b)&&(a=!0))}return a},patch:function(a){return _htAddPatch.ver=a,this},_checkPatchVersion:function(){var a=jindo.m.Component.VERSION.split("."),b=a.slice(0,3).join(".");return _htAddPatch.ver>=b?!0:!1},add:function(a){if(this._checkPatchVersion())for(var b in a)_htAddPatch[b]=a[b];return this},getDeviceName:function(){if(_htAddPatch.getDeviceName&&"function"==typeof _htAddPatch.getDeviceName&&_htAddPatch.getDeviceName())return _htAddPatch.getDeviceName();var sUserAgent=navigator.userAgent;for(var i in _htDeviceList)if(eval("/"+_htDeviceList[i].join("|")+"/").test(sUserAgent))return i;var htInfo=jindo.$Agent().os();for(var x in htInfo)if(htInfo[x]===!0&&htInfo.hasOwnProperty(x))return x},useFixed:function(){if(_htAddPatch.useFixed&&"function"==typeof _htAddPatch.useFixed)switch(_htAddPatch.useFixed()){case-1:return!1;case 1:return!0}var a=!1;return(_htBrowserInfo.chrome||_htBrowserInfo.firefox||_htOsInfo.android&&parseInt(_htOsInfo.version,10)>=3||_htOsInfo.ios&&parseInt(_htOsInfo.version,10)>=5||_htOsInfo.mwin&&parseInt(_htOsInfo.version,10)>=8)&&(a=!0),a},useTimingFunction:function(){if(_htAddPatch.useTimingFunction&&"function"==typeof _htAddPatch.useTimingFunction&&_htAddPatch.useTimingFunction())switch(_htAddPatch.useTimingFunction()){case-1:return!1;case 1:return!0}var a=this.useCss3d();return _htOsInfo.android?a=!1:_htOsInfo.ios&&parseInt(_htOsInfo.version,10)>=6&&(a=!1),a},_cacheMaxClientSize:{},_fullSizeCheckElement:null,_allEventStop:function(a,b){this._htEvent||(this._htEvent={}),"detach"==b?(this._htEvent.touchstart.detach(document.body,"touchstart").detach(document.body,"touchmove"),this._htEvent={}):this._htEvent.touchstart||"attach"!=b||(this._htEvent.touchstart=jindo.$Fn(a,this).attach(document.body,"touchstart").attach(document.body,"touchmove"))},_stopDefault:function(a){a.stop()},_hasOrientation:void 0!==window.orientation,_maxClientSize:function(a,b){var c=this.getOsInfo();this._allEventStop(this._stopDefault,"attach"),this._fullSizeCheckElement||(this._fullSizeCheckElement=document.createElement("div"));var d=c.android?500:100;d=b?1:d;var e;this._hasOrientation&&(e=Math.abs(window.orientation/90)%2,d=void 0!==this._cacheMaxClientSize[e]?0:d);var f=this;document.body.scrollTop<=1?(document.body.appendChild(f._fullSizeCheckElement),f._fullSizeCheckElement.style.cssText="position:absolute; top: 0px; width:100%;height:"+parseInt(window.innerHeight+200,10)+"px;",window.scrollTo(0,1),setTimeout(function(){f._checkSize(f._hasOrientation,f._cacheMaxClientSize,e,a,f,d)},d)):(this._fullSizeCheckElement.style.height=window.innerHeight+"px",this._checkSize(this._hasOrientation,this._cacheMaxClientSize,e,a,f,d))},_checkSize:function(a,b,c,d,e,f){var g=this.getOsInfo(),h=this.getBrowserInfo();this._allEventStop(this._stopDefault,"attach");var i;a&&b[c]?i=b[c]:(e._fullSizeCheckElement.style.cssText="position:absolute; top: 0px; width:100%;height:"+window.innerHeight+"px;overflow:hidden",i=h.mobile||g.ipad?{width:window.innerWidth,height:window.innerHeight}:{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight},a&&(b[c]=i)),d.call(e,i);var j=this;this._allEventStop(this._stopDefault,"detach"),0===f?this._fullSizeCheckElement.style.height="0px":setTimeout(function(){j._fullSizeCheckElement.style.height="0px"},f)},hasOffsetBug:function(){if(_htAddPatch.hasOffsetBug&&"function"==typeof _htAddPatch.hasOffsetBug)switch(_htAddPatch.hasOffsetBug()){case-1:return!1;case 1:return!0}var a=!1;return a=_htOsInfo.android?_htBrowserInfo.chrome||_htBrowserInfo.firefox?!1:_htOsInfo.version<"4"?!0:!1:!1},hasClickBug:function(){if(_htAddPatch.hasClickBug&&"function"==typeof _htAddPatch.hasClickBug)switch(_htAddPatch.hasClickBug()){case-1:return!1;case 1:return!0}return _htOsInfo.ios||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0||!1},_getTranslate:function(a,b,c){return c="undefined"==typeof c?!0:c,"translate"+(c?"3d(":"(")+a+","+b+(c?",0)":")")},_toPrefixStr:function(a){return a.length<=0?a:(a=""==this.getCssPrefix()?a.charAt(0).toLowerCase()+a.substr(1):a.charAt(0).toUpperCase()+a.substr(1),this.getCssPrefix()+a)},_hasJindoOffsetBug:function(){return!(jindo.$Element.prototype.offset_get&&-1==jindo.$Element.prototype.offset_get.toString().indexOf("fpSafari"))},_hasKitkatHighlightBug:function(){if(_htAddPatch._hasKitkatHighlightBug&&"function"==typeof _htAddPatch._hasKitkatHighlightBug)switch(_htAddPatch._hasKitkatHighlightBug()){case-1:return!1;case 1:return!0}return _htBrowserInfo.chrome&&!_htBrowserInfo.bSBrowser&&_htBrowserInfo.version<35}};return __M__._isUseFixed=__M__.useFixed,__M__._isUseTimingFunction=__M__.useTimingFunction,__M__._isUseCss3d=__M__.useCss3d,__M__.getCssOffset=__M__.getTranslateOffset,__M__.$init(),__M__}(),"mixin"in jindo.$Jindo||(jindo.$Jindo.mixin=function(a,b){var c={};for(var d in a)c[d]=a[d];for(d in b)b.hasOwnProperty(d)&&"undefined"!=typeof b[d]&&(c[d]=b[d]);return c}),jindo.m.Component=jindo.$Class({_htEventHandler:null,_htOption:null,$init:function(){this._htEventHandler={},this._htOption={},this._htOption._htSetter={},this.constructor.$count=(this.constructor.$count||0)+1},option:function(a,b){switch(typeof a){case"undefined":var c={};for(var d in this._htOption)"htCustomEventHandler"!=d&&"_htSetter"!=d&&(c[d]=this._htOption[d]);return c;case"string":if("undefined"==typeof b)return this._htOption[a];if("htCustomEventHandler"==a){if("undefined"!=typeof this._htOption[a])return this;this.attach(b)}this._htOption[a]=b,"function"==typeof this._htOption._htSetter[a]&&this._htOption._htSetter[a](b);break;case"object":for(var e in a){if("htCustomEventHandler"==e){if("undefined"!=typeof this._htOption[e])continue;this.attach(a[e])}"_htSetter"!==e&&(this._htOption[e]=a[e]),"function"==typeof this._htOption._htSetter[e]&&this._htOption._htSetter[e](a[e])}}return this},optionSetter:function(a,b){switch(typeof a){case"undefined":return this._htOption._htSetter;case"string":if("undefined"==typeof b)return this._htOption._htSetter[a];this._htOption._htSetter[a]=jindo.$Fn(b,this).bind();break;case"object":for(var c in a)this._htOption._htSetter[c]=jindo.$Fn(a[c],this).bind()}return this},fireEvent:function(a,b){b=b||{};var c=this["on"+a],d=this._htEventHandler[a]||[],e="function"==typeof c,f=d.length>0;if(!e&&!f)return!0;d=d.concat(),b.sType=a,"undefined"==typeof b._aExtend&&(b._aExtend=[],b.stop=function(){b._aExtend.length>0&&(b._aExtend[b._aExtend.length-1].bCanceled=!0)}),b._aExtend.push({sType:a,bCanceled:!1});var g,h,i=[b];for(g=2,h=arguments.length;h>g;g++)i.push(arguments[g]);if(e&&c.apply(this,i),f){var j;for(g=0,j;j=d[g];g++)j.apply(this,i)}return!b._aExtend.pop().bCanceled},attach:function(a,b){if(1==arguments.length)return jindo.$H(arguments[0]).forEach(jindo.$Fn(function(a,b){this.attach(b,a)},this).bind()),this;var c=this._htEventHandler[a];return"undefined"==typeof c&&(c=this._htEventHandler[a]=[]),c.push(b),this},detach:function(a,b){if(1==arguments.length)return jindo.$H(arguments[0]).forEach(jindo.$Fn(function(a,b){this.detach(b,a)},this).bind()),this;var c=this._htEventHandler[a];if(c)for(var d,e=0;d=c[e];e++)if(d===b){c=c.splice(e,1);break}return this},detachAll:function(a){var b=this._htEventHandler;if(arguments.length)return"undefined"==typeof b[a]?this:(delete b[a],this);for(var c in b)delete b[c];return this}}),jindo.m.Component.factory=function(a,b){var c,d=[];"undefined"==typeof b&&(b={});for(var e,f=0;e=a[f];f++)c=new this(e,b),d[d.length]=c;return d},jindo.m.Component.getInstance=function(){throw new Error("JC 1.11.0 or JMC 1.13.0 later, getInstance method of Component is not longer supported.")},jindo.m.Component.VERSION="1.17.0",jindo.m.UIComponent=jindo.$Class({$init:function(){this._bIsActivating=!1},isActivating:function(){return this._bIsActivating},activate:function(){return this.isActivating()?this:(this._bIsActivating=!0,arguments.length>0?this._onActivate.apply(this,arguments):this._onActivate(),this)},deactivate:function(){return this.isActivating()?(this._bIsActivating=!1,arguments.length>0?this._onDeactivate.apply(this,arguments):this._onDeactivate(),this):this}}).extend(jindo.m.Component),jindo.m.Effect=function(a){if(this instanceof arguments.callee)throw new Error("You can't create a instance of this");var b=/^(\-?[0-9\.]+)(%|\w+)?$/,c=/^rgb\(([0-9]+)\s?,\s?([0-9]+)\s?,\s?([0-9]+)\)$/i,d=/^rgba\(([0-9]+)\s?,\s?([0-9]+)\s?,\s?([0-9]+),\s?([0-9\.]+)\)$/i,e=/^hsl\(([0-9\.]+)\s?,\s?([0-9\.]+)%\s?,\s?([0-9\.]+)%\)$/i,f=/^hsla\(([0-9\.]+)\s?,\s?([0-9\.]+)%\s?,\s?([0-9\.]+)%,\s?([0-9\.]+)\)$/i,g=/^#([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,h=/^#([0-9A-F])([0-9A-F])([0-9A-F])$/i,i=function(a){var i,j=a;if(b.test(a))j=parseFloat(a),i=RegExp.$2||"";else if(c.test(a))j={rgb:[parseInt(RegExp.$1,10),parseInt(RegExp.$2,10),parseInt(RegExp.$3,10),1]},i="color";else if(d.test(a))j={rgb:[parseInt(RegExp.$1,10),parseInt(RegExp.$2,10),parseInt(RegExp.$3,10),parseFloat(RegExp.$4)]},i="color";else if(e.test(a))j={hsl:[parseFloat(RegExp.$1),parseFloat(RegExp.$2)/100,parseFloat(RegExp.$3)/100,1]},j.rgb=m.apply(this,j.hsl),i="color";else if(f.test(a))j={hsl:[parseFloat(RegExp.$1),parseFloat(RegExp.$2)/100,parseFloat(RegExp.$3)/100,parseFloat(RegExp.$4)]},j.rgb=m.apply(this,j.hsl),i="color";else{if(!g.test(a=a.replace(h,"#$1$1$2$2$3$3")))throw new Error("unit error ("+a+")");j={rgb:[parseInt(RegExp.$1,16),parseInt(RegExp.$2,16),parseInt(RegExp.$3,16),1]},i="color"}return{nValue:j,sUnit:i}},j=function(a){var b=[];return a.replace(/([^\s]+\([^\)]*\)|[^\s]+)\s?/g,function(a,c){b.push(c)}),b},k=function(a){for(var b=j(a?a+"":"0"),c=[],d=0,e=b.length;e>d;d++)c.push(i(b[d]));return c},l=function(a){return"object"==typeof a?{nValue:a.nValue,sUnit:a.sUnit}:a},m=function(a,b,c,d){a=a%360/60;var e=(1-Math.abs(2*c-1))*b,f=e*(1-Math.abs(a%2-1)),g=0,h=0,i=0;a>=5||1>a?(g=e,i=f):a>=4?(g=f,i=e):a>=3?(h=f,i=e):a>=2?(h=e,i=f):a>=1&&(g=f,h=e);var j=c-e/2;return[Math.round(255*(g+j)),Math.round(255*(h+j)),Math.round(255*(i+j)),d]};return function(b,c){var d,e,f=function(){var a=!1;if(g.start!==b&&(d=k(g.start),b=g.start,a=!0),g.end!==c&&(e=k(g.end),c=g.end,a=!0),a){var f,h,i=Math.max(d.length,e.length);if(d.length!==e.length&&i>1){switch(d.length){case 1:d[1]=l(d[0]);case 2:d[2]=l(d[0]);case 3:d[3]=l(d[1])}switch(e.length){case 1:e[1]=l(e[0]);case 2:e[2]=l(e[0]);case 3:e[3]=l(e[1])}}for(var j=0;i>j;j++)if(f=d[j],h=e[j],0===f.nValue?f.sUnit=h.sUnit:0===h.nValue&&(h.sUnit=f.sUnit),f.sUnit!=h.sUnit)throw new Error("unit error ("+b+" ~ "+c+")")}},g=function(b){var c=[];f();for(var g,h,i,j,k,l,m=0,n=Math.max(d.length,e.length);n>m;m++){g=d[m],h=e[m],i=g.nValue,j=h.nValue,k=g.sUnit;var o=a(b),p=function(a,b,c){return Math.round(1e6*((b-a)*o+a))/1e6+(c||0)};if("color"===k)if(i.hsl&&j.hsl){i=i.hsl,j=j.hsl;var q=Math.round(p(i[0],j[0])),r=100*Math.max(0,Math.min(1,p(i[1],j[1]))),s=100*Math.max(0,Math.min(1,p(i[2],j[2])));l=p(i[3],j[3]),c.push(1===l?"hsl("+[q,r+"%",s+"%"].join(",")+")":"hsla("+[q,r+"%",s+"%",l].join(",")+")")}else{i=i.rgb,j=j.rgb;var t=Math.max(0,Math.min(255,Math.round(p(i[0],j[0])))),u=Math.max(0,Math.min(255,Math.round(p(i[1],j[1])))),v=Math.max(0,Math.min(255,Math.round(p(i[2],j[2]))));if(l=p(i[3],j[3]),1===l){var w=(t<<16|u<<8|v).toString(16).toUpperCase();c.push("#"+Array(7-w.length).join("0")+w)}else c.push("rgba("+[t,u,v,l].join(",")+")")}else c.push(p(i,j,k))}return c.join(" ")};switch(arguments.length){case 0:break;case 1:c=b||"0",b="0",g.setStart=function(a){this.start=a}}return g.start=b,g.end=c,g.effectConstructor=arguments.callee,b=c=null,arguments.length>1&&f(),g}},jindo.m.Effect.linear=jindo.m.Effect(function(a){return a}),jindo.m.Effect.linear.toString=function(){return"linear"},jindo.m.Effect.easeInSine=jindo.m.Effect(function(a){return 1==a?1:-Math.cos(a*(Math.PI/2))+1}),jindo.m.Effect.easeOutSine=jindo.m.Effect(function(a){return Math.sin(a*(Math.PI/2))}),jindo.m.Effect.easeInOutSine=jindo.m.Effect(function(a){return.5>a?.5*jindo.m.Effect.easeInSine(0,1)(2*a):.5*jindo.m.Effect.easeOutSine(0,1)(2*a-1)+.5}),jindo.m.Effect.easeOutInSine=jindo.m.Effect(function(a){return.5>a?.5*jindo.m.Effect.easeOutSine(0,1)(2*a):.5*jindo.m.Effect.easeInSine(0,1)(2*a-1)+.5}),jindo.m.Effect.easeInQuad=jindo.m.Effect(function(a){return a*a}),jindo.m.Effect.easeOutQuad=jindo.m.Effect(function(a){return-(a*(a-2))}),jindo.m.Effect.easeInOutQuad=jindo.m.Effect(function(a){return.5>a?.5*jindo.m.Effect.easeInQuad(0,1)(2*a):.5*jindo.m.Effect.easeOutQuad(0,1)(2*a-1)+.5}),jindo.m.Effect.easeOutInQuad=jindo.m.Effect(function(a){return.5>a?.5*jindo.m.Effect.easeOutQuad(0,1)(2*a):.5*jindo.m.Effect.easeInQuad(0,1)(2*a-1)+.5}),jindo.m.Effect.easeInCubic=jindo.m.Effect(function(a){return Math.pow(a,3)}),jindo.m.Effect.easeOutCubic=jindo.m.Effect(function(a){return Math.pow(a-1,3)+1}),jindo.m.Effect.easeInOutCubic=jindo.m.Effect(function(a){return.5>a?.5*jindo.m.Effect.easeIn(0,1)(2*a):.5*jindo.m.Effect.easeOut(0,1)(2*a-1)+.5}),jindo.m.Effect.easeOutInCubic=jindo.m.Effect(function(a){return.5>a?.5*jindo.m.Effect.easeOut(0,1)(2*a):.5*jindo.m.Effect.easeIn(0,1)(2*a-1)+.5}),jindo.m.Effect.easeInQuart=jindo.m.Effect(function(a){return Math.pow(a,4)}),jindo.m.Effect.easeOutQuart=jindo.m.Effect(function(a){return-(Math.pow(a-1,4)-1)}),jindo.m.Effect.easeInOutQuart=jindo.m.Effect(function(a){return.5>a?.5*jindo.m.Effect.easeInQuart(0,1)(2*a):.5*jindo.m.Effect.easeOutQuart(0,1)(2*a-1)+.5}),jindo.m.Effect.easeOutInQuart=jindo.m.Effect(function(a){return.5>a?.5*jindo.m.Effect.easeOutQuart(0,1)(2*a):.5*jindo.m.Effect.easeInQuart(0,1)(2*a-1)+.5}),jindo.m.Effect.easeInQuint=jindo.m.Effect(function(a){return Math.pow(a,5)}),jindo.m.Effect.easeOutQuint=jindo.m.Effect(function(a){return Math.pow(a-1,5)+1}),jindo.m.Effect.easeInOutQuint=jindo.m.Effect(function(a){return.5>a?.5*jindo.m.Effect.easeInQuint(0,1)(2*a):.5*jindo.m.Effect.easeOutQuint(0,1)(2*a-1)+.5}),jindo.m.Effect.easeOutInQuint=jindo.m.Effect(function(a){return.5>a?.5*jindo.m.Effect.easeOutQuint(0,1)(2*a):.5*jindo.m.Effect.easeInQuint(0,1)(2*a-1)+.5}),jindo.m.Effect.easeInCircle=jindo.m.Effect(function(a){return-(Math.sqrt(1-a*a)-1)}),jindo.m.Effect.easeOutCircle=jindo.m.Effect(function(a){return Math.sqrt(1-(a-1)*(a-1))}),jindo.m.Effect.easeInOutCircle=jindo.m.Effect(function(a){return.5>a?.5*jindo.m.Effect.easeInCircle(0,1)(2*a):.5*jindo.m.Effect.easeOutCircle(0,1)(2*a-1)+.5}),jindo.m.Effect.easeOutInCircle=jindo.m.Effect(function(a){return.5>a?.5*jindo.m.Effect.easeOutCircle(0,1)(2*a):.5*jindo.m.Effect.easeInCircle(0,1)(2*a-1)+.5}),jindo.m.Effect.easeInBack=jindo.m.Effect(function(a){var b=1.70158;return 1==a?1:a/1*(a/1)*((1+b)*a-b)}),jindo.m.Effect.easeOutBack=jindo.m.Effect(function(a){var b=1.70158;return 0===a?0:(a=a/1-1)*a*((b+1)*a+b)+1}),jindo.m.Effect.easeInOutBack=jindo.m.Effect(function(a){return.5>a?.5*jindo.m.Effect.easeInBack(0,1)(2*a):.5*jindo.m.Effect.easeOutBack(0,1)(2*a-1)+.5}),jindo.m.Effect.easeInElastic=jindo.m.Effect(function(a){var b,c=0,d=0;return 0===a?0:1==(a/=1)?1:(c||(c=.3),!d||1>d?(d=1,b=c/4):b=c/(2*Math.PI)*Math.asin(1/d),-(d*Math.pow(2,10*(a-=1))*Math.sin(2*(a-1)*Math.PI/c)))}),jindo.m.Effect.easeOutElastic=jindo.m.Effect(function(a){var b,c=0,d=0;return 0===a?0:1==(a/=1)?1:(c||(c=.3),!d||1>d?(d=1,b=c/4):b=c/(2*Math.PI)*Math.asin(1/d),d*Math.pow(2,-10*a)*Math.sin(2*(a-b)*Math.PI/c)+1)}),jindo.m.Effect.easeInOutElastic=jindo.m.Effect(function(a){var b,c=0,d=0;return 0===a?0:2==(a/=.5)?1:(c||(c=.3*1.5),!d||1>d?(d=1,b=c/4):b=c/(2*Math.PI)*Math.asin(1/d),1>a?-.5*d*Math.pow(2,10*(a-=1))*Math.sin(2*(a-b)*Math.PI/c):d*Math.pow(2,-10*(a-=1))*Math.sin(2*(a-b)*Math.PI/c)*.5+1)}),jindo.m.Effect.easeOutBounce=jindo.m.Effect(function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}),jindo.m.Effect.easeInBounce=jindo.m.Effect(function(a){return 1-jindo.m.Effect.easeOutBounce(0,1)(1-a)}),jindo.m.Effect.easeInOutBounce=jindo.m.Effect(function(a){return.5>a?.5*jindo.m.Effect.easeInBounce(0,1)(2*a):.5*jindo.m.Effect.easeOutBounce(0,1)(2*a-1)+.5}),jindo.m.Effect.easeInExpo=jindo.m.Effect(function(a){return 0===a?0:Math.pow(2,10*(a-1))}),jindo.m.Effect.easeOutExpo=jindo.m.Effect(function(a){return 1==a?1:-Math.pow(2,-10*a/1)+1}),jindo.m.Effect.easeInOutExpo=jindo.m.Effect(function(a){return.5>a?.5*jindo.m.Effect.easeInExpo(0,1)(2*a):.5*jindo.m.Effect.easeOutExpo(0,1)(2*a-1)+.5}),jindo.m.Effect.easeOutInExpo=jindo.m.Effect(function(a){return.5>a?.5*jindo.m.Effect.easeOutExpo(0,1)(2*a):.5*jindo.m.Effect.easeInExpo(0,1)(2*a-1)+.5}),jindo.m.Effect._cubicBezier=function(a,b,c,d){return function(e){function f(a){return((l*a+k)*a+j)*a}function g(a){return((o*a+n)*a+m)*a}function h(a){return(3*l*a+2*k)*a+j}function i(a,b){var c,d,e,g,i,j;for(e=a,j=0;8>j;j++){if(g=f(e)-a,Math.abs(g)<b)return e;if(i=h(e),Math.abs(i)<1e-6)break;e-=g/i}if(c=0,d=1,e=a,c>e)return c;if(e>d)return d;for(;d>c;){if(g=f(e),Math.abs(g-a)<b)return e;a>g?c=e:d=e,e=.5*(d-c)+c}return e}var j=3*a,k=3*(c-a)-j,l=1-j-k,m=3*b,n=3*(d-b)-m,o=1-m-n;return g(i(e,.005))}},jindo.m.Effect.cubicBezier=function(a,b,c,d){var e=jindo.m.Effect(jindo.m.Effect._cubicBezier(a,b,c,d)),f="cubic-bezier("+[a,b,c,d].join(",")+")";return e.toString=function(){return f},e},jindo.m.Effect.cubicEase=jindo.m.Effect.cubicBezier(.25,.1,.25,1),jindo.m.Effect.cubicEase.toString=function(){return"ease"},jindo.m.Effect.cubicEaseIn=jindo.m.Effect.cubicBezier(.42,0,1,1),jindo.m.Effect.cubicEaseIn.toString=function(){return"ease-in"},jindo.m.Effect.cubicEaseOut=jindo.m.Effect.cubicBezier(0,0,.58,1),jindo.m.Effect.cubicEaseOut.toString=function(){return"ease-out"},jindo.m.Effect.cubicEaseInOut=jindo.m.Effect.cubicBezier(.42,0,.58,1),jindo.m.Effect.cubicEaseInOut.toString=function(){return"ease-in-out"},jindo.m.Effect.cubicEaseOutIn=jindo.m.Effect.cubicBezier(0,.42,1,.58),jindo.m.Effect.overphase=jindo.m.Effect(function(a){return a/=.652785,(Math.sqrt((2-a)*a)+.1*a).toFixed(5)}),jindo.m.Effect.sinusoidal=jindo.m.Effect(function(a){return-Math.cos(a*Math.PI)/2+.5}),jindo.m.Effect.mirror=jindo.m.Effect(function(a){return jindo.m.Effect.sinusoidal(0,1)(.5>a?2*a:1-2*(a-.5))}),jindo.m.Effect.pulse=function(a){return jindo.m.Effect(function(b){return-Math.cos(b*(a-.5)*2*Math.PI)/2+.5})},jindo.m.Effect.wave=function(a,b){return jindo.m.Effect(function(c){return(b||1)*Math.sin(360*a*c*Math.PI/180).toFixed(5)})},jindo.m.Effect.stepStart=jindo.m.Effect(function(a){return 0===a?0:1}),jindo.m.Effect.stepEnd=jindo.m.Effect(function(a){return 1===a?1:0}),jindo.m.Effect.easeIn=jindo.m.Effect.easeInCubic,jindo.m.Effect.easeOut=jindo.m.Effect.easeOutCubic,jindo.m.Effect.easeInOut=jindo.m.Effect.easeInOutCubic,jindo.m.Effect.easeOutIn=jindo.m.Effect.easeOutInCubic,jindo.m.Effect.bounce=jindo.m.Effect.easeOutBounce,jindo.m.Effect.elastic=jindo.m.Effect.easeInElastic,jindo.m.CheckRadioCore=jindo.$Class({$init:function(){},_initVar:function(a,b){this._sFormType=a,this._sFormFixClass=b,this._sUnitClass=this.option("sClassPrefix")+b+"-unit",this._sOnClass=this.option("sClassPrefix")+b+"-on",this._sFormClass=this.option("sClassPrefix")+b,this._sDisableClass=this.option("sClassPrefix")+b+"-disable";var c=jindo.m.getDeviceInfo();this._bMobile=c.iphone||c.ipad||c.android,this._sClickEvent=this._bMobile?"touchend":"click",this._bMove=!1},_setWrapperElement:function(a,b){this._htWElement={},this._aWElUnitList=[],this._aWElFormList=[],a="string"==typeof a?jindo.$(a):a,this._htWElement.base=jindo.$Element(a),this._htWElement.container=jindo.$Element(jindo.$$.getSingle("."+b+this._sFormFixClass+"-cont",a));for(var c=this._htWElement.container.queryAll("."+this._sUnitClass),d=this._htWElement.container.queryAll("."+this._sFormClass),e=0;e<c.length;e++)this._aWElUnitList[e]=jindo.$Element(c[e]),this._aWElFormList[e]=jindo.$Element(d[e])},_onActivate:function(){this._attachEvent()},_onDeactivate:function(){this._detachEvent()},_attachEvent:function(){if(this._htEvent={},this._htEvent.form_touchmove={el:this._htWElement.container.$value(),ref:jindo.$Fn(this._onTouchMove,this).attach(this._htWElement.container.$value(),"touchmove")},this._htEvent["form_"+this._sClickEvent]={el:this._htWElement.container.$value(),ref:jindo.$Fn(this._onCheck,this).attach(this._htWElement.container.$value(),this._sClickEvent)},this._bMobile)for(var a=0;a<this._aWElFormList.length;a++)this._htEvent["form"+a+"_click"]={el:this._aWElFormList[a].$value(),ref:jindo.$Fn(this._onFormClick,this).attach(this._aWElFormList[a].$value(),"click")}},_detachEvent:function(){for(var a in this._htEvent){var b=this._htEvent[a];
b.ref.detach(b.el,a.substring(a.lastIndexOf("_")+1))}this._htEvent=null},_onTouchMove:function(){this._bMove=!0},_onFormClick:function(a){var b=this._sUnitClass,c=jindo.$Element(a.element);c=c.parent(function(a){return a.hasClass(b)})[0];var d=a.element.checked,e=c.attr("data-cb-checked"),f=e&&"on"==e?!0:!1;d!=f&&(a.element.checked=f)},_onCheck:function(a){if(a.stopDefault(),a.element&&!this._bMove){var b=jindo.m.getNodeElement(a.element),c=jindo.$Element(b),d=this._sUnitClass,e=b.tagName.toLowerCase(),f=b.getAttribute("type");if(f=f?f:"",this._htWElement.container.isParentOf(c)&&!c.hasClass(d))c=c.parent(function(a){return a.hasClass(d)})[0];else if(c.$value()===this._htWElement.container.$value())return!1;if(c.hasClass(this._sDisableClass))return!1;var g=!1;"input"==e&&f.toLowerCase()==this._sFormType&&(g=!0),this._afterCheck(c,g)}this._bMove=!1},_afterCheck:function(){},_getFormIdx:function(a){var b=[],c=[],d=(this._sUnitClass,this._sFormClass,jindo.$A(this._aWElUnitList)),e=jindo.$A(this._aWElFormList);if(a instanceof Array)c=a;else if("object"==typeof a)c.push(a);else if(!a||null===a)for(var f=this._aWElUnitList.length,g=0;f>g;g++)b.push(g);return c.length>0&&(d.forEach(function(a,d){for(var e=0;e<c.length;e++)c[e]===a.$value()&&b.push(d)}),c.length>b.length&&e.forEach(function(a,d){for(var e=0;e<c.length;e++)c[e]===a.$value()&&b.push(d)})),b},_useSettingForm:function(a,b){for(var c=this._getFormIdx(a),d=[],e=[],f=0;f<c.length;f++)this._setUsedForm(b,this._aWElFormList[c[f]].$value(),this._aWElUnitList[c[f]]),d[f]=this._aWElFormList[c[f]].$value(),e[f]=this._aWElUnitList[c[f]].$value();return{aFormList:d,aUnitList:e}},_setUsedForm:function(a,b,c){a?(c.removeClass(this._sDisableClass),b.disabled=!1):(c.addClass(this._sDisableClass),b.disabled=!0)},destroy:function(){this.deactivate();for(var a in this._htWElement)this._htWElement[a]=null;this._htWElement=null,this._sUnitClass=null,this._sOnClass=null,this._sFormClass=null,this._sDisableClass=null,this._aWElUnitList=null,this._aWElFormList=null}}).extend(jindo.m.UIComponent),jindo.m.CheckBox=jindo.$Class({$init:function(a,b){this.option({sClassPrefix:"fcb-",sType:"v",bActivateOnload:!0,sUncheckBgColor:"transparent"}),this.option(b||{}),this._initVar(),this._setWrapperElement(a,this.option("sClassPrefix")),this._initCheckLoad(),this.option("bActivateOnload")&&this.activate()},_initVar:function(){this.$super._initVar("checkbox","checkbox")},_initCheckLoad:function(){for(var a,b,c=this._htWElement.container.queryAll("."+this._sUnitClass),d=0;d<c.length;d++)a=jindo.$Element(c[d]),b=jindo.$$.getSingle("input[type=checkbox]",a.$value()),this._setChecked(b.checked,b,a);a=b=null},_afterCheck:function(a){var b=jindo.$$.getSingle("."+this._sFormClass,a.$value()),c=a.attr("data-cb-checked"),d=c&&"on"==c?!1:!0;b.checked=d,this._setChecked(d,b,a)},_setChecked:function(a,b,c){var d="unchecked",e=this.option("sCheckBgColor");a?(c.addClass(this._sOnClass),c.attr("data-cb-checked","on"),d="checked"):(e=e?this.option("sUncheckBgColor"):null,c.removeClass(this._sOnClass),c.attr("data-cb-checked","off")),this.fireEvent(d,{elCheckBoxUnit:c.$value(),elCheckBox:b})},getCheckedValue:function(){for(var a=[],b=this._aWElFormList,c=null,d=0;d<b.length;d++)c=b[d].$value(),!c.disabled&&c.checked&&a.push(c.value);return a},setCheckedBox:function(a,b){for(var c=this._getFormIdx(b),d=null,e=0;e<c.length;e++)d=this._aWElFormList[c[e]].$value(),d.disabled||(d.checked=a,this._setChecked(a,d,this._aWElUnitList[c[e]]))},enable:function(a){var b=this._useSettingForm(a,!0);this.fireEvent("enable",{aCheckBoxList:b.aFormList,aCheckBoxUnitList:b.aUnitList})},disable:function(a){var b=this._useSettingForm(a,!1);this.fireEvent("disable",{aCheckBoxList:b.aFormList,aCheckBoxUnitList:b.aUnitList})},geElementtByIndex:function(a){return{elCheckBox:this._aWElFormList[a].$value(),elCheckBoxUnit:this._aWElUnitList[a].$value()}},destroy:function(){this.$super.destroy()}}).extend(jindo.m.CheckRadioCore),jindo.m.Slide=jindo.$Class({$init:function(a){this.option({}),this.option(a||{})},setStyle:function(a){var b={};return b[this.p("TransitionProperty")]=""==this.sCssPrefix?"tranform":"-"+this.sCssPrefix+"-transform",b[this.p("TransitionDuration")]="0ms",b[this.p("Transform")]=this.getTranslate(0,0),this._welTarget=a[0].css(b),this.fireEvent("set",{css:b}),b},move:function(a,b,c,d){d=d||{};var e,f=this.getTarget(!0);if(d.useCircular)this.option("bUseH")?a=this._getPos(a,d):b=this._getPos(b,d);else if(this.option("bHasOffsetBug")){var g=jindo.m.getStyleOffset(f);a-=g.left,b-=g.top}return e={"@transitionProperty":""==this.sCssPrefix?"tranform":"-"+this.sCssPrefix+"-transform","@transform":this.getTranslate(a+"px",b+"px")},c?this._oMorph.pushAnimate(c,[f,e]):f.css(this.toCss(e)),this._oMorph},_getPos:function(a,b){var c=a,d=b.next,e=b.range;if(b.restore)c=0;else if(0!=b.duration&&a%e===0)c=d?-e:e;else if("undefined"!=typeof b.startIndex){var f=-1*parseInt(c/e,10);d=f==b.startIndex||f>b.startIndex?!0:!1,c=c%e+(d?-1:1)*Math.abs(f-b.startIndex)*e}else c=c%e+(d?0:2*e),c%=e;return c}}).extend(jindo.m.Animation),jindo.m.AjaxHistory=jindo.$Class({bHashEvent:!1,bPushState:!1,_nIntervalId:0,_htLastState:{},$init:function(a){this.option({nCheckInterval:100,bUseHash:!1}),this.option(a||{})},initialize:function(){this._initVar(),this._attachEvent();var a=this._getHash();return a?(this._htLastState=this._getDecodedData(a),this.fireEvent("change",{bLoad:!0,htHistoryData:this._htLastState})):this.fireEvent("load"),this},_initVar:function(){var a=jindo.m.getDeviceInfo();this.bHashEvent="onhashchange"in window,this.bPushState="undefined"!=typeof window.history&&"undefined"!=typeof window.history.pushState&&"undefined"!=typeof window.history.replaceState&&!((a.iphone||a.ipad)&&parseFloat(a.version,10)<4.3),this._nIntervalId=0,this._oAgent=jindo.$Agent().navigator(),this._bAndroid=a.android,this.option("bUseHash")&&(this.bPushState=!1)},_attachEvent:function(){this._htEvent={},this.bPushState?this._htEvent.popstate={ref:jindo.$Fn(this._onPopState,this).attach(window,"popstate"),el:window}:this.bHashEvent?this._htEvent.hashchange={ref:jindo.$Fn(this._onHashChange,this).attach(window,"hashchange"),el:window}:(clearInterval(this._nIntervalId),this._nIntervalId=setInterval(jindo.$Fn(this._onHashChange,this).bind(),this.option("nCheckInterval")))},_onPopState:function(a){var b=a.$value().state;if(b){var c=this._cloneObject(b);this._compareData(c,this._htLastState)||(this._htLastState=c,this._onChange())}},_onHashChange:function(){var a=this._getDecodedData(this._getHash());this._compareData(a,this._htLastState)||(this._htLastState=a,this._onChange())},_onChange:function(){this.fireEvent("change",{bLoad:!1,htHistoryData:this._htLastState})},addHistory:function(a,b){if("undefined"==typeof b&&(b=!1),a&&"object"==typeof a&&jindo.$H(a).length()>0){var c=this._cloneObject(a);if(this._compareData(c,this._htLastState))return;this._htLastState=c;var d=this._getEncodedData(this._htLastState);if(this.bPushState)b?this._replaceState(this._htLastState):this._pushState(this._htLastState);else{var e=this;this._bAndroid?setTimeout(function(){e._setHash(d)},0):this._setHash(d)}}},_replaceState:function(a){history.replaceState(a,document.title,location.href)},_pushState:function(a){history.pushState(a,document.title,location.href)},_setHash:function(a){location.hash=a},_compareData:function(a,b){if(a&&b){if(jindo.$H(a).length()==jindo.$H(b).length()){for(var c in a)if("object"==typeof a[c]){if(!arguments.callee(a[c],b[c]))return!1}else if(a[c]!=b[c])return!1;return!0}return!1}return!1},_getEncodedData:function(a){return a?encodeURIComponent("object"==typeof JSON&&"function"==typeof JSON.stringify?JSON.stringify(a):jindo.$Json(a).toString()):""},_getDecodedData:function(a){try{if(a){var b=decodeURIComponent(a);return"object"==typeof JSON&&"function"==typeof JSON.parse?JSON.parse(b):jindo.$Json(b).toObject()}}catch(c){}return{}},_cloneObject:function(a){var b,c;return a?(b=jindo.$Json(a).toString(),c=jindo.$Json(b).toObject()):c={},c},_getHash:function(){return this._oAgent.firefox?encodeURIComponent(location.hash.substring(1)):location.hash.substring(1)},_detachEvent:function(){for(var a in this._htEvent){var b=this._htEvent[a];b.ref.detach(b.el,a)}this._htEvent=null},destroy:function(){this._detachEvent(),clearInterval(this._nIntervalId),this._nIntervalId=null}}).extend(jindo.m.Component),jindo.m.Morph=jindo.$Class({$init:function(a){this.option({fEffect:jindo.m.Effect.linear,bUseTransition:!0}).option(a);var b=document.body.style;this._bTransitionSupport="transition"in b||"webkitTransition"in b||"MozTransition"in b||"OTransition"in b||"msTransition"in b;var c=jindo.$Agent(),d=c.os(),e=c.navigator();this._bHasTransformRenderBug=d.ios&&5===parseInt(d.version,10)&&e.msafari,this._aQueue=[],this._aIngItem=null,this._oRAF=null,this._bPlaying=null,this._nPtr=0,this._nPausePassed=0,this._aRepeat=[],this._sTransitionEnd="webkitTransition"in b&&"webkitTransitionEnd"||"transition"in b&&"transitionend"||"MozTransition"in b&&"transitionend"||"OTransition"in b&&"oTransitionEnd"||"msTransition"in b&&"MSTransitionEnd"},pushAnimate:function(a,b){if(b&&!(b instanceof Array))throw Error("aLists should be a instance of Array");return b=[].concat(b),b.duration=a,this._aQueue.push(b),this},pushKeyframe:function(a,b){return this._aQueue.push({action:"keyframe",args:{duration:a,keyframe:b}}),this},pushWait:function(){for(var a=0,b=arguments.length;b>a;a++){var c=arguments[a];c instanceof this.constructor?this._aQueue.push(c):this.pushAnimate(c,[])}return this},pushCall:function(a){return this._aQueue.push(a),this},pushRepeatStart:function(a){"undefined"==typeof a&&(a=1);var b="L"+Math.round((new Date).getTime()*Math.random());return this._aRepeat.push(b),this._pushLabel(b,a),this},_pushLabel:function(a,b){return"undefined"==typeof b&&(b=1/0),this._aQueue.push({action:"label",args:{label:a,times:b,loops:0}}),this},pushRepeatEnd:function(){var a=this._aRepeat.pop();return this._aQueue.push({action:"goto",args:{label:a}}),this},_waitMorph:function(a){var b=this;if(!a.isPlaying())return!0;var c=function(){a.detach("end",c).detach("pause",c),b._flushQueue()};return a.attach("end",c).attach("pause",c),!1},_getLabelIndex:function(a){for(var b=null,c=0,d=this._aQueue.length;d>c;c++)if(b=this._aQueue[c],"label"===b.action&&b.args.label===a)return c;return-1},_getRepeatEndIndex:function(a,b){for(var c=null,d=b||0,e=this._aQueue.length;e>d;d++)if(c=this._aQueue[d],"goto"===c.action&&c.args.label===a)return d;return-1},_flushQueue:function(){var a,b,c,d,e,f=this;do{if(a=!1,b=this._aIngItem=this._aQueue[this._nPtr],!b)return this._bPlaying=!1,void(b||this.fireEvent("end"));if(this._nPtr++,b instanceof Function)b.call(this),a=!0;else if(b instanceof this.constructor)a=this._waitMorph(b);else if("number"!=typeof b)if("label"!==b.action)if("goto"!==b.action)if("keyframe"!==b.action){if(e=this._aCompiledItem,d=this._nPausePassed){for(var g=0,h=e.length;h>g;g++)e[g].sTimingFunc="";e.allCSS=!1}else e=this._aCompiledItem=this._compileItem(b);0!==e.length?(a=e.duration<0,a?this._processItem(1,!0):(this._playAnimate(d),this._nPausePassed=0)):setTimeout(function(){f._flushQueue()},e.duration)}else{if(c=b.args.keyframe,d=this._nPausePassed,e=this._aCompiledItem=b.args,a=e.duration<0){this._processKeyframe(1,c);continue}this._playKeyframe(d,c),this._nPausePassed=0}else this._goto(b.args.label),a=!0;else{if(++b.args.loops>b.args.times){var i=this._getRepeatEndIndex(b.args.label,this._nPtr);b.args.loops=0,i>-1&&this._goto(i+1)}a=!0}else setTimeout(function(){f._flushQueue()},b)}while(a)},_playKeyframe:function(a,b){var c=this;this._nStart=(new Date).getTime()-a;var d=this._aCompiledItem,e=d.duration;!function f(){c._oRAF=c._requestAnimationFrame(function(){var a=c._nStart;if(null!==c._oRAF){c._oRAF=null;var d=Math.min(1,Math.max(0,((new Date).getTime()-a)/e));b.frame(d),1>d?f():(c.fireEvent("timerEnd"),c._flushQueue())}})}()},_processKeyframe:function(a,b){b.preprocess().frame(a)},_playAnimate:function(a){var b=this;this._nStart=(new Date).getTime()-a,this._nIng=2,a||this._processItem(0,!0,3,!0);var c=this._aCompiledItem;c.allCSS?this._nIng--:this._animationLoop(!0),function(){var a=b._processItem(1,!0,1).transitionCache;if(!a||0===c.duration)return void(0===--b._nIng&&b._flushQueue());var d=a.length,e=d?a[0]:null,f=function(c){for(var d,e=[];d=a.pop();)d.css(b._getCSSKey("transitionDuration"),"0.0001ms"),e.push(d);a=null,(window.requestAnimationFrame||window.setTimeout)(function(){for(;d=e.pop();)d.css(b._getCSSKey("transitionDuration"),"0"),d.css(b._getCSSKey("transitionProperty"),"none");e=null},0),b.fireEvent("transitionEnd"),0!==--b._nIng||c||b._requestAnimationFrame(function(){b._flushQueue()})};if(!e)return void f();var g=e.$value(),h=function(a){g.removeEventListener(b._sTransitionEnd,b._fpOnTransitionEnd,!0),b._fpOnTransitionEnd=null,f(a===!0)};b._fpOnTransitionEnd=function(a){h(a)},g.addEventListener(b._sTransitionEnd,b._fpOnTransitionEnd,!0)}()},_animationLoop:function(a){var b=this;this._oRAF=this._requestAnimationFrame(function(){var c=b._nStart,d=b._aCompiledItem.duration;if(null!==b._oRAF){b._oRAF=null;var e=Math.min(1,Math.max(0,((new Date).getTime()-c)/d));b._processItem(e,a,2),1>e?b._animationLoop():(b.fireEvent("timerEnd"),0===--b._nIng&&b._flushQueue())}})},_processItem:function(a,b,c,d){var e={normalPropsToPause:[],transitionCache:[]},f=e.normalPropsToPause,g=e.transitionCache,h=this._aCompiledItem,i=h.duration;0===i?i=1:0>i&&(i=0);var j,k,l,m,n,o,p=this._bHasTransformRenderBug;if(c=c||3,this.fireEvent("beforeProgress",{nRate:a})){for(var q,r,s=[],t=0;r=h[t];t++){j=r.oObj,k=r.welObj,l=r.oProps;var u=r.sTimingFunc;u&&1&c&&(k&&k.$value().clientHeight,"@transition"in l||d||("@transitionProperty"in l||k.css(this._getCSSKey("transitionProperty"),"all"),"@transitionDuration"in l||k.css(this._getCSSKey("transitionDuration"),(i/1e3).toFixed(3)+"s"),"@transitionTimingFunction"in l||k.css(this._getCSSKey("transitionTimingFunction"),u)),g.push(k)),q={},s.push(j,q),d&&1===a&&"@transform"in l&&/AppleWebKit\/534\.30/.test(navigator.userAgent)&&(k.css(this._getCSSKey("transform"),""),j.clientHeight);for(var v in l)if(l.hasOwnProperty(v)){if(m=l[v],o=/^@(.*)$/.test(v)&&RegExp.$1,n=u&&o?1:2,!(c&n))continue;if("function"==typeof m)m=m(a);else if(!b)continue;o?(/transition/.test(v)&&(m=this._getCSSVal(m)),p&&"@transform"===v&&("@left"in l||"@top"in l)&&j.clientHeight,k.css(this._getCSSKey(o),m)):d?f.push([j,v,m]):j[v]=m,q[v]=m}}return this.fireEvent("progress",{aLists:s,nRate:a}),e}},_compileItem:function(a){var b=0==a.length,c=[];c.duration=a.duration;for(var d,e,f,g,h,i,j,k,l=this.option("fEffect"),m=0,n=a.length;n>m;m+=2){var o=null;d=a[m],e=jindo.$Element(d),f=a[m+1],i={};var p=!1;for(var q in f)if(f.hasOwnProperty(q)){var r,s;if(h=f[q],j=/^@(.*)$/.test(q),k=RegExp.$1,h instanceof Array?(g=h[0],h=h[1]):g=j?e.css(this._getCSSKey(k)):d[q],g=0===g?g:g||"",r="function"==typeof h?h.effectConstructor:l,s=this._getEffectCSS(r)||"",/^@transform$/.test(q)){if("function"==typeof h&&(h=h.end),i[q]=this._getTransformFunction(g,h,r,d),jindo.m){var t=jindo.m.getOsInfo();(/matrix/.test(g)||/matrix/.test(h))&&t.android&&parseFloat(t.version)<3&&(s="")}}else if("function"==typeof h)"setStart"in h&&h.setStart(g),i[q]=h;else try{i[q]=r(g,h)}catch(u){if(!/^unit error/.test(u.message))throw u;i[q]=h}var v=i[q];if("function"==typeof v&&v(0)===v(1)){delete i[q];continue}j?null===o?o=s:o!==s&&(o=""):s="",b=b||!s,p=!0}e.visible()||(o=null,b=!0),p&&c.push({oObj:d,welObj:e,oProps:i,sTimingFunc:o})}return c.allCSS=!b,c},play:function(){return this._bPlaying||(this._bPlaying=!0,this.fireEvent("play"),this._flushQueue()),this},reset:function(){return this._goto(0)},pause:function(a){if(!this._bPlaying)return this;this._cancelAnimationFrame(this._oRAF),this._oRAF=null;var b=this._aCompiledItem,c=b.duration;if("undefined"==typeof a){var d=(new Date).getTime()-this._nStart;a=d/c}a=Math.max(0,Math.min(1,a));var e=null;if(b.keyframe?this._processKeyframe(a,b.keyframe):e=this._processItem(a,!0,3,!0).normalPropsToPause,this._nPtr--,this._nPausePassed=Math.round(c*a),this._fpOnTransitionEnd&&this._fpOnTransitionEnd(!0),e)for(var f=0,g=e.length;g>f;f++){var h=e[f];h[0][h[1]]=h[2]}return this._bPlaying=!1,this.fireEvent("pause"),this},_goto:function(a){var b=a;if("number"==typeof a)a=a||0;else if(a=this._getLabelIndex(b),-1===a)throw"Label not found";return this._nPtr=a,this._nPausePassed=0,this},isPlaying:function(){return this._bPlaying||!1},clear:function(){return this._aQueue.length=0,this._aRepeat.length=0,this._nPtr=0,this._nPausePassed=0,this},_getPointer:function(){return this._nPtr},_getEffectCSS:function(a){var b=this.option("bUseTransition")&&this._bTransitionSupport;if(!b)return null;if(this._htEventHandler.progress&&this._htEventHandler.progress.length||this._htEventHandler.beforeProgress&&this._htEventHandler.beforeProgress.length)return null;if(a.hasOwnProperty("toString"))return a.toString();switch(a){case jindo.m.Effect.linear:return"linear";case jindo.m.Effect.cubicEase:return"ease";case jindo.m.Effect.cubicEaseIn:return"ease-in";case jindo.m.Effect.cubicEaseOut:return"ease-out";case jindo.m.Effect.cubicEaseInOut:return"ease-in-out";default:if(a.cubicBezier&&Math.max.apply(Math,a.cubicBezier)<=1&&Math.min.apply(Math,a.cubicBezier)>=0)return"cubic-bezier("+a.cubicBezier.join(",")+")"}return null},_requestAnimationFrame:function(a){var b,c=this,d=function(){b===c._oLastRAF&&(c._oLastRAF=null,a())};return b=window.requestAnimationFrame?requestAnimationFrame(d):setTimeout(d,1e3/60),this._oLastRAF=b},_cancelAnimationFrame:function(a){var b;return b=window.cancelAnimationFrame?cancelAnimationFrame(a):clearTimeout(a),this._oLastRAF=null,b},_oProperPrefix:{},_getProperPrefix:function(a){var b=this._oProperPrefix;if(a in b)return b[a];for(var c,d,e=document.body.style,f=["webkit","","Moz","O","ms"],g=function(a){return a.toUpperCase()},h=0,i=f.length;i>h;h++)if(c=f[h],d=c+(c?a.replace(/^[a-z]/,g):a),d in e)return b[a]=c;return b[a]=""},_getCSSKey:function(a){var b=this,c="",d=a.replace(/^(\-(webkit|o|moz|ms)\-)?([a-z]+)/,function(a,d,e,f){return c=e||b._getProperPrefix(f),c&&(f=f.replace(/^[a-z]/,function(a){return a.toUpperCase()})),f}).replace(/\-(\w)/g,function(a,b){return b.toUpperCase()});return({o:"O",moz:"Moz",webkit:"Webkit"}[c]||c)+d},_getCSSVal:function(a){var b=this,c=a.replace(/(^|\s)(\-(webkit|moz|o|ms)\-)?([a-z]+)/g,function(a,c,d,e,f){return e=e||b._getProperPrefix(f),c+(e&&"-"+e+"-")+f});return c},_getMatrixObj:function(a,b){a=a.replace(/\b(translate(3d)?)\(\s*([^,]+)\s*,\s*([^,\)]+)/g,function(a,c,d,e,f){return/%$/.test(e)&&(e=parseFloat(e)/100*b.offsetWidth+"px"),/%$/.test(f)&&(f=parseFloat(f)/100*b.offsetHeight+"px"),c+"("+e+","+f}).replace(/\b(translate([XY]))\(\s*([^\)]+)/g,function(a,c,d,e){return"X"===d&&/%$/.test(e)?e=parseFloat(e)/100*b.offsetWidth+"px":"Y"===d&&/%$/.test(e)&&(e=parseFloat(e)/100*b.offsetHeight+"px"),c+"("+e});var c,d=window.WebKitCSSMatrix||window.MSCSSMatrix||window.OCSSMatrix||window.MozCSSMatrix||window.CSSMatrix;if(d)c=function(a){return new d(a).toString()};else{var e="M"+Math.round((new Date).getTime()*Math.random()),f=jindo.$Agent().navigator(),g=f.firefox?"moz":f.ie?"ms":"o",h="-"+g+"-transform",i=document.createElement("style");i.type="text/css";var j=document.getElementsByTagName("html")[0];j.insertBefore(i,j.firstChild);var k=i.sheet||i.styleSheet,l=document.createElement("div");l.id=e;var m=window.getComputedStyle(l,null);c=function(a){var b=null;return k.insertRule("#"+e+" { "+h+": "+a+" !important; }",0),document.body.insertBefore(l,document.body.firstChild),b=m.getPropertyValue(h),document.body.removeChild(l),k.deleteRule(0),b}}var n=c(a);return/^([^\(]+)\(([^\)]*)\)$/.test(n)?{key:RegExp.$1,val:RegExp.$2.replace(/\s*,\s*/g," ")}:{key:"matrix",val:"1 0 0 1 0 0"}},_convertMatrix3d:function(a){if("matrix3d"===a.key)return a;var b=a.val.split(" ");return a.key="matrix3d",b.splice(2,0,"0"),b.splice(3,0,"0"),b.splice(6,0,"0"),b.splice(7,0,"0"),b.splice(8,0,"0"),b.splice(9,0,"0"),b.splice(10,0,"1"),b.splice(11,0,"0"),b.splice(14,0,"0"),b.splice(15,0,"1"),a.val=b.join(" "),a},_parseTransformText:function(a){a=a||"";var b={};return a.replace(/([\w\-]+)\(([^\)]*)\)/g,function(a,c,d){var e=d.split(/\s*,\s*/);switch(c){case"translate3d":case"scale3d":case"skew3d":c=c.replace(/3d$/,""),b[c+"Z"]=e[2];case"translate":case"scale":case"skew":b[c+"X"]=e[0],"undefined"==typeof e[1]?"scale"===c&&(b[c+"Y"]=e[0]):b[c+"Y"]=e[1];break;default:b[c]=e.join(",")}}),b},_getTransformFunction:function(a,b,c,d){var e,f,g;if(/matrix/.test(a+b))return f=this._getMatrixObj(a,d),g=this._getMatrixObj(b,d),f.key!==g.key&&(f=this._convertMatrix3d(f),g=this._convertMatrix3d(g)),c=c(f.val,g.val),function(a){return 1===a?b:f.key+"("+c(a).replace(/ /g,",")+")"};f=this._parseTransformText(a),g=this._parseTransformText(b);var h={};for(e in f)f.hasOwnProperty(e)&&(h[e]=c(f[e],g[e]||(/^scale/.test(e)?1:0)));for(e in g)!g.hasOwnProperty(e)||e in f||(h[e]=c(f[e]||(/^scale/.test(e)?1:0),g[e]));var i=function(a){var b=[];for(var c in h)h.hasOwnProperty(c)&&b.push(c+"("+h[c](a)+")");return b.join(" ")};return i}}).extend(jindo.m.Component),jindo.m.CorePagination=jindo.$Class({_nCurrentPage:1,$init:function(a){this.option({nItem:10,nItemPerPage:10,nPage:1,bActivateOnload:!0}),this.option(a||{}),this._nCurrentPage=this.option("nPage")},getItemCount:function(){return this.option("nItem")},getItemPerPage:function(){return this.option("nItemPerPage")},getCurrentPage:function(){return this._nCurrentPage},setItemCount:function(a){this.option("nItem",a)},setItemPerPage:function(a){this.option("nItemPerPage",a)},movePageTo:function(a){var b=(this._nCurrentPage,this._convertToAvailPage(a));b!=this._nCurrentPage&&(this._nCurrentPage=b)},nextPageTo:function(){var a=this._nCurrentPage+1;this.movePageTo(a)},previousPageTo:function(){var a=this._nCurrentPage-1;this.movePageTo(a)},hasNextPage:function(){var a=this.getCurrentPage(),b=this.getTotalPages();return a&&b>a},hasPreviousPage:function(){return this.getCurrentPage()>1},getTotalPages:function(){var a=this.option("nItem"),b=this.option("nItemPerPage");return b?Math.ceil(a/b):null},getPageItemIndex:function(a){a=this._convertToAvailPage(a);var b,c,d=this.option("nItem"),e=this.option("nItemPerPage");return a&&e?(b=(a-1)*e,c=Math.min(b+e,d)-1,{nStart:b,nEnd:c}):null},getPageOfItem:function(a){return Math.ceil(a/this.getItemPerPage())},_convertToAvailPage:function(a){var b=this.getTotalPages();return a=Math.max(a,1),a=Math.min(a,b)}}).extend(jindo.m.UIComponent),jindo.m.Touch=jindo.$Class({$init:function(a,b){this._el=jindo.$Element(a).$value();var c={nMomentumDuration:350,nMoveThreshold:7,nSlopeThreshold:25,nLongTapDuration:1e3,nDoubleTapDuration:400,nTapThreshold:6,nPinchThreshold:.1,nRotateThreshold:5,bActivateOnload:!0,bUseAutoDirection:!1,nUseDiagonal:0,bVertical:!0,bHorizental:!1};this.option(c),this.option(b||{}),this.option("nUseDiagonal")>0&&this.option({bVertical:!0,bHorizental:!0}),this._initVariable(),this._initTouchEventName(),this._initPreventSystemEvent(),this._setSlope(),this.option("bActivateOnload")&&this.activate()},$static:{MOVETYPE:{0:"hScroll",1:"vScroll",2:"dScroll",3:"tap",4:"longTap",5:"doubleTap",6:"pinch",7:"rotate",8:"pinch-rotate"}},_initTouchEventName:function(){"ontouchstart"in window?(this._htEventName.start="touchstart",this._htEventName.move="touchmove",this._htEventName.end="touchend",this._htEventName.cancel="touchcancel",this._hasTouchEvent=!0):window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0&&(this._htEventName.start="MSPointerDown",this._htEventName.move="MSPointerMove",this._htEventName.end="MSPointerUp",this._htEventName.cancel="MSPointerCancel",this._hasTouchEvent=!1)},_initPreventSystemEvent:function(){if(this._el.style&&"undefined"!=typeof this._el.style.msTouchAction){var a="none";this.option("bHorizental")&&!this.option("bVertical")&&(a="pan-x"),this.option("bVertical")&&!this.option("bHorizental")&&(a="pan-y"),this._el.style.msTouchAction=a}},_preventSystemEvent:function(){var a=this.nMoveType;switch(a){case 0:this.option("bHorizental")||this.option("bUseAutoDirection");break;case 1:this.option("bVertical")||this.option("bUseAutoDirection");break;case 2:this.option("bUseAutoDirection")||this.option("bVertical")||this.option("bHorizental")}return!0},_initVariable:function(){this._htEventName={start:"mousedown",move:"mousemove",end:"mouseup",cancel:null},this._hasTouchEvent=!1,this._radianToDegree=180/Math.PI,this._htMoveInfo={nStartX:0,nStartY:0,nBeforeX:0,nBeforeY:0,nStartTime:0,nBeforeTime:0,nStartDistance:0,nBeforeDistance:0,nStartAngle:0,nLastAngle:0,nBeforeScale:0,aPos:[]},this.htEndInfo={nX:0,nY:0},this.nStart=0,this.bMove=!1,this.nMoveType=-1,this._nStartMoveType=-1,this._nVSlope=0,this._nHSlope=0,this.bSetSlope=!1},_attachEvents:function(){this._htEvent={};this._hasTouchEvent;this._htEvent[this._htEventName.start]={fn:jindo.$Fn(this._onStart,this).bind(),el:this._el},this._htEvent[this._htEventName.move]={fn:jindo.$Fn(this._onMove,this).bind(),el:this._el},this._htEvent[this._htEventName.end]={fn:jindo.$Fn(this._onEnd,this).bind(),el:this._el},this._htEvent.rotate=jindo.$Fn(this._onResize,this).bind(),jindo.m.bindRotate(this._htEvent.rotate),this._htEventName.cancel&&(this._htEvent[this._htEventName.cancel]={fn:jindo.$Fn(this._onCancel,this).bind(),el:this._el});for(var a in this._htEvent)this._htEvent[a].fn&&(this._htEvent[a].ref=this._attachFakeJindo(this._htEvent[a].el,this._htEvent[a].fn,a))},_attachFakeJindo:function(a,b,c){var d=(jindo.$Jindo.VERSION||jindo.$Jindo().version||jindo.VERSION).replace(/[a-z.]/gi,""),e=null;return e=230>d&&"undefined"!=typeof _notSupport?_notSupport.$Fn(b).attach(a,c):jindo.$Fn(b).attach(a,c)},_detachEvents:function(){for(var a in this._htEvent){var b=this._htEvent[a];b.ref&&b.ref.detach(b.el,a)}jindo.m.unbindRotate(this._htEvent.rotate),this._htEvent=null},_onCancel:function(a){this._onEnd(a)},_onStart:function(a){var b=this._getTouchInfo(a);if(this.nStart=b.length,!(b.length>1)){this.bMove&&this._resetTouchInfo();var c={element:b[0].el,nX:b[0].nX,nY:b[0].nY,oEvent:a};this._fireCustomEvent("touchStart",c)&&(this._updateTouchInfo(b,"start"),this._startLongTapTimer(b,a))}},_onMove:function(a){if(!(this.nStart<=0)){this.bMove=!0;var b=this._getTouchInfo(a);if(1===b.length){if(this.nMoveType<0||3==this.nMoveType||4==this.nMoveType){var c=this._getMoveType(b);(4!=this.nMoveType||3!=c)&&(2!=this.option("nUseDiagonal")||0!=c&&1!=c?this.nMoveType=this._nStartMoveType=c:(this._nStartMoveType=c,this.nMoveType=2))}}else 8!==this.nMoveType&&(this.nMoveType=this._nStartMoveType=this._getMoveType(b));var d=this._getCustomEventParam(b,!1,a);3!=this.nMoveType&&this._deleteLongTapTimer();var e=0;if(e=Math.abs(0==this.nMoveType?d.nDistanceX:1==this.nMoveType?d.nDistanceY:Math.sqrt(Math.pow(d.nDistanceX,2)+Math.pow(d.nDistanceY,2))),!(e<this.option("nMoveThreshold")||e<this.option("nSlopeThreshold"))||!(this.nMoveType<0||this.nMoveType>2)){this._updateTouchInfo(b,"move"),d.sMoveTypeAgree=!1;var f=d.sMoveType,g=(Math.abs(d.nVectorX),this.option("bHorizental")&&f==jindo.m.Touch.MOVETYPE[0]),h=this.option("bVertical")&&f==jindo.m.Touch.MOVETYPE[1],i=1==this.option("nUseDiagonal")&&f==jindo.m.Touch.MOVETYPE[2],j=2==this.option("nUseDiagonal");return(g||h||i||j)&&(d.sMoveTypeAgree=!0),this.fireEvent("touchMove",d)?void 0:void(this.nStart=0)}}},_onEnd:function(a){var b=this._getTouchInfo(a);if(this.nStart-=b.length,!(this.nStart>0)){var c=this;this._deleteLongTapTimer(),this.bMove||4==this.nMoveType||(this.nMoveType=3),this._isDblTap(b[0].nX,b[0].nY,b[0].nTime)&&(clearTimeout(this._nTapTimer),this._nTapTimer=-1,this.nMoveType=5),this._updateTouchInfo(b,"end");var d=this._getCustomEventParam(b,!0,a),e=d.sMoveType;"undefined"!=typeof this._htEventHandler[jindo.m.Touch.MOVETYPE[5]]&&this._htEventHandler[jindo.m.Touch.MOVETYPE[5]].length>0&&3==this.nMoveType?this._nTapTimer=setTimeout(function(){c._fireCustomEvent(e,d),c.fireEvent("touchEnd",d),delete c._nTapTimer},this.option("nDoubleTapDuration")):(this.fireEvent("touchEnd",d),4!=this.nMoveType&&(8===this.nMoveType?(d.sMoveType=jindo.m.Touch.MOVETYPE[6],this._fireCustomEvent(jindo.m.Touch.MOVETYPE[6],d),d.sMoveType=jindo.m.Touch.MOVETYPE[7],this._fireCustomEvent(jindo.m.Touch.MOVETYPE[7],d)):setTimeout(function(){c._fireCustomEvent(e,d)},0))),this._updateTouchEndInfo(b),this._resetTouchInfo()}},_fireCustomEvent:function(a,b){return this.fireEvent(a,b)},_getCustomEventParam:function(a,b,c){var d=this._htMoveInfo.aPos[this._htMoveInfo.aPos.length>0&&!b?this._htMoveInfo.aPos.length-1:0],e=jindo.m.Touch.MOVETYPE[this.nMoveType],f=jindo.m.Touch.MOVETYPE[this._nStartMoveType],g=a[0].nTime-this._htMoveInfo.nStartTime,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=1===this.nMoveType?0:a[0].nX-this._htMoveInfo.nStartX,q=0===this.nMoveType?0:a[0].nY-this._htMoveInfo.nStartY,r=1===this.nMoveType?0:a[0].nX-d.nX,s=0===this.nMoveType?0:a[0].nY-d.nY,t=a[0].nTime-d.nTime,u={element:a[0].el,nX:a[0].nX,nY:a[0].nY,nVectorX:a[0].nX-this._htMoveInfo.nBeforeX,nVectorY:a[0].nY-this._htMoveInfo.nBeforeY,nDistanceX:p,nDistanceY:q,sMoveType:e,sStartMoveType:f,nStartX:this._htMoveInfo.nStartX,nStartY:this._htMoveInfo.nStartY,nStartTimeStamp:this._htMoveInfo.nStartTime,htMomentum:{nDistanceX:r,nDistanceY:s,nDuration:t},oEvent:c||{}};if((a.length>1||this.nMoveType>=6)&&(u.nScale=this._getScale(a),u.nRotation=this._getRotation(a),null===u.nScale&&(u.nScale=this._htMoveInfo.nBeforeScale),null===u.nRotation&&(u.nRotation=this._htMoveInfo.nBeforeRotation)),a.length>=1){u.aX=[],u.aY=[],u.aElement=[];for(var v=0,w=a.length;w>v;v++)u.aX.push(a[v].nX),u.aY.push(a[v].nY),u.aElement.push(a[v].el)}return b&&((0==this.nMoveType||1==this.nMoveType||2==this.nMoveType)&&(g<=this.option("nMomentumDuration"),g<=this.option("nMomentumDuration")&&(j=Math.abs(p)/g,h=j*j/2,k=Math.abs(q)/g,i=k*k/2),t<=this.option("nMomentumDuration")&&(n=Math.abs(r)/t,l=n*n/2,o=Math.abs(s)/t,m=o*o/2)),u.nMomentumX=h,u.nMomentumY=i,u.nSpeedX=j,u.nSpeedY=k,u.nDuration=g,u.htMomentum.nMomentumX=l,u.htMomentum.nMomentumY=m,u.htMomentum.nSpeedX=n,u.htMomentum.nSpeedY=o),u},_updateTouchEndInfo:function(a){this.htEndInfo={element:a[0].el,time:a[0].nTime,movetype:this.nMoveType,nX:a[0].nX,nY:a[0].nY}},_deleteLongTapTimer:function(){"undefined"!=typeof this._nLongTapTimer&&(clearTimeout(this._nLongTapTimer),delete this._nLongTapTimer)},_startLongTapTimer:function(a,b){var c=this;"undefined"!=typeof this._htEventHandler[jindo.m.Touch.MOVETYPE[4]]&&this._htEventHandler[jindo.m.Touch.MOVETYPE[4]].length>0&&(c._nLongTapTimer=setTimeout(function(){c.fireEvent("longTap",{element:a[0].el,oEvent:b,nX:a[0].nX,nY:a[0].nY}),c.nMoveType=4},c.option("nLongTapDuration")))},_onResize:function(){this._setSlope()},_isDblTap:function(a,b){if("undefined"!=typeof this._nTapTimer&&3==this.nMoveType){var c=this.option("nTapThreshold");if(Math.abs(this.htEndInfo.nX-a)<=c&&Math.abs(this.htEndInfo.nY-b)<=c)return!0}return!1},_setSlope:function(){this.bSetSlope||(this._nHSlope=1*(window.innerHeight/2/window.innerWidth).toFixed(2),this._nVSlope=1*(window.innerHeight/(window.innerWidth/2)).toFixed(2))},setSlope:function(a,b){this._nHSlope=b,this._nVSlope=a,this.bSetSlope=!0},getSlope:function(){return{nVSlope:this._nVSlope,nHSlope:this._nHSlope}},_resetTouchInfo:function(){for(var a in this._htMoveInfo)"aPos"!=a?this._htMoveInfo[a]=0:this._htMoveInfo.aPos.length=0;this._deleteLongTapTimer(),this.nStart=0,this.bMove=!1,this.nMoveType=-1,this._nStartMoveType=-1},_updateTouchInfo:function(a,b){"end"==b?(this.htEndInfo={nX:a[0].nX,nY:a[0].nY},this._htMoveInfo.aPos.length>3&&this._htMoveInfo.aPos.pop()):("start"==b?(this._htMoveInfo.nStartX=a[0].nX,this._htMoveInfo.nStartY=a[0].nY,this._htMoveInfo.nStartTime=a[0].nTime):this._htMoveInfo.nBeforeTime=a[0].nTime,this._htMoveInfo.nBeforeX=a[0].nX,this._htMoveInfo.nBeforeY=a[0].nY,this._htMoveInfo.aPos.push({nX:a[0].nX,nY:a[0].nY,nTime:a[0].nTime}),this._htMoveInfo.aPos.length>5&&this._htMoveInfo.aPos.shift())
},_getMoveTypeBySingle:function(a,b){var c=this.nMoveType,d=Math.abs(this._htMoveInfo.nStartX-a),e=Math.abs(this._htMoveInfo.nStartY-b),f=d+e,g=this.option("nTapThreshold");if(c=g>=d&&g>=e?3:-1,this.option("nSlopeThreshold")<=f){var h=parseFloat((e/d).toFixed(2),10);c=-1===this._nHSlope&&-1===this._nVSlope&&this.option("nUseDiagonal")>0?2:h<=this._nHSlope?0:h>=this._nVSlope?1:(this.option("nUseDiagonal")>1,2)}return c},_getMoveTypeByMulti:function(){var a=-1;return(6===this.nMoveType||Math.abs(1-this._htMoveInfo.nBeforeScale)>=this.option("nPinchThreshold"))&&(a=6),(7===this.nMoveType||Math.abs(0-this._htMoveInfo.nBeforeRotation)>=this.option("nRotateThreshold"))&&(a=6===a?8:7),-1===a?this.nMoveType:a},_getScale:function(a){var b=-1,c=this._getDistance(a);return 0>=c?null:(0===this._htMoveInfo.nStartDistance?(b=1,this._htMoveInfo.nStartDistance=c):b=c/this._htMoveInfo.nStartDistance,this._htMoveInfo.nBeforeScale=b,b)},_getRotation:function(a){var b=-1,c=this._getAngle(a);return null===c?null:(0===this._htMoveInfo.nStartAngle?(this._htMoveInfo.nStartAngle=c,b=0):b=c-this._htMoveInfo.nStartAngle,this._htMoveInfo.nLastAngle=c,this._htMoveInfo.nBeforeRotation=b,b)},_getMoveType:function(a){var b=this.nMoveType;return 1===a.length?b=this._getMoveTypeBySingle(a[0].nX,a[0].nY):2===a.length&&(b=this._getMoveTypeByMulti(a)),b},_getDistance:function(a){return 1===a.length?-1:Math.sqrt(Math.pow(Math.abs(a[0].nX-a[1].nX),2)+Math.pow(Math.abs(a[0].nY-a[1].nY),2))},_getAngle:function(a){if(1===a.length)return null;var b=a[0].nX-a[1].nX,c=a[0].nY-a[1].nY,d=Math.atan2(c,b)*this._radianToDegree;if(null!==this._htMoveInfo.nLastAngle){var e=Math.abs(this._htMoveInfo.nLastAngle-d),f=d+360,g=d-360;Math.abs(f-this._htMoveInfo.nLastAngle)<e?d=f:Math.abs(g-this._htMoveInfo.nLastAngle)<e&&(d=g)}return d},_getTouchInfo:function(a){var b=[],c=a.$value().timeStamp,d=null;if(this._hasTouchEvent){d=a.$value().touches,d=d.length>1?d:a.$value().changedTouches;for(var e=0,f=d.length;f>e;e++)b.push({el:jindo.m.getNodeElement(d[e].target),nX:d[e].pageX,nY:d[e].pageY,nTime:c})}else b.push({el:a.element,nX:a.pos().pageX,nY:a.pos().pageY,nTime:c});return b},getBaseElement:function(){return this._el},_onDeactivate:function(){this._detachEvents()},_onActivate:function(){this._attachEvents()},destroy:function(){var a;this.deactivate(),this._el=null;for(a in this._htMoveInfo)this._htMoveInfo[a]=null;this._htMoveInfo=null;for(a in this.htEndInfo)this.htEndInfo[a]=null;this.htEndInfo=null,this.nStart=0,this.bMove=null,this.nMoveType=null,this._nStartMoveType=null,this._nVSlope=null,this._nHSlope=null,this.bSetSlope=null}}).extend(jindo.m.UIComponent),jindo.m.CoreTab=jindo.$Class({$init:function(a,b){this.option({sClassPrefix:"tc-",nDefaultIndex:0,nPanelDuration:0,nHeight:0,nWidth:0,bActivateOnload:!0}),this.option(b||{}),this._initVar(),this._setWrapperElement(a)},_initVar:function(){this._sPrefix=this.option("sClassPrefix"),this._nCurrentIndex=-1,this._aTab=[],this._aPanel=[],this._oPanelEffect=null},_setWrapperElement:function(a){this._htWElement={},a="string"==typeof a?jindo.$(a):a,a&&(this._htWElement.baseElement=jindo.$Element(a),this._htWElement.tab_container=jindo.$Element(this._htWElement.baseElement.query("."+this._sPrefix+"tab-cont")),this._htWElement.panel_container=jindo.$Element(this._htWElement.baseElement.query("."+this._sPrefix+"panel-cont")),this._htWElement.tab_container&&this._htWElement.tab_container.css("-"+jindo.m.getCssPrefix()+"-tap-highlight-color","transparent"))},_initData:function(){var a,b,c,d,e=this.option("nPanelDuration");for(this._aTab=this._htWElement.tab_container.queryAll("."+this._sPrefix+"tab"),this._aPanel=this._htWElement.panel_container.queryAll("."+this._sPrefix+"panel"),c=0,d=this._aTab.length;d>c;c++)this._aTab[c]=jindo.$Element(this._aTab[c]),this._aPanel[c]=jindo.$Element(this._aPanel[c]);for(e&&(a=(0==this.option("nWidth")?this._htWElement.panel_container.width()-parseInt(this._aPanel[0].css("paddingLeft"),10)-parseInt(this._aPanel[0].css("paddingRight"),10):this.option("nWidth"))+"px",b=this.option("nHeight")+"px"),c=0,d=this._aTab.length;d>c;c++)this._aTab[c]=this._aTab[c].attr("data-index",c),e&&this._aPanel[c].css({width:a,height:b,position:"absolute"});e&&(this._oPanelEffect=new jindo.m.LayerEffect(this._aPanel[0].$value()),this._htWElement.panel_container.css({position:"relative",overflow:"hidde",height:b}))},_getIdx:function(a){return parseInt(a.attr("data-index"),10)},_getTabElement:function(a){var b=this._sPrefix+"tab",c=this._sPrefix+"more-tab";return a.hasClass(b)||a.hasClass(c)?a:!this._htWElement.tab_container.isParentOf(a)||a.hasClass(b)&&a.hasClass(c)?a:a.parent(function(a){return a.hasClass(b)||a.hasClass(c)},2)[0]},_onActivate:function(){this._attachEvent()},_onDeactivate:function(){this._detachEvent()},_attachEvent:function(){this._htEvent={},this._htEvent.tab_click={el:this._htWElement.tab_container,ref:jindo.$Fn(this._onSelect,this).attach(this._htWElement.tab_container,"click")}},_detachEvent:function(){for(var a in this._htEvent){var b=this._htEvent[a];b.ref.detach(b.el,a.substring(a.lastIndexOf("_")+1))}this._htEvent=null,this._oPanelEffect&&this._oPanelEffect.detachAll()},getCurrentIndex:function(){return this._nCurrentIndex},getTab:function(a){return null!==a&&this._aTab.length>a?this._aTab[a]:this._aTab},getPanel:function(a){return null!==a&&this._aPanel.length>a?this._aPanel[a]:this._aPanel},_onSelect:function(a){if(a.element){if(this._oPanelEffect&&this._oPanelEffect.isPlaying())return a.stop(jindo.$Event.CANCEL_ALL),!1;var b=this._getTabElement(jindo.$Element(a.element));this._onAfterSelect(b)}},select:function(a){if(null!==a&&a>=0&&this._aTab.length>a&&this._nCurrentIndex!=a&&this._fireEventBefore("beforeSelect")){var b=this._sPrefix+"selected";this._beforeSelect(a),this._aTab[a].addClass(b),this._aPanel[a].addClass(b),this._aPanel[a].show(),this._nCurrentIndex>-1&&(this._aTab[this._nCurrentIndex].removeClass(b),this._oPanelEffect?this._slide(this._nCurrentIndex,a):(this._aPanel[this._nCurrentIndex].removeClass(b),this._aPanel[this._nCurrentIndex].hide())),this._nCurrentIndex=a,this._fireEvent("select")}},_slide:function(a,b){var c=this,d=b>a,e=this._aPanel[b].width();this._fireEventBefore("beforeSlide")&&(this._oPanelEffect.setLayer(this._aPanel[b].$value()),this._oPanelEffect.attach("afterEffect",function(){c._onPannelAfterEffct(a,b)}),this._aPanel[b].css({left:d?e:-e,zIndex:9}),this._oPanelEffect.slide({sDirection:d?"left":"right",nDuration:this.option("nPanelDuration"),nSize:e}))},_onPannelAfterEffct:function(a,b){this._aPanel[a].removeClass(this._sPrefix+"selected"),this._aPanel[a].hide(),this._aPanel[a].css("zIndex",1),this._aPanel[b].css("zIndex",2),this._oPanelEffect.detachAll("afterEffect"),this._fireEvent("slide")},_fireEventBefore:function(a){return this.fireEvent(a,{nIndex:this._nCurrentIndex,elTab:this._aTab[this._nCurrentIndex],elPanel:this._aPanel[this._nCurrentIndex]})},_fireEvent:function(a){this.fireEvent(a,{nIndex:this._nCurrentIndex,elTab:this._aTab[this._nCurrentIndex],elPanel:this._aPanel[this._nCurrentIndex]})},destroy:function(){for(var a in this._htWElement)this._htWElement[a]=null;this._htWElement=null;for(a in this._aTab)this._aTab[a]=null;this._aTab=null;for(a in this._aPanel)this._aPanel[a]=null;this._aPanel=null,this._oPanelEffect&&(this._oPanelEffect.destroy(),this._oPanelEffect=null)}}).extend(jindo.m.UIComponent),jindo.m.Animation=jindo.$Class({$init:function(a){this.option({bUseH:!0,bHasOffsetBug:!1,fEffect:jindo.m.Effect.cubicEaseOut,bUseCss3d:jindo.m.useCss3d(),bUseTimingFunction:jindo.m.useTimingFunction()}),this.option(a||{}),this._initVar()},_initVar:function(){this.sCssPrefix=jindo.m.getCssPrefix(),this._htTans=this.option("bUseCss3d")?{open:"3d(",end:",0)"}:{open:"(",end:")"},this._oMorph=new jindo.m.Morph({fEffect:this.option("fEffect"),bUseTransition:this.option("bUseTimingFunction")}).attach({end:jindo.$Fn(function(a){this._oMorph.clear(),this.fireEvent("end",a)},this).bind()}),this._welTarget=null},setStyle:function(){},move:function(){},getTarget:function(a){return a?this._welTarget:this._welTarget.$value()},p:function(a){return jindo.m._toPrefixStr(a)},getTranslate:function(a,b){return"translate"+this._htTans.open+a+","+b+this._htTans.end},toCss:function(a){var b,c,d,e={};for(b in a)c=b,/^@/.test(b)&&(b.match(/^(@\w)/),d=RegExp.$1,/transition|transform/.test(c)?(c=""==this.sCssPrefix?b.replace(d,d.toLowerCase()):b.replace(d,d.toUpperCase()),c=c.replace("@",this.sCssPrefix)):c=c.replace("@","")),e[c]=a[b];return e},isPlaying:function(){return this._oMorph.isPlaying()},stop:function(a){"undefined"==typeof a&&(a=0),this._oMorph.pause(a).clear()},destroy:function(){this._oMorph.detachAll("end")}}).extend(jindo.m.UIComponent),jindo.m.Cover=jindo.$Class({$init:function(a){this.option({nDefaultScale:.94}),this.option(a||{}),this._welZoom=null},setStyle:function(a){var b={position:"absolute",width:"100%",height:"100%",left:"0px",top:"0px",zIndex:1,opacity:.2,display:"none"},c={};c[this.p("TransitionProperty")]=""==this.sCssPrefix?"tranform":"-"+this.sCssPrefix+"-transform",c[this.p("Transform")]=this.getTranslate(0,0),b=jindo.$Jindo.mixin(b,c),jindo.$A(a[0]).forEach(function(a){a.css(b)}),this.fireEvent("set",{css:c})},move:function(a,b,c,d){this.option("bUseH")?a=this._getPos(a,d):b=this._getPos(b,d);var e=this.getTarget(!0),f={"@transitionProperty":""==this.sCssPrefix?"tranform":"-"+this.sCssPrefix+"-transform","@transform":this.getTranslate(a+"px",b+"px")};if(c){var g=[e,f];this._welZoom&&(g.push(this._welZoom),g.push(this.getZoomCss(this.option("bUseH")?a:b,d))),this._oMorph.pushAnimate(c,g)}else e.css(this.toCss(f)),this._welZoom&&this._welZoom.css(this.toCss(this.getZoomCss(this.option("bUseH")?a:b,d)));return this._oMorph},getZoomCss:function(a,b){var c=b.range,d=b.next?(c-a)/c-1:1-(c-a)/c,e=this.option("nDefaultScale"),f={};e+=d*(1-e);var g=" scale"+this._htTans.open+e+", "+e+(this.option("bUseCss3d")?", 0.1)":this._htTans.end);return f["@opacity"]=d,f["@transitionProperty"]=""==this.sCssPrefix?"tranform":"-"+this.sCssPrefix+"-transform",f["@transform"]=this.getTranslate(0,0)+g,f},change:function(a,b,c){var d={zIndex:1,opacity:.2,display:"block"};d[this.p("TransitionProperty")]=""==this.sCssPrefix?"tranform":"-"+this.sCssPrefix+"-transform",this._changeZoom(b,d,c),this._changeTarget(a,d)},_changeTarget:function(a,b){this._welTarget&&this._welTarget.isEqual(a)||(this._welTarget&&this._welTarget.hide(),b.zIndex=10,b.opacity=1,b[this.p("Transform")]=this.getTranslate(0,0),this._welTarget=a.css(b))},_changeZoom:function(a,b){this._welZoom&&this._welZoom.isEqual(a)||(this._welZoom&&this._welZoom.hide(),a?(b.zIndex=1,b.opacity=.2,b[this.p("Transform")]=this.getTranslate(0,0)+" scale"+this._htTans.open+this.option("nDefaultScale")+","+this.option("nDefaultScale")+this._htTans.end,this._welZoom=a.css(b)):this._welZoom=null)},_getPos:function(a,b){var c=a,d=b.range,e=b.next;return b.restore?c=0:(c%=d,0===c?c+=e?-d:d:0>a&&(c+=e?0:d)),c}}).extend(jindo.m.Animation),jindo.m.Cube=jindo.$Class({$init:function(a){a=a||{},this.option(a.htOption||{})},_initVar:function(a){jindo.m.Animation.prototype._initVar.call(this,a),this._sRotate=this.option("bUseH")?"Y":"X"},setStyle:function(a){var b={};return b[this.p("TransitionProperty")]=""==this.sCssPrefix?"tranform":"-"+this.sCssPrefix+"-transform",b[this.p("Transform")]="translateZ(-"+a[1]+"px) rotate"+this._sRotate+"(0deg)",this.option("bUseH")&&(b.clear="both"),b.position="relative",b[this.p("TransformStyle")]="preserve-3d",this._welTarget=a[0].container.css(b),a[0].view.css(this.p("Perspective"),4*a[1]+"px"),this.fireEvent("set",{css:b}),b},move:function(a,b,c,d){d||(d={});var e=this.option("bUseH")?a:-b;e=45*e/d.nHalpSize;var f=this.getTarget(!0),g={"@transitionProperty":""==this.sCssPrefix?"tranform":"-"+this.sCssPrefix+"-transform","@transform":"translateZ(-"+d.nHalpSize+"px) rotate"+this._sRotate+"("+e+"deg)"};return c?this._oMorph.pushAnimate(c,[f,g]):f.css(this.toCss(g)),this._oMorph}}).extend(jindo.m.Animation),jindo.m.Flick=jindo.$Class({$init:function(){this.option({bHorizontal:!0,sClassPrefix:"flick-",sContentClass:"ct",bUseCircular:!1,nTotalContents:3,nFlickThreshold:40,nDuration:100,nBounceDuration:100,fpPanelEffect:jindo.m.Effect.cubicEaseIn,nDefaultIndex:0,bFitContentSize:!0,nDeceleration:.001,bUseMomentum:!1})},_initVar:function(){jindo.m.SwipeCommon.prototype._initVar.apply(this),this._bUseH=this.option("bHorizontal"),this._bUseV=!this._bUseH,this._bUseCircular=this.option("bUseCircular"),this._nContentIndex=0,this._welElement=null,this._aPos=[],this._nRange=null,this._nDefaultPanel=3,this._hasKitkatHighlightBug=jindo.m._hasKitkatHighlightBug(),this._nKitkatHighlightBug=-1},_setWrapperElement:function(a){jindo.m.SwipeCommon.prototype._setWrapperElement.call(this,a);var b=this.option("bHorizontal")?"height":"width";this._htWElement.aPanel=this._htWElement.container.queryAll("."+this.option("sClassPrefix")+this.option("sContentClass"));var c=jindo.$A(this._htWElement.aPanel);this._bUseCircular||(c=c.filter(function(a){return jindo.$Element(a).visible()})),this._htWElement.container.css({position:"relative"}).css(b,"100%"),this._htWElement.aPanel=c.forEach(function(a,c,d){d[c]=jindo.$Element(a).css(b,"100%")}).$value()},_checkIndex:function(a){var b=!0,c=this.getTotalContents()-1;return(isNaN(1*a)||0>a)&&(b=!1),a>c&&(b=!1),b},_refreshPanelInfo:function(){var a=0;this._aPos=[0];for(var b=0,c=this._bUseH?"width":"height",d=this.getTotalContents();d>b;b++)a-=null!=this._nRange?this._nRange:this._htWElement.aPanel[b][c](),this._aPos.push(a)},_onActivate:function(){jindo.m.SwipeCommon.prototype._onActivate.apply(this)},_onDeactivate:function(){jindo.m.SwipeCommon.prototype._onDeactivate.apply(this)},set:function(){if(!this._oAnimation){jindo.m.SwipeCommon.prototype.set.apply(this,Array.prototype.slice.apply(arguments)),this._bUseCircular?this.option("nTotalContents",parseInt(this.option("nTotalContents"),10)):this.option("nTotalContents",this._htWElement.aPanel.length);var a=this.option("nDefaultIndex");this._checkIndex(a)||(a=0),this.resize(),this.refresh(a)}return this._oAnimation},refresh:function(a,b,c){jindo.m.SwipeCommon.prototype.refresh.call(this),a="undefined"==typeof a?this.getContentIndex():a,this._hasKitkatHighlightBug&&this._htWElement.container.addClass(jindo.m.KITKAT_HIGHLIGHT_CLASS),this._moveTo(a,{duration:0,fireEvent:b,fireMoveEvent:c,corrupt:!0})},resize:function(){jindo.m.SwipeCommon.prototype.resize.call(this),this.option("bFitContentSize")||this._bUseCircular?(this._nRange=this._bUseH?this._htSize.viewWidth:this._htSize.viewHeight,0==this._nRange&&(this._nRange=this._htWElement.view[this._bUseH?"width":"height"]())):this._nRange=null,this._refreshPanelInfo(),null!=this._nRange&&(this._bUseH?(this._htSize.maxX=(this.option("nTotalContents")-1)*-this._nRange,this._nX=this._aPos[this.getContentIndex()]):(this._htSize.maxY=(this.option("nTotalContents")-1)*-this._nRange,this._nY=this._aPos[this.getContentIndex()]))},getElement:function(){var a=this.getContentIndex();return this._bUseCircular?this._welElement?this._welElement:(a%=this._nDefaultPanel,this._htWElement.aPanel[a]):this._htWElement.aPanel[a]},getNextElement:function(){var a;return this._bUseCircular?(a=this._getIndexByElement(this.getElement()),a=((a+1)%this._nDefaultPanel>this._nDefaultPanel-1?0:a+1)%this._nDefaultPanel):a=this.getNextIndex(),this._htWElement.aPanel[a]},getPrevElement:function(){var a;return this._bUseCircular?(a=this._getIndexByElement(this.getElement()),a=0>a-1?this._nDefaultPanel-1:a-1):a=this.getPrevIndex(),this._htWElement.aPanel[a]},_getIndexByElement:function(a){var b=-1;return jindo.$A(this._htWElement.aPanel).forEach(function(c,d){c.isEqual(a)&&(b=d)}),b},getContentIndex:function(){return parseInt(this._nContentIndex,10)},getNextIndex:function(){var a=this.getContentIndex()+1,b=this.getTotalContents()-1;return this._bUseCircular&&a>b&&(a=0),Math.min(b,a)},getPrevIndex:function(){var a=this.getContentIndex()-1;return this._bUseCircular&&0>a&&(a=this.getTotalContents()-1),Math.max(0,a)},getTotalContents:function(){return this._bUseCircular?this.option("nTotalContents"):this._htWElement.aPanel.length},setTotalContents:function(a){isNaN(a)||1>a||(a=parseInt(a,10),this.getContentIndex()+1>a&&this._moveTo(a-1,{duration:0,fireEvent:!0,fireMoveEvent:!0}),this.option("nTotalContents",a),this.resize())},getTotalPanels:function(){return this._htWElement.aPanel.length},getPanels:function(){return this._htWElement.aPanel},moveTo:function(a,b){return a!=this.getContentIndex()?this._moveTo(a,{duration:b}):void 0},_moveTo:function(a,b){if(!(null==this._nRange&&this._aPos.indexOf(this._bUseH?this._htSize.maxX:this._htSize.maxY)<a)){var c={duration:"undefined"==typeof b.duration?this.option("nDuration"):b.duration,fireEvent:"undefined"==typeof b.fireEvent?!0:b.fireEvent,fireMoveEvent:"undefined"==typeof b.fireMoveEvent?!1:b.fireMoveEvent,corrupt:"undefined"==typeof b.corrupt?!1:b.corrupt,direct:"undefined"==typeof b.direct?!1:b.direct};if(!(this.isPlaying()||isNaN(a)||0>a||a>=this.getTotalContents())){var d=this._bUseH?this._nX:this._nY,e=this._getPos(a);if(this._bUseCircular){var f=this._posToIndex(d),g=this.getTotalContents();0==f&&a==g-1?this.option("nTotalContents")>=3&&(e=this._nRange):f==g-1&&0==a&&(e=this._getPos(f)-this._nRange)}if(d!=e)this._move(d,e,{duration:c.duration,contentsNextIndex:a,fireEvent:c.fireEvent,fireMoveEvent:c.fireMoveEvent,corrupt:c.corrupt,direct:b.direct});else if(0===c.duration&&c.fireEvent)if(c.fireMoveEvent)this._fireMoveEvent(a)&&this._fireMoveEvent();else{var h={next:null,moveCount:0,corrupt:c.corrupt,contentsNextIndex:a};this._fireFlickingEvent("beforeFlicking",h)&&(this._fireFlickingEvent("flicking",h),this._fireFlickingEvent("afterFlicking",h))}}}},moveNext:function(a){var b={duration:a,direct:!1};if(this._bUseCircular&&this.option("nTotalContents")<3){var c=this.getContentIndex();this._bUseH?this._nX=0==c?1:this._nX-1:this._nY=0==c?1:this._nY-1,b.direct=!0}this._moveTo(this.getNextIndex(),b)},movePrev:function(a){var b={duration:a,direct:!1};if(this._bUseCircular&&this.option("nTotalContents")<3){var c=this.getContentIndex();b.direct=!0,this._bUseH?this._nX=0==c?this._aPos[this.getTotalContents()-1]-1:this._nX+1:this._nY=0==c?this._aPos[this.getTotalContents()-1]-1:this._nY+1,this._moveTo(this.getNextIndex(),b)}else this._moveTo(this.getPrevIndex(),b)},_startImpl:function(){this.isPlaying()||(this._nPosToIndex=this._posToIndex(this._bUseH?this._nX:this._nY))},_moveImpl:function(a){var b=this._bUseH?a.nVectorX:a.nVectorY,c=this._bUseH?a.nDistanceX:a.nDistanceY,d=0>c,e=this._bUseH?this._nX:this._nY,f=d?this.getNextIndex():this.getPrevIndex();return e+=this._bUseCircular?b:f==this.getContentIndex()?b/2:b,this._nX=this._bUseH?e:0,this._nY=this._bUseV?e:0,a.bNext=d,this._moveAfterCall&&this._moveAfterCall(a),d},_endImpl:function(a){var b=null,c=(this._bUseH?a.nDistanceX:a.nDistanceY)<0,d=this.getContentIndex(),e=c?this.getNextIndex():this.getPrevIndex(),f=this._getPos(d),g=Math.abs((this._bUseH?this._nX:this._nY)-f),h=d===e||g<parseInt(this.option("nFlickThreshold"),10)||this._aPos.indexOf(this._bUseH?this._htSize.maxX:this._htSize.maxY)<e;if(0!=g)if(h)this._restore();else if(b=this._getMomentumData(a,1.5),0===b.duration||c&&d===this.getTotalContents()-1||!c&&0===d){var i=this._bUseH?this._nX:this._nY;(c&&i<this._aPos[e]||!c&&i>this._aPos[e])&&(this._bUseCircular&&this.option("nTotalContents")<3?0!=d||1!=e||c||(this._bUseH?this._nX=this._aPos[this.getTotalContents()-1]-1:this._nY=this._aPos[this.getTotalContents()-1]-1):this._setCurrentPos(d,c)),this._moveTo(null==this._nRange?this._getNextIndexByView(d,c):e,{duration:this.option("nDuration"),direct:!0})}else{var j=this._posToIndex(this._bUseH?b.nextX:b.nextY);j==d?this._restore():(this._bUseCircular?(d+=c?1:-1,this._setCurrentPos(d,c)):this._setCurrentPos(d,c),this._moveTo(j,{duration:b.duration}))}},_getNextIndexByView:function(a,b){return b?this.getNextIndex():this.getPrevIndex()},_setCurrentPos:function(a){this._bUseH?this._nX=this._aPos[a]:this._nY=this._aPos[a]},_resizeImpl:function(){this.resize()},_restore:function(){if(this._bUseH||this._bUseV){var a,b=this._getPos(this.getContentIndex());if(jindo.m.SlideFlicking&&this instanceof jindo.m.SlideFlicking){var c=jindo.m.getTranslateOffset(this._htWElement.container);a=this._bUseH?c.left:c.top}else a=this._bUseH?this._nX:this._nY;b!==a&&this._move(a,b,{duration:this.option("nBounceDuration"),restore:!0})}},_getRevisionNo:function(a){var b=this.getTotalContents();return 0>a?a+=b:a>b-1&&(a%=b),a},_fireCustomBeforeEvent:function(a){if(a.restore){if(!this._fireRestoreEvent("beforeRestore",a))return!1}else if(a.fireMoveEvent){if(0==a.moveIndex&&!this._fireMoveEvent(a.contentsNextIndex))return!1}else if(!this._fireFlickingEvent("beforeFlicking",a))return!1;return!0},_setPanelEndInfo:function(a){a.restore?(this._nX=this._bUseH?this._getPos(a.no):0,this._nY=this._bUseV?this._getPos(a.no):0):(a.no=this._getRevisionNo(a.no),this._updateFlickInfo(a.no,a.next?this.getNextElement():this.getPrevElement()))},_fireCustomEvent:function(a){a.restore?this._fireRestoreEvent("restore",a):a.fireMoveEvent?(0===a.duration||a.moveCount==a.moveIndex+1)&&this._fireMoveEvent():(this._fireFlickingEvent("flicking",a),this._fireFlickingEvent("afterFlicking",a))},_fireFlickingEvent:function(a,b){if("undefined"==typeof this._htEventHandler[a])return!0;var c={nContentsIndex:this.getContentIndex(),bNext:b.next};return/before/.test(a)&&(c.nContentsNextIndex=b.direct||0===b.duration&&b.moveCount>1?b.contentsNextIndex:b.next?this.getNextIndex():this.getPrevIndex()),c.nMoveCount=b.moveCount,c.bCorrupt=b.corrupt,c[this._bUseH?"bLeft":"bTop"]=c.bNext,this.fireEvent(a,c)},_fireRestoreEvent:function(a){return this.fireEvent(a,{nContentsIndex:this.getContentIndex()})},_fireMoveEvent:function(a){return"undefined"==typeof a?this.fireEvent("move",{nContentsIndex:this.getContentIndex()}):this.fireEvent("beforeMove",{nContentsIndex:this.getContentIndex(),nContentsNextIndex:a})},_updateFlickInfo:function(a,b){this._nContentIndex="undefined"==typeof a?this.getContentIndex():a,b="undefined"==typeof b?this.getElement():b,this._nX=this._bUseH?this._getPos(this._nContentIndex):0,this._nY=this._bUseV?this._getPos(this._nContentIndex):0,this._welElement=b},_onEndAniImpl:function(){this._bUseCircular},_makeOption:function(a){var b=jindo.$Jindo.mixin({duration:0,restore:!1,fireEvent:!0,fireMoveEvent:!1,moveCount:1,moveIndex:0,corrupt:!1,useCircular:this._bUseCircular,range:this._nRange},a||{});return b.restore&&(b.moveCount=0),b.moveCount>1&&0===b.duration&&(b.corrupt=!0),b.direct=b.direct||jindo.m.SlideFlicking&&this instanceof jindo.m.SlideFlicking&&"undefined"==typeof this._htEventHandler.beforeFlicking&&"undefined"==typeof this._htEventHandler.flicking&&"undefined"==typeof this._htEventHandler.afterFlicking,b},_moveWithEvent:function(a,b,c){var d=this,e={};return c.no=this._posToIndex(a),e=jindo.$Jindo.mixin(c,{}),!e.fireMoveEvent&&e.moveCount>1&&(e.contentsNextIndex=e.no),d._panelEndBeforeCall&&d._panelEndBeforeCall(e),this._oAnimation._oMorph.pushCall(function(){e.fireEvent&&!d._fireCustomBeforeEvent(e)&&(this.clear(),d._restore())}),this._oAnimation.move(this._bUseH?a:0,this._bUseV?a:0,b,e),this._oAnimation._oMorph.pushCall(function(){d._setPanelEndInfo(e),d._panelEndAfterCall&&d._panelEndAfterCall(e),e.fireEvent&&d._fireCustomEvent(e)}),this._oAnimation._oMorph},_move:function(a,b,c){if(!this._bUseCircular){var d=this._bUseH?this._htSize.maxX:this._htSize.maxY;b=d>b?d:b}if(a!==b){this._clearOffsetBug();var e=a>b,f=this._getStepCount(a,b);if(c=c||{},c.moveCount=f,c.next=e,c=this._makeOption(c),c.restore)return void this._moveWithEvent(b,c.duration,c).play();if(0==c.duration)this._moveWithEvent(b,0,c).play();else{if(c.direct)this._moveWithEvent(b,c.duration,c).play();else for(var g=0,h=a,i=0,j=this.option("fpPanelEffect")(0,c.duration),k=0;f>k;k++)c.moveIndex=k,i=this._getPanelEndPos(h,b,e),g=j((k+1)/f)-j(k/f),this._moveWithEvent(i,g,c),h=i;this._oAnimation._oMorph.play()}}},_getPos:function(a){return 0>a||a>=this._aPos.length?(console.error("wrong index",a),0):this._aPos[a]},_isPosPoint:function(a){return-1!=this._aPos.indexOf(a)},_getStepCount:function(a,b){var c=a>b,d=this._posToIndex(a),e=this._posToIndex(b),f=Math.abs(e-d);return c||this._isPosPoint(a)||!this._isPosPoint(b)||f++,f},_posToIndex:function(a){for(var b,c=0,d=-1,e=this._aPos.length;e>c;c++){if(b=this._aPos[c],!(b>a)){if(a==b){d++;break}break}d++}return d},_getPanelEndPos:function(a,b,c){var d,e=this._posToIndex(a);return!c&&!this._isPosPoint(a)&&e++,e+=c?1:-1,d=this._bUseCircular&&0>e?a+b:this._getPos(e),null==this._nRange&&c&&(d=b>d?b:d),d},_getTranslate:function(a){return this._oAnimation.getTranslate(this._bUseH?a:0,this._bUseV?a:0)},_tapImpl:function(){if(this._hasKitkatHighlightBug){this._htWElement.container.removeClass(jindo.m.KITKAT_HIGHLIGHT_CLASS),this._htWElement.container._element.clientHeight;var a=this;clearTimeout(this._nKitkatHighlightBug),this._nKitkatHighlightBug=setTimeout(function(){a._htWElement.container.addClass(jindo.m.KITKAT_HIGHLIGHT_CLASS)},200)}},destroy:function(){jindo.m.SwipeCommon.prototype.destroy.apply(this)}}).extend(jindo.m.SwipeCommon),jindo.m.RevealCommon=jindo.$Class({$init:function(a){this.option({sClassPrefix:"reveal-",sDirection:"right",nDuration:500,nMargin:100,bActivateOnload:!0,bAutoResize:!0,bFixNaviSize:!1,bUseTimingFunction:jindo.m.useTimingFunction(),bUseOffsetBug:jindo.m.hasOffsetBug()}),this.option(a||{}),this.option("bActivateOnload")&&this.activate()},_initVar:function(a){a&&(this._bShow=!1,this._sCssPrefix=jindo.m.getCssPrefix(),this._htEvent={},this._htInstance={},this._htNavSize={}),this._aEndStatus=[],this._htSize=jindo.$Document().clientSize(),this._htWElement.nav.visible()?this._nNavHeight=this._htWElement.nav.height():(this._htWElement.nav.show(),this._nNavHeight=this._htWElement.nav.height(),this._htWElement.nav.hide()),this._bUseCss3d=jindo.m.useCss3d(),this._getTranslate()},setNavHeight:function(a){this._htNavSize.height=a},_getTranslate:function(){this._sTranslateStart="translate(",this._sTranslateEnd=")",this._bUseCss3d&&(this._sTranslateStart="translate3d(",this._sTranslateEnd=",0px)")},_setWrapperElement:function(){this._htWElement={},this._htWElement.nav=jindo.$Element(jindo.$$.getSingle("."+this.option("sClassPrefix")+"nav")),this._htWElement.header=jindo.$Element(jindo.$$.getSingle("."+this.option("sClassPrefix")+"header")),this._htWElement.content=jindo.$Element(jindo.$$.getSingle("."+this.option("sClassPrefix")+"contents")),this._htWElement.wrap=jindo.$Element(jindo.$$.getSingle("."+this.option("sClassPrefix")+"wrap")),this._htWElement.header||(this._htWElement.header=this._htWElement.nav),this._htWElement.header.indexOf(this._htWElement.nav)>-1&&(this._bNavInHeader=!0)},_attachEvent:function(){this.option("bAutoResize")&&(this._htEvent.rotate=jindo.$Fn(this._onResize,this).bind(),jindo.m.bindRotate(this._htEvent.rotate),jindo.m.bindPageshow(this._htEvent.rotate))},_setInitStyle:function(a){this._htWElement.content.css("position","relative");var b=this._getPosInfo();this._setHeaderStyle(),this._setNavStyle(b,a)},_setHeaderStyle:function(){"down"==this.option("sDirection")&&(this._bNavInHeader?this._htWElement.header.css("top",this._bShow&&this.option("bUseOffsetBug")?0:-this._nNavHeight):this._htWElement.nav.css({position:"absolute",top:this._bShow?0:-this._nNavHeight}))},_setNavStyle:function(a){var b={width:this._getNaviWidth()+"px"};"down"!=this.option("sDirection")&&("left"==this.option("sDirection")?b.left=this._htSize.width:"right"==this.option("sDirection")&&(b.left=a.nMarginLeftPos),this._htWElement.nav.css(b))},_onResize:function(){if(this._initVar(),!this.fireEvent("beforeRotate"))return!1;this._setInitStyle();var a=this._getPosInfo();if(a.nMarginLeftPos&&("left"==this.option("sDirection")||"right"==this.option("sDirection"))&&this._bShow){this.option("bUseOffsetBug")?(this._htWElement.header.css({left:-a.nMarginLeftPos+"px"}),this._htWElement.content.css({left:-a.nMarginLeftPos+"px"}),this._htWElement.nav.css("left","left"==this.option("sDirection")?this.option("bFixNaviSize")?this._htSize.width-this.option("nMargin"):this.option("nMargin"):0),this._setWrapStyle()):(this._htMorph.pushAnimate(-1,[this._htWElement.header.$value(),{"@transform":this._sTranslateStart+-a.nMarginLeftPos+"px, "+a.nHeader.Y+"px"+this._sTranslateEnd},this._htWElement.content.$value(),{"@transform":this._sTranslateStart+-a.nMarginLeftPos+"px, "+a.nContent.Y+"px"+this._sTranslateEnd},this._htWElement.nav.$value(),{"@transform":this._sTranslateStart+-a.nMarginLeftPos+"px, "+a.nNav.Y+"px"+this._sTranslateEnd}]),this._htMorph.play(),this._htMorph.clear());var b=this;return this._setMaxClientSize({fFunction:function(){b._rotateFireEvent(),b._setWrapStyle()},bInit:!1}),!1}this._rotateFireEvent()},_getWrapStyle:function(){return this._nNavHeight=this._htWElement.nav.height(),{overflow:"hidden",width:this._htSize.width+"px",height:(this._nNavHeight>this._htSize.height?this._nNavHeight:this._htSize.height)+"px",position:"relative"}},_setWrapStyle:function(){var a={overflow:"",width:"",height:"",position:""};this._bShow&&(a=this._getWrapStyle()),this._htWElement.wrap&&"down"!=this.option("sDirection")&&this._htWElement.wrap.css(a)},_rotateFireEvent:function(){this.fireEvent("rotate")},_getPosInfo:function(){},toggle:function(a,b){return this.isPlaying()?void 0:("undefined"==typeof a&&(a=this._bShow?"hide":"show"),"show"==a&&this._bShow?!1:"hide"!=a||this._bShow?void this._setMoveCss(a,b):!1)},show:function(a){this.option("bUseTimingFunction")||0!=a||(a=1),this.toggle("show",a)},isPlaying:function(){return this._htMorph.isPlaying()},hide:function(a){this.option("bUseTimingFunction")||0!=a||(a=1),this.toggle("hide",a)},getVisible:function(){return this._bShow},_getTransitionOption:function(){return{fEffect:jindo.m.Effect.cubicEaseOut,bUseTransition:this.option("bUseTimingFunction")}},_createMorph:function(){this._htMorph={};var a=this._getTransitionOption(),b=this;this._htMorph=new jindo.m.Morph(a).attach({end:function(){b._setContentPos(),b._setHeaderPos(),b._setNavPos(),b._setEnd()}})},_setMoveCss:function(a,b){this._bMove=!0,this._bShow||this._htWElement.nav.show();var c=this._bShow;return this.fireEvent("before"+(this._bShow?"Hide":"Show"))?(b="undefined"!=typeof b&&b>=0?b:null||this.option("nDuration"),this._setMoveCssDetail(b),void this._htMorph.play()):(this._bShow=c,!1)},_setMoveCssDetail:function(a){var b=this._getPosInfo();this._bUseCss3d&&(this._sTranslateStart="translate3d(",this._sTranslateEnd=",0px)");var c=[this._htWElement.header.$value(),{"@transform":this._sTranslateStart+b.nHeader.X+"px, "+b.nHeader.Y+"px"+this._sTranslateEnd},this._htWElement.content.$value(),{"@transform":this._sTranslateStart+b.nContent.X+"px, "+b.nContent.Y+"px"+this._sTranslateEnd}];this._bNavInHeader||c.push(this._htWElement.nav.$value(),{"@transform":this._sTranslateStart+b.nNav.X+"px, "+b.nNav.Y+"px"+this._sTranslateEnd}),this._htMorph.pushAnimate.apply(this._htMorph,[a,c])},_setEnd:function(){this._htMorph.clear();var a="",b=this._bShow?!0:!1;this._bMove&&(a=this._bShow?"hide":"show",b=this._bShow?!1:!0,this._bMove=!1),b||"down"==this.option("sDirection")||this._htWElement.nav.hide();this.fireEvent(a),this._bShow=b},_setContentPos:function(){if(this.option("bUseOffsetBug")){var a=this._getPosInfo();this._htWElement.content.css(this._sCssPrefix+"Transform",""),this._htWElement.content.css({left:a.nLeftPos+"px",top:a.nLastContent+"px"})}},_setHeaderPos:function(){if(this.option("bUseOffsetBug")){var a=this._getPosInfo();this._htWElement.header.css(this._sCssPrefix+"Transform",""),this._htWElement.header.css({left:a.nLeftPos+"px",top:a.nLastHeader+"px"})}},_setNavPos:function(){var a={overflow:"",width:"",height:"",position:""};if(this.option("bUseOffsetBug")){var b=this._getPosInfo();
this._htWElement.nav.css(this._sCssPrefix+"Transform",""),this._htWElement.nav.css({left:b.nNavLeftPos+"px",top:b.nLastNav+"px"})}this._bShow||(a=this._getWrapStyle()),this._htWElement.wrap&&"down"!=this.option("sDirection")&&this._htWElement.wrap.css(a)},_onActivate:function(){this._setWrapperElement(),this._initVar(!0),this._setMaxClientSize({bInit:!0}),this._setInitStyle(!0),this._createMorph(),this._attachEvent()},_setMaxClientSize:function(a){var b=this;jindo.m._maxClientSize(function(c){b._htSize=c,a&&"function"==typeof a.fFunction&&a.fFunction()},a.bInit?!0:!1)},_onDeactivate:function(){jindo.m.unbindRotate(this._htEvent.rotate),jindo.m.unbindPageshow(this._htEvent.rotate);for(var a in this._htInstance)this._htInstance[a]&&this._htInstance[a].destroy();this._bShow=this._sCssPrefix=this._htEvent=this._htSize=this._nNavHeight=null,this._htWElement=this._htEvent=this._htMorph=this._htInstance=null},destroy:function(){this.deactivate()}}).extend(jindo.m.UIComponent),jindo.m.NumberValidator=jindo.$Class({rx:/^[+\-]?(\d{1,3},)?(\d{3},)*(\d)+(\.\d+)?$/,_isValid:function(a){return this.rx.test(a)},_getCorrectedValue:function(a,b){return a=this._filterNumber(a),b&&(a=this._applyComma(a)),a},_applyComma:function(a){var b="",c=0,d=null,e=null,f=a.indexOf("."),g=-1!==f?a.substring(0,f):a,h=-1!==f?a.substr(f):"";if(g.length>3){for(var i=g.length-1;i>=0;i--,c++)d=g.charAt(i),e=g.charCodeAt(i),b=0!==c&&c%3===0&&e>47&&58>e?d+","+b:d+b;return""!==h?b+h:b}return a},_filterNumber:function(a){var b,c,d,e;return a=a.replace(/[^\d\.\-]/g,""),b=a.charAt(0),a=a.replace(/-/g,""),a="-"===b?b+a:a,a.length<=0||"-"===a?a:(c=a.split("."),c.length>1?(d=c.shift(),b=d.charAt(0),d=""===d?0:parseInt(d,10),"-"===b&&0===d&&(d="-"+d),e=c.join(""),a=d+"."+e):a=String(parseFloat(c.join(""),10)),a)}}).extend(jindo.m.Validator),jindo.m.Validator=jindo.$Class({validate:function(a,b){var c=this._getCorrectedValue(a,b),d={bValid:this._isValid(c,b),sCorrectedValue:null};return c!==a&&(d.sCorrectedValue=c),d}}),jindo.m.Transition=jindo.$Class({_aTaskQueue:null,$init:function(a){this.option({sTransitionTimingFunction:"ease-in-out",bUseTimingFunction:jindo.m._isUseTimingFunction()}),this.option(a||{});var b=this;this._oMorph=new jindo.m.Morph({bUseTransition:this._htOption.bUseTimingFunction,fEffect:this._getEffect(this.option("sTransitionTimingFunction"))}).attach({end:function(){b._onTransitionEnd()},pause:function(){b._onTransitionEnd()}}),this._aTaskQueue=[],this._bIsPlaying=!1,this._initVar()},_initVar:function(){this._aTaskQueue=[],this._bIsPlaying=!1,this._sCssPrefix=jindo.m.getCssPrefix(),this._aBeforeStatus=[],this._sCssPrefix.length>0&&(this._sCssPrefix="-"+this._sCssPrefix.toLowerCase()+"-"),this._htCurrentTask=null},_getEffect:function(a){var b=jindo.m.Effect.cubicEaseInOut;switch(a){case"linear":b=jindo.m.Effect.linear;break;case"ease":b=jindo.m.Effect.cubicEase;break;case"ease-in":b=jindo.m.Effect.cubicEaseIn;break;case"ease-out":b=jindo.m.Effect.cubicEaseOut;break;case"ease-in-out":b=jindo.m.Effect.cubicEaseInOut}return b},start:function(){this._oMorph.isPlaying()||this.isPlaying()||!this.isExistTask()||this._prepareTask()},isPlaying:function(){return this._bIsPlaying},isExistTask:function(){if(!this._aTaskQueue)return!1;var a=this._aTaskQueue.length,b=a>0?!0:!1;return b},queue:function(a,b,c){var d={sType:"style",sTaskName:"",elTarget:a,nDuration:b};d.htDefault={},d.htStyle=c.htStyle||{},d.htTransform=c.htTransform||{},d.sTaskName=c.sTaskName||null,d.fCallback=c.fCallback;var e={};return e=this._getTranslateStyle(c.htStyle||{},e),e=this._getTranslateStyle(c.htTransform||{},e),this._pushTask(b,a,e,d),this},_getTranslateStyle:function(a,b){var c=b||{};for(var d in a)c["@"+d]=a[d];return c},stop:function(a){this.isPlaying()&&("undefined"==typeof a&&(a=!0),this._fireCustomEvent("stop",{element:this._htCurrentTask.elTarget,sTaskName:this._htCurrentTask.sTaskName,nDuration:this._htCurrentTask.nDuration})&&this._stopTransition(a))},clear:function(a){this.stop(a),this._aTaskQueue=[]},_resume:function(){this._htCurrentTask&&this._doTask()},_stopTransition:function(a){var b=0;if(a)b=1;else{var c=this._getBeforeStatusElement(this._elCurrent);c>-1&&jindo.$Element(this._elCurrent).attr("style",this._aBeforeStatus[c].style)}this._oMorph.pause(b),this._bIsPlaying=!1,this._htCurrentTask=null},_prepareTask:function(){var a=this._popTask();return null!==a&&a?(this._htCurrentTask=a,void this._resume()):(this._oMorph.clear(),void(this._bIsPlaying=!1))},_pushTask:function(a,b,c,d){this._aTaskQueue.push({nDuration:a,elTarget:b,htTask:c,sTaskName:d.sTaskName,fCallback:d.fCallback})},_popTask:function(){if(!this.isExistTask())return null;var a=this._aTaskQueue.shift();return a?a:null},_doTask:function(){if(this._htCurrentTask){if(this._bIsPlaying=!0,!this._fireCustomEvent("start",{element:this._htCurrentTask.elTarget,sTaskName:this._htCurrentTask.sTaskName,nDuration:this._htCurrentTask.nDuration}))return;this._oMorph.pushAnimate(0==this._htCurrentTask.nDuration?-1:this._htCurrentTask.nDuration,[this._htCurrentTask.elTarget,this._htCurrentTask.htTask]),this._oMorph.play();var a=this._htCurrentTask.elTarget,b=jindo.$Element(a);this._elCurrent=a,this._setBeforeStatus(b)}},_setBeforeStatus:function(a){var b=this._getBeforeStatusElement(a.$value());b>-1?this._aBeforeStatus[b].style=a.attr("style"):this._aBeforeStatus.push({el:a.$value(),style:a.attr("style")})},_getBeforeStatusElement:function(a){for(var b=-1,c=0,d=this._aBeforeStatus.length;d>c;c++)if(this._aBeforeStatus[c].el===a){b=c;break}return b},_fireCustomEvent:function(a,b){return this.fireEvent(a,b)},_onTransitionEnd:function(){var a=this;if(this._htCurrentTask){var b=typeof this._htCurrentTask.fCallback;if("function"==b)a._htCurrentTask.fCallback();else if("object"==b){var c,d=jindo.$Element(this._htCurrentTask.elTarget);for(c in this._htCurrentTask.fCallback.htTransform){var e=this._htCurrentTask.fCallback.htTransform[c];if("transform"==c){var f=this._sCssPrefix+c,g=d.$value().style[f];g.length>0&&(e=e)}d.$value().style[this._sCssPrefix+c]=e}for(c in this._htCurrentTask.fCallback.htStyle)d.css(c,this._htCurrentTask.fCallback.htStyle[c])}this._fireCustomEvent("end",{element:this._htCurrentTask.elTarget,sTaskName:this._htCurrentTask.sTaskName,nDuration:this._htCurrentTask.nDuration}),setTimeout(function(){a._prepareTask()},10)}},destroy:function(){for(var a in this._htWElement)this._htWElement[a]=null;this._htWElement=null,this._aTaskQueue=null,this._bIsPlaying=null,this._sCssPrefix=null,this._aBeforeStatus=null,this._htCurrentTask=null}}).extend(jindo.m.Component),jindo.m.Dialog=jindo.$Class({$init:function(a){var b={bActivateOnload:!0,sClassPrefix:"dialog-",sPosition:"center",bUseEffect:!0,bAutoClose:!1,bAutoReposition:!0,sFoggyColor:"gray",nFoggyOpacity:.5,sEffectType:"pop",nEffectDuration:500,sDialogColor:"white"};this.option(b),this.option(a||{}),this._setWrapperElement(),this._initVar(),this._setDeviceSize(),this._initElement(),this.option("bActivateOnload")&&this.activate()},_setWrapperElement:function(){this._htWElement={},this._htWElement.dialog_container=jindo.$Element('<div class="'+this.option("sClassPrefix")+'container"></div>'),this._htWElement.dialog_foggy=jindo.$Element('<div class="'+this.option("sClassPrefix")+'fog"></div>'),this._htWElement.dialog_layer=jindo.$Element('<div class="'+this.option("sClassPrefix")+'layer"></div>'),this._htWElement.dialog_clone=jindo.$Element('<div class="'+this.option("sClassPrefix")+'clone"></div>')},_initVar:function(){this._htDialogSize={width:0,height:0},this._sTemplate=null,this._bIsShown=!1,this._bProcessingShow=!1,this._bProcessingHide=!1,this._htDeviceInfo=jindo.m.getDeviceInfo(),this._bIOS=this._htDeviceInfo.iphone||this._htDeviceInfo.ipad?!0:!1,this._bIsRenderBug=!0,this._bAndroid=this._htDeviceInfo.android?!0:!1},_setDeviceSize:function(){this._htDeviceSize=this._bIOS||this._bAndroid||!jindo.$Agent().navigator().mobile?jindo.$Document().clientSize():{width:window.screen.width,height:window.screen.height}},_initContainerTop:function(){var a=0,b=this.option("bUseEffect"),c=this.option("sEffectType");!b||"slide-up"!=c&&"slide-down"!=c||(a=this._htDeviceSize.height*("slide-up"==c?1:-1)),a+=window.pageYOffset,this._htWElement.dialog_container.css("top",a+"px")},_initElement:function(){this._htWElement.dialog_foggy.css({position:"absolute",padding:"0px",margin:"0px",border:"0px",backgroundColor:this.option("sFoggyColor"),opacity:this.option("nFoggyOpacity"),width:this._htDeviceSize.width+"px",height:this._htDeviceSize.height+"px",left:"0px",top:"0px"}),this._htWElement.dialog_foggy.appendTo(this._getContainer()),this._htWElement.dialog_layer.css({position:"relative",backgroundColor:this.option("sDialogColor")}),this._htWElement.dialog_layer.appendTo(this._getContainer()),this._htWElement.dialog_container.css({position:"absolute",overflow:"hidden",width:this._htDeviceSize.width+"px",height:this._htDeviceSize.height+"px",left:"0px",zIndex:2050}),this._initContainerTop(),this._htWElement.dialog_container.hide(),this._htWElement.dialog_container.appendTo(document.body),this.option("bUseEffect")&&(this._oLayerEffect=new jindo.m.LayerEffect(this._getContainer())),this._htWElement.dialog_clone.css({position:"absolute",left:"-1000px",top:"-1000px"}),this._htWElement.dialog_clone.appendTo(document.body),this._htWElement.dialog_clone.hide()},_onActivate:function(){this._attachEvent()},_onDeactivate:function(){this._detachEventAll()},_attachEvent:function(){this._htEvent={},this._htEvent.click={ref:jindo.$Fn(this._onClick,this).attach(this.getDialog(),"click"),el:this.getDialog()},this._htEvent.touchend={ref:jindo.$Fn(this._onClick,this).attach(this._getFoggy(),"touchend"),el:this._getFoggy()},this._htEvent.touchmove={ref:jindo.$Fn(this._onTouchMove,this).attach(this._getContainer(),"touchmove"),el:this._getContainer()},this.option("bAutoReposition")&&(this._htEvent.rotate=jindo.$Fn(this._onResize,this).bind(),jindo.m.bindRotate(this._htEvent.rotate))},_detachEvent:function(a){if(a){var b=this._htEvent[a];b.ref&&b.ref.detach(b.el,a)}},_detachEventAll:function(){for(var a in this._htEvent)this._detachEvent(a);jindo.m.unbindRotate(this._htEvent.rotate),this._htEvent=null},_onClick:function(a){var b,c,d,e,f,g=this.option("sClassPrefix");if(b=jindo.m.getClosest("."+g+"close",a.element))this.fireEvent("close",{sType:"close",elLayer:this.getDialog()})&&this.hide();else if(c=jindo.m.getClosest("."+g+"confirm",a.element))this.fireEvent("confirm",{sType:"confirm",elLayer:this.getDialog()})&&this.hide();else if(d=jindo.m.getClosest("."+g+"cancel",a.element))this.fireEvent("cancel",{sType:"cancel",elLayer:this.getDialog()})&&this.hide();else if(e=jindo.m.getClosest("."+g+"layer",a.element)){if(f=jindo.m.getClosest("a",a.element))return!1}else this.option("bAutoClose")&&this.hide();return a.stop(),!1},_onTouchStart:function(a){var b,c=this.option("sClassPrefix");return(b=jindo.m.getClosest("."+c+"layer",a.element))?void 0:(a.stop(jindo.$Event.CANCEL_ALL),!1)},_onTouchMove:function(a){return a.stop(jindo.$Event.CANCEL_ALL),!1},_onResize:function(){(this._bProcessingShow||this._bProcessingHide)&&(this.option("bUseEffect")?this._getLayerEffect().stop():this._bProcessingShow?this._endShowEffect():this._endHideEffect()),this._oTimeout&&(clearTimeout(this._oTimeout),this._oTimeout=null),this.isShown()&&this._bIsRenderBug&&this._htWElement.dialog_container.hide(),this._oTimeout=setTimeout(jindo.$Fn(function(){this._resizeDocument(),this.isShown()&&this._bIsRenderBug&&this._htWElement.dialog_container.show(),this.option("bUseEffect")&&this._getLayerEffect().setSize()},this).bind(),300)},_resizeDocument:function(){this._setDeviceSize(),this._htWElement.dialog_container.css({width:this._htDeviceSize.width+"px",height:this._htDeviceSize.height+"px"}),this._htWElement.dialog_foggy.css({width:this._htDeviceSize.width+"px",height:this._htDeviceSize.height+"px"}),this._resizeDialog(!0),this.option("bUseEffect")&&this._getLayerEffect().setSize()},_resizeDialog:function(a){(this._setDialogSize()||a)&&this._repositionDialog()},_getLayerEffect:function(){return this._oLayerEffect},_getContainer:function(){return this._htWElement.dialog_container.$value()},_getFoggy:function(){return this._htWElement.dialog_foggy.$value()},getDialog:function(){return this._htWElement.dialog_layer.$value()},setTemplate:function(a){this._sTemplate=a,this._oTemplate=jindo.$Template(this._sTemplate),this._htWElement.dialog_clone.html(a),this._resizeDialog()},getTemplate:function(){return this._sTemplate},_setDialogSize:function(){var a,b;return"all"==this.option("sPosition")?(a=this._htDeviceSize.width,b=this._htDeviceSize.height):(this._htWElement.dialog_clone.show(),a=Math.min(this._htWElement.dialog_clone.width(),this._htDeviceSize.width),b=Math.min(this._htWElement.dialog_clone.height(),this._htDeviceSize.height),this._htWElement.dialog_clone.hide()),this._htDialogSize.width==a&&this._htDialogSize.height==b?!1:(this._htDialogSize={width:a,height:b},this._htWElement.dialog_layer.css({width:a+"px",height:b+"px"}),this._htDialogSize)},_getDialogSize:function(){return this._htDialogSize},_repositionDialog:function(){var a=this._getDialogPosition();if(this._htWElement.dialog_layer.css({top:a.top+"px",left:a.left+"px"}),this._htWElement.dialog_container.css({top:window.pageYOffset+"px",left:window.pageXOffset+"px"}),!this.isShown()){var b=this.option("sEffectType");("slide-up"==b||"slide-down"==b)&&this._initContainerTop()}},_getDialogPosition:function(){var a=this._htDeviceSize.width,b=this._htDeviceSize.height,c=this._getDialogSize().width,d=this._getDialogSize().height,e={};switch(this.option("sPosition")){case"top":e.top=0,e.left=parseInt((a-c)/2,10);break;case"center":e.top=parseInt((b-d)/2,10),e.left=parseInt((a-c)/2,10);break;case"bottom":e.top=parseInt(b-d,10),e.left=parseInt((a-c)/2,10);break;case"all":e.top=0,e.left=0}return e},setPosition:function(a){("top"==a||"center"==a||"bottom"==a||"all"==a)&&this.option("sPosition",a),this._resizeDialog()},useEffect:function(){return this.option("bUseEffect")?!1:(this.option("bUseEffect",!0),void this._initContainerTop())},unuseEffect:function(){return this.option("bUseEffect")?(this.option("bUseEffect",!1),void this._initContainerTop()):!1},setEffectType:function(a){this.useEffect(),("pop"==a||"slide-up"==a||"slide-down"==a||"flip"==a)&&(this.option("sEffectType",a),this._initContainerTop())},setEffectDuration:function(a){this.useEffect(),a&&a>99&&this.option("nEffectDuration",a)},setEffect:function(a){this.useEffect(),a.type&&this.setEffectType(a.type),a.duration&&this.setEffectDuration(a.duration)},isShown:function(){return this._bIsShown},show:function(a,b){return this.isShown()?!1:(this._bProcessingShow=!0,this._htEvent.touchstart={ref:jindo.$Fn(this._onTouchStart,this).attach(document,"touchstart"),el:document},b&&(this._showAttachedEvent=b,this.attach(b)),this._resizeDocument(),"undefined"==typeof a?a={}:(this._htWElement.dialog_clone.html(this._oTemplate.process(a)),this._resizeDialog()),this._htWElement.dialog_layer.html(this._oTemplate.process(a)),void(this.fireEvent("beforeShow",{sType:"beforeShow",elLayer:this.getDialog()})&&this._showDialogLayer()))},_showDialogLayer:function(){this.option("bUseEffect")?(this._getLayerEffect().attach("afterEffect",jindo.$Fn(this._endShowEffect,this).bind()),this._startShowEffect()):(this._htWElement.dialog_container.show(),this._endShowEffect())},_startShowEffect:function(){var a=this.option("sEffectType"),b=this.option("nEffectDuration");switch(a){case"slide-up":this._htWElement.dialog_container.show(),this._getLayerEffect().setSize(),this._getLayerEffect().slide({sDirection:"up",nDuration:b});break;case"slide-down":this._htWElement.dialog_container.show(),this._getLayerEffect().setSize(),this._getLayerEffect().slide({sDirection:"down",nDuration:b});break;case"pop":this._getLayerEffect().pop({sDirection:"in",nDuration:b,htFrom:{opacity:1}});break;case"flip":this._htWElement.dialog_container.show(),this._getLayerEffect().flip({nDuration:b,elFlipFrom:this._getContainer(),elFlipTo:this._getContainer(),htFrom:{opacity:0},htTo:{opacity:1}})}},_endShowEffect:function(){this.option("bUseEffect")&&this._getLayerEffect().detachAll("afterEffect"),this.fireEvent("show",{sType:"show",elLayer:this.getDialog()}),this._bIsShown=!0,this._bProcessingShow=!1},hide:function(){return this.isShown()?(this._bProcessingHide=!0,void(this.fireEvent("beforeHide",{sType:"beforeHide",elLayer:this.getDialog()})&&this._hideDialogLayer())):!1},_hideDialogLayer:function(){this.option("bUseEffect")?(this._getLayerEffect().attach("afterEffect",jindo.$Fn(this._endHideEffect,this).bind()),this._startHideEffect()):(this._htWElement.dialog_container.hide(),this._endHideEffect())},_startHideEffect:function(){var a=this.option("sEffectType"),b=this.option("nEffectDuration");switch(a){case"slide-up":this._getLayerEffect().slide({sDirection:"down",nDuration:b});break;case"slide-down":this._getLayerEffect().slide({sDirection:"up",nDuration:b});break;case"pop":this._getLayerEffect().pop({sDirection:"out",nDuration:b,htTo:{opacity:0}});break;case"flip":this._getLayerEffect().flip({nDuration:b,elFlipFrom:this._getContainer(),elFlipTo:this._getContainer(),htTo:{opacity:0}})}},_endHideEffect:function(){if(this.option("bUseEffect")&&this._getLayerEffect().detachAll("afterEffect"),this.fireEvent("hide",{sType:"hide",elLayer:this.getDialog()}),this._showAttachedEvent){for(var a in this._showAttachedEvent)this.detachAll(a);this._showAttachedEvent=null}this._detachEvent("touchstart"),this._htWElement.dialog_container.hide(),this._htWElement.dialog_container.css("opacity",1),(window.pageYOffset||window.pageXOffset)&&this._htWElement.dialog_container.css({top:"0px",left:"0px"}),this._bIsShown=!1,this._bProcessingHide=!1},destroy:function(){this._detachEventAll(),this.option("bUseEffect")&&(this._getLayerEffect().destroy(),this._oLayerEffect=null),this._htWElement.dialog_container.leave(),this._htWElement.dialog_clone.leave(),this._htWElement=null,this._htDeviceSize=null,this._htDialogSize=null,this._sTemplate=null,this._oTemplate=null,this._bIsShown=null,this._bProcessingShow=null,this._bProcessingHide=null,this._oTimeout=null,this._htDeviceInfo=null,this._bIOS=null,this._bIsRenderBug=null,this._bAndroid=null}}).extend(jindo.m.UIComponent),jindo.m.DragArea=jindo.$Class({$init:function(a,b){this.option({sClassPrefix:"drag-",bFlowOut:!1,nThreshold:10,nMoveThreshold:3,bActivateOnload:!0}),this.option(b||{}),this._initVar(),this._setWrapperElement(a),this._initTouch(),this._setAnchorElement(),this.option("bActivateOnload")&&this.activate()},_initVar:function(){this._oTouch=null,this._sDragClass="."+this.option("sClassPrefix")+"dragging",this._sHandleClass="."+this.option("sClassPrefix")+"handle",this._htInfo={elDrag:null,elHandle:null,nStartX:null,nStartY:null,nX:null,nY:null,bDragStart:!1,nCount:0,bPrepared:!1},this._htTans=jindo.m.useCss3d()?{open:"3d(",end:",0)"}:{open:"(",end:")"},this._sCssUserSelect="-"+jindo.m.getCssPrefix()+"-user-select",this._sCssUserSelectValue=document.body.style[this._sCssUserSelect];var a=jindo.m.getDeviceInfo();this._isIos=a.iphone||a.ipad,this._aAnchor=null,this._fnDummyFnc=function(){return!1},this._bBlocked=!1;var b=parseFloat(a.version,10);this._bTouchStop=!1,this._bTouchStop=a.android&&(2.1==b||b>=3),this._bTouchStop||(this._bTouchStop=a.iphone&&b>=3&&4>b)},_setWrapperElement:function(a){this._htWElement={},a=jindo.$(a),this._htWElement.base=jindo.$Element(a)},_initTouch:function(){this._oTouch||(this._oTouch=new jindo.m.Touch(this._htWElement.base.$value(),{nUseDiagonal:1,nSlopeThreshold:1,nMoveThreshold:this.option("nMoveThreshold"),bActivateOnload:!1}),this._oTouch.setSlope(-1,-1))},_getDragElement:function(a){if(jindo.$$.test(a,"input[type=text], textarea, select"))return null;var b=function(a,b){return b?a===document||a===b?!0:jindo.$Element(a).isParentOf(b):!1},c=jindo.$$.test(a,this._sDragClass)?a:jindo.m.getClosest(this._sDragClass,a);b(this._htWElement.base,c)||(c=null);var d=null;if(c){try{d=jindo.$$.getSingle(this._sHandleClass,c)}catch(e){}d&&(b(d,a)||(c=null))}return{elDrag:c,elHandle:d}},_onStart:function(a){if(this.isActivating()&&!this._htInfo.bPrepared){this._initInfo();var b=this._getDragElement(a.element,this._sHandleClass);if(b.elDrag){var c={elHandle:b.elHandle,elDrag:b.elDrag,oEvent:a.oEvent};if(this.fireEvent("handleDown",c)){this._bTouchStop&&a.oEvent.stop(),this._htInfo.bPrepared=!0,this._clearAnchor(),this._htInfo.welDrag=jindo.$Element(c.elDrag),this._htInfo.elHandle=c.elHandle;var d=this._htInfo.welDrag.offset();this._htInfo.nStartX=d.left,this._htInfo.nStartY=d.top,this._htInfo.welDrag.offset(0,0),this._htInfo.welDrag.css(jindo.m.getCssPrefix()+"Transition","-webkit-transform 0ms"),this._htInfo.welDrag.css(jindo.m.getCssPrefix()+"Transform","translate"+this._htTans.open+this._htInfo.nStartX+"px,"+this._htInfo.nStartY+"px"+this._htTans.end),this._htInfo.welDrag.css("position","absolute"),this._htInfo.nX=this._htInfo.nStartX,this._htInfo.nY=this._htInfo.nStartY,this._oTouch.attach({touchMove:this._htEvent.touchMove,touchEnd:this._htEvent.touchEnd}),document.body.style[this._sCssUserSelect]="none"}}}},_onMove:function(a){if(a.oEvent.stop(),this._htInfo.bPrepared){var b=a.nDistanceX,c=a.nDistanceY;if(!(Math.abs(b)+Math.abs(c)<this.option("nThreshold"))){var d={nX:this._htInfo.nStartX+b,nY:this._htInfo.nStartY+c};if(!this.option("bFlowOut")){var e=this._onReCalculateOffset(this._htInfo.welDrag.$value(),d.nX,d.nY);d.nX=e.nX,d.nY=e.nY}var f={nX:d.nX,nY:d.nY,elDrag:this._htInfo.welDrag.$value(),elHandle:this._htInfo.elHandle,nGapX:b,nGapY:c,nDragCount:this._htInfo.nCount,nTouchX:a.nX,nTouchY:a.nY};if(!this._htInfo.bDragStart&&!this.fireEvent("dragStart",f))return void(this._htInfo.bPrepared=!1);this._htInfo.bDragStart=!0,this.fireEvent("beforeDrag",f)&&(this._htInfo.welDrag.css(jindo.m.getCssPrefix()+"Transform","translate"+this._htTans.open+f.nX+"px,"+f.nY+"px"+this._htTans.end),this._htInfo.nX=f.nX,this._htInfo.nY=f.nY,this._htInfo.nCount++,this.fireEvent("drag",f))}}},_onReCalculateOffset:function(a,b,c){var d=this._htWElement.base,e=d.offset(),f={nX:e.left,nY:e.top,nWidth:d.$value().offsetWidth,nHeight:d.$value().offsetHeight},g={nWidth:a.offsetWidth,nHeight:a.offsetHeight},h=Math.max(b,f.nX);h=Math.min(h,f.nX+f.nWidth-g.nWidth);var i=Math.max(c,f.nY);return i=Math.min(i,f.nY+f.nHeight-g.nHeight),{nX:h,nY:i}},_onEnd:function(a){if(this._htInfo.bPrepared){if(this._stopDrag(!1),this._htInfo.welDrag.css(jindo.m.getCssPrefix()+"Transform",""),this._htInfo.welDrag.css(jindo.m.getCssPrefix()+"Translate",""),this._htInfo.welDrag.offset(this._htInfo.nY,this._htInfo.nX),(a.sMoveType===jindo.m.MOVETYPE[3]||a.sMoveType===jindo.m.MOVETYPE[4])&&this._restoreAnchor(),this._htInfo.welDrag){var b={elDrag:this._htInfo.welDrag.$value(),elHandle:this._htInfo.elHandle};this.fireEvent("handleUp",b)}this._initInfo()}},isDragging:function(){return this._htInfo.bDragStart},stopDragging:function(){this._stopDrag(!0)},_stopDrag:function(a){if("undefined"==typeof a&&(a=!1),this._oTouch.detach({touchMove:this._htEvent.touchMove,touchEnd:this._htEvent.touchEnd}),document.body.style[this._sCssUserSelect]=this._sCssUserSelectValue?this._sCssUserSelectValue:"",this.isDragging()){var b={nX:parseInt(this._htInfo.welDrag.css("left"),10)||0,nY:parseInt(this._htInfo.welDrag.css("top"),10)||0,elDrag:this._htInfo.welDrag.$value(),elHandle:this._htInfo.elHandle,bInterupted:a};this.fireEvent("dragEnd",b),this._htInfo.bDragStart=!1}},_setAnchorElement:function(){this._isIos&&(this._aAnchor=jindo.$$("A",this._htWElement.base.$value()))},_clearAnchor:function(){if(this._aAnchor&&!this._bBlocked){for(var a=null,b=0,c=this._aAnchor.length;c>b;b++){this._fnDummyFnc!==this._aAnchor[b].onclick&&(this._aAnchor[b]._onclick=this._aAnchor[b].onclick),this._aAnchor[b].onclick=this._fnDummyFnc,a=this._aAnchor[b].___listeners___||[];for(var d=0,e=a.length;e>d;d++)___Old__removeEventListener___.call(this._aAnchor[b],"click",a[d].listener,a[d].useCapture)}this._bBlocked=!0}},_restoreAnchor:function(){if(this._aAnchor&&this._bBlocked){for(var a=null,b=0,c=this._aAnchor.length;c>b;b++){this._aAnchor[b].onclick=this._fnDummyFnc!==this._aAnchor[b]._onclick?this._aAnchor[b]._onclick:null,a=this._aAnchor[b].___listeners___||[];for(var d=0,e=a.length;e>d;d++)___Old__addEventListener___.call(this._aAnchor[b],"click",a[d].listener,a[d].useCapture)}this._bBlocked=!1}},_initInfo:function(){this._htInfo.welDrag=null,this._htInfo.elHandle=null,this._htInfo.nStartX=null,this._htInfo.nStartY=null,this._htInfo.nX=null,this._htInfo.nY=null,this._htInfo.bDragStart=!1,this._htInfo.bPrepared=!1,this._htInfo.nCount=0},_onActivate:function(){this._attachEvent(),this._oTouch.activate()},_onDeactivate:function(){this._detachEvent(),this._oTouch.deactivate()},_attachEvent:function(){this._htEvent={},this._htEvent.touchMove=jindo.$Fn(this._onMove,this).bind(),this._htEvent.touchEnd=jindo.$Fn(this._onEnd,this).bind(),this._htEvent.touchStart=jindo.$Fn(this._onStart,this).bind(),this._oTouch.attach("touchStart",this._htEvent.touchStart)},_detachEvent:function(){this._oTouch.detachAll();for(var a in this._htEvent)this._htEvent[a]=null;this._htEvent=null},destroy:function(){this.deactivate();for(var a in this._htWElement)this._htWElement[a]=null;for(a in this._htInfo)this._htInfo[a]=null;this._htWElement=null,this._htInfo=null,this._isIos=null,this._aAnchor=null,this._fnDummyFnc=null,this._bBlocked=null,this._bTouchStop=null}}).extend(jindo.m.UIComponent),jindo.m.DropArea=jindo.$Class({$init:function(a,b){this.option({sClassPrefix:"drop-",oDragInstance:null,bActivateOnload:!0,bUseTouchPoint:!1}),this.option(b||{}),this._initVar(),this._setWrapperElement(a),this.option("bActivateOnload")&&this.activate()},_initVar:function(){this._waOveredDroppableElement=jindo.$A([]),this._sEvent="ontouchstart"in window?"touchmove":"mousemove",this._sDropClassName="."+this.option("sClassPrefix")+"area",this._aItem=null,this._aItemRect=null,this._elHandle=null,this._elDragging=null;var a=jindo.m.getDeviceInfo();this._bReCalculateOffset=(a.iphone||a.ipad)&&a.bInapp?!1:!0},_setWrapperElement:function(a){this._htWElement={},a=jindo.$(a),this._htWElement.base=jindo.$Element(a)},_getRectInfo:function(a){var b=jindo.$Element(a).offset(),c=0,d=0;return this._bReCalculateOffset&&jindo.$Element(a).parent(function(a){var b=jindo.m.getCssOffset(a.$value());c+=b.left,d+=b.top}),{nLeft:b.left+c,nTop:b.top+d,nRight:b.left+c+a.offsetWidth,nBottom:b.top+d+a.offsetHeight}},_reCalculate:function(){var a=this._htWElement.base.$value(),b=jindo.$$(this._sDropClassName,a);a.tagName&&jindo.$$.test(a,this._sDropClassName)&&b.push(a),this._aItem=b,this._aItemRect=[];for(var c,d=0;c=b[d];d++)this._aItemRect.push(this._getRectInfo(c))},_findDroppableElement:function(a){var b=jindo.$$.test(a,this._sDropClassName)?a:jindo.m.getClosest(this._sDropClassName,a);return this._isChildOfDropArea(a)||(b=null),b},_isChildOfDropArea:function(a){return this._el===document||this._el===a?!0:this._htWElement.base.isParentOf(a)},_isDropMove:function(a,b,c,d){var e,f,g,h=this._aItem,i=this._aItemRect;if(this.option("bUseTouchPoint"))for(e=0;(f=i[e])&&(g=h[e]);e++)f.nLeft<=a&&a<=f.nRight&&f.nTop<=b&&b<=f.nBottom?(this._addOveredDroppableElement(g),this._fireMoveEvent(g,f,{nX:a,nY:b})):this._removeOveredDroppableElement(g);else for(e=0;(f=i[e])&&(g=h[e]);e++){var j=this._checkOverArea({nMin:f.nLeft,nMax:f.nRight},{nMin:a,nMax:c}),k=this._checkOverArea({nMin:f.nTop,nMax:f.nBottom},{nMin:b,nMax:d});j&&k?(this._addOveredDroppableElement(g),this._fireMoveEvent(g,f,{nX:a,nY:b})):this._removeOveredDroppableElement(g)}},_checkOverArea:function(a,b){if(b.nMin<a.nMin){if(b.nMax>a.nMin)return!0}else if(b.nMin<a.nMax)return!0;return!1},_fireMoveEvent:function(a,b,c){var d=(c.nX-b.nLeft)/(b.nRight-b.nLeft),e=(c.nY-b.nTop)/(b.nBottom-b.nTop);this.fireEvent("move",{elHandle:this._elHandle,elDrag:this._elDragging,elDrop:a,nRatioX:d,nRatioY:e})},_addOveredDroppableElement:function(a){-1==this._waOveredDroppableElement.indexOf(a)&&(this._waOveredDroppableElement.push(a),this.fireEvent("over",{elHandle:this._elHandle,elDrag:this._elDragging,elDrop:a}))},_removeOveredDroppableElement:function(a){var b=this._waOveredDroppableElement.indexOf(a);-1!=b&&(this._waOveredDroppableElement.splice(b,1),this.fireEvent("out",{elHandle:this._elHandle,elDrag:this._elDragging,elDrop:a}))},_clearOveredDroppableElement:function(){for(var a;a=this._waOveredDroppableElement.$value()[0];)this._waOveredDroppableElement.splice(0,1),this.fireEvent("drop",{elHandle:this._elHandle,elDrag:this._elDragging,elDrop:a})},getOveredLists:function(){return this._waOveredDroppableElement?this._waOveredDroppableElement.$value():[]},_onActivate:function(){if(this._attachEvent(),this.option("oDragInstance")){var a=this.option("oDragInstance"),b=this;a.attach({handleDown:function(a){b._elHandle=a.elHandle,b._elDragging=a.elDrag,b._waOveredDroppableElement.empty(),b.fireEvent(a.sType,a)},dragStart:function(a){b.fireEvent(a.sType,a)?b._reCalculate():a.stop()},beforeDrag:function(a){b.fireEvent(a.sType,a)},drag:function(a){b._elDragging=a.elDrag;var c=jindo.$Element(a.elDrag),d=b.option("bUseTouchPoint")?a.nTouchY:a.nY,e=b.option("bUseTouchPoint")?a.nTouchX:a.nX,f=e+c.width(),g=d+c.height();b._isDropMove(e,d,f,g),b.fireEvent(a.sType,a)},dragEnd:function(a){var c={};c.aElDrop=b.getOveredLists().concat();for(var d in a)c[d]=a[d];b._clearOveredDroppableElement(),b.fireEvent(a.sType,c)},handleUp:function(){b.fireEvent("handleUp",{elHandle:b._elHandle,elDrag:b._elDragging}),b._elHandle=null,b._elDragging=null}})}},_onDeactivate:function(){if(this._detachEvent(),this.option("oDragInstance")){var a=this.option("oDragInstance");a.detachAll()}},_attachEvent:function(){this._htEvent={}},_detachEvent:function(){this._htEvent=null},destroy:function(){this.deactivate();for(var a in this._htWElement)this._htWElement[a]=null;this._htWElement=null}}).extend(jindo.m.UIComponent),jindo.m.Scroll=jindo.$Class({$init:function(a,b){this.option({bActivateOnload:!0,bUseHScroll:!1,bUseVScroll:!0,bUseMomentum:!0,nDeceleration:6e-4,nOffsetTop:0,nOffsetBottom:0,nHeight:0,nWidth:0,bUseBounce:!0,bUseHighlight:!0,sClassPrefix:"scroll_",bUseCss3d:jindo.m.useCss3d(!0),bUseTimingFunction:jindo.m.useTimingFunction(!0),bAutoResize:!1,bUseDiagonalTouch:!0,fEffect:jindo.m.Effect.cubicBezier(.18,.35,.56,1),nZIndex:2e3,sListElement:"",nRatio:1.5,bUseScrollbar:!0,nScrollbarHideThreshold:0,bUseFixedScrollbar:!1,sScrollbarBorder:"1px solid white",sScrollbarColor:"#8e8e8e",bUseScrollBarRadius:!0,bUsePullDown:!1,bUsePullUp:!1,fnPullDownIdle:null,fnPullDownBeforeUpdate:null,fnPullDownUpdating:null,fnPullUpIdle:null,fnPullUpBeforeUpdate:null,fnPullUpUpdating:null}),this.option(b||{}),this._initVar(),this._setWrapperElement(a),this.option("bActivateOnload")&&this.activate()},$static:{SCROLLBAR_CLASS:"__scroll_for_scrollbar__"},_initVar:function(){this.isPositionBug=jindo.m.hasOffsetBug(),this.isClickBug=jindo.m.hasClickBug(),this.nVersion=parseFloat(jindo.m.getDeviceInfo().version.substr(0,3)),this.sCssPrefix=jindo.m.getCssPrefix(),this._bUseCss3d=this.option("bUseCss3d"),this.nWrapperW=null,this.nWrapperH=null,this.nScrollW=null,this.nScrollH=null,this.nMaxScrollLeft=null,this.nMaxScrollTop=null,this.nMinScrollTop=0,this.bUseHScroll=null,this.bUseVScroll=null,this.bUseHighlight=this.option("bUseHighlight"),this._nPropHScroll=null,this._nPropVScroll=null,this._nLeft=0,this._nTop=0,this._aAni=[],this._htTimer={ani:-1,fixed:-1,touch:-1,scrollbar:-1},this._htPlugin={dynamic:{},pull:{}},this._oTouch=null,this._isAnimating=!1,this._isControling=!1,this._isStop=!1,this._hasJindoOffsetBug=jindo.m._hasJindoOffsetBug(),this.option("sListElement")&&this.option("bUseTimingFunction",!1),this.bUseHighlight&&(this._hasKitkatHighlightBug=jindo.m._hasKitkatHighlightBug(),this._nHightlightBug=-1,this.isPositionBug&&(this._elDummyTag=null)),this._nUpdater=-1,this._oMoveData={nLeft:0,nTop:0}
},getCurrentPos:function(){return{nTop:this._nTop,nLeft:this._nLeft}},setLayer:function(a){this._htWElement.wrapper=jindo.$Element(a),this._htWElement.wrapper.css({overflow:"hidden",zIndex:this.option("nZIndex")}),"static"==this._htWElement.wrapper.css("position")&&this._htWElement.wrapper.css("position","relative"),this.bUseHighlight||this._htWElement.wrapper.css(jindo.m._toPrefixStr("TapHighlightColor"),"rgba(0,0,0,0)"),this.setScroller()},setScroller:function(){this._htWElement.scroller=this._htWElement.wrapper.first(),this._htWElement.scroller.css({position:"absolute",zIndex:1,left:0,top:0}),this._htWElement.scroller.css(jindo.m._toPrefixStr("TransitionProperty"),""==this.sCssPrefix?"transform":"-"+this.sCssPrefix+"-transform").css(this.sCssPrefix+"Transform",jindo.m._getTranslate(0,0,this._bUseCss3d)),this.option("bUseTimingFunction")&&this._htWElement.scroller.css(jindo.m._toPrefixStr("TransitionTimingFunction"),this.option("fEffect").toString()),this.isPositionBug&&this.bUseHighlight&&this.nVersion<3&&(this._elDummyTag=this._htWElement.scroller.query("._scroller_dummy_atag_"),this._elDummyTag?this._elDummyTag=this._elDummyTag.$value():(this._elDummyTag=jindo.$("<a href='javascript:void(0);' style='position:absolute;height:0px;width:0px;' class='_scroller_dummy_atag_'></a>"),this._htWElement.scroller.append(this._elDummyTag)))},width:function(a){return a?(this.option("nWidth",a),void this.refresh()):this.option("nWidth")?parseInt(this.option("nWidth"),10):this._htWElement.wrapper.width()},height:function(a){return a?(this.option("nHeight",a),void this.refresh()):this.option("nHeight")?parseInt(this.option("nHeight"),10):this._htWElement.wrapper.height()},_setWrapperElement:function(a){this._htWElement={},this.setLayer(a)},hasHScroll:function(){return this.bUseHScroll},hasVScroll:function(){return this.bUseVScroll},_createDynamicPlugin:function(a){var b={nRatio:this.option("nRatio"),sListElement:this.option("sListElement"),sDirection:a};this._inst("dynamic")?this._inst("dynamic").option(b):this._htPlugin.dynamic.o=new jindo.m.DynamicPlugin(this._htWElement.wrapper,b),this._inst("dynamic").refresh("V"==a?this._nTop:this._nLeft),this.option("bUseTimingFunction",!1),this._htPlugin.dynamic.bUse=!0},_refreshDynamicPlugin:function(){if(this._htPlugin.dynamic.bUse=!1,this.option("sListElement")&&(!this.bUseVScroll||!this.bUseHScroll)){var a=2*this.option("nRatio");this.bUseVScroll&&this.nScrollH>this.nWrapperH*a?this._createDynamicPlugin("V"):this.bUseHScroll&&this.nScrollW>this.nWrapperW*a&&this._createDynamicPlugin("H")}},_refreshPullPlugin:function(){return this._htPlugin.pull.bUse=this.option("bUsePullDown")||this.option("bUsePullUp"),this._isUse("pull")?(this._inst("pull")||(this._htPlugin.pull.o=new jindo.m.PullPlugin(this)),this._inst("pull").refresh(),!0):!1},refresh:function(a){if(this.isActivating()){this._hasKitkatHighlightBug&&this._htWElement.wrapper.addClass(jindo.m.KITKAT_HIGHLIGHT_CLASS),this.option("nWidth")&&this._htWElement.wrapper.width(parseInt(this.option("nWidth"),10)),this.option("nHeight")&&this._htWElement.wrapper.height(parseInt(this.option("nHeight"),10));var b=parseInt(this._htWElement.wrapper.css("border-left-width"),10),c=parseInt(this._htWElement.wrapper.css("border-right-width"),10),d=parseInt(this._htWElement.wrapper.css("border-top-width"),10),e=parseInt(this._htWElement.wrapper.css("border-bottom-width"),10);b=isNaN(b)?0:b,c=isNaN(c)?0:c,d=isNaN(d)?0:d,e=isNaN(e)?0:e,this.nWrapperW=this._htWElement.wrapper.width()-b-c,this.nWrapperH=this._htWElement.wrapper.height()-d-e,this._refreshPullPlugin()||(this.nScrollW=this._htWElement.scroller.width(),this.nScrollH=this._htWElement.scroller.height()-this.option("nOffsetBottom"),this.nMinScrollTop=-this.option("nOffsetTop"),this.nMaxScrollTop=this.nWrapperH-this.nScrollH),this.nMaxScrollLeft=this.nWrapperW-this.nScrollW,this.bUseHScroll=this.option("bUseHScroll")&&this.nWrapperW<=this.nScrollW,this.bUseVScroll=this.option("bUseVScroll")&&this.nWrapperH<=this.nScrollH,this.bUseHScroll&&!this.bUseVScroll&&(this._htWElement.scroller.$value().style.height="100%"),!this.bUseHScroll&&this.bUseVScroll&&(this._htWElement.scroller.$value().style.width="100%"),this._refreshDynamicPlugin(),this.option("bUseScrollbar")&&(this._refreshScroll("V"),this._refreshScroll("H")),!this.bUseHScroll&&!this.bUseVScroll&&this._fixPositionBug(),!a&&this.restorePos(0)}},_setPos:function(a,b){var c;a=this.bUseHScroll?parseInt(a,10):0,b=this.bUseVScroll?parseInt(b,10):0,this._isUse("dynamic")&&(c=this._checkDirection(a,b));var d={nLeft:this._nLeft,nTop:this._nTop,nNextLeft:a,nNextTop:b,nVectorX:a-this._nLeft,nVectorY:b-this._nTop,nMaxScrollLeft:this.nMaxScrollLeft,nMaxScrollTop:this.nMaxScrollTop};if(this.fireEvent("beforePosition",d)){if(this._isControling=!0,this._nLeft=a=d.nNextLeft,this._nTop=b=d.nNextTop,this._isUse("dynamic")&&this._inst("dynamic").updateListStatus(c,this.bUseVScroll?this._nTop:this._nLeft),this.bUseHighlight&&this.isPositionBug){var e=this.getStyleOffset(this._htWElement.scroller);a-=e.left,b-=e.top}this._htWElement.scroller.css(jindo.m._toPrefixStr("Transform"),jindo.m._getTranslate(a+"px",b+"px",this._bUseCss3d)),this.option("bUseScrollbar")&&(this._setScrollBarPos("V",this._nTop),this._setScrollBarPos("H",this._nLeft)),this._oMoveData={nLeft:this._nLeft,nTop:this._nTop},this.fireEvent("position",{nLeft:this._nLeft,nTop:this._nTop,nMaxScrollLeft:this.nMaxScrollLeft,nMaxScrollTop:this.nMaxScrollTop})}else this._isAnimating=!1},_isUse:function(a){return this._htPlugin[a].bUse},_inst:function(a){return this._htPlugin[a].o},_checkDirection:function(a,b){var c,d=this.bUseVScroll?this._nTop:this._nLeft,e=this.bUseVScroll?b:a;return c=d>e?"forward":"backward"},restorePos:function(a){var b=this.getPosLeft(this._nLeft),c=this.getPosTop(this._nTop);return b===this._nLeft&&c===this._nTop?(this._isControling=!1,this._isStop=!1,this._fireAfterScroll(),void this._fixPositionBug()):void this._scrollTo(b,c,a)},_getMomentum:function(a,b,c,d,e,f){var g=this.option("nDeceleration"),h=c/g,i=0,j=0;return 0>a&&h>e?(j=d/(6/(h/b*g)),e+=j,b=b*e/h,h=e):a>0&&h>f&&(j=d/(6/(h/b*g)),f+=j,b=b*f/h,h=f),h*=a>0?-1:1,i=b/g,{nDist:h,nTime:Math.round(i)}},_stop:function(){this.option("bUseTimingFunction")?(jindo.m.detachTransitionEnd(this._htWElement.scroller.$value(),this._htEvent.TransitionEnd),this._transitionTime(0)):(cancelAnimationFrame(this._htTimer.ani),this._stopUpdater()),this._isAnimating&&this._setPos(this._nLeft,this._nTop),this._aAni=[],this._isAnimating=!1,this._isStop=!0},_scrollTo:function(a,b,c){this._stop(),a=this.bUseHScroll?a:0,b=this.bUseVScroll?b:0,this._aAni.push({nLeft:a,nTop:b,nDuration:c||0}),this._animate()},scrollTo:function(a,b,c){c=c||0,a=-Math.abs(a),b=-Math.abs(b),b+=this.getTop(),this._scrollTo(a>=this.getLeft()?this.getLeft():a<=this.getRight()?this.getRight():a,b>=this.getTop()?this.getTop():b<=this.getBottom()?this.getBottom():b,c)},getRight:function(){return this.nMaxScrollLeft},getLeft:function(){return 0},getBottom:function(){return this.nMaxScrollTop},getTop:function(){return this.nMinScrollTop},isMoving:function(){return this._isControling},_animate:function(){var a,b=this;if(!this._isAnimating){if(!this._aAni.length)return void this.restorePos(300);do if(a=this._aAni.shift(),!a)return;while(a.nLeft==this._nLeft&&a.nTop==this._nTop);if(0==a.nDuration)this.option("bUseTimingFunction")&&this._transitionTime(0),this._setPos(a.nLeft,a.nTop),this._animate();else if(this._isAnimating=!0,this.option("bUseTimingFunction"))this._transitionTime(a.nDuration),this._setPos(a.nLeft,a.nTop),this._isAnimating=!1,jindo.m.attachTransitionEnd(this._htWElement.scroller.$value(),this._htEvent.TransitionEnd);else{b._startUpdater();var c,d=(new Date).getTime(),e=this.bUseHScroll?this.option("fEffect")(this._nLeft,a.nLeft):null,f=this.bUseVScroll?this.option("fEffect")(this._nTop,a.nTop):null;!function g(){return c=(new Date).getTime(),c>=d+a.nDuration?(b._stopUpdater(),b._setPos(a.nLeft,a.nTop),b._isAnimating=!1,void b._animate()):(c=(c-d)/a.nDuration,b._oMoveData={nLeft:e&&e(c),nTop:f&&f(c)},void(b._isAnimating?b._htTimer.ani=requestAnimationFrame(g):b._stopUpdater()))}()}}},_onRotate:function(a){this.fireEvent("rotate",{isVertical:a.isVertical})&&this.refresh()},_transitionTime:function(a){a+="ms",this._htWElement.scroller.css(jindo.m._toPrefixStr("TransitionDuration"),a),this.option("bUseScrollbar")&&this._setScrollbarDuration(a)},_setScrollbarDuration:function(a){this.bUseHScroll&&this._htWElement.HscrollbarIndicator&&this._htWElement.HscrollbarIndicator.css(jindo.m._toPrefixStr("TransitionDuration"),a),this.bUseVScroll&&this._htWElement.VscrollbarIndicator&&this._htWElement.VscrollbarIndicator.css(jindo.m._toPrefixStr("TransitionDuration"),a)},_stopScroll:function(){var a,b,c=jindo.m.getTranslateOffset(this._htWElement.scroller.$value()),d={left:0,top:0};this.isPositionBug&&this.bUseHighlight&&(d=this.getStyleOffset(this._htWElement.scroller)),b=c.left+d.left,a=c.top+d.top,this.option("bUseFixedScrollbar")||(this._hideScrollBar("V"),this._hideScrollBar("H")),this._stopUpdater(),this._stop(),this._setPos(this.getPosLeft(b),this.getPosTop(a)),this._isControling=!1,this._fireAfterScroll(),this._fixPositionBug()},getStyleOffset:function(a){var b=parseInt(a.css("left"),10),c=parseInt(a.css("top"),10);return b=isNaN(b)?0:b,c=isNaN(c)?0:c,{left:b,top:c}},getPosLeft:function(a){return this.bUseHScroll?a>=0?0:a<=this.nMaxScrollLeft?this.nMaxScrollLeft:a:0},getPosTop:function(a){return this.bUseVScroll?a>=this.nMinScrollTop?this.nMinScrollTop:a<=this.nMaxScrollTop?this.nMaxScrollTop:a:0},_hideScrollBar:function(a){if(this._htWElement){var b=this._htWElement[a+"scrollbar"],c="H"===a?this.bUseHScroll:this.bUseVScroll;c&&b&&(b.hide(),b.$value().offsetHeight,this.isPositionBug&&this.bUseHighlight&&this.makeStylePos(this._htWElement[a+"scrollbarIndicator"]))}},_fireAfterScroll:function(){if(this.option("bUseScrollbar")){var a=this;this._htTimer.scrollbar=setTimeout(function(){a.option("bUseFixedScrollbar")||(a._hideScrollBar("V"),a._hideScrollBar("H"))},this.option("nScrollbarHideThreshold"))}this._fireEvent("afterScroll")},_fireEvent:function(a){return this.fireEvent(a,this._getNowPosition())},_fireTouchEvent:function(a,b){return this.fireEvent(a,this._getNowPosition(b))},_getNowPosition:function(a){return{nLeft:this._nLeft,nTop:this._nTop,nMaxScrollLeft:this.nMaxScrollLeft,nMaxScrollTop:this.nMaxScrollTop,oEvent:a||{}}},setUsePullDown:function(a){this._isUse("pull")&&(this.option("bUsePullDown",a),this.refresh())},setUsePullUp:function(a){this._isUse("pull")&&(this.option("bUsePullUp",a),this.refresh())},_onUpdater:function(){(this._oMoveData.nLeft!=this._nLeft||this._oMoveData.nTop!=this._nTop)&&this._setPos(this._oMoveData.nLeft,this._oMoveData.nTop),this._startUpdater()},_startUpdater:function(){this._stopUpdater(),this._nUpdater=window.requestAnimationFrame(this._htEvent.updater)},_stopUpdater:function(){window.cancelAnimationFrame(this._nUpdater),this._nUpdater=-1},_onStart:function(a){this._clearPositionBug(),this._isStop=!1,this._fireTouchEvent("beforeTouchStart",a)?(this.option("bUseTimingFunction")&&this._transitionTime(0),this._isAnimating&&this._stopScroll()&&(this._isAnimating=!1),this._isControling=!0,this._fireTouchEvent("touchStart",a)||a.stop()):a.stop()},_onMove:function(a){var b=0,c=0;if(this._clearTouchEnd(),this._clearPositionBug(),this.isClickBug&&this._htWElement.scroller.css("pointerEvents","none"),this._fireTouchEvent("beforeTouchMove",a)){this._isUse("pull")&&this._inst("pull").touchMoveForUpdate(a,this.nMaxScrollTop);var d=a.oEvent;if(a.sMoveType===jindo.m.MOVETYPE[0]){if(!this.bUseHScroll)return!0;if(!this.option("bUseBounce")&&(this._nLeft>=0&&a.nVectorX>0||this._nLeft<=this.nMaxScrollLeft&&a.nVectorX<0))return void this._forceRestore(a);d.stop(jindo.$Event.CANCEL_ALL)}else if(a.sMoveType===jindo.m.MOVETYPE[1]){if(!this.bUseVScroll)return!0;if(!this.option("bUseBounce")&&(this._nTop>=this.nMinScrollTop&&a.nVectorY>0||this._nTop<=this.nMaxScrollTop&&a.nVectorY<0))return void this._forceRestore(a);d.stop(jindo.$Event.CANCEL_ALL)}else{if(a.sMoveType!==jindo.m.MOVETYPE[2])return d.stop(jindo.$Event.CANCEL_ALL),!0;if(!this.option("bUseDiagonalTouch"))return;d.stop(jindo.$Event.CANCEL_ALL)}if(this.option("bUseBounce")){this.bUseHScroll&&(b=this._nLeft+(this._nLeft>=0||this._nLeft<=this.nMaxScrollLeft?a.nVectorX/2:a.nVectorX)),this.bUseVScroll&&(c=this._nTop+(this._nTop>=this.nMinScrollTop||this._nTop<=this.nMaxScrollTop?a.nVectorY/2:a.nVectorY));var e=this;this._htTimer.touch=setTimeout(function(){e._forceRestore(a)},500)}else b=this.getPosLeft(this._nLeft+a.nVectorX),c=this.getPosTop(this._nTop+a.nVectorY);this._setPos(b,c),this._fireTouchEvent("touchMove",a)||a.stop()}else a.stop()},_onEnd:function(a){this._isUse("pull")&&this._inst("pull").pullUploading(),this._fireTouchEvent("beforeTouchEnd",a)?(this._clearPositionBug(),this._clearTouchEnd(),a.sMoveType===jindo.m.MOVETYPE[0]||a.sMoveType===jindo.m.MOVETYPE[1]||a.sMoveType===jindo.m.MOVETYPE[2]?(this._endForScroll(a),this.nVersion<4.1&&a.oEvent.stop(jindo.$Event.CANCEL_DEFAULT)):(this._isControling=!1,this._isStop||this._tapHighlight()),this._fireTouchEvent("touchEnd",a)||a.stop()):a.stop(),this.isClickBug&&this._htWElement.scroller.css("pointerEvents","auto")},_tapHighlight:function(){if(this._hasKitkatHighlightBug){this._htWElement.wrapper.removeClass(jindo.m.KITKAT_HIGHLIGHT_CLASS),this._htWElement.wrapper._element.clientHeight;var a=this;clearTimeout(this._nHightlightBug),this._nHightlightBug=setTimeout(function(){a._htWElement.wrapper.addClass(jindo.m.KITKAT_HIGHLIGHT_CLASS)},200)}},_forceRestore:function(a){a.nMomentumX=a.nMomentumY=null,this._endForScroll(a),this._clearPositionBug(),this._clearTouchEnd()},_endForScroll:function(a){clearTimeout(this._nFixedDubbleEndBugTimer);var b={nDist:0,nTime:0},c={nDist:0,nTime:0},d={nMomentumX:a.nMomentumX,nMomentumY:a.nMomentumY,nDistanceX:a.nDistanceX,nDistanceY:a.nDistanceY,nLeft:this._nLeft,nTop:this._nTop,nMaxScrollLeft:this.nMaxScrollLeft,nMaxScrollTop:this.nMaxScrollTop};this.option("bUseMomentum")&&(a.nMomentumX||a.nMomentumY)?(this.bUseHScroll&&(b=this._getMomentum(-a.nDistanceX,a.nSpeedX,a.nMomentumX,this.nWrapperW,-this._nLeft,-this.nMaxScrollLeft+this._nLeft)),this.bUseVScroll&&(c=this._getMomentum(-a.nDistanceY,a.nSpeedY,a.nMomentumY,this.nWrapperH,-this._nTop,-this.nMaxScrollTop+this._nTop)),d.nNextLeft=this._nLeft+b.nDist,d.nNextTop=this._nTop+c.nDist,d.nTime=Math.max(Math.max(b.nTime,c.nTime),10),this.fireEvent("beforeScroll",d)&&(this.option("bUseBounce")?this._scrollTo(d.nNextLeft,d.nNextTop,d.nTime):this._scrollTo(this.getPosLeft(d.nNextLeft),this.getPosTop(d.nNextTop),d.nTime))):(d.nNextLeft=this._nLeft,d.nNextTop=this._nTop,d.nTime=0,this.fireEvent("beforeScroll",d)&&(this._nLeft!==d.nNextLeft||this._nTop!==d.nNextTop?this._scrollTo(d.nNextLeft,d.nNextTop,d.nTime):this.restorePos(300)))},_onTransitionEnd:function(){jindo.m.detachTransitionEnd(this._htWElement.scroller.$value(),this._htEvent.TransitionEnd),this._animate()},_onDocumentStart:function(a){if(this._htWElement.wrapper.visible()){if(this._htWElement.wrapper.isChildOf(a.element))return!0;this._isAnimating&&this._isControling&&this._stopScroll()}},_onActivate:function(){this._oTouch?this._oTouch.activate():this._oTouch=new jindo.m.Touch(this._htWElement.wrapper.$value(),{nMoveThreshold:0,nMomentumDuration:jindo.m.getDeviceInfo().android?500:200,nUseDiagonal:0,nTapThreshold:1,nSlopeThreshold:5,nEndEventThreshold:jindo.m.getDeviceInfo().win8?100:0,bHorizental:this.option("bUseHScroll"),bVertical:this.option("bUseVScroll")}),this._attachEvent(),this.refresh()},_onDeactivate:function(){this._detachEvent(),this._oTouch.deactivate()},_attachEvent:function(){this._htEvent={},this._htEvent.touchStart=jindo.$Fn(this._onStart,this).bind(),this._htEvent.touchMove=jindo.$Fn(this._onMove,this).bind(),this._htEvent.touchEnd=jindo.$Fn(this._onEnd,this).bind(),this._htEvent.TransitionEnd=jindo.$Fn(this._onTransitionEnd,this).bind(),this._htEvent.document=jindo.$Fn(this._onDocumentStart,this).attach(document,"touchstart"),this._oTouch.attach({touchStart:this._htEvent.touchStart,touchMove:this._htEvent.touchMove,touchEnd:this._htEvent.touchEnd}),this.option("bAutoResize")&&(this._htEvent.rotate=jindo.$Fn(this._onRotate,this).bind(),jindo.m.bindRotate(this._htEvent.rotate)),this.option("bUseTimingFunction")||(this._htEvent.updater=jindo.$Fn(this._onUpdater,this).bind())},_fixPositionBug:function(){if(this.isPositionBug&&this.bUseHighlight){var a=this;this._clearPositionBug(),this._htTimer.fixed=setTimeout(function(){a._htWElement&&a._htWElement.scroller&&(a.makeStylePos(a._htWElement.scroller),a.nVersion<=3&&a._elDummyTag.focus())},200)}},makeStylePos:function(a){var b=a.$value(),c=jindo.m.getTranslateOffset(b),d=a.offset();b.style[jindo.m._toPrefixStr("Transform")]=this.nVersion>=4?jindo.m._getTranslate(0,0,this._bUseCss3d):null,b.style[jindo.m._toPrefixStr("TransitionDuration")]=null,this._hasJindoOffsetBug?a.offset(c.top+d.top,c.left+d.left):a.offset(d.top,d.left)},_clearPositionBug:function(){this.isPositionBug&&this.bUseHighlight&&(clearTimeout(this._htTimer.fixed),this._htTimer.fixed=-1)},_clearTouchEnd:function(){clearTimeout(this._htTimer.touch),this._htTimer.touch=-1},_detachEvent:function(){jindo.m.detachTransitionEnd(this._htWElement.scroller.$value(),this._htEvent.TransitionEnd),this._htEvent.document.detach(document,"touchstart"),this.option("bAutoResize")&&jindo.m.unbindRotate(this._htEvent.rotate),this._oTouch.detachAll(),this._elDummyTag&&this._htWElement.scroller.remove(this._elDummyTag),this.option("bUseTimingFunction")||this._stopUpdater()},_createScroll:function(a){if("H"===a?this.bUseHScroll:this.bUseVScroll){var b,c=this._htWElement.wrapper,d=jindo.$Element(c.query("div."+jindo.m.Scroll.SCROLLBAR_CLASS));d&&(c.remove(d),d=this._htWElement[a+"scrollbar"]=this._htWElement[a+"scrollbarIndicator"]=null),d=this._createScrollbar(a),b=this._createScrollbarIndicator(a),this._htWElement[a+"scrollbar"]=d,this._htWElement[a+"scrollbarIndicator"]=b,d.append(b),c.append(d)}},_createScrollbar:function(a){var b=jindo.$Element("<div class='"+jindo.m.Scroll.SCROLLBAR_CLASS+"'>");return b.css({position:"absolute",zIndex:100,bottom:"H"===a?"1px":(this.bUseHScroll?"7":"2")+"px",right:"H"===a?(this.bUseVScroll?"7":"2")+"px":"1px",pointerEvents:"none"}),this.option("bUseFixedScrollbar")?b.show():b.hide(),b.css("H"===a?{height:"5px",left:"2px"}:{width:"5px",top:"2px"}),b},_createScrollbarIndicator:function(a){var b=jindo.$Element("<div>").css({position:"absolute",zIndex:100,border:this.option("sScrollbarBorder"),pointerEvents:"none",left:0,top:0,backgroundColor:this.option("sScrollbarColor")});return jindo.m.getOsInfo().ios&&this.option("bUseScrollBarRadius")&&b.css(jindo.m._toPrefixStr("BorderRadius"),"12px"),b.css(jindo.m._toPrefixStr("TransitionProperty"),""==this.sCssPrefix?"transform":"-"+this.sCssPrefix+"-transform").css(jindo.m._toPrefixStr("Transform"),jindo.m._getTranslate(0,0,this._bUseCss3d)),this.option("bUseTimingFunction")&&b.css(jindo.m._toPrefixStr("TransitionTimingFunction"),this.option("fEffect").toString()),"H"===a?b.height(5):b.width(5),b},_refreshScroll:function(a){if("H"===a){if(!this.bUseHScroll||this.nWrapperW==this.nScrollW)return}else if(!this.bUseVScroll||this.nWrapperH==this.nScrollH)return;this._htWElement[a+"scrollbar"]||this._createScroll(a);var b=this._htWElement[a+"scrollbar"],c=this._htWElement[a+"scrollbarIndicator"],d=0;"H"===a?(d=Math.max(Math.round(Math.pow(this.nWrapperW,2)/this.nScrollW),8),this._nPropHScroll=(this.nWrapperW-d)/this.nMaxScrollLeft,b.width(this.nWrapperW),c.width(isNaN(d)?0:d)):(d=Math.max(Math.round(Math.pow(this.nWrapperH,2)/this.nScrollH),8),this._nPropVScroll=(this.nWrapperH-d)/this.nMaxScrollTop,b.height(this.nWrapperH),c.height(isNaN(d)?0:d))},_setScrollBarPos:function(a,b){if("H"===a?this.bUseHScroll:this.bUseVScroll){var c=this._htWElement[a+"scrollbarIndicator"],d=this._htWElement[a+"scrollbar"];if(c&&d&&(b=this["_nProp"+a+"Scroll"]*b,this.option("bUseFixedScrollbar")||!d||d.visible()||(d.show(),this.option("bUseTimingFunction")&&d.$value().clientHeight),c)){if(this.isPositionBug&&this.bUseHighlight){var e=parseInt(c.css("H"===a?"left":"top"),10);b-=isNaN(e)?0:e}c.css(jindo.m._toPrefixStr("Transform"),jindo.m._getTranslate("H"==a?b+"px":0,"H"==a?0:b+"px",this._bUseCss3d))}}},destroy:function(){this.deactivate(),this.detachAll();for(var a in this._htWElement)this._htWElement[a]=null;this._htWElement=null,this._oTouch.destroy(),delete this._oTouch}}).extend(jindo.m.UIComponent),jindo.m.LayerEffect=jindo.$Class({$init:function(a,b){this.option({nDuration:250,fEffect:jindo.m.Effect.linear,bActivateOnload:!0}),this._initVar(),!arguments[0]||"string"!=typeof arguments[0]&&1!=arguments[0].nodeType?this.option(arguments[0]||{}):(this.setLayer(a),this.option(b||{})),this._initTransition(),this.option("bActivateOnload")&&this.activate()},_htEffect:{expand:"jindo.m.ExpandEffect",contract:"jindo.m.ContractEffect",fade:"jindo.m.FadeEffect",pop:"jindo.m.PopEffect",slide:"jindo.m.SlideEffect",flip:"jindo.m.FlipEffect"},_initVar:function(){this._htEffectInstance={},this._htLayerInfo={},this._htWElement={},this._htCurrentTask={},this.bAndroid=jindo.m.getDeviceInfo().android,this.sClassHighligting="_effct_hide_highlighting_tmp"},_initTransition:function(){this._oMorph=new jindo.m.Morph({fEffect:this.option("fEffect")||(this.option("sEffect")?this._getEffect(this.option("sEffect")):null),bUseTransition:jindo.m.useTimingFunction()})},_getEffect:function(a){var b=jindo.m.Effect.cubicEaseInOut;switch(a){case"linear":b=jindo.m.Effect.linear;break;case"ease":b=jindo.m.Effect.cubicEase;break;case"ease-in":b=jindo.m.Effect.cubicEaseIn;break;case"ease-out":b=jindo.m.Effect.cubicEaseOut;break;case"ease-in-out":b=jindo.m.Effect.cubicEaseInOut}return b},_createEffect:function(sType){if(this._htEffect[sType]&&!this._htEffectInstance[sType]){try{this._htEffectInstance[sType]=eval("new "+this._htEffect[sType]+"()")}catch(e){}this._htEffectInstance[sType].setLayerInfo(this._htLayerInfo)}},_createFunc:function(){for(var a=["slide","pop","flip","fade","expand","contract"],b=0,c=a.length;c>b;b++)this[a[b]]=function(a){return function(b){var c=a;if("string"==typeof arguments[0]||1==arguments[0].nodeType){this.setLayer(arguments[0]);var d=arguments[2]||{};d.sDirection=arguments[1],this._run(c,d)}else this._run(c,b)}}(a[b])},isPlaying:function(){return this._oMorph.isPlaying()},_fireCustomEvent:function(a,b){return this.fireEvent(a,b)},_run:function(a,b){if(this._isAvailableEffect()){this._createEffect(a),"undefined"==typeof b&&(b={});var c=this._htEffectInstance[a],d=this.getLayer(),e="undefined"==typeof b.nDuration?this.option("nDuration"):parseInt(b.nDuration,10),f=c.getBeforeCommand(d,b),g=c.getCommand(d,b);if(this._htCurrentTask=b,this._htCurrentTask.elLayer=d,this._htCurrentTask.sTaskName=g.sTaskName,this._htCurrentTask.nDuration=e,this._fireCustomEvent("beforeEffect",{elLayer:d,sEffect:g.sTaskName,nDuration:e})){f&&this._oMorph.pushAnimate(-1,[this.getLayer(),f.htStyle]);var h=this;b.sEffect&&this._oMorph.pushCall(function(){this.option({fEffect:h._getEffect(b.sEffect)})}),e=0==e?-1:e,this._oMorph.pushAnimate(e,[this.getLayer(),g.htStyle]),g.fCallback&&("function"==typeof g.fCallback?this._oMorph.pushCall(function(){g.fCallback()}):"object"==typeof g.fCallback&&this._oMorph.pushAnimate(-1,[this.getLayer(),g.fCallback.htStyle||{}])),this._oMorph.play()}}},setLayer:function(a){this._htWElement.el=jindo.$(a),this._htWElement.wel=jindo.$Element(this._htWElement.el);var b;if(this.bAndroid&&(b=jindo.$$.getSingle("."+this.sClassHighligting,this._htWElement.el),!b)){var c='<a href="javascript:void(0)" style="position:absolute" class="'+this.sClassHighligting+'"></a>';b=jindo.$(c),this._htWElement.wel.append(b),b.style.opacity="0",b.style.width=0,b.style.height=0,b.style.left="-1000px",b.style.top="-1000px"}this.setSize()},stop:function(a){"undefined"==typeof a&&(a=!0),this._oMorph&&this._oMorph.pause(a)},clearEffect:function(a){this._oMorph&&(this.stop(a),this._oMorph.clear())},getLayer:function(){return this._htWElement.el},setSize:function(){var a=this._htWElement.el.cloneNode(!0),b=jindo.$Element(a);b.opacity(0),this._htWElement.wel.after(b),b.show(),this._htLayerInfo.nWidth=this._htWElement.wel.width(),this._htLayerInfo.nHeight=this._htWElement.wel.height(),b.css({position:"absolute",top:"0px",left:"0px"}),this._htLayerInfo.nMarginLeft=parseInt(b.css("marginLeft"),10),this._htLayerInfo.nMarginTop=parseInt(b.css("marginTop"),10),this._htLayerInfo.nMarginLeft=isNaN(this._htLayerInfo.nMarginLeft)?0:this._htLayerInfo.nMarginLeft,this._htLayerInfo.nMarginTop=isNaN(this._htLayerInfo.nMarginTop)?0:this._htLayerInfo.nMarginTop,this._htLayerInfo.nOpacity=this._htWElement.wel.opacity(),this._htLayerInfo.sPosition=this._htWElement.wel.css("position");var c=this._htWElement.wel.css("display");c="none"===c||0===c.length?"block":c,this._htLayerInfo.sDisplay=c,this._htLayerInfo.sClassHighligting=this.sClassHighligting,b.leave(),this._setEffectLayerInfo()},_setEffectLayerInfo:function(){for(var a in this._htEffectInstance)this._htEffectInstance[a].setLayerInfo(this._htLayerInfo)},_onTransitionEnd:function(){this._htCurrentTask&&this._fireCustomEvent("afterEffect",{elLayer:this._htCurrentTask.elLayer,sEffect:this._htCurrentTask.sTaskName,nDuration:this._htCurrentTask.nDuration})},_onTransitionStop:function(a){a.sTaskName&&this._fireCustomEvent("stop",{elLayer:this._htCurrentTask.elLayer,sEffect:this._htCurrentTask.sTaskName,nDuration:this._htCurrentTask.nDuration})},_isAvailableEffect:function(){return this.isActivating()},_onActivate:function(){this._attachEvent(),this._createFunc()},_onDeactivate:function(){this._detachEvent()},_attachEvent:function(){this._htEvent={},this._htEvent.end=jindo.$Fn(this._onTransitionEnd,this).bind(),this._htEvent.stop=jindo.$Fn(this._onTransitionStop,this).bind(),this._oMorph&&this._oMorph.attach({end:this._htEvent.end,stop:this._htEvent.stop})},_detachEvent:function(){this._htEvent=null},destroy:function(){this.deactivate();for(var a in this._htWElement)this._htWElement[a]=null;this._htWElement=null}}).extend(jindo.m.UIComponent),jindo.m.EmailValidator=jindo.$Class({rx:/^(([\w\-]+\.)+[\w\-]+|([a-zA-Z]{1}|[\w\-]{2,}))@((([0-1]?[0-9]{1,2}|25[0-5]|2[0-4][0-9])\.([0-1]?[0-9]{1,2}|25[0-5]|2[0-4][0-9])\.([0-1]?[0-9]{1,2}|25[0-5]|2[0-4][0-9])\.([0-1]?[0-9]{1,2}|25[0-5]|2[0-4][0-9])){1}|([a-zA-Z]+[\w\-]+\.)+[a-zA-Z]{2,4})$/,_isValid:function(a){return this.rx.test(a)?!0:!1},_getCorrectedValue:function(a){a=a.replace(/[^\w\.\@]/g,"").replace(/\.{2,}/g,".");var b=a.split("@");return b.length>2&&(a=b.shift()+"@"+b.join("")),a}}).extend(jindo.m.Validator),jindo.m._Effect_=jindo.$Class({$init:function(){this._sCssPrefix=jindo.m.getCssPrefix();var a=jindo.m.getDeviceInfo();this.bIos=a.iphone||a.ipad,this.bIos3=a.iphone&&a.version.length>0&&"3"==a.version.substring(0,1),this.bAndroid=a.android,this.bAndroid3Up=a.android&&a.version.length>0&&a.version.substring(0,1)>="3",this.bAndroid2_1=a.android&&a.version.length>0&&"2.1"===a.version,this.sTranOpen=this.bIos?"translate3d(":"translate(",this.sTranEnd=this.bIos?",0px)":")",this._initVar()},_initVar:function(){this._htLayerInfo={}},setLayerInfo:function(a){this._htLayerInfo={};for(var b in a)this._htLayerInfo[b]=a[b]},getTranslateStyle:function(a,b){var c=b||{};for(var d in a)c["@"+d]=a[d];return c},getTransitionTask:function(){return null},getBeforeCommand:function(){return null},getCommand:function(){return null}}),jindo.m.FadeEffect=jindo.$Class({sEffectName:"fade",getCommand:function(a,b){b.htTo||(b.htTo={}),b.nDistance&&(b.htTo.opacity=b.nDistance);var c=b.sDirection?b.sDirection:"in",d=b.htTo||{},e="in"==c?1:0;d.opacity="undefined"!=typeof d.opacity?d.opacity:e;var f={};"out"==c&&(f.htStyle={},f.htStyle["@display"]="none",f.htStyle["@opacity"]=this._htLayerInfo.nOpacity);var g={};return this.getTranslateStyle(d,g),{sTaskName:this.sEffectName+"-"+c,htStyle:g,fCallback:f}},getBeforeCommand:function(a,b){var c=b.sDirection?b.sDirection:"in",d=b.htFrom||{},e="in"==c?0:1;d.display=this._htLayerInfo.sDisplay,d.opacity="undefined"==typeof d.opacity?e:d.opacity;var f={};return this.getTranslateStyle(d,f),{htStyle:f,htTransform:{}}}}).extend(jindo.m._Effect_),jindo.m.CubeFlicking=jindo.$Class({$init:function(a,b){this.option(b||{}),this._initVar(),this._setWrapperElement(a),this.option("bActivateOnload")&&this.activate()},_initVar:function(){jindo.m.Flick.prototype._initVar.apply(this),this._sCssPrefix=jindo.m.getCssPrefix()},_onActivate:function(){jindo.m.Flick.prototype._onActivate.apply(this),this._setHalfWidth(),this._sRotate=this._bUseH?"Y":"X";var a=this;this.set(new jindo.m.Cube(this._getAnimationOption()).attach({set:function(){a._setStyle()}}),this._htWElement,this._nHalpSize)},_setHalfWidth:function(){this._nHalpSize=parseInt(this._htWElement.view.css(this._bUseH?"width":"height"),10)/2},_setStyle:function(a){function b(b){c={},c.position="absolute",c["float"]="left",c[d._oAnimation.p("BackfaceVisibility")]="hidden";var e=0;e=-e+90*b*(d._bUseH?1:-1),!d._bUseCircular&&(a-1>b||b>a+1)?c.display="none":(c.display="block",c[d._oAnimation.p("Transform")]="rotate"+d._sRotate+"("+e+"deg) translateZ("+d._nHalpSize+"px) ")}var c=null,d=(this._bUseH?"width":"height",this);a=a||this.option("nDefaultIndex")||0,jindo.$A(this._htWElement.aPanel).forEach(function(a,d){b(d),a.css(c)})},refresh:function(a){jindo.m.Flick.prototype.refresh.call(this,a),this._bUseCircular&&this._restorePanel()},resize:function(){jindo.m.Flick.prototype.resize.call(this),this._sRotate=this._bUseH?"Y":"X",this._setHalfWidth();var a=this._bUseH?"width":"height",b=this._htWElement.view[a](),c={},d={};this._bUseCircular||(this._updateFlickInfo(),this._oAnimation.move(this._nX,this._nY,0,this._makeOption({nHalpSize:this._nHalpSize}))),d[a]=b+"px",c[a]=b+"px",this._htWElement.container.css(d);var e=this;jindo.$A(this._htWElement.aPanel).forEach(function(c,d){c.css(a,b+"px"),c.css(e._oAnimation.p("Transform"),"rotate"+e._sRotate+"("+90*d*(e._bUseH?1:-1)+"deg) translateZ("+e._nHalpSize+"px) ")}),this._bUseCircular&&this._restorePanel()},_moveAfterCall:function(a){this._oAnimation.move(this._nX,this._nY,0,this._makeOption({next:a.bNext,nDis:(this._bUseH?this._nX:this._nY)-this._aPos[this.getContentIndex()],nHalpSize:this._nHalpSize,no:this.getContentIndex()}))},_moveWithEvent:function(a,b,c){return c.nHalpSize=this._nHalpSize,jindo.m.Flick.prototype._moveWithEvent.call(this,a,b,c)},_restorePanel:function(a,b){function c(a,b){m._htWElement.aPanel[a].css(i,j+"("+b+"deg) translateZ("+l+"px)")}a=a||this.getElement();var d=this._getIndexByElement(a),e=(this._bUseH?"left":"top",(0>d-1?this._nDefaultPanel-1:d-1)%this._nDefaultPanel),f=((d+1)%this._nDefaultPanel>this._nDefaultPanel-1?0:d+1)%this._nDefaultPanel,g=d%this._nDefaultPanel,h=this.getContentIndex(),i=this._oAnimation.p("Transform"),j="rotate"+this._sRotate,k=90*(this._bUseH?1:-1),l=this._nHalpSize,m=this;this._bUseCircular&&(0==h||"undefined"==typeof b||h==this.option("nTotalContents")-1&&!b?(this._htWElement.container.css(this._oAnimation.p("TransitionDuration"),"").css(i,"translateZ(-"+l+"px) "+j+"("+h*-k+"deg) "),c(e,(h-1)*k),c(g,h*k),c(f,(h+1)*k)):b?c(f,(h+1)*k):c(e,(h-1)*k))},_panelEndAfterCall:function(a){this._bUseCircular?this._restorePanel("",a.next):this._setStyle(a.no)},destroy:function(){jindo.m.Flick.prototype.destroy.apply(this)}}).extend(jindo.m.Flick),jindo.m.Flicking=jindo.$Class({$init:function(a,b){this.option({bHorizontal:!0,nDefaultIndex:0,sClassPrefix:"flick-",sContentClass:"ct",nDuration:100,nFlickThreshold:40,bUseCircular:!1,sAnimation:"slide",nFlickDistanceOffset:null,bAutoResize:!0,nBounceDuration:100,bSetNextPanelPos:!1,bUseCss3d:jindo.m.useCss3d(),bUseTimingFunction:jindo.m.useTimingFunction(),bUseTranslate:!0,bActivateOnload:!0,bUseDiagonalTouch:!1,nDefaultScale:.94,nZIndex:2e3}),this.option(b||{}),this._initVar(a),this.option("bActivateOnload")&&this.activate()
},$static:{_htAnimation:{flip:"_FlipFlicking_","circular-flip":"_FlipFlicking_",alignFlip:"_AlignFlipFlicking_","circular-alignFlip":"_AlignFlipFlicking_","circular-slide":"SlideFlicking",slide:"SlideFlicking","circular-cover":"CoverFlicking",cover:"CoverFlicking"}},_initVar:function(a){this._el=jindo.$(a),this._oFlickingImpl=null,this._isSwipeType=/slide|cover/.test(this.option("sAnimation"))?!0:!1},_createFlicking:function(){var a=this.option("sAnimation");this.option("bUseCircular")&&(a="circular-"+a);try{var b=this.option();b.bActivateOnload=!1,this._oFlickingImpl=new jindo.m[jindo.m.Flicking._htAnimation[a]](this._el,b)}catch(c){console.error("_createFlicking ERROR ! "+c)}},refresh:function(a,b,c){this._oFlickingImpl&&(this._isSwipeType?(this._oFlickingImpl.resize(),this._oFlickingImpl.refresh(a,c,!0)):this._oFlickingImpl.refresh(a,b,c))},getIndexByElement:function(a){return this._oFlickingImpl?this._isSwipeType?this._oFlickingImpl._getIndexByElement(a):this._oFlickingImpl.getIndexByElement(a):-1},getElement:function(){return this._oFlickingImpl?this._oFlickingImpl.getElement():null},getContentElement:function(){return this.getElement()},getContentIndex:function(){return this._oFlickingImpl?this._oFlickingImpl.getContentIndex():null},getNextElement:function(){return this._oFlickingImpl?this._oFlickingImpl.getNextElement():null},getPrevElement:function(){return this._oFlickingImpl?this._oFlickingImpl.getPrevElement():null},getTotalContents:function(){return this._oFlickingImpl?this._oFlickingImpl.getTotalContents():null},getTotalPanels:function(){return this._oFlickingImpl?this._oFlickingImpl.getTotalPanels():null},getPanels:function(){return this._oFlickingImpl?this._oFlickingImpl._htWElement.aPanel:null},getPrevIndex:function(){return this._oFlickingImpl?this._oFlickingImpl.getPrevIndex():null},getNextIndex:function(){return this._oFlickingImpl?this._oFlickingImpl.getNextIndex():null},moveNext:function(a){this.isActivating()&&this._oFlickingImpl&&this._oFlickingImpl.moveNext(a)},movePrev:function(a){this.isActivating()&&this._oFlickingImpl&&this._oFlickingImpl.movePrev(a)},moveTo:function(a,b,c){"undefined"!=typeof a&&a!=this.getContentIndex()&&(0>a||a>=this.getTotalContents()||this._oFlickingImpl&&(this._isSwipeType?this._oFlickingImpl._moveTo(a,{duration:"undefined"==typeof b?0:b,fireEvent:c,fireMoveEvent:!0}):this._oFlickingImpl.moveTo(a,b,c)))},isAnimating:function(){return this._oFlickingImpl?this._isSwipeType?this._oFlickingImpl.isPlaying():this._oFlickingImpl._doFlicking:void 0},_onActivate:function(){this._oFlickingImpl||this._createFlicking(),this._oFlickingImpl&&!this._oFlickingImpl.isActivating()&&(this._oFlickingImpl.activate(),this._attachEvent(),this._isSwipeType||this.refresh(this.getContentIndex(),!0,!1))},_onDeactivate:function(){this._oFlickingImpl.deactivate(),this._detachEvent()},_attachEvent:function(){if(this._oFlickingImpl){var a=this;this._oFlickingImpl.attach({touchStart:function(b){a.fireEvent("touchStart",b)||b.stop()},touchMove:function(b){a.fireEvent("touchMove",b)},touchEnd:function(b){a.fireEvent("touchEnd",b)},beforeFlicking:function(b){a.fireEvent("beforeFlicking",b)||b.stop()},afterFlicking:function(b){a.fireEvent("afterFlicking",b)},beforeMove:function(b){a.fireEvent("beforeMove",b)||b.stop()},move:function(b){a.fireEvent("move",b)},scroll:function(){a.fireEvent("scroll")},beforeRestore:function(b){a.fireEvent("beforeRestore",b)||b.stop()},restore:function(b){a.fireEvent("restore",b)},rotate:function(b){a.fireEvent("rotate",b)}})}},_detachEvent:function(){this._oFlickingImpl&&this._oFlickingImpl.detachAll()},destroy:function(){this.deactivate(),this._el=null,this._oFlickingImpl=null,this._isSwipeType=!1}}).extend(jindo.m.UIComponent),jindo.m.FlipEffect=jindo.$Class({sEffectName:"flip",getCommand:function(a,b){var c=b.sDirection?b.sDirection:"left",d="Y";("up"==c||"down"==c)&&(d="X");var e=b.htTo||{},f=jindo.$Element(b.elFlipFrom?b.elFlipFrom:a),g=b.elFlipTo?jindo.$Element(b.elFlipTo):null,h=this._getCssRotate(this._getCssTransform(f));h[d]=h[d]+("left"==c||"down"==c?-180:180);var i="rotateX("+h.X+"deg) rotateY("+h.Y+"deg)";g&&(g.$value().style[this._sCssPrefix+"Transform"]="rotate"+d+"(0deg)",i="rotate"+d+"(0deg)"),e.transformStyle="preserve-3d",e.transform=i;var j={};return this.getTranslateStyle(e,j),b&&b.elBack&&(b.elBack.style[this._sCssPrefix+"BackfaceVisibility"]="hidden",b.elBack.style[this._sCssPrefix+"Transform"]="rotate"+d+"( 180deg )",f.$value().style[this._sCssPrefix+"BackfaceVisibility"]="hidden"),{sTaskName:this.sEffectName+"-"+c,htStyle:j}},getBeforeCommand:function(a,b){var c=b.sDirection?b.sDirection:"left",d=b.htFrom||{},e="Y";("up"==c||"down"==c)&&(e="X");var f=jindo.$Element(b.elFlipFrom?b.elFlipFrom:a),g=b.elFlipTo?jindo.$Element(b.elFlipTo):null,h=f.$value().parentNode;h.style.webkitPerspective="1200";var i=this._getCssRotate(this._getCssTransform(f)),j="rotateX("+i.X+"deg) rotateY("+i.Y+"deg)";g&&(g.$value().style[this._sCssPrefix+"Transform"]="rotate"+e+"(-180deg)",j="rotate"+e+"(-180deg)"),d.perspective="1200",d.transformStyle="preserve-3d",d.transform=j;var k={};return this.getTranslateStyle(d,k),{htStyle:k}},_getCssRotate:function(a){var b=a,c={X:0,Y:0};if(!b)return c;var d=b.match(/rotateX\((\-?\d*)deg/);return d&&d.length>1&&(c.X=1*d[1],c.X%360==0&&(c.X=0)),d=b.match(/rotateY\((\-?\d*)deg/),d&&d.length>1&&(c.Y=1*d[1],c.Y%360==0&&(c.Y=0)),c},_getCssTransform:function(a){return a.css(this._sCssPrefix+"Transform")||""}}).extend(jindo.m._Effect_),jindo.m.ScrollEnd=jindo.$Class({$init:function(a){this._initVar(),this._setWrapperElement(a),this._attachEvent()},_initVar:function(){this._bIOS=jindo.m.getDeviceInfo().iphone||jindo.m.getDeviceInfo().ipad,this._nType=this._getDetectType(),2===this._nType&&(this._nScrollTimer=-1),this._isTouched=!1,this._isMoved=!1,this._nObserver=null,this._nScrollEndTimer=null,this._nPreLeft=null,this._nPreTop=null,this._bMoveIOS=0},_getDetectType:function(){var a=0;return jindo.m.getDeviceInfo().android?a=parseInt(jindo.m.getDeviceInfo().version,10)>=3?2:1:jindo.m.getDeviceInfo().win?parseInt(jindo.m.getDeviceInfo().version,10)>=8&&(a=2):this._bIOS&&parseInt(jindo.m.getDeviceInfo().version,10)>=8&&(a=2),a},_setWrapperElement:function(){this._htElement={},this._htElement.body=document.body},_attachEvent:function(){this._htEvent={},this._htEvent.event_scroll={ref:jindo.$Fn(this._onScroll,this).attach(window,"scroll"),el:window},0==this._nType&&this._bIOS&&parseInt(jindo.m.getDeviceInfo().version,10)<=7&&(this._htEvent.event_touchmove={ref:jindo.$Fn(this._onMoveForIOS,this).attach(this._htElement.body,"touchmove"),el:this._htElement.body}),1==this._nType&&(this._htEvent.event_touchstart={ref:jindo.$Fn(this._onStartForAndroid,this).attach(this._htElement.body,"touchstart"),el:this._htElement.body},this._htEvent.event_touchmove={ref:jindo.$Fn(this._onMoveForAndroid,this).attach(this._htElement.body,"touchmove"),el:this._htElement.body},this._htEvent.event_touchend={ref:jindo.$Fn(this._onEndForAndroid,this).attach(this._htElement.body,"touchend"),el:this._htElement.body})},_onMoveForIOS:function(){this._bMoveIOS=0},_detachEvent:function(){for(var a in this._htEvent){var b=this._htEvent[a];b.ref.detach(b.el,a.substring(a.lastIndexOf("_")))}},_startObserver:function(){var a=this;this._stopObserver(),this._nObserver=setInterval(function(){a._observe()},100)},_observe:function(){this._isTouched||this._nPreTop!==window.pageYOffset||this._nPreLeft!==window.pageXOffset?(this._nPreTop=window.pageYOffset,this._nPreLeft=window.pageXOffset):(this._stopObserver(),this._fireEventScrollEnd())},_stopObserver:function(){clearInterval(this._nObserver),this._nObserver=null},_onScroll:function(){switch(this._nType){case 0:if(this._bIOS&&this._bMoveIOS>0)return!1;this._fireEventScrollEnd(),this._bMoveIOS++;break;case 1:this._startObserver();break;case 2:var a=this;clearTimeout(this._nScrollTimer),this._nScrollTimer=setTimeout(function(){a._fireEventScrollEnd()},350)}},_onStartForAndroid:function(){this._isTouched=!0,this._isMoved=!1,this._nPreTop=null,this._nPreLeft=null},_onMoveForAndroid:function(){this._isMoved=!0},_onEndForAndroid:function(){this._isTouched=!1,this._isMoved&&this._startObserver()},_fireEventScrollEnd:function(){this.fireEvent("scrollEnd",{nTop:window.pageYOffset,nLeft:window.pageXOffset})},_fireEventScrollEndForAndroid:function(){var a=this;clearTimeout(this._nScrollEndTimer),this._nScrollEndTimer=setTimeout(function(){a._fireEventScrollEnd()},500)},destroy:function(){this._detachEvent(),this._nType=-1,this._isTouched=null,this._isMoved=null,this._nObserver=null,this._nPreLeft=null,this._nPreTop=null}}).extend(jindo.m.Component),jindo.m.IndexScroll=jindo.$Class({$init:function(){this.option("bUseTimingFunction",!1),this instanceof jindo.m.IndexScroll&&this.option("bActivateOnload")&&this.activate()},_initVar:function(){this.$super._initVar(),this._aIndexInfo=null,this._bUseIndex=!0,this._sEvent=(jindo.m.getDeviceInfo().iphone||jindo.m.getDeviceInfo().ipad)&&parseInt(jindo.m.getDeviceInfo().version,10)<5?"click":"touchstart"},_setWrapperElement:function(a){this.$super._setWrapperElement(a),this._createFixedIndex(),this._createIndexView()},_refreshIndexInfo:function(){for(var a=this._htWElement.scroller.queryAll("."+this.option("sClassPrefix")+"index"),b=[],c=this._htWElement.wrapper.offset().top,d=0,e=a.length;e>d;d++)b.push(this._getIndexInfo(jindo.$Element(a[d]),c));for(d=0,e=b.length-1;e>d;d++)b[d].nNextTop=b[d+1].nTop,b[d].nLast=b[d+1].nTop-b[d].nHeight;this._aIndexInfo=b,this.option("bUseIndexView")&&this._refreshIndexView()},_createIndexView:function(){var a=this.option("sClassPrefix")+"_indexview__";this._htWElement.indexview=jindo.$Element(a),this._htWElement.indexview||(this._htWElement.indexview=jindo.$Element("<ul id='"+a+"' class='"+this.option("sClassPrefix")+"indexview' style='position:absolute;z-index:2002;-"+jindo.m.getCssPrefix()+"-tap-highlight-color:transparent;'>"),this._htWElement.indexview.appendTo(document.body))},showIndexView:function(){this.option("bUseIndexView")&&this._htWElement.indexview&&this._htWElement.indexview.show()},hideIndexView:function(){this.option("bUseIndexView")&&this._htWElement.indexview&&this._htWElement.indexview.hide()},_refreshIndexView:function(){for(var a,b,c,d,e=this._htWElement.wrapper.offset(),f="",g=0,h=this._aIndexInfo.length;h>g;g++)b=this._aIndexInfo[g].wel,a=b.attr("data-text")?b.attr("data-text"):b.text(),f+="<li class='"+this.option("sClassPrefix")+"indexview_item' data-index='"+g+"'>"+a+"</li>";this._htWElement.indexview.html(f),c=e.top+this._htWElement.wrapper.height()/2,d=e.left+this._htWElement.wrapper.width(),this._htWElement.indexview.css({top:c-this._htWElement.indexview.height()/2+"px",left:d-this._htWElement.indexview.width()-10+"px"})},_attachEvent:function(){this.$super._attachEvent(),this._htEvent.position=jindo.$Fn(this._onPosition,this).bind(),this.attach("position",this._htEvent.position),this.option("bUseIndexView")&&(this._htEvent.indexview=jindo.$Fn(this._onIndexView,this).attach(this._htWElement.indexview,this._sEvent))},_detachEvent:function(){this.detach("position",this._htEvent.position),this.option("bUseIndexView")&&this._htEvent.indexview.detach(this._htWElement.indexview,this._sEvent)},_onIndexView:function(a){if("LI"==a.element.tagName){var b=jindo.$Element(a.element),c=b.attr("data-index");this.scrollTo(0,this._aIndexInfo[c].nTop)}},_onPosition:function(a){this._bUseIndex&&this._setPosFixedIndex(-a.nTop)},_getIndexInfo:function(a,b){var c={};return c.wel=a,c.nTop=a.offset().top-b,c.nHeight=a.height(),c.nBottom=c.nTop+c.nHeight,c},_setPosFixedIndex:function(a){var b,c=this._nBeforeIndex,d=this._getCurrentIdx(a),e=this._aIndexInfo[d];-1==d?(this._htWElement.index_top.hide(),this._htWElement.index_bottom.hide()):e.nLast&&e.nLast<=a&&a<e.nNextTop?(b=e.nLast-a,c!=d&&this._htWElement.index_top.html(e.wel.outerHTML()),this._htWElement.index_top.css(this.sCssPrefix+"Transform","translate"+this.sTranOpen+"0, "+b+"px"+this.sTranEnd).show(),c!=d&&(this._htWElement.index_bottom.html(this._aIndexInfo[d+1].wel.outerHTML()).show(),this._bShowIndex=!0),this._htWElement.index_bottom.css(this.sCssPrefix+"Transform","translate"+this.sTranOpen+"0, "+(b+e.nHeight)+"px"+this.sTranEnd)):(c!=d||this._bShowIndex)&&(this._htWElement.index_top.html(e.wel.outerHTML()).css(this.sCssPrefix+"Transform","translate"+this.sTranOpen+"0, 0"+this.sTranEnd).css("display","block"),this._htWElement.index_bottom.hide(),this._bShowIndex=!1),this._nBeforeIndex=d},hideIndex:function(){this._bUseIndex=!1,this._htWElement.index_top.hide(),this._htWElement.index_bottom.hide()},showIndex:function(){this._bUseIndex=!0,this._setPosFixedIndex(this._nTop),this._htWElement.index_top.show()},_getCurrentIdx:function(a){for(var b=0,c=this._aIndexInfo.length;c>b&&!(this._aIndexInfo[b].nTop>a);b++);return b-1},_createFixedIndex:function(){var a="position:absolute;width:100%;top:0;z-index:2001; display:none";this._htWElement.index_top=jindo.$Element(this._htWElement.wrapper.query("._scroller_index_scroll_top_")),this._htWElement.index_top||(this._htWElement.index_top=jindo.$Element("<div style='"+a+"' class='_scroller_index_scroll_top_'></div>"),this._htWElement.wrapper.append(this._htWElement.index_top)),this._htWElement.index_bottom=jindo.$Element(this._htWElement.wrapper.query("._scroller_index_scroll_bottom_")),this._htWElement.index_bottom||(this._htWElement.index_bottom=jindo.$Element("<div style='"+a+"' class='_scroller_index_scroll_bottom_'></div>"),this._htWElement.wrapper.append(this._htWElement.index_bottom))},refresh:function(){this.option("bUsePullDown")&&this.option("bUsePullDown",!1),this.option("bUsePullUp")&&this.option("bUsePullUp",!1),this.option("bUseHScroll")&&this.option("bUseHScroll",!1),this.option("bUseCss3d",!1),this.$super.refresh(),this._refreshIndexInfo()}}).extend(jindo.m.Scroll),jindo.m.InfiniteCard=jindo.$Class({$init:function(a,b){this.option({nCardCount:10,sClassName:"wrp_cds",sExcludeClass:"",nExpandSize:0,bUseCss3d:jindo.m.useCss3d(),sSizePrefix:"",bUseDebug:!1,bUseRecycle:!0,nCardWidth:0,bActivateOnload:!0}),this.option(b||{}),this._initVar(),this._setWrapperElement(a),this._bInfinite?this._setInfiniteDom():this._setDom(),this.resizeView(),this.option("bActivateOnload")&&this.activate()},$static:{FOR_SIZE_CLASS:"__infinite_for_size__"},_initVar:function(){this._aData=[],this._aCards=[],this._htSelected={},this._welTmpDf=jindo.$Element(document.createDocumentFragment()),this._htCursor={min:-1,visibleMin:-1,max:-1,visibleMax:-1},this._htBeforeCursor={min:-2,max:-2},this._htSizeInfo={height:-1,width:-1,cardWidth:0,viewTop:0,curPos:0},this._sKey=jindo.m.isVertical()?"v":"h",this._isPrepareMode=""!=this.option("sSizePrefix"),this._sExcludeClass=this.option("sExcludeClass"),this._hasExcludeClass=""!=this._sExcludeClass,this._bInfinite=this.option("bUseRecycle"),this._bFixedWidth=0!=this.option("nCardWidth"),this._hasOffsetBug=jindo.m.hasOffsetBug(),this._htHeight={v:0,h:0},this._htCache={v:-1,h:-1,vPos:-1,hPos:-1},this._nRepaintTimer=-1,this._nSizeTimer=-1,this._isRepainting=!1,this._nUnpreparedCount=0,this._fnUnPreparedHandler=jindo.$Fn(this._onCheckPrepared,this).bind()},_setWrapperElement:function(a){this._htWElement={},this._htWElement.view=jindo.$Element(a).css("position","relative"),this._htWElement.size=null,this._htWElement.window=window},_attachEvent:function(){this._htEvent={},this._htEvent.updater=jindo.$Fn(this._onUpdate,this),this._htEvent.updater.attach(this._htWElement.window,"scroll")},_detachEvent:function(){this._htEvent.updater.detach(this._htWElement.window,"scroll")},setHeight:function(a,b){var c=this._aData[a],d={nVHeight:c.vHeight,nHHeight:c.hHeight,bVertical:"v"==this._sKey},e={v:-1,h:-1};return"number"==typeof b?e[this._sKey]=b:"object"==typeof b&&void 0==b.length&&("number"==typeof b.nVHeight&&(e.v=b.nVHeight),"number"==typeof b.nHHeight&&(e.h=b.nHHeight)),c.vHeight!=e.v&&-1!=e.v&&(c.vHeight=e.v,this._htCache.vPos=Math.min.call(null,this._htCache.vPos,a)),c.hHeight!=e.h&&-1!=e.h&&(c.hHeight=e.h,this._htCache.hPos=Math.min.call(null,this._htCache.hPos,a)),d},setContent:function(a,b,c){var d="object"==typeof c?jindo.$Jindo.mixin({},c):{},e=this._aData[a],f=e.data,g=this.getElement(a);return e.data=b instanceof jindo.$Element?b.html():b,d.bRedraw&&g&&g.html(e.data),d.bModifiedSize&&(e.vHeight=-1,this._htCache.vPos=Math.min.call(null,this._htCache.vPos,a-1),this._htCache.v=Math.min.call(null,this._htCache.v,a-1),e.hHeight=-1,this._htCache.hPos=Math.min.call(null,this._htCache.hPos,a-1),this._htCache.h=Math.min.call(null,this._htCache.h,a-1)),f},get:function(a,b){if(a>=0&&a<this._aData.length){var c=this._aData[a];return b?c:{index:a,data:c.data,height:c[this._sKey+"Height"],x:c[this._sKey+"X"],y:c[this._sKey+"Y"],offsetX:c[this._sKey+"X"],offsetY:c[this._sKey+"Y"]+this._htSizeInfo.viewTop}}return null},getColumnCount:function(){if(this._htSizeInfo.cardWidth=this._getCardWidth(),0==this._htSizeInfo.cardWidth)return console.warn("카드의 사이즈를 정상적으로 구할수 없습니다. sClassName 옵션을 잘못 지정하였거나, Element의 visible이 false인 경우 카드의 크기를 정상적으로 구할수 없습니다."),1;var a=this._htSizeInfo.width/this._htSizeInfo.cardWidth;return this._bFixedWidth?parseInt(a):Math.round(a)},length:function(){return this._aData.length},getIndex:function(a){a=jindo.$Element(a);var b,c=this.option("sClassName");if(a.hasClass(c))b=a;else{var d=a.parent(function(a){return a.hasClass(c)});d=d.length>0?d[0]:null,d&&(b=d)}return b?parseInt(b.attr("index"),10):-1},getElement:function(a){var b,c,d=this._aCards.length;if("undefined"==typeof a){var e,f=[];for(b=0;d>b;b++)c=this._aCards[b],e=c.attr("index"),-1!=e&&f.push({wel:c,nIndex:e,bVisible:this._isVisible(e)});return f}for(b=0;d>b;b++)if(c=this._aCards[b],a==c.attr("index"))return c;return null},append:function(a,b){if(!this._isRepainting){var c={};"number"==typeof b||"string"==typeof b?c.nHeight=b:"object"==typeof b&&(c=jindo.$Jindo.mixin(c,b));var d={data:a instanceof jindo.$Element?a.html():a,vHeight:-1,hHeight:-1,vX:-1,vY:-1,hX:-1,hY:-1,isExclude:"undefined"==typeof c.isExclude?!1:c.isExclude};if("undefined"!=typeof c.nHeight){var e=parseInt(c.nHeight,10);this._bFixedWidth?d.vHeight=d.hHeight=e:d[this._sKey+"Height"]=e}this._aData.push(d)}},prepend:function(a,b){if(!this._isRepainting){var c={};"number"==typeof b||"string"==typeof b?c.nHeight=b:"object"==typeof b&&(c=jindo.$Jindo.mixin(c,b));var d={data:a instanceof jindo.$Element?a.html():a,vHeight:-1,hHeight:-1,vX:-1,vY:-1,hX:-1,hY:-1,isExclude:"undefined"==typeof c.isExclude?!1:c.isExclude};if("undefined"!=c.nHeight){var e=parseInt(c.nHeight,10);this._bFixedWidth?d.vHeight=d.hHeight=e:d[this._sKey+"Height"]=e}else this._htCache[this._sKey]=-1;this._aData.unshift(d),this._aCards.forEach(function(a){a.attr("index",parseInt(a.attr("index"),10)+1)},this),this._htCache[this._sKey+"Pos"]=-1,this._htSelected={}}},_getUnprepared:function(a){for(var b,c,d,e,f,g=this.option("sSizePrefix")+"width",h=this.option("sSizePrefix")+"height",i=a.queryAll(this._isPrepareMode?"["+g+"]":"img"),j=[],k=0,l=i.length;l>k;k++)f=jindo.$Element(i[k]),this._isPrepareMode?(b=f.attr(g),c=f.attr(h),null!=b&&null!=c?""==b||""==c?(this.option("bUseDebug")&&console.error(f.attr("id"),"의 사이즈 정보가 존재하지 않습니다"),j.push(f)):(e=e||f._element.clientWidth,d=Math.ceil(e*c/b),f._element.style.height=d+"px",f._element.style.width=e+"px"):j.push(f)):!f._element.complete&&j.push(f);return j.length>0?j:null},_releaseFixedSize:function(a){a.style.cssText&&(a.style.width&&-1==a.style.width.indexOf("%")&&(a.style.width=null),a.style.height&&-1==a.style.height.indexOf("%")&&(a.style.height=null))},_releaseChildFixedSize:function(a){jindo.$A(a.queryAll("["+this.option("sSizePrefix")+"width]")).forEach(function(a){this._releaseFixedSize(jindo.$Element(a)._element)},this)},_getCardSize:function(a,b,c){var d=!1,e=this.getElement(a);e?d=!0:(e=this._htWElement.size,e.html(b));var f=this._getUnprepared(e);if(f){cancelAnimationFrame(this._nSizeTimer);var g=this,h=jindo.$A(f);!function i(){h=h.filter(function(a){return a=jindo.$Element(a),a._element.complete?!1:!0}),0==h.length()?(c(e.height()),e=null):g._nSizeTimer=requestAnimationFrame(i)}()}else c(e.height()),d&&this._isPrepareMode&&this._releaseChildFixedSize(e),e=null},_createDomForSize:function(){var a="position:absolute;opacity:0;left:-200%;top:0;",b=jindo.m.getCssPrefix();this._bFixedWidth&&(a+="width:"+this._getCardWidth()+"px;"),this._hasOffsetBug||(a+="-"+b+"-transition-property:-webkit-transform;",a+="-"+b+"-transform:"+jindo.m._getTranslate(0,0,this.option("bUseCss3d"))),this._htWElement.size=jindo.$Element(this._htWElement.view.query("."+jindo.m.InfiniteCard.FOR_SIZE_CLASS)||jindo.$Element("<div class='"+this.option("sClassName")+" "+jindo.m.InfiniteCard.FOR_SIZE_CLASS+"'style='"+a+"'></div>")),this._htWElement.view.append(this._htWElement.size)},_createDom:function(a,b){if(a>=b)return null;var c=this.option("sClassName"),d="<div class='"+c+"' style='position:absolute;top:0px;",e=jindo.m.getCssPrefix();this._bFixedWidth&&(d+="width:"+this._getCardWidth()+"px;"),this._hasOffsetBug?d+="left:-200%;":(d+="left:0px;",d+="-"+e+"-transition-property:-webkit-transform;",d+="-"+e+"-transform:"+jindo.m._getTranslate("-200%",0,this.option("bUseCss3d"))),d+="' index='-1'></div>";for(var f,g=a,h=this._aData.length;b>g;g++)f=jindo.$Element(d),this._welTmpDf.append(f),h>g&&f.attr("index",g).html(this._aData[g].data),this._aCards.push(f);return this._htWElement.view.append(this._welTmpDf),{start:a,end:g-1}},_setDom:function(){var a=jindo.$A(this._htWElement.view.child());a.forEach(function(a,b){this._aCards.push(a.attr("index",b)),this._bFixedWidth&&a.width(this._getCardWidth()),this.append(a)},this)},_setInfiniteDom:function(){var a,b=[],c=parseInt(this.option("nCardCount"),10),d=jindo.$A(this._htWElement.view.child());d.forEach(function(d,e){a=this._hasExcludeClass&&d.hasClass(this._sExcludeClass),c>e?this._aCards.push(d.attr("index",e)):b.push(d),this.append(d,{isExclude:a}),this._bFixedWidth&&d.width(this._getCardWidth())},this),this._createDom(this._aData.length,c),b.length>0&&jindo.$A(b).forEach(function(a){a.leave()}),this._createDomForSize()},_drawGrid:function(a){a=a||this._p(!1),this._calculate(this._htCache[a.sKey]+1,this._getXPos(),Math.min(this._aCards.length,this._aData.length),a,!0),this._draw(a),this._isPrepareMode&&this._releaseChildFixedSize(this._htWElement.view),this._fireRepaintEvent({bUpdate:!1,bRotate:a.bRotate})},_onCheckPrepared:function(){this._nUnpreparedCount--,!this._isWaiting&&this._nUnpreparedCount<=0&&(this._detachPreparedEvent(),this._drawGrid())},_attachPreparedEvent:function(a){this._nUnpreparedCount=a,this._htWElement.view._element.addEventListener("load",this._fnUnPreparedHandler,!0),this._htWElement.view._element.addEventListener("error",this._fnUnPreparedHandler,!0)},_detachPreparedEvent:function(){this._htWElement.view._element.removeEventListener("load",this._fnUnPreparedHandler,!0),this._htWElement.view._element.removeEventListener("error",this._fnUnPreparedHandler,!0),this._nUnpreparedCount=0},_initRepaint:function(){this._htWElement.view.css("visibility","hidden");var a=(this._repaintForRotate(),this._getUnprepared(this._htWElement.view));this._htWElement.view.css("visibility",""),a?this._attachPreparedEvent(a.length):this._drawGrid()},_calculate:function(a,b,c,d,e){for(var f,g,h=this._getYPos(b,a),i=a;c>i;i++)g=this._aData[i],f=h.indexOf(Math.min.apply(null,h)),g[d.sX]=b[f],g[d.sY]=h[f],e&&((this._bInfinite||!this._bInfinite&&-1==g[d.sHeight])&&(g[d.sHeight]=this._aCards[i].height()),this._bFixedWidth&&(g.vHeight=g.hHeight=g[d.sHeight])),h[f]+=g[d.sHeight];this._setCachePos(d.sPos,h,c),e&&this._setCacheSize(c)},_draw:function(a){for(var b,c=0,d=Math.min(this._aCards.length,this._aData.length);d>c;c++)b=this._aData[c],this._drawCard(this._aCards[c],b[a.sX],b[a.sY]),this._htSelected[c]=!0;this._htCursor.min=this._htBeforeCursor.min=this._htCursor.visibleMin=0,this._htCursor.max=this._htBeforeCursor.max=this._htCursor.visibleMax=d-1},_drawCard:function(a,b,c){var d={position:"absolute",left:"0px",top:"0px"};this._hasOffsetBug?(d.left=b+"px",d.top=c+"px"):(d[jindo.m._toPrefixStr("transitionProperty")]="-webkit-transform",d[jindo.m._toPrefixStr("transform")]=jindo.m._getTranslate(b+"px",c+"px",this.option("bUseCss3d"))),a.css(d)},_getRangeData:function(a,b){for(var c,d=this._sKey+"Y",e=this._sKey+"Height",f=this._aData.length,g={min:0,max:f-1},h=0;f>h;h++)if(c=this._aData[h],c[d]+c[e]>=a){g.min=h;break}if("undefined"!=typeof b)for(h=g.min;f>h&&(c=this._aData[h],c[d]<=b);h++)g.max=h;return g},_updateRange:function(a){"undefined"==typeof a&&(this._htSizeInfo.curTop=a=document.body.scrollTop);var b=a-this._htSizeInfo.viewTop;if(this._htSizeInfo.curPos==b&&0!=jindo.$H(this._htSelected).keys().length)return!1;var c=void 0==this._htSizeInfo.curPos?!0:this._htSizeInfo.curPos<=b;this._htSizeInfo.curPos=b;var d=this.option("nExpandSize"),e=b-d,f=(e>0?e:0)+this._htSizeInfo.height+2*d,g=this._getRangeData(e,f),h=this._getRangeData(b,b+this._htSizeInfo.height),i=g.min,j=g.max,k=!1;this._htCursor.visibleMin=h.min,this._htCursor.visibleMax=h.max;var l=this._correctRange(i,j,this._htCursor.visibleMin,this._htCursor.visibleMax,c);return(this._htCursor.min!=l.nMin||this._htCursor.max!=l.nMax)&&(this._htBeforeCursor.min=this._htCursor.min,this._htBeforeCursor.max=this._htCursor.max,this._htCursor.min=l.nMin,this._htCursor.max=l.nMax,k=!0),k||0==jindo.$H(this._htSelected).keys().length},_correctRange:function(a,b,c,d,e){var f=this.option("nCardCount"),g=f-(b-a+1),h=[];this._hasExcludeClass&&this._aCards.forEach(function(a){a.hasClass(this._sExcludeClass)&&h.push(a)},this);var i,j,k=h.length,l=this._aData.length-1;if(0>g)b+=g,this.option("bUseDebug")&&0>g&&console.warn("지정한 범위(nExpandSize)에 맞게 카드를 배치하기 위해서는 ",-g,"개의 카드가 더 필요합니다.\nnCardCount값을 늘려주시기거나 nExpandSize를 줄여주시기 바랍니다.");else{for(i=0;g>i;i++)e?l>b?b++:a--:a>0?a--:b++;a=0>a?0:a,b=b>l?l:b}for(i=0;k>i;i++)j=jindo.$Element(h[i]).attr("index"),(a>j||j>b)&&(e?a++:b--);if(a>c||d>b){var m=b-a;a=c,b=a+m,a=0>a?0:a,b=b>l?l:b}return{nMin:a,nMax:b}},_removeWel:function(a){delete this._htSelected[a];var b=this.getElement(a);return this._isExcludeWel(b)?null:(b.attr("index",-1),b)},_isExcludeWel:function(a){return this._hasExcludeClass?a.hasClass(this._sExcludeClass):!1},getVisibleIndex:function(){return{min:this._htCursor.visibleMin,max:this._htCursor.visibleMax}},_getWel:function(a){var b=this.getElement(a),c=!1;return b?c=!0:(b=this.getElement(-1),b||console.warn("index가 -1인 엘리먼트가 없네요",a)),{wel:b,isReuse:c}},_onUpdate:function(){this.update()},update:function(a){if(this.option("bUseDebug")&&console.time(" - update time"),this._bInfinite&&!this._isRepainting){var b=0==jindo.$H(this._htSelected).keys().length;if(this._updateRange(a)){for(var c,d=0,e=this._aCards.length;e>d;d++)c=this._aCards[d].attr("index"),-1!=c&&(this._htCursor.min>c||this._htCursor.max<c)&&this._removeWel(c);this._htWElement.view.css("visibility","hidden");for(var f=this._htCursor.min;f<=this._htCursor.max;f++)this._htSelected[f]||this._setPos(f,b);this._htWElement.view.css("visibility",""),"undefined"!=typeof this._htEventHandler.update&&this.fireEvent("update",{})}this.option("bUseDebug")&&console.timeEnd(" - update time")}},_setPos:function(a,b){var c=this._getWel(a),d=this._aData[a],e={wel:c.wel,nIndex:a,bRepaint:b,bReuse:c.isReuse,bVisible:this._isVisible(a),nX:d[this._sKey+"X"],nY:d[this._sKey+"Y"]};if(c.wel){if(c.wel.attr("index",a),this._hasExcludeClass&&d.isExclude&&c.wel.addClass(this._sExcludeClass),!c.isReuse){var f={wel:e.wel,nIndex:a,bRepaint:b,bVisible:e.bVisible,sData:d.data,nX:e.nX,nY:e.nY};this.fireEvent("beforeDraw",jindo.$Jindo.mixin({},f))&&(c.wel.html(d.data),this.fireEvent("draw",jindo.$Jindo.mixin({},f)))}this.fireEvent("position",e),(b||d.isExclude||!c.isReuse)&&this._drawCard(c.wel,e.nX,e.nY),this._htSelected[a]=!0}},_isVisible:function(a){return this._htCursor.visibleMin<=a&&this._htCursor.visibleMax>=a},_fireRepaintEvent:function(a){a=a||{},a.nViewHeight=this._htHeight[this._sKey],a.bRotate="undefined"==typeof a.bRotate?!1:a.bRotate,a.bRotate=-1!=this._htCursor.visibleMin&&a.bRotate,a.bUpdate="undefined"==typeof a.bUpdate?!0:a.bUpdate,!this._bInfinite&&(a.bUpdate=!1),a.bCached=!!a.bCached,a.bUseAdjustPosition&&-1!=this._htCursor.visibleMin&&window.scrollTo(0,this._aData[this._htCursor.visibleMin][this._sKey+"Y"]+this._htSizeInfo.viewTop),this._isRepainting=!1,this._htSelected={},this._htWElement.view._element.style.height=a.nViewHeight+"px",this._bFixedWidth&&this._htWElement.view.css("marginLeft",this._htSizeInfo.width%(this._getCardWidth()*this.getColumnCount())/2+"px"),this.fireEvent("repaint",a)&&a.bUpdate&&this.update(),this.option("bUseDebug")&&console.timeEnd(" - repaint time")},isRepainting:function(){return this._isRepainting},resizeView:function(){this._bFixedWidth&&this._htWElement.view.css({marginLeft:0,marginRight:0}),this._htSizeInfo={height:window.innerHeight,width:this._htWElement.view.width()+parseInt(this._htWElement.view.css("marginLeft"),10)+parseInt(this._htWElement.view.css("marginRight"),10),cardWidth:this._getCardWidth(!0),viewTop:this._htWElement.view.offset().top,curTop:document.body.scrollTop},this._htSizeInfo.curPos=this._htSizeInfo.curTop-this._htSizeInfo.viewTop},_getCardWidth:function(a){return!a&&this._htSizeInfo&&this._htSizeInfo.cardWidth?this._htSizeInfo.cardWidth:this._bFixedWidth?this.option("nCardWidth"):(this._htSizeInfo.cardWidth=this._bInfinite?this._htWElement.size.width():this._aCards.length>0?this._aCards[0].width():0,this._htSizeInfo.cardWidth)},getSizeInfo:function(){return{nWidth:this._htSizeInfo.width,nHeight:this._htSizeInfo.height,nCardWidth:this._htSizeInfo.cardWidth,nScrollTop:this._htSizeInfo.curTop,nViewHeight:this._htHeight[this._sKey]}},_setCachePos:function(a,b,c){this._htHeight[this._sKey]=Math.max.apply(null,b),this._htCache[a]=c-1},_setCacheSize:function(a){this._bFixedWidth?this._htCache.v=this._htCache.h=a-1:this._htCache[this._sKey]=a-1},_recalculateAsync:function(a,b,c,d,e){var f,g,h=!0,i=this,j=a,k=this._getYPos(b,a);cancelAnimationFrame(i._nRepaintTimer),this.option("bUseDebug")&&console.debug("[repaint-"+this._sKey+"] 사이즈, 위치 다 재계산 : ",a,"~",c-1,"(",c-a,")"),function l(){if(c>j){if(h)if(h=!1,g=i._aData[j],f=k.indexOf(Math.min.apply(null,k)),e.bForce||-1==g[d.sHeight])i._getCardSize(j,g.data,function(a){i._bFixedWidth?g.vHeight=g.hHeight=a:g[d.sHeight]=a,g[d.sX]=b[f],g[d.sY]=k[f],k[f]+=g[d.sHeight],h=!0,j++});else{for(;c>j&&-1!=g[d.sHeight];j++,f=k.indexOf(Math.min.apply(null,k)),g=i._aData[j])g[d.sX]=b[f],g[d.sY]=k[f],k[f]+=g[d.sHeight];h=!0}i._nRepaintTimer=requestAnimationFrame(l)}else i._setCachePos(d.sPos,k,c),i._setCacheSize(c),i._fireRepaintEvent({bRotate:d.bRotate,bAdjustPosition:e.bAdjustPosition,bCached:!1})}()},_recalculateSync:function(a,b,c,d,e){this.option("bUseDebug")&&console.debug("[repaint-"+this._sKey+" prepared mode] 사이즈, 위치 다 재계산 : ",a,"~",c-1,"(",c-a,")");for(var f,g,h=a,i=this._getYPos(b,a),j=this;c>h;h++)if(f=this._aData[h],g=i.indexOf(Math.min.apply(null,i)),e.bForce||-1==f[d.sHeight])this._getCardSize(h,f.data,function(a){j._bFixedWidth?f.vHeight=f.hHeight=a:f[d.sHeight]=a,f[d.sX]=b[g],f[d.sY]=i[g],i[g]+=f[d.sHeight]});else for(;c>h;h++,g=i.indexOf(Math.min.apply(null,i)),f=this._aData[h]){if(-1==f[d.sHeight]){h--;break}f[d.sX]=b[g],f[d.sY]=i[g],i[g]+=f[d.sHeight]}this._setCachePos(d.sPos,i,c),this._setCacheSize(c),this._fireRepaintEvent({bRotate:d.bRotate,bAdjustPosition:e.bAdjustPosition,bCached:!1})},_recalculateNoInfinite:function(a,b,c){this.option("bUseDebug")&&console.debug("[repaint-"+this._sKey+"] 사이즈, 위치 다 재계산 [no infinite mode] : ",a,"~",b,"(",b-a+1,")");for(var d,e=a,f=[],g=b;g>e;e++)d=this._getUnprepared(this._aCards[e]),d&&(f=f.concat(d));0!=f.length?this._attachPreparedEvent(f.length):this._drawGrid(c)},repaint:function(){this._isRepainting||(this._isRepainting=!0,this._initRepaint(),this.repaint=function(a){if(!this._isRepainting){this._isRepainting=!0,this.option("bUseDebug")&&console.time(" - repaint time");
var b=this._repaintForRotate(),c={};"object"==typeof a&&(c=jindo.$Jindo.mixin(c,a)),c.bAdjustPosition="undefined"==typeof c.bAdjustPosition?b.bRotate:c.bAdjustPosition,c.bSync="undefined"==typeof c.bSync?b.bRotate:c.bSync,this._bInfinite?this._repaintForInfinite(c,b):this._repaintForNoInfinite(c,b)}})},_repaintForNoInfinite:function(a,b){var c,d=this._createDom(this._aCards.length,this._aData.length);if(d)this._recalculateNoInfinite(d.start,d.end,b);else{var e=this._aData.length;if(this._htCache[b.sKey]==e-1){var f=!0;this._htCache[b.sPos]==e-1?this.option("bUseDebug")&&console.debug("[repaint-"+b.sKey+"] 모두 캐싱되어있음"):(c=this._htCache[b.sPos]+1,this.option("bUseDebug")&&console.debug("[repaint-"+b.sKey+"] 위치만 재계산 : ",c,"~",e-1,"(",e-c,")"),this._calculate(c,this._getXPos(),e,b),f=!1),this._draw(b),this._fireRepaintEvent({bRotate:b.bRotate,bCached:f})}else c=this._htCache[b.sKey]+1,this._recalculateNoInfinite(this._htCache[b.sKey]+1,e,b)}},_repaintForInfinite:function(a,b){a.bForce&&(this._htCache[b.sKey]=-1,this._htCache[b.sPos]=-1,this.option("bUseDebug")&&console.debug("-- repaint 강제 호출 --"));var c,d=this._getXPos(),e=this._aData.length;if(this._htCache[b.sKey]==e-1){var f=!0;this._htCache[b.sPos]==e-1?this.option("bUseDebug")&&console.debug("[repaint-"+b.sKey+"] 모두 캐싱되어있음"):(c=this._htCache[b.sPos]+1,this.option("bUseDebug")&&console.debug("[repaint-"+b.sKey+"] 위치만 재계산 : ",c,"~",e-1,"(",e-c,")"),this._calculate(c,d,e,b),f=!1),this._fireRepaintEvent({bRotate:b.bRotate,bAdjustPosition:a.bAdjustPosition,bCached:f})}else{c=this._htCache[b.sKey]+1;var g,h,i=0,j=c,k=this._aCards.length;if(!b.bRotate&&k>i&&e>j){for(this._htWElement.view.css("visibility","hidden");k>i&&e>j;)g=this._aCards[i].attr("index"),(-1==g||this._htCursor.visibleMin>g)&&(h=this._aCards[i],h&&!this._isExcludeWel(h)&&(h.html(this._aData[j].data).attr("index",j),j++)),i++;this._htWElement.view.css("visibility","")}this._isPrepareMode||a.bSync?this._recalculateSync(c,d,e,b,a):this._recalculateAsync(c,d,e,b,a)}},_p:function(a){return{bRotate:a,sKey:this._sKey,sX:this._sKey+"X",sY:this._sKey+"Y",sHeight:this._sKey+"Height",sPos:this._sKey+"Pos"}},_repaintForRotate:function(){var a=jindo.m.isVertical()?"v":"h";return this._sKey==a?this._p(!1):(this._sKey=a,this.resizeView(),this._p(!0))},_onActivate:function(){this._bInfinite&&this._attachEvent()},_onDeactivate:function(){this._bInfinite&&this._detachEvent()},_getXPos:function(){var a=this.getColumnCount();if(a>1){for(var b=[],c=0,d=0;a>d;d++)c+=0==d?0:this._htSizeInfo.cardWidth,b.push(c);return b}return[0]},_getYPos:function(a,b){for(var c,d,e,f=Array.apply(null,Array(a.length)).map(function(){return 0}),g=a.concat([]),h=0,i=0,j=a.length;j>i&&(c=b-(h+1),c>=0);h++)d=this._aData[c],e=g.indexOf(d[this._sKey+"X"]),-1!=e&&(g[e]=-1,f[e]=d[this._sKey+"Y"]+d[this._sKey+"Height"],i++);return f},isCached:function(a){var b=this._aData.length;return a?this._htCache[this._sKey]==b-1:this._htCache[this._sKey]==b-1&&this._htCache[this._sKey+"Pos"]==b-1},destroy:function(){this._aData.length=0,this._aCards.length=0,this._htSelected={},this._welTmpDf=null,this._bInfinite&&this._detachEvent(),this._detachPreparedEvent()}}).extend(jindo.m.UIComponent),jindo.m.Keyframe=jindo.$Class({$init:function(a){this._nCurFrame=null,this._nCurIdx=null,this._aKeyframeLists=[],this._oPreprocessed=null,this._bPreprocessed=!1,this._oRAF=null;var b=jindo.$Agent(),c=b.os(),d=b.navigator();this._bHasTransformRenderBug=c.ios&&5===parseInt(c.version,10)&&d.msafari,this.option({fEffect:jindo.m.Effect.linear,nAnimationDuration:0}),this.option(a||{}),this._fDefaultEffect=this.option("fEffect")()},_loop:function(a,b,c,d){!function e(f){return c(f),++f<b?void(a?(window.requestAnimationFrame||window.setTimeout)(function(){e(f)},1e3/60):e(f)):void d()}(0)},_preprocessKeyframes:function(a){if(this._bPreprocessed)return void this.fireEvent("preprocessEnd");if(!this._oPreprocessed){this._oPreprocessed={objs:{},frames:null};var b=this._aKeyframeLists.sort(function(a,b){return a.frame-b.frame}),c={},d=[],e={},f={},g=this,h=function(){g._loop(a,b.length,function(a){var h,i=b[a],j=i.frame,k=g._toPropObj(i.propLists),l=c[j]={frame:j,dynamic:{},"static":{}};d.push(l);for(h in k)if(k.hasOwnProperty(h)){var m=j,n=k[h],o=g._fDefaultEffect;"function"==typeof n&&(o=n,n=n.end);var p=e[h];p&&(p.effect=o,p.frames[1]=m,p.vals[1]=n,o.effectConstructor===jindo.m.Effect.stepEnd&&(p.vals[1]=p.vals[0])),h in f||(f[h]=n),e[h]={effect:null,frames:[m],vals:[n]}}for(h in e)e.hasOwnProperty(h)&&(c[j].dynamic[h]=e[h])},i)},i=function(){g._loop(a,d.length,function(a){var b=d[a];for(var c in f)if(f.hasOwnProperty(c)){if(c in b.dynamic)continue;b["static"][c]=f[c]}},j)},j=function(){g._oPreprocessed.frames=d;var a=g._oPreprocessed.objs;for(var b in a)if(a.hasOwnProperty(b))try{delete a[b].__KEYFRAME_UNIQ}catch(e){a[b].__KEYFRAME_UNIQ=void 0}c=null,g._bPreprocessed=!0,g.fireEvent("preprocessEnd")};h()}},preprocess:function(a){return this._preprocessKeyframes(!!a),this},_getPropLists:function(a,b){for(var c,d=this._oPreprocessed.frames,e=d.length-1,f=0;c=d[f];f++)if(c.frame>a){e=Math.max(0,f-1);break}var g=d[e],h={};return h=this._getDynamicProps(h,a,g),(b||this._nCurIdx!==e)&&(h=this._getStaticProps(h,a,g)),this._nCurIdx=e,h},_get:function(a,b){if(!this._bPreprocessed)throw new Error("First, you need to call preprocess().");var c,d,e=this._getPropLists(a,b),f=this._oPreprocessed.objs,g=[];for(var h in e)e.hasOwnProperty(h)&&(c=f[h],d=e[h],g.push(c,d));return g},get:function(a){return this._get(a,!0)},frame:function(a,b){var c=this,d=this._nCurFrame;if(b||a!==d){this._nCurFrame=a,this._oRAF&&(cancelAnimationFrame(this._oRAF),this._oRAF=null),c._bPlaying&&c._frame(d,b);var e=this.option("nAnimationDuration");if(e&&null!==d){var f=jindo.m.Effect.easeOut(Math.round(1e6*d)/1e6,Math.round(1e6*a)/1e6),g=(new Date).getTime(),h=!0;return c._bPlaying=!0,void function i(){c._oRAF=requestAnimationFrame(function(){var a=Math.max(0,Math.min(1,(new Date-g)/e));return c._frame(f(a),h),h=!1,c.oRAF=null,1>a?i():void(c._bPlaying=!1)})}()}return this._frame(a,b)}},_frame:function(a,b){for(var c,d,e,f,g=this._bHasTransformRenderBug,h=this._get(a,b),i=null,j=this,k=0,l=h.length;l>k;k+=2)if(c=h[k],c="function"==typeof c?c():c,d=h[k+1],i=i||function(a,b){e=jindo.$Element(a);for(var c in b)b.hasOwnProperty(c)&&(f=b[c],/^@(.*)$/.test(c)?(c=RegExp.$1,/transition/.test(c)&&(f=j._getCSSVal(f)),g&&"@transform"===c&&("@left"in b||"@top"in b)&&a.clientHeight,e.$value().style[j._getCSSKey(c)]=f):a[c]=f)},c instanceof Array)for(var m=0,n=c.length;n>m;m++)i(c[m],d);else i(c,d)},_getStaticProps:function(a,b,c){var d=c["static"];for(var e in d)if(/^(.+):(.+)$/.test(e)){var f=RegExp.$1,g=RegExp.$2,h=d[e];a[f]=a[f]||{},a[f][g]=h}return a},_getDynamicProps:function(a,b,c){var d=c.dynamic,e=c["static"],f=[];for(var g in d)if(/^(.+):(.+)$/.test(g)){var h=RegExp.$1,i=RegExp.$2,j=d[g],k=j.effect,l=j.vals[0],m=j.vals[1];if(!k||l===m){e[g]=l,f.push(g);continue}k.start=l,k.end=m,/^@transform/.test(i)&&(k=this._getTransformFunction(k));var n=Math.max(0,Math.min(1,(b-j.frames[0])/(j.frames[1]-j.frames[0])));try{j=k(n)}catch(o){if(!/^unit error/.test(o.message))throw o;e[g]=l,f.push(g);continue}a[h]=a[h]||{},a[h][i]=j}for(var p=0,q=f.length;q>p;p++)delete d[f[p]];return f.length=null,a},_toPropObj:function(a){function b(a){var b;if("object"==typeof a)b=a.__KEYFRAME_UNIQ=a.__KEYFRAME_UNIQ||Math.floor(Math.random()*(new Date).getTime())+"";else{for(var c in d)if(d.hasOwnProperty(c)&&d[c]===a)return c;b=Math.floor(Math.random()*(new Date).getTime())+""}return d[b]=a,b}for(var c={},d=this._oPreprocessed.objs,e=0,f=a.length;f>e;e+=2){var g=a[e];if(g){var h=a[e+1],i=b(g);for(var j in h)h.hasOwnProperty(j)&&(c[i+":"+j]=h[j])}}return c},set:function(a,b){if("number"==typeof a)return this._aKeyframeLists.push({frame:a,propLists:b}),this._oPreprocessed=null,this._bPreprocessed=!1,this._nCurIdx=null,this;var c,d=a,e=b,f={},g=null;for(var h in e)if(e.hasOwnProperty(h)){g=g||(isNaN(h)?1:2);var i=e[h];for(var j in i)i.hasOwnProperty(j)&&(a=1===g?j:h,c=1===g?h:j,f[a]=f[a]||{},f[a][c]=i[j])}for(var k in f)f.hasOwnProperty(k)&&(a=1*k,this.set(a,[d,f[k]]));return this},_oProperPrefix:{},_getProperPrefix:function(a){var b=this._oProperPrefix;if(a in b)return b[a];for(var c,d,e=document.body.style,f=["webkit","","Moz","O","ms"],g=function(a){return a.toUpperCase()},h=0,i=f.length;i>h;h++)if(c=f[h],d=c+(c?a.replace(/^[a-z]/,g):a),d in e)return b[a]=c;return b[a]=""},_getCSSKey:function(a){var b=this,c="",d=a.replace(/^(\-(webkit|o|moz|ms)\-)?([a-z]+)/,function(a,d,e,f){return c=e||b._getProperPrefix(f),c&&(f=f.replace(/^[a-z]/,function(a){return a.toUpperCase()})),f}).replace(/\-(\w)/g,function(a,b){return b.toUpperCase()});return({o:"O",moz:"Moz",webkit:"Webkit"}[c]||c)+d},_getCSSVal:function(a){var b=this,c=a.replace(/(^|\s)(\-(webkit|moz|o|ms)\-)?([a-z]+)/g,function(a,c,d,e,f){return e=e||b._getProperPrefix(f),c+(e&&"-"+e+"-")+f});return c},_parseTransformText:function(a){a=a||"";var b={};return a.replace(/([\w\-]+)\(([^\)]*)\)/g,function(a,c,d){var e=d.split(/\s*,\s*/);switch(c){case"translate3d":case"scale3d":case"skew3d":c=c.replace(/3d$/,""),b[c+"Z"]=e[2];case"translate":case"scale":case"skew":b[c+"X"]=e[0],"undefined"==typeof e[1]?"scale"===c&&(b[c+"Y"]=e[0]):b[c+"Y"]=e[1];break;default:b[c]=e.join(",")}}),b},_getTransformFunction:function(a){var b,c=a.start,d=a.end,e=this._parseTransformText(c),f=this._parseTransformText(d),g={};for(b in e)e.hasOwnProperty(b)&&(g[b]=[e[b],f[b]||(/^scale/.test(b)?1:0)]);for(b in f)!f.hasOwnProperty(b)||b in e||(g[b]=[e[b]||(/^scale/.test(b)?1:0),f[b]]);var h=function(b){var c=[],d=[a.start,a.end];for(var e in g)g.hasOwnProperty(e)&&(a.start=g[e][0],a.end=g[e][1],c.push(e+"("+a(b)+")"));return a.start=d[0],a.end=d[1],c.join(" ")};return h.start=c,h.end=d,h}}).extend(jindo.m.Component),jindo.m.ExpandEffect=jindo.$Class({sEffectName:"expand",getCommand:function(a,b){var c=b.sDirection?b.sDirection:"down",d="width",e=this._htLayerInfo.nWidth;("up"==c||"down"==c)&&(d="height",e=this._htLayerInfo.nHeight);var f=b.htTo||{};f[d]=(b.nDistance||e)+"px","left"==c&&(f.marginLeft=(b.nDistance?parseInt(this._htLayerInfo.nMarginLeft,10)+e-b.nDistance:this._htLayerInfo.nMarginLeft)+"px"),"up"==c&&(f.marginTop=(b.nDistance?parseInt(this._htLayerInfo.nMarginTop,10)+e-b.nDistance:this._htLayerInfo.nMarginTop)+"px");var g={};return this.getTranslateStyle(f,g),{sTaskName:this.sEffectName+"-"+c,htStyle:g,htTransform:{}}},getBeforeCommand:function(a,b){var c=b.sDirection?b.sDirection:"down",d="width";("up"==c||"down"==c)&&(d="height");var e=b.htFrom||{};e[d]="0",e.overflow="hidden","left"==c&&(e.marginLeft=this._htLayerInfo.nWidth+this._htLayerInfo.nMarginLeft+"px"),"up"==c&&(e.marginTop=this._htLayerInfo.nHeight+this._htLayerInfo.nMarginTop+"px");var f={};return this.getTranslateStyle(e,f),{htStyle:f,htTransform:{}}}}).extend(jindo.m._Effect_),jindo.m.LayerManager=jindo.$Class({$init:function(a,b){jindo.m.getDeviceInfo();this.option({bActivateOnload:!0}),this.option(b||{}),this._initVar(),this._setWrapperElement(a),this.option("bActivateOnload")&&this.activate()},_initVar:function(){this._aLink=[],this._oTouch=null},_setWrapperElement:function(a){this._htWElement={},this.setLayer(a)},_onActivate:function(){this._attachEvent()},_onDeactivate:function(){this._detachEvent()},setLayer:function(a){return a="string"==typeof a?jindo.$(a):a,this._htWElement.element=jindo.$Element(a),this._htWElement.element.css("position","absolute"),this},getVisible:function(){return this._htWElement.element.visible()},getLayer:function(){return this._htWElement.element.$value()},getLinks:function(){return this._aLink},link:function(a){if(arguments.length>1){for(var b=0,c=arguments.length;c>b;b++)this.link(arguments[b]);return this}return-1!=this._find(a)?this:(this._aLink.push(a),this)},unlink:function(a){if(arguments.length>1){for(var b=0,c=arguments.length;c>b;b++)this.unlink(arguments[b]);return this}var d=this._find(a);return d>-1&&this._aLink.splice(d,1),this},_check:function(a){for(var b,c,d=jindo.$Element(a),e=0;b=this._aLink[e];e++)if(c=jindo.$Element(b),c&&(b=c.$value(),b&&(a==b||d.isChildOf(b))))return!0;return!1},_find:function(a){for(var b,c=0;b=this._aLink[c];c++)if(b==a)return c;return-1},_fireEventBeforeShow:function(){return this.fireEvent("beforeShow",{elLayer:this.getLayer(),aLinkedElement:this.getLinks()})},_fireEventShow:function(){this.fireEvent("show",{elLayer:this.getLayer(),aLinkedElement:this.getLinks()})},_fireEventBeforeHide:function(a){return this.fireEvent("beforeHide",{elTarget:a,elLayer:this.getLayer(),aLinkedElement:this.getLinks()})},_fireEventHide:function(a){this.fireEvent("hide",{elTarget:a,elLayer:this.getLayer(),aLinkedElement:this.getLinks()})},show:function(){return this.getVisible()||this._fireEventBeforeShow()&&(this._htWElement.element.show(),this._fireEventShow()),this},hide:function(a){return this.getVisible()&&this._fireEventBeforeHide(a)&&(this._htWElement.element.hide(),this._fireEventHide(a)),this},toggle:function(){return this.getVisible()?this.hide():this.show(),this},_onEvent:function(a){var b=a.element;if(this.getVisible()){if(!this._check(b))return this.hide(b),!0;this.fireEvent("ignore",{elTarget:b}),a.stop()}},_attachEvent:function(){var a=this;this._oTouch=new jindo.m.Touch(document).attach("touchEnd",function(b){b.sMoveType===jindo.m.MOVETYPE[3]&&a._onEvent(b)})},_detachEvent:function(){this._oTouch&&this._oTouch.detachAll("touchEnd")},destroy:function(){this.deactivate();for(var a in this._htWElement)this._htWElement[a]=null;this._htWElement=null,delete this._aLink,delete this._oTouch}}).extend(jindo.m.UIComponent),jindo.m.LayerPosition=jindo.$Class({$init:function(a,b,c){arguments.length<3&&(!b||b&&!b.nodeType&&"string"!=typeof b)?(this._setBaseLayer(document.body),c=b||{},b=a):this._setBaseLayer(a),this.option({bActivateOnload:!0,bAutoReposition:!0,sPosition:"center",nLeftMargin:0,nRightMargin:0,nTopMargin:0,nBottomMargin:0,bUseFixed:!0}),this.option(c||{}),this._initVar(),this._setWrapperElement(b),this.option("bActivateOnload")&&this.activate()},isUseFixed:function(){return this._bUseFixedProperty},_onActivate:function(){this._isVertical=jindo.m.isVertical(),this.option("bAutoReposition")&&this._attachEvent(),this.setPosition()},_onDeactivate:function(){this.option("bAutoReposition")&&this._detachEvent()},_initVar:function(){var a=this.option("nLeftMargin"),b=this.option("nTopMargin");this._htMargin={nLeft:a,nRight:this.option("nRightMargin"),nTop:b,nBottom:this.option("nBottomMargin")},this._sPosition=this.option("sPosition"),this._htOldPosition={nTop:null,nLeft:null,nBottom:null},this._htPosition={nTop:null,nLeft:null,nBottom:null},this._bUseFixedProperty=this.option("bAutoReposition")&&this.option("bUseFixed")&&jindo.m._isUseFixed(),this._isVertical=null,this._hasOrientationChange=jindo.m.getDeviceInfo().ipad||jindo.m.getDeviceInfo().iphone||jindo.m.getDeviceInfo().bChrome,this._nPreWidth=-1},getPosition:function(){return this._sPosition},getMargin:function(){return this._htMargin},getLayer:function(){return this._htWElement.element.$value()},getCurrentPosition:function(){return this._htPosition},_setWrapperElement:function(a){this._htWElement={},this.setLayer(a)},setLayer:function(a){return this._htWElement.element=jindo.$Element(a),this._bUseFixedProperty?this._htWElement.element.css("position","fixed"):this._htWElement.element.css("position","absolute"),this._htWElement.element.parent().isEqual(document.body)||this._htWElement.element.appendTo(document.body),this},top:function(a){this.setPosition("top",a)},bottom:function(a){this.setPosition("bottom",a)},center:function(a){this.setPosition("center",a)},all:function(a){this.setPosition("all",a)},_fixedLayerSize:function(a,b){var c=parseInt(this._htMargin.nLeft,10),d=parseInt(this._htMargin.nTop,10),e={"padding-top":parseInt(this._htWElement.element.css("padding-top"),10),"padding-bottom":parseInt(this._htWElement.element.css("padding-bottom"),10),"padding-left":parseInt(this._htWElement.element.css("padding-left"),10),"padding-right":parseInt(this._htWElement.element.css("padding-right"),10)},f={"border-top-width":parseInt(this._htWElement.element.css("border-top-width"),10),"border-bottom-width":parseInt(this._htWElement.element.css("border-bottom-width"),10),"border-left-width":parseInt(this._htWElement.element.css("border-left-width"),10),"border-right-width":parseInt(this._htWElement.element.css("border-right-width"),10)};return a-=e["padding-left"]+e["padding-right"]+f["border-left-width"]+f["border-right-width"]+c+parseInt(this._htMargin.nRight,10),b-=e["padding-top"]+e["padding-bottom"]+f["border-top-width"]+f["border-bottom-width"]+d+parseInt(this._htMargin.nBottom,10),this._htWElement.element.css({width:a+"px",height:b+"px"}),{nTop:d,nLeft:c}},_setBaseLayer:function(a){return this._wel=this._el=jindo.$(a),this._el&&(this._wel=jindo.$Element(a)),this},getBaseLayer:function(){return this._el},_getPosition:function(){var a,b=this.getBaseLayer(),c=jindo.$Element(b),d=this.getLayer(),e=c.offset(),f=b.offsetWidth,g=b.offsetHeight,h=d.offsetWidth,i=d.offsetHeight,j={nTop:e.top,nLeft:e.left};if(b==document.body&&(a=jindo.$Document().clientSize(),f=a.width,g=a.height),h+=parseInt(this._htWElement.element.css("marginLeft"),10)+parseInt(this._htWElement.element.css("marginRight"),10)||0,i+=parseInt(this._htWElement.element.css("marginTop"),10)+parseInt(this._htWElement.element.css("marginBottom"),10)||0,"all"===this._sPosition)e=this._fixedLayerSize(f,g);else{switch(e.nLeft=j.nLeft+parseInt((f-h)/2,10)+parseInt(this._htMargin.nLeft,10),this._sPosition){case"top":e.nTop=j.nTop+parseInt(this._htMargin.nTop,10);break;case"center":e.nTop=j.nTop+parseInt((g-i)/2,10)+parseInt(this._htMargin.nTop,10);break;case"bottom":e.nTop=j.nTop+parseInt(g-i,10)-parseInt(this._htMargin.nBottom,10)}this._bUseFixedProperty||(e=this._adjustScrollPosition(e))}return e},_adjustScrollPosition:function(a){var b=jindo.$Document().scrollPosition();return a.nTop+=b.top,a.nLeft+=b.left,a},setPosition:function(a,b){if(this.isActivating()&&(this._htMargin=b||this._htMargin,this._sPosition=a||this._sPosition,this._fireEvent("beforePosition"))){var c=this._htWElement.element.visible();c||this._htWElement.element.css({left:"-9999px"}).show(),this._htOldPosition=this._htPosition,this._htPosition=this._getPosition(),c||this._htWElement.element.hide(),c&&this._htOldPosition.nLeft===this._htPosition.nLeft&&this._htOldPosition.nTop===this._htPosition.nTop&&this._htOldPosition.nBottom===this._htPosition.nBottom||("undefined"==typeof this._htPosition.nTop?this._htWElement.element.$value().style.top=null:"undefined"==typeof this._htPosition.nBottom&&(this._htWElement.element.$value().style.bottom=null),this._htWElement.element.css({left:this._htPosition.nLeft+"px",top:this._htPosition.nTop+"px",bottom:this._htPosition.nBottom+"px"})),this._fireEvent("position")}},_attachEvent:function(){this._htEvent={},this._htEvent.actionEvent=jindo.$Fn(this._onEvent,this),this._htEvent.pageShow=jindo.$Fn(this._onPageShow,this).bind(),this._bUseFixedProperty?this._htEvent.actionEvent.attach(window,"resize"):this._htEvent.actionEvent.attach(window,"scroll").attach(window,"resize"),jindo.m.bindPageshow(this._htEvent.pageShow),this._hasOrientationChange&&(this._htEvent.rotate=jindo.$Fn(this._onOrientationChange,this).attach(window,"orientationchange"))},_detachEvent:function(){this._htEvent.actionEvent.detach(window,"scroll").detach(window,"resize"),jindo.m.unbindPageshow(this._htEvent.pageShow),this._hasOrientationChange&&this._htEvent.rotate.detach(window,"orientationchange"),this._htEvent=null},_onEvent:function(){jindo.m._isUseFixed()&&jindo.m.getDeviceInfo().android&&this._htWElement.element.css("left",this._htWElement.element.css("left")),this._htWElement.element.visible()&&this.setPosition()},_onOrientationChange:function(){if(this._htWElement.element.visible()){var a=this;window.innerWidth<this._htWElement.element.width()?(this._nPreWidth=this._htWElement.element.width(),this._htWElement.element.width(window.innerWidth)):-1!==this._nPreWidth&&this._htWElement.element.width(this._nPreWidth),this._htWElement.element.hide(),this.setPosition(),jindo.m.getDeviceInfo().android&&!jindo.m.getDeviceInfo().bChrome?this._htWElement.element.show():setTimeout(function(){a.setPosition(),a._htWElement.element.show()},10)}},_onPageShow:function(){this.isActivating()&&this.setPosition()},_fireEvent:function(a){return this.fireEvent(a,{elLayer:this.getLayer(),htMargin:this.getMargin(),htPosition:this.getCurrentPosition()})},destroy:function(){this.deactivate();for(var a in this._htWElement)this._htWElement[a]=null;delete this._htWElement,delete this._htMargin,delete this._sPosition,delete this._htPosition,delete this._htOldPosition,delete this._bUseFixedProperty}}).extend(jindo.m.UIComponent),jindo.m.Loading=jindo.$Class({$init:function(a,b){this.option({bActivateOnload:!0,nWidth:31,nHeight:31,sDefaultForeground:"black",sDefaultBackground:"transparent",sLoadingText:"로딩중입니다",bUseFoggy:a?!1:!0,sFoggyColor:"gray",nFoggyOpacity:.3}),this.option(b||{}),this._setWrapperElement(a),this.option("bActivateOnload")&&this.activate()},$static:{DELAY:["0","-.9167s","-.833s","-.75s","-.667s","-.5833s","-.5s","-.41667s","-.333s","-.25s","-.1667s","-.0833s"],ANIMATION_STYLE:"_loading_animation_sytle_",CONTAINER_CLASS:"_loading_container_class_"},_setWrapperElement:function(a){this._htWElement={},this._htWElement.base=jindo.$Element(jindo.$(a)?jindo.$(a):document.body),this._createLoading()},_createLoading:function(){this._createLoadingStyle(),this._htWElement.container=jindo.$Element("<div style='zIndex: 2100'>").addClass(jindo.m.Loading.CONTAINER_CLASS),this.option("bUseFoggy")&&this._createFoggy().appendTo(this._htWElement.container),this._createLoadingElement(),this._htWElement.loadingbox=jindo.$Element("<div>").css({zIndex:2100,position:"absolute"}).append(this._htWElement.loading),this.option("sLoadingText")&&this._createLoadingText().appendTo(this._htWElement.loadingbox),this._htWElement.loadingbox.appendTo(this._htWElement.container)},_createFoggy:function(){return this._htWElement.foggy=jindo.$Element("<div>").css({position:"absolute",padding:"0px",margin:"0px",border:"0px",backgroundColor:this.option("sFoggyColor"),opacity:this.option("nFoggyOpacity"),width:"100%",height:"100%",left:"0px",top:"0px",zIndex:2099}),this._htWElement.foggy},_setPosition:function(){var a,b=this._htWElement.loadingbox.width(),c=this._htWElement.loadingbox.height();this._isBody()?(a=jindo.$Document().scrollPosition(),this._htWElement.container.css({left:a.left+"px",top:a.top+"px",width:window.innerWidth+"px",height:window.innerHeight+"px"})):(this._htWElement.container.width()<b&&this._htWElement.container.width(b),this._htWElement.container.height()<c&&this._htWElement.container.height(c)),this._htWElement.loadingbox.css({top:"50%",left:"50%","margin-left":-parseInt(b/2,10)+"px","margin-top":-parseInt(c/2,10)+"px"})},_isBody:function(){return this._htWElement.base.isEqual(document.body)},show:function(){if(this.fireEvent("beforeShow")){for(var a=this._htWElement.loading.queryAll("span"),b=jindo.m.getCssPrefix(),c=0;c<a.length;c++)jindo.$Element(a[c]).css(b+"Animation","loadingfade 1s linear "+jindo.m.Loading.DELAY[c]+" infinite");this._attachEvent(),this._isBody()&&this._htWElement.container.css({width:window.innerWidth+"px",height:window.innerHeight+"px"}),this._htWElement.container.show(),this._setPosition(),this.fireEvent("show")}},hide:function(){if(this.fireEvent("beforeHide")){for(var a=this._htWElement.loading.queryAll("span"),b=jindo.m.getCssPrefix(),c=0;c<a.length;c++)jindo.$Element(a[c]).css(b+"Animation","");this._detachEvent(),this._htWElement.container.hide(),this.fireEvent("hide")}},_onPrevent:function(a){return a.stop(jindo.$Event.CANCEL_ALL),!1},_onRotate:function(){if(this._htWElement.container.visible())if(jindo.m.getDeviceInfo().andorid)this._setPosition();else{this._htWElement.container.hide();var a=this;setTimeout(function(){a._htWElement.container.show(),a._setPosition()},0)}},_attachEvent:function(){this._htEvent.rotate=jindo.$Fn(this._onRotate,this).bind(),this._htEvent.prevent=jindo.$Fn(this._onPrevent,this).attach(this._htWElement.container,"touchstart").attach(this._htWElement.container,"touchmove"),jindo.m.bindRotate(this._htEvent.rotate)},_detachEvent:function(){this._htEvent.prevent&&this._htEvent.prevent.detach(this._htWElement.container,"touchmove").detach(this._htWElement.container,"touchstart"),jindo.m.unbindRotate(this._htEvent.rotate)},_createLoadingStyle:function(){if(!jindo.$(jindo.m.Loading.ANIMATION_STYLE)){var a=document.createElement("style");if(a){a.setAttribute("type","text/css"),a.setAttribute("id",jindo.m.Loading.ANIMATION_STYLE);var b="@-"+jindo.m.getCssPrefix()+"-keyframes loadingfade{from{opacity:1}to{opacity:0}}",c=document.createTextNode(b);a.styleSheet?a.styleSheet.cssText=c.nodeValue:a.appendChild(c);var d=document.getElementsByTagName("head")[0];d&&d.appendChild(a)}}},_createLoadingElement:function(){for(var a=jindo.m.getCssPrefix(),b=[],c=jindo.m.useCss3d()?{open:"3d(",end:",0)"}:{open:"(",end:")"},d=0;12>d;d++)b.push("<span style='display:block;position:absolute;top:40%;left:48%;width:11%;height:24%;border-radius:6px;background:"),b.push(this.option("sDefaultForeground")),b.push("; opacity:0; -"),b.push(a),b.push("-transform:rotate("),b.push(30*d),b.push("deg) translate"+c.open+"0,-140%"+c.end+";'></span>");this._htWElement.loading=jindo.$Element("<div>").css({position:"relative",margin:"0 auto"}).html(b.join(""))},refresh:function(){this._htWElement.loading.css({width:this.option("nWidth")+"px",height:this.option("nHeight")+"px",background:this.option("sDefaultBackground")}),this._htWElement.text&&this._htWElement.text.html(this.option("sLoadingText"))},_createLoadingText:function(){return this._htWElement.text=jindo.$Element("<div>").css({margin:"2px 0 0 0",bottom:0,width:"100%","text-align":"center"}),this._htWElement.text},_onActivate:function(){this._htEvent={},this._htWElement.container.appendTo(this._htWElement.base),this._isBody()?this._htWElement.container.css({position:"absolute",top:0,left:0,width:"100%",height:"100%"}).hide():this._htWElement.container.css({position:"relative"}).hide(),this.refresh()},_onDeactivate:function(){this._detachEvent(),this._htWElement.container.leave()},destroy:function(){this.deactivate();for(var a in this._htWElement)this._htWElement[a]=null;this._htWElement=null}}).extend(jindo.m.UIComponent),jindo.m.MoreContentButton=jindo.$Class({$init:function(a,b){this.option({sClassPrefix:"more_",nTotalItem:10,nShowMaxItem:10,nItemPerPage:10,nPage:1,bActivateOnload:!0,htAjax:{}}),this.option(b||{}),this.option("nItem",this.option("nShowMaxItem")),this._initVar(),this._setWrapperElement(a),this.option("bActivateOnload")&&(this.activate(),this._nCurrentPage=this.option("nPage"),this.updateInfo())},_initVar:function(){var a={sApi:null,htAjaxOption:{type:"xhr"},htQuery:{},sStart:"start",sDisplay:"display"},b=this.option("htAjax");if(!b)return void this.option("htAjax",a);for(var c in a)"undefined"==typeof b[c]&&(b[c]=a[c]);for(c in a.htAjaxOption)"undefined"==typeof b.htAjaxOption[c]&&(b.htAjaxOption[c]=a.htAjaxOption[c]);for(c in a.htQuery)"undefined"==typeof b.htQuery[c]&&(b.htQuery[c]=a.htQuery[c]);b.sApi&&(this.oAjax=new jindo.$Ajax(b.sApi,b.htAjaxOption))},_setWrapperElement:function(a){this._htWElement={};var b="."+this.option("sClassPrefix");this._htWElement.elBase=jindo.$Element(a),this._htWElement.elMoreButton=jindo.$Element(this._htWElement.elBase.query(b+"button")),this._htWElement.elTop=jindo.$Element(this._htWElement.elBase.query(b+"top")),this._htWElement.elLoading=jindo.$Element(this._htWElement.elBase.query(b+"loading")),this._htWElement.elMoreCnt=jindo.$Element(this._htWElement.elBase.query(b+"moreCnt")),this._htWElement.elTotal=jindo.$Element(this._htWElement.elBase.query(b+"total")),this._htWElement.elCurrent=jindo.$Element(this._htWElement.elBase.query(b+"current")),this._htWElement.elRemainder=jindo.$Element(this._htWElement.elBase.query(b+"remainder")),this._htWElement.elLast=jindo.$Element(this._htWElement.elBase.query(b+"last")),this._htWElement.elLast&&(this._htWElement.elLastTotal=jindo.$Element(this._htWElement.elLast.query(b+"total")),this._htWElement.elLastCurrent=jindo.$Element(this._htWElement.elLast.query(b+"current")),this._htWElement.elLastRemainder=jindo.$Element(this._htWElement.elLast.query(b+"remainder")))},_onClickMore:function(a){a.stop(jindo.$Event.CANCEL_DEFAULT),this.hasNextPage()&&this.more()},_onClickTop:function(a){a.stop(jindo.$Event.CANCEL_DEFAULT),this.fireEvent("goTop",{element:a.element})},more:function(a){"undefined"==typeof a&&(a=!0);var b=this._nCurrentPage+1,c=this.getCurrentPage();if(!a||this.fireEvent("beforeMore",{nPage:b,nCurrentPage:c})){var d=this.getPageItemIndex(b);if(!d)return void this.updateInfo();this.showLoadingImg(),this.option("htAjax").sApi?this._callAjax(b,!0,a):(this._move(b),a&&this.fireEvent("more",{nPage:b,nStartIndex:d.nStart,nEndIndex:d.nEnd}),this.updateInfo())}},movePageTo:function(a,b){"undefined"==typeof b&&(b=!0);var c=this.getCurrentPage();if(!b||this.fireEvent("beforeMovePage",{nPage:a,nCurrentPage:c})){var d=this.getPageItemIndex(a);if(!d)return void this.updateInfo();this.showLoadingImg(),this.option("htAjax").sApi?this._callAjax(a,!1,b):(this._move(a),b&&this.fireEvent("movePage",{nPage:a,nBeforePage:c,nStartIndex:0,nEndIndex:d.nEnd}),this.updateInfo())}},_move:function(a){var b=this._convertToAvailPage(a);b!=this._nCurrentPage&&(this._nCurrentPage=b)},updateInfo:function(){var a=this.getCurrentPage(),b=this.getPageItemIndex(a);if(this.hideLoadingImg(),a>=this.getTotalPages()?(this._htWElement.elBase&&this._htWElement.elBase.addClass("u_pg_end"),this._htWElement.elMoreButton&&this._htWElement.elMoreButton.hide(),this._htWElement.elLast&&this._htWElement.elLast.show("block")):(this._htWElement.elBase&&this._htWElement.elBase.removeClass("u_pg_end"),this._htWElement.elMoreButton&&this._htWElement.elMoreButton.show("block"),this._htWElement.elLast&&this._htWElement.elLast.hide()),this._htWElement.elCurrent&&b){var c=b.nEnd+1;this._htWElement.elCurrent.text(this._setNumberFormat(c))}if("undefined"!=typeof this._htWElement.elLastCurrent&&this._htWElement.elLastCurrent&&b&&this._htWElement.elLastCurrent.text(this._setNumberFormat(b.nEnd+1)),this._htWElement.elRemainder&&b&&this._htWElement.elRemainder.text(this._setNumberFormat(parseInt(this.option("nTotalItem"),10)-(b.nEnd+1))),this._htWElement.elLastRemainder&&b&&this._htWElement.elLastRemainder.text(this._setNumberFormat(parseInt(this.option("nTotalItem"),10)-(b.nEnd+1))),this._htWElement.elTotal&&this._htWElement.elTotal.text(this._setNumberFormat(this.option("nTotalItem"))),"undefined"!=typeof this._htWElement.elLastTotal&&this._htWElement.elLastTotal&&this._htWElement.elLastTotal.text(this._setNumberFormat(this.option("nTotalItem"))),this._htWElement.elMoreCnt&&b){var d=Math.min(this.getItemPerPage(),this.getItemCount()-b.nEnd-1);this._htWElement.elMoreCnt.text(this._setNumberFormat(d))}},_callAjax:function(a,b,c){var d=this;this.oAjax.option("onload",null),this.oAjax.option("onload",function(e){d._onAjaxResponse(e,a,b,c)}),this.oAjax.request(this._getQueryString(a,b))},_onAjaxResponse:function(a,b,c,d){if(d){this._move(b);var e=c?"more":"movePage",f=this.getPageItemIndex(b);this.fireEvent(e,{oResponse:a,nPage:b,nStartIndex:c?f.nStart:0,nEndIndex:f.nEnd})}this.updateInfo()},_getQueryString:function(a,b){"undefined"==typeof b&&(b=!0);var c=this.option("htAjax").htQuery||{},d=this.getPageItemIndex(a);return c[this.option("htAjax").sStart]=b?d.nStart:0,c[this.option("htAjax").sDisplay]=Math.min(this.getItemPerPage(),this.getShowMaxItem()-d.nStart),c},_setNumberFormat:function(a){a=a.toString();for(var b="",c=0,d=a.length,e=d;e>=0;e--){var f=a.charAt(e);e>d?b=f+b:/[0-9]/.test(f)&&(c>=3&&(b=","+b,c=0),c++,b=f+b)
}return b},showLoadingImg:function(){this._htWElement.elLoading&&this._htWElement.elLoading.show()},hideLoadingImg:function(){this._htWElement.elLoading&&this._htWElement.elLoading.hide()},reset:function(a){"undefined"==typeof a&&(a=this.option("nShowMaxItem")),this.setShowMaxItem(a),this.movePageTo(1,!1)},getTotalItem:function(){return this.option("nTotalItem")},setTotalItem:function(a){this.option("nTotalItem",a)},getShowMaxItem:function(){return this.option("nShowMaxItem")},setShowMaxItem:function(a){this.option("nShowMaxItem",a),this.option("nItem",a)},_onActivate:function(){this._attachEvent()},_onDeactivate:function(){this._detachEvent()},_attachEvent:function(){this._htEvent={},this._htWElement.elMoreButton&&(this._htEvent.click_More={ref:jindo.$Fn(this._onClickMore,this).attach(this._htWElement.elMoreButton,"click"),el:this._htWElement.elMoreButton.$value()}),this._htWElement.elTop&&(this._htEvent.click_Top={ref:jindo.$Fn(this._onClickTop,this).attach(this._htWElement.elTop,"click"),el:this._htWElement.elTop.$value()})},_detachEvent:function(){for(var a in this._htEvent){var b=this._htEvent[a];b.ref.detach(b.el,a.substring(0,a.indexOf("_")))}this._htEvent=null},header:function(a,b){return this.oAjax?this.oAjax.header(a,b):void 0},destroy:function(){this._detachEvent();for(var a in this._htWElement)this._htWElement[a]=null;this._htWElement=null}}).extend(jindo.m.CorePagination),jindo.m.Calendar=jindo.$Class({$init:function(a,b){var c=new Date;this.option({bActivateOnload:!0,sClassPrefix:"calendar-",bUseEffect:!1,nEffectDuration:200,sTitleFormat:"yyyy.mm",aMonthTitle:["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],htToday:{nYear:c.getFullYear(),nMonth:c.getMonth()+1,nDate:c.getDate()}}),this.option(b||{}),this._initVar(),this._setWrapperElement(a),this.option("bActivateOnload")&&this.activate()},_initVar:function(){this._bVisible=!1,this._oToday=this.option("htToday"),this._oViewDate=null,this._nSelectDate=-1,this._sClassPrefix=this.option("sClassPrefix"),this._aDayInfo=[],this.option("bUseEffect")&&(this._oTransition=new jindo.m.Transition)},_setWrapperElement:function(a){this._htWElement={},this._htWElement.calendarBase=jindo.$Element(a),this._htWElement.calendarBase.css({position:"absolute",display:"none"});for(var b=this._htWElement.calendarBase.queryAll("th"),c=0,d=b.length;d>c;c++)this._aDayInfo.push(jindo.$Element(b[c]).text());this._htWElement.calendarTitle=jindo.$Element(this._htWElement.calendarBase.query("."+this._sClassPrefix+"title")),this._htWElement.calendarTable=jindo.$Element(this._htWElement.calendarBase.query("table")),this._htWElement.calendarTbody=jindo.$Element(this._htWElement.calendarTable.query("tbody")),this._htWElement.yearPreBtn=jindo.$Element(this._htWElement.calendarBase.query("."+this._sClassPrefix+"btn-prev-year")),this._htWElement.preBtn=jindo.$Element(this._htWElement.calendarBase.query("."+this._sClassPrefix+"btn-prev-mon")),this._htWElement.yearNextBtn=jindo.$Element(this._htWElement.calendarBase.query("."+this._sClassPrefix+"btn-next-year")),this._htWElement.nextBtn=jindo.$Element(this._htWElement.calendarBase.query("."+this._sClassPrefix+"btn-next-mon")),this._htWElement.closeBtn=jindo.$Element(this._htWElement.calendarBase.query("."+this._sClassPrefix+"btn-close"))},getCalendarBase:function(){return this._htWElement.calendarBase},_onActivate:function(){this._attachEvent()},_onDeactivate:function(){this._detachEvent()},_attachEvent:function(){this._htEvent={},this._htWElement.yearPreBtn&&(this._htEvent.pre_year_click={el:this._htWElement.yearPreBtn,ref:jindo.$Fn(this._onYearPre,this).attach(this._htWElement.yearPreBtn,"click")}),this._htWElement.preBtn&&(this._htEvent.pre_click={el:this._htWElement.preBtn,ref:jindo.$Fn(this._onPre,this).attach(this._htWElement.preBtn,"click")}),this._htWElement.yearNextBtn&&(this._htEvent.next_year_click={el:this._htWElement.yearNextBtn,ref:jindo.$Fn(this._onYearNext,this).attach(this._htWElement.yearNextBtn,"click")}),this._htWElement.nextBtn&&(this._htEvent.next_click={el:this._htWElement.nextBtn,ref:jindo.$Fn(this._onNext,this).attach(this._htWElement.nextBtn,"click")}),this._htWElement.closeBtn&&(this._htEvent.close_click={el:this._htWElement.closeBtn,ref:jindo.$Fn(this._onClose,this).attach(this._htWElement.closeBtn,"click")}),this._htEvent.table_click={el:this._htWElement.calendarTable,ref:jindo.$Fn(this._onDate,this).attach(this._htWElement.calendarTable,"click")}},_onPre:function(a){this._moveDate("pre"),a.stop()},_onYearPre:function(a){this._moveDate("preYear"),a.stop()},_onNext:function(a){this._moveDate("next"),a.stop()},_onYearNext:function(a){this._moveDate("nextYear"),a.stop()},_onClose:function(a){this.hide(),a.stop()},_onDate:function(a){if(this._bVisible){var b=jindo.$Element(a.element),c="";if("td"!=b.$value().tagName&&(b=b.parent(function(a){return"td"==a.$value().tagName.toLowerCase()})[0]),b&&(c=b.attr("data-cal-date"),c&&8==c.length)){if(this._nSelectDate=1*c,!this.fireEvent("beforeSelectDate",{wel:b,oSelectDate:this.getSelectDate()}))return!1;this.fireEvent("selectDate",{wel:b,oSelectDate:this.getSelectDate()})&&(b.addClass(this._sClassPrefix+"selected"),this.hide())}return a.stopDefault(),!1}},_moveDate:function(a){if(this._bVisible){var b={nYear:this._oViewDate.nYear,nMonth:this._oViewDate.nMonth,nDate:this._oViewDate.nDate},c={nDate:this._oViewDate.nDate};switch(a){case"pre":c.nYear=1==b.nMonth?b.nYear-1:b.nYear,c.nMonth=1==b.nMonth?12:b.nMonth-1;break;case"preYear":c.nYear=b.nYear-1,c.nMonth=b.nMonth;break;case"next":c.nYear=12==b.nMonth?b.nYear+1:b.nYear,c.nMonth=12==b.nMonth?1:b.nMonth+1;break;case"nextYear":c.nYear=b.nYear+1,c.nMonth=b.nMonth}this.fireEvent("beforeMoveDate",{oOldDate:b,oMoveDate:c})&&(this._drawCalendar(c),this.fireEvent("moveDate",{oOldDate:b,oMoveDate:c}))}},_detachEvent:function(){for(var a in this._htEvent){var b=this._htEvent[a];b.ref.detach(b.el,a.substring(a.lastIndexOf("_")+1))}this._htEvent=null},show:function(a,b){if(a||(a=this._oToday),this.fireEvent("beforeShowCalendar",{oDrawDate:a})){this._nSelectDate=this._getDateNumber(b),(this._getDateNumber(a,"YearMonth")!=this._oViewDate?this._getDateNumber(this._oViewDate,"YearMonth"):0)?this._drawCalendar(a):this._drawDayColor();var c=this;this._htWElement.calendarBase.show(),this.option("bUseEffect")?(this._htWElement.calendarBase.opacity(0),this._oTransition.clear(),this._oTransition.queue(this._htWElement.calendarBase.$value(),this.option("nEffectDuration"),{htStyle:{opacity:"0.9999"},fCallback:function(){c._afterShow(a)}}),setTimeout(function(){c._oTransition.start()},10)):this._afterShow(a)}},_afterShow:function(a){this._htWElement.calendarBase.css("zIndex","1000"),this._bVisible=!0,this.fireEvent("showCalendar",{oDrawDate:a})},hide:function(){var a=this.getSelectDate();if(this.fireEvent("beforeHideCalendar",{oSelectDate:a}))if(this._bVisible=!1,this.option("bUseEffect")){var b=this;this._oTransition.queue(this._htWElement.calendarBase.$value(),this.option("nEffectDuration"),{htStyle:{opacity:0},fCallback:function(){b._afterHide(a)}}),b._oTransition.start()}else this._afterHide(a)},_afterHide:function(a){this._htWElement.calendarBase.css("zIndex","0").hide(),this.fireEvent("hideCalendar",{oSelectDate:a})},isVisible:function(){return this._bVisible},getSelectDate:function(){var a,b;return this._nSelectDate&&this._nSelectDate>0&&(a=this._nSelectDate+"",b={nYear:Number(a.substr(0,4)),nMonth:Number(a.substr(4,2)),nDate:Number(a.substr(6,4))}),b},_drawCalendar:function(a){this._oViewDate={nYear:a.nYear,nMonth:a.nMonth,nDate:a.nDate},this._drawCalendarHeaderHtml(),this._drawCalendarBodyHtml(),this._drawDayColor()},_drawDayColor:function(){for(var a,b=this._getDateNumber(this._oToday),c=this._nSelectDate,d=this._htWElement.calendarTbody.queryAll("td"),e=!0,f=0,g=d.length;g>f;f++){a=jindo.$Element(d[f]);var h=1*a.attr("data-cal-date");this._htSelectableData&&(e=this.isBetween(this.getStringToObject(h),this._htSelectableData.htDateFrom,this._htSelectableData.htDateTo)),e||a.addClass(this._sClassPrefix+"unselectable"),a.hasClass(this._sClassPrefix+"prev-mon")||a.hasClass(this._sClassPrefix+"next-mon")||(a[b===h?"addClass":"removeClass"](this._sClassPrefix+"today"),a[c>-1&&c===h?"addClass":"removeClass"](this._sClassPrefix+"selected"),b==c&&a.removeClass(this._sClassPrefix+"today"))}},_drawCalendarHeaderHtml:function(){var a=this._oViewDate.nYear,b=this._oViewDate.nMonth;10>b&&(b=("0"+1*b).toString()),this._htWElement.calendarTitle&&this._htWElement.calendarTitle.text(this.option("sTitleFormat").replace(/yyyy/g,a).replace(/y/g,a.toString().substr(2,2)).replace(/mm/g,b).replace(/m/g,1*b).replace(/M/g,this.option("aMonthTitle")[b-1]))},_drawCalendarBodyHtml:function(){var a,b,c,d,e,f,g,h,i,j=[],k=!1;for(a=new Date(this._oViewDate.nYear,this._oViewDate.nMonth,0),c=a.getTime(),a=new Date(this._oViewDate.nYear,this._oViewDate.nMonth-1,1),b=a.getTime();0!==a.getDay();)a.setDate(a.getDate()-1);for(;!k;){j.push("<tr>");for(var l=0;7>l;l++)d=a.getTime(),e=[],f="",g=a.getDay(),h=!1,i=!1,b>d&&(e.push(this._sClassPrefix+"prev-mon"),h=!0),d>c&&(e.push(this._sClassPrefix+"next-mon"),i=!0),0===g&&e.push(this._sClassPrefix+"sun"),6===g&&e.push(this._sClassPrefix+"sat"),f=1e4*a.getFullYear()+100*(a.getMonth()+1)+a.getDate(),j.push('<td class="'+e.join(" ")+'" data-cal-date="'+f+'"><a href="javascript:void(0)" class="'+this._sClassPrefix+'date">'+a.getDate()+"</a></td>"),a.setDate(a.getDate()+1),c===d&&(k=!0);j.push("</tr>")}this._htWElement.calendarTbody.html(j.join(""))},isBetween:function(a,b,c){return this.getDateObject(a).getTime()>this.getDateObject(c).getTime()||this.getDateObject(a).getTime()<this.getDateObject(b).getTime()?!1:!0},setSelectableDate:function(a,b){this._htSelectableData={htDateFrom:a,htDateTo:b}},getDayName:function(a){return this._aDayInfo[a]},getDateObject:function(a){return 3==arguments.length?new Date(arguments[0],arguments[1]-1,arguments[2]):new Date(a.nYear,a.nMonth-1,a.nDate)},getStringToObject:function(a){return a+="",{nYear:parseInt(a.substring(0,4),10),nMonth:parseInt(a.substring(4,6),10),nDate:parseInt(a.substring(6,8),10)}},_getDateNumber:function(a,b){var c;return c="YearMonth"===b?a?1e4*a.nYear+100*a.nMonth:-1:a?1e4*a.nYear+100*a.nMonth+a.nDate:-1},destroy:function(){this.deactivate(),this._bVisible=!1,this._oToday=null,this._oViewDate=null,this._nSelectDate=-1,this._sClassPrefix=null,this.option("bUseEffect")&&(this._oTransition.destroy(),this._oTransition=null),this._aDayInfo=null}}).extend(jindo.m.UIComponent),jindo.m.MovableCoord=jindo.$Class({$init:function(a,b){var c=this;this._sRandKey="__MOVABLECOORD_"+Math.round(Math.random()*(new Date).getTime()),this._aPos=a||[0,0],this.option({nDeceleration:6e-4,aMin:[0,0],aMax:[100,100],aBounce:[10,10,10,10],aMargin:[0,0,0,0],aCircular:[!1,!1,!1,!1]}),this.option(b||{}),this._subOptions={_htOption:{_htSetter:{}}},setTimeout(function(){c.fireEvent("change",{aPos:[c._aPos[0],c._aPos[1]],bHolding:!1})},0)},_grab:function(){var a=this._aPos,b=this._oAnimating;b&&(this._frame(b,a),this._oAnimating=null,this._oRaf&&cancelAnimationFrame(this._oRaf),this._oRaf=null)},setTo:function(a,b,c){var d=this;c===!0&&(c=1/0),this._grab();var e=this.option("aMin"),f=this.option("aMax"),g=this.option("aCircular"),h=[this._aPos[0],this._aPos[1]];if(c)null!==a&&(h[0]=a),null!==b&&(h[1]=b),this._move(h,!1,c);else{null!==a&&(g[3]||(a=Math.max(e[0],a)),g[1]||(a=Math.min(f[0],a))),null!==b&&(g[0]||(b=Math.max(e[1],b)),g[2]||(b=Math.min(f[1],b)));var i=this._adjustCircularPos([a,b],e,f,g);null!==a&&(h[0]=i[0]),null!==b&&(h[1]=i[1]),this._aPos=h,d.fireEvent("change",{aPos:[h[0],h[1]],bHolding:!1})}return this},setBy:function(a,b,c){return this.setTo(null!==a?this._aPos[0]+a:null,null!==b?this._aPos[1]+b:null,c)},get:function(){return[this._aPos[0],this._aPos[1]]},bind:function(a,b){var c=this,d=this._sRandKey;a=a instanceof jindo.$Element?a.$value():a;var e={nDirection:31,aScale:[1,1],nMaximumSpeed:1/0};if(b)for(var f in b)b.hasOwnProperty(f)&&(e[f]=b[f]);a[d]&&this.unbind(a);var g=16&e.nDirection?2:2&e.nDirection||8&e.nDirection?1:0,h=4&e.nDirection||8&e.nDirection,i=1&e.nDirection||2&e.nDirection;return a[d]=new jindo.m.Touch(a,{nDeceleration:this.option("nDeceleration"),nUseDiagonal:g,nMoveThreshold:0,nSlopeThreshold:5,nTapThreshold:1,bHorizental:!!i,bVertical:!!h}).attach({touchStart:function(a){c._subOptions=e,c._touchStart(a)},touchMove:function(a){c._touchMove(a)},touchEnd:function(a){c._touchEnd(a)}}),this},unbind:function(a){var b=this._sRandKey;return a=a instanceof jindo.$Element?a.$value():a,a[b]&&(a[b].deactivate(),a[b]=null),this},_touchStart:function(a){var b=this._aPos,c=this.option("aMin"),d=this.option("aMax");this._grab(),this.fireEvent("hold",{oEvent:a.oEvent,aPos:[b[0],b[1]]}),this._bGrapOutside=b[0]<c[0]||b[1]<c[1]||b[0]>d[0]||b[1]>d[1],this._aMovingPos=[b[0],b[1]],this._aDirFilter=null},_easeOutQuint:jindo.m.Effect.easeOutQuint(0,1),_adjustCircularPos:function(a,b,c,d){return b=b||this.option("aMin"),c=c||this.option("aMax"),d=d||this.option("aCircular"),d[0]&&a[1]<b[1]&&(a[1]=(a[1]-b[1])%(c[1]-b[1]+1)+c[1]),d[1]&&a[0]>c[0]&&(a[0]=(a[0]-b[0])%(c[0]-b[0]+1)+b[0]),d[2]&&a[1]>c[1]&&(a[1]=(a[1]-b[1])%(c[1]-b[1]+1)+b[1]),d[3]&&a[0]<b[0]&&(a[0]=(a[0]-b[0])%(c[0]-b[0]+1)+c[0]),a},_touchMove:function(a){if("tap"!==a.sMoveType&&a.sMoveTypeAgree&&this._aMovingPos){var b,c,d,e=this._aPos,f=this._aMovingPos,g=this.option("aMin"),h=this.option("aMax"),i=this.option("aBounce"),j=this.option("aMargin"),k=this._subOptions.nDirection,l=this._subOptions.aScale,m=this._easeOutQuint,n=m(.001)/.001,o=this._aDirFilter;if(!o)switch(o=this._aDirFilter=[!1,!1],a.sStartMoveType){case"hScroll":o[0]=1&k,o[1]=2&k;break;case"vScroll":o[1]=4&k,o[0]=8&k;break;case"dScroll":o[0]=o[1]=16&k}o[0]&&(f[0]+=a.nVectorX*l[0]),o[1]&&(f[1]+=a.nVectorY*l[1]),e[0]=f[0],e[1]=f[1],e=this._adjustCircularPos(e,g,h),this._bGrapOutside&&e[0]>=g[0]&&e[0]<=h[0]&&e[1]>=g[1]&&e[1]<=h[1]&&(this._bGrapOutside=!1);var p=j[0]+i[0],q=j[1]+i[1],r=j[2]+i[2],s=j[3]+i[3];this._bGrapOutside?(c=g[0]-s,d=h[0]+q,b=e[0],e[0]=b>d?d:c>b?c:b,c=g[1]-p,d=h[1]+r,b=e[1],e[1]=b>d?d:c>b?c:b):(e[1]<g[1]?(b=(g[1]-e[1])/(p*n),e[1]=g[1]-m(b>1?1:b)*p):e[1]>h[1]&&(b=(e[1]-h[1])/(r*n),e[1]=h[1]+m(b>1?1:b)*r),e[0]<g[0]?(b=(g[0]-e[0])/(s*n),e[0]=g[0]-m(b>1?1:b)*s):e[0]>h[0]&&(b=(e[0]-h[0])/(q*n),e[0]=h[0]+m(b>1?1:b)*q)),this.fireEvent("change",{aPos:e,bHolding:!0}),a.oEvent.stopDefault()}},_touchEnd:function(a){if(this._aMovingPos){var b=(this._aPos,this.option("aBounce"),this._subOptions.nMaximumSpeed),c=this._subOptions.aScale,d=a.htMomentum,e=this._aDirFilter||[!1,!1];e[0]||(d.nSpeedX=0),e[1]||(d.nSpeedY=0);var f=this._getRelPosFromSpeed([d.nSpeedX*(d.nDistanceX<0?-1:1)*c[0],d.nSpeedY*(d.nDistanceY<0?-1:1)*c[1]],b);this._move(f,!0,1/0),this._aMovingPos=null,this._aDirFilter=null}},_move:function(a,b,c){var d=this;this[b?"_animateBy":"_animateTo"](a,function(){var a=[],b=d._aPos,e=d.option("aMin"),f=d.option("aMax");a[0]=Math.min(f[0],Math.max(e[0],b[0])),a[1]=Math.min(f[1],Math.max(e[1],b[1])),d._animateTo(a,function(){d.fireEvent("animationEnd")},!0,c)},!1,c)},_getRelPosFromSpeed:function(a,b){var c=-this.option("nDeceleration"),d=Math.min(b||1/0,Math.sqrt(a[0]*a[0]+a[1]*a[1])),e=Math.abs(d/c);return[a[0]/2*e,a[1]/2*e]},_getDurationFromRelPos:function(a){var b=this.option("nDeceleration"),c=Math.sqrt(a[0]*a[0]+a[1]*a[1]);return Math.sqrt(c/b*2)},_getPointOfIntersection:function(a,b,c,d,e){b=[b[0],b[1]];var f=b[0]-a[0],g=b[1]-a[1];return e[3]||(b[0]=Math.max(c[0],b[0])),e[1]||(b[0]=Math.min(d[0],b[0])),b[1]=f?a[1]+g/f*(b[0]-a[0]):b[1],e[0]||(b[1]=Math.max(c[1],b[1])),e[2]||(b[1]=Math.min(d[1],b[1])),b[0]=g?a[0]+f/g*(b[1]-a[1]):b[0],b},_animateBy:function(a,b,c,d){var e=this._aPos;return this._animateTo([e[0]+a[0],e[1]+a[1]],b,c,d)},_animateTo:function(a,b,c,d){var e,f,g,h,i,j=this,k=this._aPos,l=[a[0],a[1]];e=this.option("aCircular"),f=this.option("aBounce"),g=this.option("aMargin"),h=this.option("aMin"),i=this.option("aMax"),l=this._getPointOfIntersection(k,l,[h[0]-f[3],h[1]-f[0]],[i[0]+f[1],i[1]+f[2]],e);var m={aDepaPos:[k[0],k[1]],aDestPos:l,bBounce:c};!c&&this._aDirFilter&&this.fireEvent("release",m),f=this.option("aBounce"),g=this.option("aMargin"),h=this.option("aMin"),i=this.option("aMax"),l=m.aDestPos;var n=e[0]&&l[1]<h[1]||e[1]&&l[0]>i[0]||e[2]&&l[1]>i[1]||e[3]&&l[0]<h[0];(k[0]<h[0]||k[0]>i[0]||k[1]<h[1]||k[1]>i[1])&&(l[0]<h[0]||l[0]>i[0]||l[1]<h[1]||l[1]>i[1])&&(l=k);var o=[Math.abs(l[0]-k[0]),Math.abs(l[1]-k[1])],p=Math.min(d,this._getDurationFromRelPos(o));10>p&&(p=0);var q=function(){j._oAnimating=null,k[0]=Math.round(l[0]),k[1]=Math.round(l[1]),k=j._adjustCircularPos(k,h,i,e),b&&b()};if(!p)return q();m={nDuration:p,fEffect:jindo.m.Effect.cubicBezier(.18,.35,.56,1),aDepaPos:[k[0],k[1]],aDestPos:l,bBounce:c,bCircular:n,fDone:q};var r=this.fireEvent("animation",m);if(n&&!r)throw new Error("You can't stop the 'animation' event when 'bCircular' is true.");if(m.aDepaPos=k,m.nStartTime=(new Date).getTime(),this._oAnimating=m,r===!0){var s=this._oAnimating;!function t(){return j._oRaf=null,j._frame(s)>=1?q():void(j._oRaf=requestAnimationFrame(t))}()}},_frame:function(a,b){var c=Math.min(1,(new Date-a.nStartTime)/a.nDuration);return b=b||[],b[0]=1*a.fEffect(a.aDepaPos[0],a.aDestPos[0])(c),b[1]=1*a.fEffect(a.aDepaPos[1],a.aDestPos[1])(c),b=this._adjustCircularPos(b),this.fireEvent("change",{aPos:b,bHolding:!1}),c}}).extend(jindo.m.Component),jindo.m.CurrencyValidator=jindo.$Class({rx:/^[+\-]?[^\s\t\v\d]+(\d{1,3},)?(\d{3},)*(\d)+(\.\d+)?$/,_getCorrectedValue:function(a,b){return a=this._applyComma(this._filterNumber(a)),b=b||"\\",a="-"===a.charAt(0)?"-"+b+a.substring(1):b+a}}).extend(jindo.m.NumberValidator),jindo.m.PageLayoutUI=jindo.$Class({$init:function(a){this._initVar(a),this._showDefaultPage(),this.showLoading(),this._checkLayout(),this._rebuildLayout(),a&&a.fnDomReady&&"function"==typeof a.fnDomReady&&a.fnDomReady({welRoot:this.getRoot()}),this._initScrollManager(),this._bMultiPage?this._initMultiPage(this._aPages,this._nDefaultIndex):this._initPage(this._aPages[0],0),this._bUseFlicking||(this._bMultiPage?this._setMultiPagePosition():this._bMultiContent&&this._setMultiContentPosition()),this._bUseFlicking&&this._initFlicking(this._welFlickView.$value()),this._attachEvent(),this._bUseAjaxHistory&&this._initAjaxHistory()},_initVar:function(a){a=a||{},this._htEvent={},this._nCurrentIndex=a.nDefaultIndex||0,this._htScrollOption=a.htScrollOption||{},this._htFlickingOption=a.htFlickingOption||{},this._htFlickingOption.sClassPrefix=this._htFlickingOption.sClassPrefix||"flick-",this._htFlickingOption.sContentClass=this._htFlickingOption.sContentClass||"ct",this._htHistoryOption=a.htHistoryOption||{},this._bUseLoading=a.bUseLoading||!1,this._htLoadingOption=a.htLoadingOption||{},this._bUseFullScreen=a.bUseFullScreen||!1,this._oTimeout=null,this._oClientSize=jindo.$Document().clientSize(),this._welRoot=jindo.$Element(a.vBaseElement?a.vBaseElement:document.body),this._bUseRebuild=this._welRoot.attr("markup")&&"DETAILED"==this._welRoot.attr("markup").toUpperCase()?!1:!0,this._aPages=jindo.$ElementList(this._welRoot.queryAll(".jmc-page")).$value(),this._nPageCount=this._aPages.length,this._aContents=jindo.$ElementList(this._welRoot.queryAll(".jmc-content")).$value(),this._nContentCount=this._aContents.length,this._bMultiPage=this._nPageCount>1?!0:!1,this._bMultiContent=this._nContentCount>1?!0:!1},_showDefaultPage:function(){this._bMultiPage&&this._aPages[this._nCurrentIndex].show(),this._bMultiContent&&this._aPages[0].show()},_checkLayout:function(){var a=this._welRoot.attr("flicking")&&"YES"==this._welRoot.attr("flicking").toUpperCase()?!0:!1;this._bUseFlicking=this._bMultiPage&&a?!0:!this._bMultiPage&&this._nContentCount>1&&a?!0:!1,this._bUseAjaxHistory=this._bMultiPage||this._bMultiContent?!0:!1},_rebuildLayout:function(){if(this._bUseRebuild){var a,b,c=document.createDocumentFragment();this._bMultiPage&&this._bUseFlicking&&(this._welFlickView=jindo.$Element('<div class="'+this._htFlickingOption.sClassPrefix+'view"></div>'),b=jindo.$Element('<div class="'+this._htFlickingOption.sClassPrefix+'container"></div>'),this._welFlickView.appendTo(c),b.appendTo(this._welFlickView.$value()));for(var d=0;d<this._nPageCount;d++){var e=this._rebuildPage(this._aPages[d]);this._aPages[d].append(e),this._bMultiPage&&this._bUseFlicking&&(a=jindo.$Element('<div class="'+this._htFlickingOption.sClassPrefix+this._htFlickingOption.sContentClass+'"></div>'),a.appendTo(b.$value()),this._aPages[d].appendTo(a.$value())),this._aPages[d].show()}this._welRoot.append(c)}else this._bUseFlicking&&(this._welFlickView=jindo.$Element(this._welRoot.query("."+this._htFlickingOption.sClassPrefix+"view"))),!this._bMultiPage&&this._bMultiContent&&(this._welContentView=jindo.$Element(this._welRoot.query(".jmc-content-view")))},_rebuildPage:function(a){var b=document.createDocumentFragment(),c=jindo.$Element('<div class="scroll-wrapper"></div>'),d=jindo.$Element('<div class="scroller"></div>'),e=jindo.$Element(a.query(".jmc-header")),f=e&&"fixed"==e.attr("position")?!0:!1;if(f?e&&e.appendTo(b):e&&e.appendTo(d.$value()),!this._bMultiPage&&this._bMultiContent){var g=jindo.$ElementList(a.queryAll(".jmc-content")).$value(),h=this._rebuildFlickingContent(g);b.appendChild(h)}else{var i=jindo.$Element(a.query(".jmc-content"));c.appendTo(b),d.appendTo(c.$value()),i.appendTo(d.$value())}var j=jindo.$Element(a.query(".jmc-footer")),k=j&&"fixed"==j.attr("position")?!0:!1;return k?j&&j.appendTo(b):j&&j.appendTo(d.$value()),b},_rebuildFlickingContent:function(a){var b,c=document.createDocumentFragment();this._bUseFlicking?(this._welFlickView=jindo.$Element('<div class="'+this._htFlickingOption.sClassPrefix+'view"></div>'),b=jindo.$Element('<div class="'+this._htFlickingOption.sClassPrefix+'container"></div>'),this._welFlickView.appendTo(c),b.appendTo(this._welFlickView.$value())):(this._welContentView=jindo.$Element('<div class="jmc-content-view"></div>'),this._welContentView.appendTo(c));for(var d,e,f,g,h=0,i=a.length;i>h;h++)f=jindo.$Element('<div class="scroll-wrapper"></div>'),g=jindo.$Element('<div class="scroller"></div>'),this._bUseFlicking?(d=jindo.$Element('<div class="'+this._htFlickingOption.sClassPrefix+this._htFlickingOption.sContentClass+'"></div>'),d.appendTo(b.$value()),f.appendTo(d.$value())):(e=jindo.$Element('<div class="jmc-content-ct" style="background-color:#fff;"></div>'),e.appendTo(this._welContentView.$value()),f.appendTo(e.$value())),g.appendTo(f.$value()),a[h].appendTo(g.$value());return c},_attachEvent:function(){this._htEvent.rotate=jindo.$Fn(this._onResize,this).bind(),jindo.m.bindRotate(this._htEvent.rotate),this._htEvent.load=jindo.$Fn(this._onLoad,this).attach(window,"load")},_onLoad:function(){var a=jindo.$Document().clientSize(),b=this;jindo.m._maxClientSize(function(c){a=c,b._onResize()}),this._oClientSize.height!=a.height||this._oClientSize.width!=a.width?this._onResize():this.hideLoading()},_onResize:function(){this._oTimeout&&(clearTimeout(this._oTimeout),this._oTimeout=null),this._oClientSize=jindo.$Document().clientSize();var a=this;jindo.m._maxClientSize(function(b){a._oClientSize=b,a._setSizeWhenResize()}),this._setSizeWhenResize(),this.hideLoading(),this._hideAddress()},_setSizeWhenResize:function(){this._bMultiPage?this._bUseFlicking?(this._resizeFlicking(),this._resizePage(),this._resizeScroll()):(this._resizePage(),this._resizeScroll()):this._bMultiContent?this._bUseFlicking?(this._resizePage(),this._resizeFlicking(),this._resizeScroll()):(this._resizePage(),this._resizeContentView(),this._resizeScroll()):(this._resizePage(),this._resizeScroll())},_hideAddress:function(){this._bUseFullScreen&&setTimeout(function(){window.scrollTo(0,1)},500)},_resizePage:function(){for(var a=0;a<this.getPageCount();a++)this._aPages[a].oPage.resize(this._oClientSize)},_resizeContentView:function(){var a=this._getFlickSize();this._welContentView.css({position:"relative",width:a.width+"px",height:a.height+"px"})},_resizeFlicking:function(){if(!this._bUseFlicking)return!1;var a=this._getFlickSize();this._oFlicking.resize({nFlickWidth:a.width,nFlickHeight:a.height})},_resizeScroll:function(){for(var a=[],b=0;b<this.getPageCount();b++)a.push({nScrollWidth:this._aPages[b].oPage.getNoneFixedWidth(),nScrollHeight:this._aPages[b].oPage.getNoneFixedHeight()});this._oScroll.resize(a)},_initLoading:function(){return this._bUseLoading?(this._oLoading=new jindo.m.Loading(null,this._htLoadingOption),void this._oLoading.show()):!1},_initScrollManager:function(){this._oScroll=new jindo.m.PageLayoutUI.ScrollManager({oPageLayout:this,htOption:this._htScrollOption})},addScroll:function(a){this._oScroll.addScroll(a)},_initMultiPage:function(a){for(var b=0;b<this.getPageCount();b++)this._initPage(a[b],b)},_setMultiContentPosition:function(){if(!this._bMultiContent)return!1;this._resizeContentView(),this._aContentCT=jindo.$ElementList(this._welRoot.queryAll(".jmc-content-ct")).$value();for(var a,b=0;b<this.getContentCount();b++)a=b===this._nCurrentIndex?10:1,this._aContentCT[b].css({top:"0px",left:"0px",position:"absolute",overflow:"hidden",zIndex:a})},_setMultiPagePosition:function(){if(!this._bMultiPage)return!1;for(var a,b=0;b<this.getPageCount();b++)a=b===this._nCurrentIndex?10:1,this._aPages[b].welPage.css({top:"0px",left:"0px",position:"absolute",overflow:"hidden",zIndex:a})},_initPage:function(a,b){this._aPages[b]={welPage:a,oPage:new jindo.m.PageLayoutUI.Page(a.$value(),{oPageLayout:this,nIndex:b,nCurrentIndex:this._nCurrentIndex,htPageSize:this._oClientSize})}},_initFlicking:function(a){var b=this._getFlickSize();this._oFlicking=jindo.m.PageLayoutUI.Flicking,this._oFlicking.init(a,{oPageLayout:this,nDefaultIndex:this._nCurrentIndex,nFlickWidth:b.width,nFlickHeight:b.height,htOption:this._htFlickingOption})},_initAjaxHistory:function(){this._oAjaxHistory=jindo.m.PageLayoutUI.AjaxHistory,this._oAjaxHistory.init({oPageLayout:this,htOption:this._htHistoryOption})},_getFlickSize:function(){var a={};return this._bMultiPage?a=this._oClientSize:(a.width=this._aPages[0].oPage.getNoneFixedWidth(),a.height=this._aPages[0].oPage.getNoneFixedHeight()),a},getCurrentIndex:function(){return this._bUseFlicking&&(this._nCurrentIndex=this._oFlicking.getCurrentIndex()),this._nCurrentIndex},getPageCount:function(){return this._nPageCount},getContentCount:function(){var a;return a=this._bMultiPage?this.getPageCount():this._oScroll.getScrollCount()},getContentCT:function(a){return this._aContentCT[a]},getRoot:function(){var a;return a=this._bMultiPage&&this._bUseFlicking?this._welFlickView:this._welRoot},getPage:function(a){var b;if("undefined"==typeof a){b=[];for(var c=0;c<this.getContentCount();c++)b.push(this._getPage(c))}else b=this._getPage(a);return b},_getPage:function(a){var b;b=this._bMultiPage?a:0;var c=this._aPages[b].oPage,d={welHeader:jindo.$Element(c.getHeader()),welContent:this._oScroll.getScrollContent(a),welFooter:jindo.$Element(c.getFooter())};return d},refresh:function(){this._onResize()},addHistory:function(){this._oAjaxHistory.addHistory()},changeHistory:function(a){this._bUseFlicking?this._oFlicking.moveTo(a):this.moveTo(a)},moveTo:function(a){if("undefined"==typeof a)return!1;if(this._bUseFlicking)this._oFlicking.moveTo(a);else{if(!this.onBeforeMovePage({nContentsIndex:this.getCurrentIndex(),nContentsNextIndex:a}))return;this.show(a),this.onAfterMovePage({nContentsIndex:a})}},show:function(a){return"undefined"==typeof a?!1:(this.hide(this.getCurrentIndex()),this._bMultiPage?this._aPages[a].oPage.show():this._bMultiContent&&this._aPages[0].oPage.showContentView(a),void(this._nCurrentIndex=a))},hide:function(a){"undefined"==typeof a&&(a=this._nCurrentIndex),this._bMultiPage?this._aPages[a].oPage.hide():this._bMultiContent&&this._aPages[0].oPage.hideContentView(a)},showLoading:function(){return this._bUseLoading?(this._oLoading||this._initLoading(),void this._oLoading.show()):!1},hideLoading:function(){return this._bUseLoading?void this._oLoading.hide():!1},onTouchStartFlicking:function(a){return this.fireEvent("touchStart",{sType:"touchStart",element:a.element,nX:a.nX,nY:a.nY})},onBeforeMovePage:function(a){return this.fireEvent("beforeMovePage",{sType:"beforeMovePage",nCurrentPage:a.nContentsIndex,nPage:a.nContentsNextIndex,bLeft:a.bLeft})},onAfterMovePage:function(a){this._bUseAjaxHistory&&this.addHistory(),this.fireEvent("afterMovePage",{sType:"afterMovePage",nCurrentPage:a.nContentsIndex})}}).extend(jindo.m.Component),jindo.m.PageLayoutUI.Page=jindo.$Class({$init:function(a,b){this._initVar(a,b),this._setWrapperElement(),this._setFixedArea(),this._initScroll()},_initVar:function(a,b){this._welPage=jindo.$Element(a),this._oPageLayout=b.oPageLayout,this._nIndex=b.nIndex,this._htPageSize=b.htPageSize,this._htWElement={}},_setWrapperElement:function(){this._htWElement.header=jindo.$Element(this._welPage.query(".jmc-header")),this._htWElement.footer=jindo.$Element(this._welPage.query(".jmc-footer"))},_onActivate:function(){},_onDeactivate:function(){},_setFixedArea:function(){this._bHeaderFixed=this._htWElement.header&&"fixed"==this._htWElement.header.attr("position")?!0:!1,this._bFooterFixed=this._htWElement.footer&&"fixed"==this._htWElement.footer.attr("position")?!0:!1},_initScroll:function(){this._oPageLayout.addScroll({welBaseElement:this._welPage,nScrollWidth:this.getNoneFixedWidth(),nScrollHeight:this.getNoneFixedHeight()})},_getHeight:function(a){var b=a.$value().offsetHeight;return b+=parseInt(a.css("marginTop"),10)+parseInt(a.css("marginBottom"),10)||0},_getHeaderHeight:function(){var a=this._getHeight(this._htWElement.header);return a},_getFooterHeight:function(){var a=this._getHeight(this._htWElement.footer);return a},resize:function(a){this._htPageSize=a||jindo.$Document().clientSize()},getNoneFixedWidth:function(){var a=this._htPageSize.width;return a},getNoneFixedHeight:function(){var a,b=this._htPageSize.height;return a=this._bHeaderFixed?this._bFooterFixed?parseInt(b-this._getHeaderHeight()-this._getFooterHeight(),10):parseInt(b-this._getHeaderHeight(),10):this._bFooterFixed?parseInt(b-this._getFooterHeight(),10):b},getHeader:function(){return this._htWElement.header?this._htWElement.header.$value():null},getFooter:function(){return this._htWElement.footer?this._htWElement.footer.$value():null},showContentView:function(a){var b=this._oPageLayout.getContentCT(a);b.css({zIndex:10})},hideContentView:function(a){var b=this._oPageLayout.getContentCT(a);b.css({zIndex:1})},show:function(){this._welPage.css({zIndex:10})},hide:function(){this._welPage.css({zIndex:1})}}),jindo.m.PageLayoutUI.ScrollManager=jindo.$Class({$init:function(a){this._initVar(a)},_initVar:function(a){this._aScrolls=[],this._aScrollOptions=[],this._oPageLayout=a.oPageLayout,this._htOption=a.htOption,this._nTotalScrollCnt=0},addScroll:function(a){this._aScrollWrappers=jindo.$ElementList(a.welBaseElement.queryAll(".scroll-wrapper")).$value(),this._nTotalScrollCnt+=this._aScrollWrappers.length;var b,c,d,e,f,g=a.nScrollWidth,h=a.nScrollHeight;f=this._htOption||{},f.nWidth=g,f.nHeight=h;for(var i=0,j=this._aScrollWrappers.length;j>i;i++)b=this._aScrollWrappers[i],e=new jindo.m.Scroll(b.$value(),f),d=jindo.$Element(b.query(".jmc-content")),d.show(),e.refresh(),e.hasVScroll()||(c=jindo.$Element(b.query(".scroller")),c.css({width:g+"px",height:h-1+"px"})),this._aScrolls.push(e),f={welWrapper:b,welScroller:c,welContent:d,nWidth:g,nHeight:h},this._aScrollOptions.push(f)},getScrollCount:function(){return this._aScrolls.length},getScrollWrapper:function(a){var b;return b="undefined"==typeof a?this._aScrollWrappers:this._aScrollWrappers[a]},getScrollContent:function(a){var b;if("undefined"==typeof a){b=[];for(var c=0,d=this._aScrollOptions.length;d>c;c++)b.push(this._aScrollOptions[a].welContent)}else b=this._aScrollOptions[a].welContent;return b},resize:function(a){for(var b,c,d,e=0,f=this._aScrolls.length;f>e;e++)b=a[e]||a[0],c=b.nScrollWidth,d=b.nScrollHeight,this._aScrolls[e].hasVScroll()||this._aScrollOptions[e].welScroller.css({width:c+"px",height:d+"px"}),this._aScrolls[e].option({nWidth:c,nHeight:d}),this._aScrolls[e].refresh(),this._aScrollOptions[e].nWidth=c,this._aScrollOptions[e].nHeight=d
}}),jindo.m.PageLayoutUI.Flicking={init:function(a,b){this._initVar(a,b),this._setFlickingArea(),b=this._htOption,b.bAutoResize=!1,b.nDefaultIndex=this._nCurrentIndex,b.bUseDiagonalTouch=!1,this._oFlicking=new jindo.m.Flicking(this._welFlickView.$value(),b),this._oFlicking.attach({touchStart:jindo.$Fn(this._onTouchStartFlicking,this).bind(),beforeFlicking:jindo.$Fn(this._onStartFlicking,this).bind(),afterFlicking:jindo.$Fn(this._onEndFlicking,this).bind(),move:jindo.$Fn(this._onEndFlicking,this).bind()})},_initVar:function(a,b){this._welFlickView=jindo.$Element(a),this._oPageLayout=b.oPageLayout,this._nWidth=b.nFlickWidth,this._nHeight=b.nFlickHeight,this._nCurrentIndex=b.nDefaultIndex,this._htOption=b.htOption||{},this._aFlickingContents=jindo.$ElementList(this._welFlickView.queryAll("."+this._htOption.sClassPrefix+this._htOption.sContentClass)).$value(),this._aInnerContents=jindo.$ElementList(this._welFlickView.queryAll(".jmc-content")).$value()},_setFlickingArea:function(){this._welFlickView.css({width:this._nWidth+"px",height:this._nHeight+"px"});for(var a,b=0,c=this._aFlickingContents.length;c>b;b++)a=this._aFlickingContents[b],a.css({"float":"left",width:"100%",height:"100%"})},_onTouchStartFlicking:function(a){return this._oPageLayout.onTouchStartFlicking(a)?!0:a.stop?void a.stop():!1},_onStartFlicking:function(a){return this._oPageLayout.onBeforeMovePage(a)?!0:a.stop?void a.stop():!1},_onEndFlicking:function(a){a.nContentsIndex;this._oPageLayout.onAfterMovePage(a)},resize:function(a){this._nWidth=a.nFlickWidth,this._nHeight=a.nFlickHeight,this._welFlickView.css({width:this._nWidth+"px",height:this._nHeight+"px"}),this._oFlicking.refresh()},getCurrentIndex:function(){return this._oFlicking.getContentIndex()},moveTo:function(a,b){return"undefined"==typeof a?!1:void(this._onStartFlicking({nContentsIndex:this._oFlicking.getContentIndex(),nContentsNextIndex:a})&&this._oFlicking.moveTo(a,b))}},jindo.m.PageLayoutUI.AjaxHistory={init:function(a){this._initVar(a),this._oAjaxHistory=new jindo.m.AjaxHistory(this._htOption),this._oAjaxHistory.attach({load:jindo.$Fn(this._onLoadHistory,this).bind(),change:jindo.$Fn(this._onChangeHistory,this).bind()}),this._oAjaxHistory.initialize()},_initVar:function(a){this._oPageLayout=a.oPageLayout,this._htOption=a.htOption},_onLoadHistory:function(){this.addHistory(!0)},_onChangeHistory:function(a){var b=jindo.$Json(a.htHistoryData).toObject();this._oPageLayout.changeHistory(b.page)},addHistory:function(a){this._oAjaxHistory.addHistory({page:this._oPageLayout.getCurrentIndex()},a)}},jindo.m.PageNavigation=jindo.$Class({$init:function(a,b){this.option({sClassPrefix:"page_",nItem:10,nItemPerPage:10,nPage:1,bActivateOnload:!0,sInfoTemplate:"{=PAGE} / {=TOTALPAGE}",bUseCircular:!1,htAjax:{}}),this.option(b||{}),this._initVar(),this._setWrapperElement(a),this.option("bActivateOnload")&&(this.activate(),this._nCurrentPage=this.option("nPage"))},_initVar:function(){var a={sApi:null,htAjaxOption:{type:"xhr"},htQuery:{},sPage:"page",sDisplay:"display"},b=this.option("htAjax");if(!b)return void this.option("htAjax",a);for(var c in a)"undefined"==typeof b[c]&&(b[c]=a[c]);for(c in a.htAjaxOption)"undefined"==typeof b.htAjaxOption[c]&&(b.htAjaxOption[c]=a.htAjaxOption[c]);for(c in a.htQuery)"undefined"==typeof b.htQuery[c]&&(b.htQuery[c]=a.htQuery[c]);b.sApi&&(this.oAjax=new jindo.$Ajax(b.sApi,b.htAjaxOption))},_setWrapperElement:function(a){this._htWElement={},a=jindo.$(a);var b="."+this.option("sClassPrefix");this._htWElement.elBase=jindo.$Element(a),this._htWElement.elPrev=jindo.$Element(jindo.$$.getSingle(b+"prev",a)),this._htWElement.elNext=jindo.$Element(jindo.$$.getSingle(b+"next",a)),this._htWElement.elPrevOff=jindo.$Element(jindo.$$.getSingle(b+"prev-off",a)),this._htWElement.elNextOff=jindo.$Element(jindo.$$.getSingle(b+"next-off",a)),this._htWElement.elInfo=jindo.$Element(jindo.$$.getSingle(b+"info",a))},_onClickPrev:function(a){if(a.stop(jindo.$Event.CANCEL_DEFAULT),!this.hasPreviousPage())return void(this.option("bUseCircular")&&this.movePageTo(this.getTotalPages()));var b=this.getCurrentPage();this.movePageTo(b-1)},_onClickNext:function(a){if(a.stop(jindo.$Event.CANCEL_DEFAULT),!this.hasNextPage())return void(this.option("bUseCircular")&&this.movePageTo(1));var b=this.getCurrentPage();this.movePageTo(b+1)},movePageTo:function(a,b){"undefined"==typeof b&&(b=!0),(!b||this._fireEventBefore(a))&&(this.option("htAjax").sApi?this._callAjax(a,b):(this._move(a),b&&this._fireEventEnd(),this.updateInfo(),this.updateNavigation()))},_move:function(a){var b=this._convertToAvailPage(a);b!=this._nCurrentPage&&(this._nCurrentPage=b)},_callAjax:function(a,b){var c=this;this.oAjax.option("onload",null),this.oAjax.option("onload",function(d){c._onAjaxResponse(d,a,b)}),this.oAjax.request(this._getQueryString(a))},_fireEventBefore:function(a){return this.fireEvent("beforeMove",{nPage:a,nCurrentPage:this.getCurrentPage(),nItemCount:this.getItemCount(),nItemPerPage:this.getItemPerPage(),nTotalPages:this.getTotalPages()})},_fireEventEnd:function(a){"undefined"==typeof a&&(a=null);var b=this.getCurrentPage(),c=this.getPageItemIndex(b);return this.fireEvent("move",{nPage:this.getCurrentPage(),nStartIndex:c.nStart,nEndIndex:c.nEnd,oResponse:a,nItemCount:this.getItemCount(),nItemPerPage:this.getItemPerPage(),nTotalPages:this.getTotalPages()})},_onAjaxResponse:function(a,b,c){this._move(b),c&&this._fireEventEnd(a),this.updateInfo(),this.updateNavigation()},_getQueryString:function(a){var b=this.option("htAjax").htQuery||{},c=this.getPageItemIndex(a);return b[this.option("htAjax").sPage]=a,b[this.option("htAjax").sDisplay]=Math.min(this.getItemPerPage(),this.getItemCount()-c.nStart),b},updateInfo:function(){if(this._htWElement.elInfo){var a=this.getCurrentPage(),b=this.getPageItemIndex(a),c=this.option("sInfoTemplate").replace(/\{=PAGE\}/,a).replace(/\{=TOTALPAGE\}/,this.getTotalPages()).replace(/\{=ITEMCOUT\}/,this.option("nItem")).replace(/\{=STARTINDEX\}/,b.nStart+1).replace(/\{=ENDINDEX\}/,b.nEnd+1);this._htWElement.elInfo.html(c)}},updateNavigation:function(){var a=this.getCurrentPage();this._htWElement.elPrev&&this._htWElement.elPrev.hide(),this._htWElement.elNext&&this._htWElement.elNext.hide(),this._htWElement.elPrevOff&&this._htWElement.elPrevOff.hide(),this._htWElement.elNextOff&&this._htWElement.elNextOff.hide(),1!=this.getTotalPages()&&(this.option("bUseCircular")?(this._htWElement.elPrev&&this._htWElement.elPrev.show("inline-block"),this._htWElement.elNext&&this._htWElement.elNext.show("inline-block")):1==a?(this._htWElement.elPrevOff&&this._htWElement.elPrevOff.show("inline-block"),this._htWElement.elNext&&this._htWElement.elNext.show("inline-block")):a==this.getTotalPages()?(this._htWElement.elNextOff&&this._htWElement.elNextOff.show("inline-block"),this._htWElement.elPrev&&this._htWElement.elPrev.show("inline-block")):(this._htWElement.elPrev&&this._htWElement.elPrev.show("inline-block"),this._htWElement.elNext&&this._htWElement.elNext.show("inline-block")))},reset:function(a){"undefined"==typeof a&&(a=this.option("nItem")),this.setItemCount(a),this.movePageTo(1,!1)},_onActivate:function(){this._attachEvent()},_onDeactivate:function(){this._detachEvent()},_attachEvent:function(){this._htEvent={},this._htWElement.elNext&&(this._htEvent.click_Next={ref:jindo.$Fn(this._onClickNext,this).attach(this._htWElement.elNext,"click"),el:this._htWElement.elNext.$value()}),this._htWElement.elPrev&&(this._htEvent.click_Prev={ref:jindo.$Fn(this._onClickPrev,this).attach(this._htWElement.elPrev,"click"),el:this._htWElement.elPrev.$value()})},_detachEvent:function(){for(var a in this._htEvent){var b=this._htEvent[a];b.ref.detach(b.el,a.substring(0,a.indexOf("_")))}this._htEvent=null},destroy:function(){this.deactivate();for(var a in this._htWElement)this._htWElement[a]=null;this._htWElement=null}}).extend(jindo.m.CorePagination),jindo.m.PopEffect=jindo.$Class({sEffectName:"pop",getCommand:function(a,b){var c=b.sDirection?b.sDirection:"in",d=b.htTo||{};"undefined"==typeof d.opacity&&(d.opacity="in"==c?1:.1);var e="in"==c?1:this.bIos3||this.bAndroid3Up?.1:0,f={};"out"==c&&(f.htStyle={},f.htStyle["@display"]="none",f.htStyle["@opacity"]=this._htLayerInfo.nOpacity,f.htStyle["@transform"]="scale(1)");var g="scale("+e+")";this.bAndroid3Up,d.transformOrigin="50% 50%",d.transform=g;var h={};return this.getTranslateStyle(d,h),{sTaskName:this.sEffectName+"-"+c,htStyle:h,fCallback:f}},getBeforeCommand:function(a,b){var c=b.sDirection?b.sDirection:"in",d=b.htFrom||{};"undefined"==typeof d.opacity&&(d.opacity="in"==c?.1:1),d.display=this._htLayerInfo.sDisplay;var e="in"==c?this.bIos3||this.bAndroid3Up?.1:0:1,f="scale("+e+")";this.bAndroid3Up,d.transformOrigin="50% 50%",d.transform=f;var g={};return this.getTranslateStyle(d,g),{htStyle:g}}}).extend(jindo.m._Effect_),jindo.m.PreventClickEvent=jindo.$Class({$init:function(a,b){this.option({bActivateOnload:!0,sClassPrefix:"evt-"}),this.option(b||{}),this._setWrapperElement(a),this.option("bActivateOnload")&&this.activate()},_setWrapperElement:function(a){this._htWElement={},this._htWElement.target=jindo.$Element(a)},_onDeactivate:function(){this._detachEvents()},_onActivate:function(){this._attachEvents()},_attachEvents:function(){this._htEvent={},this._htEvent.prevent=jindo.$Fn(this._onPrevent,this).attach(this._htWElement.target,"touchstart")},_detachEvents:function(){this._htEvent.prevent.detach(this._htWElement.target,"touchstart"),this._htEvent.prevent=null},_onPrevent:function(a){var b=jindo.$Element(jindo.m.getNodeElement(a.element));return b.hasClass(this.option("sClassPrefix")+"except")?void this.fireEvent("pass",{wel:b}):(a.stop(jindo.$Event.CANCEL_ALL),this.fireEvent("prevent",{wel:b}),!1)},destroy:function(){this.deactivate();for(var a in this._htWElement)this._htWElement[a]=null;this._htWElement=null,this._htEvent=null}}).extend(jindo.m.UIComponent),jindo.m.PreviewFlicking=jindo.$Class({$init:function(a,b){this.option({nTotalContents:5,nWidthPer:50}),this.option(b||{}),this._initVar(),this._setWrapperElement(a),this.option("bActivateOnload")&&this.activate()},_initVar:function(){jindo.m.Flick.prototype._initVar.apply(this),this._nDefaultPanel=5},_onActivate:function(){jindo.m.Flick.prototype._onActivate.apply(this);var a=this;this.set(new jindo.m.Slide(this._getAnimationOption()).attach({set:function(b){a._setStyle(b.css)}}),this._htWElement.container)},_setStyle:function(a){{var b={},c=this._bUseH?"width":"height";this._bUseH?"left":"top"}for(var d in a)b[d]=a[d];if(b.position="relative",this._bUseCircular&&(a.position="absolute"),this._bUseH)b.clear="both",a["float"]="left",this._htWElement.base.css("margin","0 auto");else{var e=this._htWElement.view.height(),f=(e-this._htWElement.aPanel[0].height())/2;this._htWElement.base.css("marginTop",f+"px")}if(this.option("nMinWidth")){var g=c.charAt(0).toUpperCase()+c.substr(1);this._htWElement.base.css("min"+g,this.option("nMinWidth").replace(/\D/gi,"")+"px")}this._htWElement.base.css({position:"relative"}),this._htWElement.base.css(c,this.option("nWidthPer")+"%"),this._htWElement.container.css(b);var h=this;jindo.$A(this._htWElement.aPanel).forEach(function(b){var d=b;h._bUseCircular&&d.css("position","absolute"),this._bUseH?a[c]=100/h._htWElement.aPanel.length+"%":a.width="100%",d.css(a)},this)},_setWrapperElement:function(a){jindo.m.SwipeCommon.prototype._setWrapperElement.call(this,a);this.option("bHorizontal")?"height":"width";this._htWElement.aPanel=this._htWElement.container.queryAll("."+this.option("sClassPrefix")+this.option("sContentClass"));for(var b in this._htWElement.aPanel)this._htWElement.aPanel[b]=jindo.$Element(this._htWElement.aPanel[b]);this._htWElement.container.css({left:"",top:""})},resize:function(){jindo.m.SwipeCommon.prototype.resize.call(this),this._restorePanel();{var a=this._bUseH?"width":"height";this._htWElement.view[a]()}this._htWElement.container.css(a,100*this._htWElement.aPanel.length+"%"),this._nRange=this._bUseH?this._htWElement.aPanel[0].width():this._htWElement.aPanel[0].height(),this._refreshPanelInfo(),this._bUseH?(this._htSize.maxX=(this.option("nTotalContents")-1)*-this._nRange,this._nX=this._aPos[this.getContentIndex()]):(this._htSize.maxY=(this.option("nTotalContents")-1)*-this._nRange,this._nY=this._aPos[this.getContentIndex()]),this._updateFlickInfo(),this._bUseCircular||this._oAnimation.move(this._nX,this._nY)},_restorePanel:function(a){a=a||this.getElement();var b=this.getTotalPanels(),c=this._bUseH?"left":"top",d=this._getIndexByElement(a);this._htWElement.container.css(this._oAnimation.p("Transform"),this._getTranslate(0));for(var e=0,f=Math.floor(b/2),g=0;b>g;g++)e=g-d,this._bUseCircular&&(e>f?e-=b:-f>e&&(e+=b)),this._htWElement.aPanel[g].css(c,20*e+"%"),0==e?this._htWElement.aPanel[g].css("zIndex",10):this._htWElement.aPanel[g].css("zIndex",1)},_getPosValue:function(a){return this._hasOffsetBug()?a:this._getTranslate(a)},_panelEndAfterCall:function(){this._bUseCircular&&this._restorePanel()},_moveAfterCall:function(a){this._oAnimation.move(this._nX,this._nY,0,this._makeOption({next:a.bNext,startIndex:this._nPosToIndex}))},getIndexByElement:function(a){for(var b=-1,c=0,d=this._htWElement.aPanel.length;d>c;c++)if(this._htWElement.aPanel[c].$value()===a){b=c;break}return b},destroy:function(){jindo.m.Flick.prototype.destroy.apply(this)}}).extend(jindo.m.Flick),jindo.m.PullPlugin=jindo.$Class({$init:function(a){this.option(a.option()),this._initVar(a),this._initPullDownFunc(),this._initPullUpFunc()},_initVar:function(a){this._oParent=a,this._htWElement=a._htWElement,this._isPullDown=!1,this._isPullUp=!1,this._isUpdating=!1,this._nOrgMaxScrollTop=null,this._htWElement.pullDown=jindo.$Element(this._htWElement.wrapper.query("."+this.option("sClassPrefix")+"pullDown")),this._htWElement.pullUp=jindo.$Element(this._htWElement.wrapper.query("."+this.option("sClassPrefix")+"pullUp"))},refresh:function(){this.option(this._oParent.option()),this._isUpdating=!1,this._nOrgMaxScrollTop=null,this._isPullDown=this.option("bUsePullDown")&&this.option("bUseVScroll")&&!this.option("bUseHScroll")&&this.option("bUseBounce")&&null!==this._htWElement.pullDown,this._isPullUp=this.option("bUsePullUp")&&this.option("bUseVScroll")&&!this.option("bUseHScroll")&&this.option("bUseBounce")&&null!==this._htWElement.pullUp,this._isPullDown&&this.option("fnPullDownIdle")&&(this._htWElement.pullDown._isReady_=!1,this._htWElement.pullDown.show(),this.option("fnPullDownIdle")(this._htWElement.pullDown)),this._isPullUp&&this.option("fnPullUpIdle")&&(this._htWElement.pullUp._isReady_=!1,this._htWElement.pullUp.show(),this.option("fnPullUpIdle")(this._htWElement.pullUp)),this.option("bUseVScroll")||(null!==this._htWElement.pullDown&&this._htWElement.pullDown.hide(),null!==this._htWElement.pullUp&&this._htWElement.pullUp.hide()),this._oParent.nScrollW=this._htWElement.scroller.width(),this._oParent.nScrollH=this._htWElement.scroller.height()-this._getBottomMargin(),this._oParent.nMinScrollTop=-this._getTopMargin(),this._oParent.nMaxScrollTop=this._oParent.nWrapperH-this._oParent.nScrollH},_getTopMargin:function(){return(this._isPullDown?this._htWElement.pullDown.height():0)+this.option("nOffsetTop")},_getBottomMargin:function(){return(this._isPullUp?this._htWElement.pullUp.height():0)+this.option("nOffsetBottom")},_initPullDownFunc:function(){this.option("bUsePullDown")===!0&&(this.option("fnPullDownIdle")||this.option("fnPullDownIdle",function(a){a.html("업데이트하시려면 아래로 내려주세요")}),this.option("fnPullDownBeforeUpdate")||this.option("fnPullDownBeforeUpdate",function(a){a.html("업데이트 합니다")}),this.option("fnPullDownUpdating")||this.option("fnPullDownUpdating",function(a){a.html("업데이트 중입니다...")}))},_initPullUpFunc:function(){this.option("bUsePullUp")===!0&&(this.option("fnPullUpIdle")||this.option("fnPullUpIdle",function(a){a.html("더 보시려면 위로 올려주세요")}),this.option("fnPullUpBeforeUpdate")||this.option("fnPullUpBeforeUpdate",function(a){a.html("로드 합니다")}),this.option("fnPullUpUpdating")||this.option("fnPullUpUpdating",function(a){a.html("로드 중...")}))},touchMoveForUpdate:function(a,b){if(!this._isUpdating){var c=this._getTopMargin(),d=this._getBottomMargin();b=this._nOrgMaxScrollTop||b,this._isPullDown&&(this._htWElement.pullDown._isReady_?c>this._oParent._nTop&&(this._htWElement.pullDown._isReady_=!1,this.option("fnPullDownIdle")&&(this.option("fnPullDownIdle")(this._htWElement.pullDown),this._oParent.nMinScrollTop=-c)):this._oParent._nTop>c&&(this._htWElement.pullDown._isReady_=!0,this.option("fnPullDownBeforeUpdate")&&(this.option("fnPullDownBeforeUpdate")(this._htWElement.pullDown),this._oParent.nMinScrollTop=0))),this._isPullUp&&(this._htWElement.pullUp._isReady_?this._oParent._nTop>=b-d&&(this._htWElement.pullUp._isReady_=!1,this.option("fnPullUpIdle")&&(this.option("fnPullUpIdle")(this._htWElement.pullUp),this._oParent.nMaxScrollTop=b)):this._oParent._nTop<this._oParent.nMaxScrollTop-d&&(this._htWElement.pullUp._isReady_=!0,this.option("fnPullUpBeforeUpdate")&&(this.option("fnPullUpBeforeUpdate")(this._htWElement.pullUp),this._nOrgMaxScrollTop=b,this._oParent.nMaxScrollTop=b-d)))}},pullUploading:function(){var a=null,b=null;if(this._isPullDown&&this._htWElement.pullDown._isReady_&&(b=this._htWElement.pullDown,a=a||!1),this._isPullUp&&this._htWElement.pullUp._isReady_&&(b=this._htWElement.pullUp,a=a||!0),!b)return!1;var c=this.option(a?"fnPullUpUpdating":"fnPullDownUpdating"),d=this;this._isUpdating=!0,b._isReady_=!1,c&&setTimeout(function(){c(b),a?d._fireEventPullUp():d._fireEventPullDown()},0)},_fireEventPullDown:function(){this._htWElement&&this._oParent.fireEvent("pullDown",{welElement:this._htWElement.pullDown,oScroll:this._oParent})},_fireEventPullUp:function(){this._htWElement&&this._oParent.fireEvent("pullUp",{welElement:this._htWElement.pullUp,oScroll:this._oParent})}}).extend(jindo.m.Component),jindo.m.RadioButton=jindo.$Class({$init:function(a,b){this.option({sClassPrefix:"frb-",sType:"v",bActivateOnload:!0,sUncheckBgColor:"transparent"}),this.option(b||{}),this._initVar(),this._setWrapperElement(a,this.option("sClassPrefix")),this._initRadioLoad(),this.option("bActivateOnload")&&this.activate()},_initVar:function(){this.$super._initVar("radio","radiobtn"),this._nPreSelectIdx=-1},_initRadioLoad:function(){for(var a=this._aWElFormList,b=0;b<a.length;b++)if(a[b].$value().checked){this._setChecked(b);break}},_afterCheck:function(a){var b=-1;b=this._htWElement.container.indexOf(a),this._setChecked(b)},_onFormClick:function(a){var b=this._sUnitClass,c=jindo.$Element(a.element);c=c.parent(function(a){return a.hasClass(b)})[0];var d=c.attr("data-cb-checked");a.element.checked=d&&"on"==d?!0:!1;var e=this._htWElement.container.indexOf(c);a.element.checked&&this._nPreSelectIdx!=e&&this._onCheck(a)},_setChecked:function(a){var b=this._aWElFormList[a].$value(),c=this._aWElUnitList[a];if(b.disabled)return!1;var d=this.option("sCheckBgColor"),e=null,f=null;this._nPreSelectIdx>-1&&(d=d?this.option("sUncheckBgColor"):null,e=this._aWElUnitList[this._nPreSelectIdx].$value(),f=this._aWElFormList[this._nPreSelectIdx].$value(),this._aWElUnitList[this._nPreSelectIdx].removeClass(this._sOnClass),f.checked=!1,d&&this._aWElUnitList[this._nPreSelectIdx].css("backgroundColor",d+" !important")),c.addClass(this._sOnClass),c.attr("data-cb-checked","on"),b.checked=!0,d=this.option("sCheckBgColor"),d&&c.css("backgroundColor",d+" !important"),this._nPreSelectIdx=a,this.fireEvent("checked",{elPreRadioButtonUnit:e,elPreRadioButton:f,elRadioButtonUnit:c.$value(),elRadioButton:b})},getCheckedValue:function(){var a="";return this._nPreSelectIdx>-1&&(this._aWElFormList[this._nPreSelectIdx].$value().disabled||(a=this._aWElFormList[this._nPreSelectIdx].$value().value)),a},setCheckedButton:function(a){var b=this._getFormIdx(a);b.length>0&&this._setChecked(b[0])},enable:function(a){var b=this._useSettingForm(a,!0);this.fireEvent("enable",{aRadioButtonList:b.aFormList,aRadioButtonUnitList:b.aUnitList})},disable:function(a){var b=this._useSettingForm(a,!1);this.fireEvent("disable",{aRadioButtonList:b.aFormList,aRadioButtonUnitList:b.aUnitList})},getElementByIndex:function(a){return{elRadioButton:this._aWElFormList[a].$value(),elRadioButtonUnit:this._aWElUnitList[a].$value()}},destroy:function(){this.$super.destroy()}}).extend(jindo.m.CheckRadioCore),jindo.m.RequireValidator=jindo.$Class({validate:function(a){a=jindo.$S(a).trim().toString();var b={bValid:!1,sCorrectedValue:null};return b.bValid=""!=a?!0:!1,b}}).extend(jindo.m.Validator),jindo.m.CubeReveal=jindo.$Class({$init:function(a){this.option(a||{})},_initVar:function(a){jindo.m.RevealCommon.prototype._initVar.call(this,a),this._htTmpNavSizeInfo={}},_setWrapperElement:function(){return jindo.m.RevealCommon.prototype._setWrapperElement.call(this),this._htWElement.header.indexOf(this._htWElement.nav)>-1?(console.error("Should not have to navigation in the header"),!1):void(this._bNavInHeader=!1)},_setHeaderStyle:function(){"down"==this.option("sDirection")&&this._htWElement.header.css("top",this._bShow&&this.option("bUseOffsetBug")?0:-this._nNavHeight)},_setNavStyle:function(a,b){var c={};b&&(c[this._sCssPrefix+"Transform"]=this._sTranslateStart+"0px, 0px"+this._sTranslateEnd+" rotate"+a.sRotate+"("+a.sRotateValue+"deg)"),"down"==this.option("sDirection")?c[this._sCssPrefix+"TransformOrigin"]="50% "+this._nNavHeight+"px":"left"==this.option("sDirection")?c[this._sCssPrefix+"TransformOrigin"]="0px 50% ":"right"==this.option("sDirection")&&(c[this._sCssPrefix+"TransformOrigin"]="right 50% "),c[this._sCssPrefix+"BackfaceVisibility"]="hidden",this._htWElement.nav.css(c);var d={width:this._getNaviWidth()+"px"};"down"!=this.option("sDirection")&&("left"==this.option("sDirection")?d.left=this._htSize.width:"right"==this.option("sDirection")&&(d.left=this._getHideWidth()),this._htWElement.nav.css(d),this._htWElement.nav.parent().css({position:"absolute"}))},_getPosInfo:function(){switch(this.option("sDirection")){case"down":return{sRotateValue:90,sRotate:"X",nHeader:{Y:this._nNavHeight*(this._bShow?0:1),X:0},nNav:{Y:this._nNavHeight*(this._bShow?0:1),X:0},nContent:{Y:this._nNavHeight*(this._bShow?0:1),X:0},nNavHeight:this._nNavHeight};case"left":return{sRotateValue:45,sRotate:"Y",nDefaultNavPos:this._getNaviWidth()*(this._bShow?0:1),nHeader:{Y:(this._bShow,0),X:this._getNaviWidth()*(this._bShow?0:-1)},nContent:{Y:this._bShow?0:-parseInt(0|this._htWElement.content.css("top"),10),X:this._getNaviWidth()*(this._bShow?0:-1)},nNav:{Y:0,X:this._bShow?0:this._htSize.width*(this._bShow?0:-1)},nMarginLeftPos:this._getNaviWidth(),nLeftPos:this._bShow?0:this._getHideWidth(),nNavHeight:0};case"right":return{sRotateValue:-45,sRotate:"Y",nDefaultNavPos:this._getNaviWidth()*(this._bShow?0:-1),nHeader:{Y:(this._bShow,0),X:this._getNaviWidth()*(this._bShow?0:1)},nContent:{Y:this._bShow?0:-parseInt(0|this._htWElement.content.css("top"),10),X:this._getNaviWidth()*(this._bShow?0:1)},nNav:{Y:0,X:this._bShow?0:this._getNaviWidth()*(this._bShow?0:1)},nMarginLeftPos:-this._getNaviWidth(),nLeftPos:this._bShow?0:this._getHideWidth(),nNavHeight:0}}},_getNaviWidth:function(){return this.option("bFixNaviSize")?this.option("nMargin"):this._htSize.width-this.option("nMargin")},_getHideWidth:function(){return this.option("bFixNaviSize")?-this.option("nMargin"):-this._htSize.width+this.option("nMargin")},_getTransitionOption:function(){return{fEffect:jindo.m.Effect.cubicEaseOut,bUseTransition:this.option("useTimingFunction")}},_setMoveCssDetail:function(a){var b=this.option("sDirection"),c=this._getPosInfo();this.setNavHeight(jindo.$Document().clientSize().height),this._htWElement.nav.parent().css(this._sCssPrefix+"Perspective",this._htWElement.content.width()/2+"px");var d=[];if("down"==b)d.push(this._htWElement.nav.$value(),this._bShow?{"@transform":this._sTranslateStart+"0px, 0px"+this._sTranslateEnd+" rotate"+c.sRotate+"(75deg)"}:{"@transform":this._sTranslateStart+"0px, 0px"+this._sTranslateEnd+" rotate"+c.sRotate+"(0deg)"});else{this._htTmpNavSizeInfo.height=this._htWElement.nav.css("height"),this._htWElement.nav.css({height:this._htNavSize.height+"px",overflow:"hidden"}),this._htWElement.nav.parent().css({height:this._htNavSize.height+"px"});var e=0;this.option("bFixNaviSize")||(e=c.nNav.X),e+="left"==b?this.option("nMargin")*(this.option("bFixNaviSize")?-1:1):this.option("bFixNaviSize")?this.option("nMargin"):0,d.push(this._htWElement.nav.$value(),this._bShow?{"@transform":this._sTranslateStart+"0px, 0px"+this._sTranslateEnd+" rotate"+c.sRotate+"("+c.sRotateValue+"deg)"}:{"@transform":this._sTranslateStart+e+"px, "+c.nNav.Y+"px"+this._sTranslateEnd+" rotate"+c.sRotate+"(0deg)"})}d.push(this._htWElement.header.$value(),{"@transform":this._sTranslateStart+c.nHeader.X+"px, "+c.nHeader.Y+"px"+this._sTranslateEnd},this._htWElement.content.$value(),{"@transform":this._sTranslateStart+c.nContent.X+"px, "+c.nContent.Y+"px"+this._sTranslateEnd}),this._htMorph.pushAnimate.apply(this._htMorph,[a,d])},_setContentPos:function(){},_setHeaderPos:function(){},_setNavPos:function(){var a=(this._getPosInfo(),{overflow:"",width:"",height:"",position:""});this._htWElement.nav.css({height:this._htTmpNavSizeInfo.height,overflow:""}),this._htWElement.nav.parent().css({height:this._htTmpNavSizeInfo.height}),this._bShow?this._htWElement.nav.css(this._sCssPrefix+"TransitionDuration",""):a=this._getWrapStyle(),this._htWElement.wrap&&"down"!=this.option("sDirection")&&this._htWElement.wrap.css(a)}}).extend(jindo.m.RevealCommon),jindo.m.SlideReveal=jindo.$Class({$init:function(a){this.option(a||{})},_initVar:function(a){if(jindo.m.RevealCommon.prototype._initVar.call(this,a),a){var b={};b[this._sCssPrefix+"Transform"]=this._sTranslateStart+"0px, 0px"+this._sTranslateEnd,this._htWElement.nav.css(b)}},_getPosInfo:function(){var a=this._getNaviWidth();switch(this.option("sDirection")){case"down":return{nHeader:{Y:this._nNavHeight*(this._bShow?this.option("bUseOffsetBug")?-1:0:1),X:0},nNav:{Y:this._nNavHeight*(this._bShow?this.option("bUseOffsetBug")?-1:0:1),X:0},nContent:{Y:this._nNavHeight*(this._bShow?this.option("bUseOffsetBug")?-1:0:1),X:0},nLastHeader:this._nNavHeight*(this._bShow?this._bNavInHeader?-1:0:this._bNavInHeader?0:1),nLastNav:this._nNavHeight*(this._bShow&&this.option("bUseOffsetBug")?-1:0),nLastContent:this._nNavHeight*(this._bShow?0:1),nLeftPos:0,nNavHeight:this._nNavHeight};case"left":return{nHeader:{Y:this._bShow?0:this.option("bUseOffsetBug")?-parseInt(0|this._htWElement.content.css("top"),10):0,X:a*(this._bShow?this.option("bUseOffsetBug")?1:0:-1)},nContent:{Y:this._bShow?0:this.option("bUseOffsetBug")?-parseInt(0|this._htWElement.content.css("top"),10):0,X:a*(this._bShow?this.option("bUseOffsetBug")?1:0:-1)},nNav:{Y:0,X:this._bShow?this.option("bUseOffsetBug")?a:0:a*(this._bShow?0:-1)},nDefaultNavPos:a*(this._bShow?0:1),nMarginLeftPos:a,nLeftPos:this._bShow?0:this._getHideWidth(),nNavHeight:0,nNavLeftPos:this._bShow?this._htSize.width:this.option("bFixNaviSize")?this._htSize.width-this.option("nMargin"):this.option("nMargin")};case"right":var b=this._getHideWidth();return{nHeader:{Y:this._bShow?0:this.option("bUseOffsetBug")?-parseInt(0|this._htWElement.content.css("top"),10):0,X:a*(this._bShow?this.option("bUseOffsetBug")?-1:0:1)},nContent:{Y:this._bShow?0:this.option("bUseOffsetBug")?-parseInt(0|this._htWElement.content.css("top"),10):0,X:a*(this._bShow?this.option("bUseOffsetBug")?-1:0:1)},nNav:{Y:0,X:this._bShow?this.option("bUseOffsetBug")?b:0:a*(this._bShow?0:1)},nDefaultNavPos:a*(this._bShow?0:1),nMarginLeftPos:-a,nLeftPos:this._bShow?0:a,nNavHeight:0,nNavLeftPos:this._bShow?b:0}}},_getNaviWidth:function(){return this.option("bFixNaviSize")?this.option("nMargin"):this._htSize.width-this.option("nMargin")},_getHideWidth:function(){return this.option("bFixNaviSize")?-this.option("nMargin"):-this._htSize.width+this.option("nMargin")}}).extend(jindo.m.RevealCommon),jindo.m.DynamicPlugin=jindo.$Class({$init:function(a,b){this.option({nRatio:1.5,sListElement:"li",sDirection:"V"}),this.option(b||{}),this._initVar(a)},_initVar:function(a){this._wel=jindo.$Element(a),this._aListElement=null,this._nStartIdx=-1,this._nEndIdx=-1,this._nRatio=parseInt(this.option("nRatio"),10),this._nPos=-1,this._nSize=-1,this._sDirection=this.option("sDirection")},refresh:function(a){var b,c=this._wel.queryAll(this.option("sListElement"));if(c){this._aListElement=[];for(var d=0,e=c.length;e>d;d++)b=jindo.$Element(c[d]),this._aListElement.push({el:b.$value(),wel:b,htRange:this._getElementPos(b),sDisplay:b.css("display"),sPosition:b.css("position")});this._nPos=a||0,this._nSize="V"==this._sDirection?this._wel.height():this._wel.width(),this._covertPositionType()}},_covertPositionType:function(){for(var a,b=this._getStartBoundary(),c=this._getEndBoundary(),d=0,e=this._aListElement.length;e>d;d++)a=this._aListElement[d],a.wel.css("V"==this._sDirection?{top:a.htRange.nStartPos+"px",width:"100%"}:{left:a.htRange.nStartPos+"px",height:"100%"}),a.wel.css("position","absolute"),a.htRange.nStartPos<=-b?this._nStartIdx=d:a.htRange.nEndPos<=-c?(a.el.style.display=a.sDisplay,this._nEndIdx=d):a.el.style.display="none"},updateListStatus:function(a,b){if(this._aListElement){this._nPos=b;var c,d,e,f=this._getStartBoundary(),g=this._getEndBoundary(),h=this._aListElement.length;if("forward"==a){for(d=this._nStartIdx+1;h>d&&(c=this._aListElement[d],e=c.htRange.nEndPos,-f>e);d++)c.el.style.display="none",this._nStartIdx=d;for(d=this._nEndIdx;h>d&&(c=this._aListElement[d],e=c.htRange.nStartPos,-g>e);d++)c.el.style.display=c.sDisplay,this._nEndIdx++}else if("backward"==a){for(d=this._nEndIdx-1;d>=0&&(c=this._aListElement[d],e=c.htRange.nStartPos,!(-g>e));d--)c.el.style.display="none",this._nEndIdx--;for(d=this._nStartIdx;d>=0&&(c=this._aListElement[d],e=c.htRange.nEndPos,!(-f>e));d--)c.el.style.display=c.sDisplay,this._nStartIdx--}}},_getStartBoundary:function(){return this._nPos+this._nSize*this._nRatio},_getEndBoundary:function(){return this._nPos-this._nSize-this._nSize*this._nRatio},_getElementPos:function(a){var b,c;return"V"==this._sDirection?(b=a.offset().top-this._wel.offset().top,c=b+a.height()):(b=a.offset().left-this._wel.offset().left,c=b+a.width()),{nStartPos:b,nEndPos:c}}}).extend(jindo.m.Component),jindo.m.FloatingLayer=jindo.$Class({$init:function(a,b){this.option({bActivateOnload:!0,sPosition:"bottom",sDirection:"up",nSlideDuration:500,sSlideTimingFunction:"ease-in-out",nFadeInDuration:0,sFadeInTimingFunction:"ease-in-out",nFadeOutDuration:200,sFadeOutTimingFunction:"ease-in-out",bUseHideUI:!0,bUseFixed:!1,nTimeout:-1}),this.option(b||{}),this._initVar(),this._setWrapperElement(a),this.option("bActivateOnload")&&this.activate()},_initVar:function(){this._oFloatingEffect=null,this._oFadeinEffect=null,this._oLayerPosition=null,this._oScrollEnd=null,this._nTimeoutTimer=-1,this._isFixed=!1,this._isLayerOn=!1,this._isMoving=!1},_setWrapperElement:function(a){this._htWElement={},this._htWElement.element=jindo.$Element(a),this._htWElement.viewElement=jindo.$Element(this._createView())},_initComponent:function(){var a=this,b=this._htWElement.element.$value();this._oLayerPosition=new jindo.m.LayerPosition(this._htWElement.viewElement,{sPosition:this.option("sPosition"),bActivateOnload:!1,bUseFixed:this.option("bUseFixed"),bAutoReposition:!0}),this._oFloatingEffect=new jindo.m.LayerEffect(b),this.option("bUseHideUI")&&0!==this.option("nFadeInDuration")&&(this._oFadeinEffect=new jindo.m.LayerEffect(this._htWElement.viewElement.$value(),{nDuration:this.option("nFadeInDuration")}).attach("afterEffect",function(){a._startHideTimer()})),this._isFixed=this._oLayerPosition.isUseFixed(),this._oScrollEnd=new jindo.m.ScrollEnd},getLayer:function(){return this._htWElement.element.$value()},_createView:function(){var a=this._htWElement.element.visible(),b="_"+Math.floor(1e4*Math.random()),c=jindo.$Element("<div class='_floatingLayer_view_divtag"+b+"' style='display:none;'>"),d="",e="";return a||this._htWElement.element.css({left:"-9999px"}).show(),d=-1!=this._htWElement.element.css("width").indexOf("%")?this._htWElement.element.css("width"):this._htWElement.element.width()+"px",e=-1!=this._htWElement.element.css("height").indexOf("%")?this._htWElement.element.css("height"):this._htWElement.element.height()+"px",c.css({width:d,height:e,zIndex:2050}),a||this._htWElement.element.hide(),c
},resize:function(a,b){this._htWElement.viewElement.css({width:a+"px",height:b+"px"}),this._oLayerPosition.setPosition()},show:function(){this._fireEvent("beforeShow")&&(this._oLayerPosition.isActivating()||this._oLayerPosition.activate(),this._setFloatingEffect(!0),this._htWElement.element.show(),this._htWElement.viewElement.show(),this._oFloatingEffect.slide({sDirection:this.option("sDirection"),nDuration:this.option("nSlideDuration"),sTransitionTimingFunction:this.option("sSlideTimingFunction"),elBaseLayer:this._htWElement.viewElement.$value()}))},hide:function(){this._fireEvent("beforeHide")&&(this._stopHideTimer(),this._oLayerPosition.isActivating()&&this._oLayerPosition.deactivate(),this._detachFloatingEvent(),this._setFloatingEffect(!1),0!==this.option("nFadeOutDuration")?this._oFloatingEffect.fade({sDirection:"out",nDuration:this.option("nFadeOutDuration"),sTransitionTimingFunction:this.option("sFadeOutTimingFunction")}):(this._htWElement.viewElement.hide(),this._fireEvent("hide")))},_fireEvent:function(a){return this.fireEvent(a,{welLayer:this._htWElement.element})},_startHideTimer:function(){if(this.option("nTimeout")>-1){var a=this;this._stopHideTimer(),this._nTimeoutTimer=setTimeout(function(){a.hide()},this.option("nTimeout"))}},_stopHideTimer:function(){clearTimeout(this._nTimeoutTimer),this._nTimeoutTimer=-1},_onTouchStart:function(a){this._initFloatingData(),this._isLayer(a.element)?(this._isLayerOn=!0,this._htWElement.viewElement.show()):(this._htWElement.viewElement.hide(),this._htWElement.viewElement.css("left",this._htWElement.viewElement.css("left")+"px"))},_onScrollEnd:function(){this.option("bUseHideUI")?this._isFixed?this._startHideTimer():this._runFadeIn():(this._oLayerPosition.setPosition(),this._startHideTimer())},_onTouchMove:function(){this._isMoving=!0},_onTouchEnd:function(){return this._isLayerOn?void this._oLayerPosition.setPosition():void(this._isMoving||this._runFadeIn())},_runFadeIn:function(){this._htWElement.viewElement.visible()||(this._isLayerOn?this._startHideTimer():this._fadeIn())},_fadeIn:function(){this._oLayerPosition.setPosition(),this._oFadeinEffect?(this._oFadeinEffect.clearEffect(!0),this._oFadeinEffect.fade({sDirection:"in",sTransitionTimingFunction:this.option("sFadeInTimingFunction")})):(this._htWElement.viewElement.show(),this._startHideTimer())},_isLayer:function(a){return a&&(this._htWElement.element.isEqual(a)||this._htWElement.viewElement.isEqual(a)||this._htWElement.viewElement.isParentOf(a))?!0:!1},_initFloatingData:function(){this._stopHideTimer(),this._oFloatingEffect&&0!==this.option("nFadeOutDuration")&&this._oFloatingEffect.clearEffect(!0),this._oFadeinEffect&&this._oFadeinEffect.clearEffect(!0),this._isMoving=!1,this._isLayerOn=!1},_onActivate:function(){this._initComponent()},_onDeactivate:function(){this._detachEvent(),this._oFadeinEffect&&(this._oFadeinEffect.detachAll("afterEffect"),this._oFadeinEffect.destroy()),this._oFloatingEffect.destroy(),this._oScrollEnd.destroy(),this._oLayerPosition.destroy(),this._htWElement.element.appendTo(document.body),this._htWElement.viewElement.leave()},_attachFloatingEvent:function(){if(this._htEvent={},this.option("bUseHideUI")&&!this._isFixed){var a=jindo.m._getTouchEventName();this._htEvent[a.start]={el:document.body,fn:jindo.$Fn(this._onTouchStart,this).bind()},this._htEvent[a.move]={el:document.body,fn:jindo.$Fn(this._onTouchMove,this).bind()},this._htEvent[a.end]={el:document.body,fn:jindo.$Fn(this._onTouchEnd,this).bind()},a.cancel&&(this._htEvent[a.cancel]={el:document.body,fn:jindo.$Fn(this._onTouchEnd,this).bind()});for(var b in this._htEvent)this._htEvent[b].fn&&(this._htEvent[b].ref=jindo.m._attachFakeJindo(this._htEvent[b].el,this._htEvent[b].fn,b))}this._oScrollEnd.attach("scrollEnd",jindo.$Fn(this._onScrollEnd,this).bind())},_detachEvent:function(){this._detachFloatingEvent()},_setFloatingEffect:function(a){var b=this;this._oFloatingEffect.detachAll("afterEffect"),this._oFloatingEffect.clearEffect(!0),this._oFadeinEffect&&this._oFadeinEffect.clearEffect(!0),a?this._oFloatingEffect.attach("afterEffect",function(){b._attachFloatingEvent(),b._startHideTimer(),b._fireEvent("show")}):0!==this.option("nFadeOutDuration")&&this._oFloatingEffect.attach("afterEffect",function(){b._htWElement.viewElement.hide(),b._fireEvent("hide")})},_detachFloatingEvent:function(){for(var a in this._htEvent){var b=this._htEvent[a];b.ref&&b.ref.detach(b.el,a)}this._oScrollEnd.detachAll("scrollEnd"),this._htEvent=null},destroy:function(){this.deactivate();for(var a in this._htWElement)this._htWElement[a]=null;delete this._htWElement,this._initFloatingData()}}).extend(jindo.m.UIComponent),jindo.m.Selectbox=jindo.$Class({$init:function(a,b){this.option({bActivateOnload:!0,sClassPrefix:"select-",sPlaceholder:"선택해주세요",nHeight:80,sItemTag:"li",nDefaultIndex:-1}),this.option(b||{}),this._initVar(),this._setWrapperElement(a),this._init(),this.option("bActivateOnload")&&(this.activate(),this.select(this.option("nDefaultIndex")))},_initVar:function(){this._isNative=!1,this._oScroll=null,this._sClassPrefix=this.option("sClassPrefix"),this._aItems=null,this._nCurrentIdx=-1},_setWrapperElement:function(a){this._htWElement={},this._htWElement.base=jindo.$Element(a),this._htWElement.content=jindo.$Element(this._htWElement.base.query("."+this._sClassPrefix+"content")),this._htWElement.arrow=jindo.$Element(this._htWElement.base.query("."+this._sClassPrefix+"arrow")),this._htWElement.selectmenu=jindo.$Element(this._htWElement.base.query("."+this._sClassPrefix+"selectmenu"))},_init:function(){this._isNative="SELECT"==this._htWElement.selectmenu.$value().tagName?!0:!1,this._htWElement.base.css({position:"relative",display:"-webkit-box","-webkit-box-align":"center","-webkit-box-pack":"center","-webkit-tap-highlight-color":"transparent"}),this._htWElement.content.css({display:"block",overflow:"hidden","text-overflow":"ellipsis",cursor:"pointer","text-align":"center",width:"90%"}),this._htWElement.arrow&&this._htWElement.arrow.css({position:"relative","text-align":"right",display:"block","text-algn":"right"}),this._htWElement.selectmenu.css({position:"absolute",left:"0px",margin:"0px",zIndex:100}),this._isNative?this._htWElement.selectmenu.css({opacity:"0.0001",height:"100%","min-height":"100%",width:"100%"}):(this._htWElement.selectmenu.css({width:"100%"}).hide(),this._htWElement.selectmenu.first().css("width","100%"),this._oScroll=new jindo.m.Scroll(this._htWElement.selectmenu.$value(),{nHeight:this.option("nHeight"),bUseScrollbar:!1,bUseMomentum:!0,bUseHighlight:!1,bUseBounce:!0})),this._refreshItems()},_onActivate:function(){this._attachEvent()},_onDeactivate:function(){this._detachEvent()},_attachEvent:function(){this._htEvent={},this._isNative?this._htWElement.selectmenu.show():(this._htEvent.selectmenu=jindo.$Fn(this._onShow,this).attach(this._htWElement.base,"click"),this._htEvent.document=jindo.$Fn(this._onDocumentStart,this).attach(document,"touchstart")),this._htEvent.select=jindo.$Fn(this._onSelect,this).attach(this._htWElement.selectmenu,this._isNative?"change":"click")},_detachEvent:function(){this._isNative?this._htWElement.selectmenu.hide():(this._htEvent.selectmenu.detach(this._htWElement.base,"click"),this._htEvent.document.detach(document,"touchstart")),this._htEvent.select.detach(this._htWElement.selectmenu,this._isNative?"change":"click"),this._htEvent=null},_onShow:function(){this._showMenuForCustom()},_onSelect:function(a){if(this._isNative)this.select(a.element.selectedIndex);else{var b=jindo.$Element(a.element).parent();this.select(b.indexOf(a.element))}a.stop()},_onDocumentStart:function(a){if(this._htWElement.selectmenu.visible()){if(this._htWElement.selectmenu.isParentOf(a.element)||this._htWElement.selectmenu.isEqual(a.element))return!0;this._hideMenuForCustom()}},select:function(a){if(a>=0&&a<this._aItems.length){if(a!=this._nCurrentIdx&&this.fireEvent("beforeSelect",{nCurrentIdx:this._nCurrentIdx,sValue:this.getValue()})){if(this._isNative)this._aItems[a].selected=!0,this._setValue(this._aItems[a].value);else{var b=jindo.$Element(this._aItems[a]);this._aItems[this._nCurrentIdx]&&jindo.$Element(this._aItems[this._nCurrentIdx]).removeClass(this._sClassPrefix+"selected"),b.addClass(this._sClassPrefix+"selected"),this._setValue(b.text()),this._hideMenuForCustom()}var c=this._nCurrentIdx;this._nCurrentIdx=a,this.fireEvent("select",{nPrevIdx:c,sPrevValue:this.getValue(c),nCurrentIdx:this._nCurrentIdx,sValue:this.getValue()})}}else this._setValue(this.option("sPlaceholder"))},_showMenuForCustom:function(){if(!this._isNative&&!this._htWElement.selectmenu.visible()){this._htWElement.selectmenu.show();var a=jindo.$Element(this._htWElement.selectmenu.query(this.option("sItemTag"))).height();this._oScroll.refresh(),this._oScroll.scrollTo(0,this._nCurrentIdx<0?0:-this._nCurrentIdx*a),this._htEvent.selectmenu.detach(this._htWElement.base,"click")}},_hideMenuForCustom:function(){!this._isNative&&this._htWElement.selectmenu.visible()&&(this._htWElement.selectmenu.hide(),this._htEvent.selectmenu.attach(this._htWElement.base,"click"))},_refreshItems:function(){this._aItems=this._isNative?this._htWElement.selectmenu.$value().options:this._htWElement.selectmenu.queryAll(this.option("sItemTag"))},refresh:function(a){for(var b="",c=this._isNative?"option":this.option("sItemTag"),d=0,e=a.length;e>d;d++)b+="<",b+=c,b+=">",b+=a[d],b+="</",b+=c,b+=">";this._isNative?this._htWElement.selectmenu.html(b):this._htWElement.selectmenu.first().html(b),this._refreshItems(),this._nCurrentIdx=-1,this.select(this._nCurrentIdx)},_setValue:function(a){this._htWElement.content.text(a)},getCurrentIdx:function(){return this._nCurrentIdx},getValue:function(a){var b="";return a="undefined"==typeof a?this._nCurrentIdx:a,a>=0&&a<this._aItems.length&&(b=this._isNative?this._aItems[a].value:jindo.$Element(this._aItems[a]).text()),b},disable:function(){var a=this._sClassPrefix+"disable";this._htWElement.base.hasClass(a)||(this._htWElement.base.addClass(a),this._isNative?this._htWElement.selectmenu.hide():(this._htWElement.selectmenu.hide(),this._htEvent.selectmenu.detach(this._htWElement.base,"click")))},enable:function(){var a=this._sClassPrefix+"disable";this._htWElement.base.hasClass(a)&&(this._htWElement.base.removeClass(this._sClassPrefix+"disable"),this._isNative?this._htWElement.selectmenu.show():this._htEvent.selectmenu.attach(this._htWElement.base,"click"))},destroy:function(){this.deactivate(),this._oScroll&&this._oScroll.destroy()}}).extend(jindo.m.UIComponent),jindo.m.SlideFlicking=jindo.$Class({$init:function(a,b){this.option(b||{}),this._initVar(),this._oDocFragment=document.createDocumentFragment(),this._setWrapperElement(a),this.option("bActivateOnload")&&this.activate()},_onActivate:function(){jindo.m.Flick.prototype._onActivate.apply(this);var a=this;this.set(new jindo.m.Slide(this._getAnimationOption()).attach({set:function(b){a._setStyle(b.css)}}),this._htWElement.container)},_setStyle:function(a){var b={},c=0,d=this._bUseH?"width":"height",e=this._bUseH?"left":"top";jindo.$Jindo.mixin(b,a),this._bUseCircular&&(b[d]="100%",b[e]="-100%",a.position="absolute",a[d]="100%",a.left=0,a.top=0),this._bUseH&&(b.clear="both",a["float"]="left"),this._htWElement.container.css(b),jindo.$A(this._htWElement.aPanel).forEach(function(b,d){this._bUseCircular&&(c=(d+1)%this._nDefaultPanel*100+"%",this._hasOffsetBug()?a[e]=c:a[jindo.m._toPrefixStr("Transform")]=this._getTranslate(c)),b.css(a)},this)},resize:function(){jindo.m.Flick.prototype.resize.call(this);var a=this._bUseH?"width":"height",b=this._htWElement.view[a]();if(!this._bUseCircular){if(this._htWElement.container.css(a,-this._aPos[this._aPos.length-1]+"px"),this.option("bFitContentSize"))jindo.$A(this._htWElement.aPanel).forEach(function(c){c.css(a,b+"px")});else{var c=this._aPos[this._aPos.length-1]+b;0>c&&(jindo.$A(this._aPos).forEach(function(a,b){c>a&&(this._aPos.length=b,jindo.$A.Break())},this),this._aPos.push(c),this._bUseH?this._htSize.maxX=c:this._htSize.maxY=c,this._aPos.length<=this.getContentIndex()&&(this._nContentIndex=this._aPos.length-1))}this._updateFlickInfo(),this._oAnimation.move(this._nX,this._nY)}},_restorePanel:function(a){a=a||this.getElement();var b=this._getIndexByElement(a),c=this._hasOffsetBug()?this._bUseH?"left":"top":jindo.m._toPrefixStr("Transform"),d=(0>b-1?this._nDefaultPanel-1:b-1)%this._nDefaultPanel,e=((b+1)%this._nDefaultPanel>this._nDefaultPanel-1?0:b+1)%this._nDefaultPanel,f=b%this._nDefaultPanel;this._welElement=this._htWElement.aPanel[f],this._htWElement.container.css(jindo.m._toPrefixStr("Transform"),this._getTranslate(0)),this._welElement.css(c,this._getPosValue("100%")).css("zIndex",10),this._htWElement.aPanel[d].css(c,this._getPosValue("0%")).css("zIndex",1),this._htWElement.aPanel[e].css(c,this._getPosValue("200%")).css("zIndex",1),jindo.m.getOsInfo().ios&&this._bUseCircular&&(this._oDocFragment.appendChild(this._htWElement.aPanel[d].$value()),this._oDocFragment.appendChild(this._htWElement.aPanel[e].$value()),this._htWElement.container.$value().appendChild(this._oDocFragment))},_getPosValue:function(a){return this._hasOffsetBug()?a:this._getTranslate(a)},_panelEndAfterCall:function(){this._bUseCircular&&this._restorePanel()},_moveAfterCall:function(a){this._oAnimation.move(this._nX,this._nY,0,this._makeOption({next:a.bNext}))},_onEndAniImpl:function(){jindo.m.Flick.prototype._onEndAniImpl.apply(this),this._bUseCircular||this._fixOffsetBugImpl()},destroy:function(){jindo.m.Flick.prototype.destroy.apply(this)}}).extend(jindo.m.Flick),jindo.m.SlideEffect=jindo.$Class({sEffectName:"slide",getCommand:function(a,b){b.nDistance&&(b.nSize=b.nDistance);var c,d,e,f=b.sDirection?b.sDirection:"left",g=jindo.m.getCssOffset(a),h=g.left,i=g.top;if(c="undefined"!=typeof b.nSize?b.nSize:this._htLayerInfo.nWidth,d="undefined"!=typeof b.nSize?b.nSize:this._htLayerInfo.nHeight,("up"==f||"down"==f)&&(i+="up"==f?-1*d:d),("left"==f||"right"==f)&&(h+="left"==f?-1*c:c),"undefined"!=typeof b.elBaseLayer){h=0,i=0;var j=jindo.$Element(b.elBaseLayer);e=jindo.$Element(a),d="undefined"!=typeof b.nSize?b.nSize:j.height(),c="undefined"!=typeof b.nSize?b.nSize:j.width(),("up"==f||"down"==f)&&(i="down"==f?-1*d:d),("left"==f||"right"==f)&&(h="left"==f?c:-1*c),h=-1*h,i=-1*i}var k=this._htLayerInfo.sPosition,l=this.bAndroid,m=this.bAndroid3Up,n=this._htLayerInfo.sClassHighligting,o=this.bAndroid2_1;e=jindo.$Element(a);var p=b.htTo||{};p.transform=this.sTranOpen+h+"px, "+i+"px"+this.sTranEnd;var q={};return this.getTranslateStyle(p,q),{sTaskName:this.sEffectName+"-"+f,htStyle:q,fCallback:function(){var b=jindo.m.getCssOffset(a),c=1*e.css("top").replace("px",""),d=1*e.css("left").replace("px","");c=isNaN(c)?0:c,d=isNaN(d)?0:d,"relative"==k?e.css("position","relative"):e.css("position","absolute");var f=jindo.m.getCssPrefix();if(e.css(f+"Transform",""),m&&e.offset(),e.$value().style.top=parseInt(c+b.top,10)+"px",e.$value().style.left=parseInt(b.left+d,10)+"px",l&&!m){var g=jindo.$$.getSingle("."+n,e.$value());g&&(o?setTimeout(function(){g.focus()},5):g.focus())}}}},getBeforeCommand:function(a,b){var c=b.sDirection?b.sDirection:"left",d=b.htFrom||{},e=jindo.$Element(a);if("undefined"!=typeof b.elBaseLayer){var f=jindo.$Element(b.elBaseLayer);if(!f.isParentOf(e)){f.append(e);var g=e.css("position");"relative"!=g&&"absolute"!=g&&e.css("position","absolute"),e.css("opacity",0)}var h=0,i=0,j=f.height(),k=f.width();("up"==c||"down"==c)&&(i="down"==c?-1*j:j),("left"==c||"right"==c)&&(h="left"==c?k:-1*k),f.css("overflow","hidden"),d.left=h+"px",d.top=i+"px",d.opacity=this._htLayerInfo.nOpacity}var l={};return this.getTranslateStyle(d,l),{htStyle:l}}}).extend(jindo.m._Effect_),jindo.m.CircularFlicking=jindo.$Class({$init:function(a,b){this.option({bHorizontal:!0,sClassPrefix:"flick-",nFlickThreshold:40,nDuration:100,nTotalContents:3,nBounceDuration:100,bActivateOnload:!0,bSetNextPanelPos:!1,bUseCss3d:jindo.m.useCss3d(),bUseTimingFunction:jindo.m.useTimingFunction(),bUseTranslate:!0,bUseDiagonalTouch:!0}),this.option(b||{}),this._initVar(),this._setWrapperElement(a),this._initFlicking(a),this.option("bActivateOnload")&&this.activate()},_initVar:function(){this._oFlicking=null},_initFlicking:function(a){var b=this.option();b.sContentClass="panel",b.sAnimation="slide",b.bUseCircular=!0,b.bActivateOnload=!1,this._oFlicking=new jindo.m.Flicking(jindo.$Element(a),b).attach({touchStart:jindo.$Fn(this._onTouchStart,this).bind(),touchMove:jindo.$Fn(this._onTouchMove,this).bind(),touchEnd:jindo.$Fn(this._onTouchEnd,this).bind(),beforeMove:jindo.$Fn(this._onBeforeMove,this).bind(),move:jindo.$Fn(this._onMove,this).bind(),rotate:jindo.$Fn(this._onRotate,this).bind(),scroll:jindo.$Fn(this._onScroll,this).bind(),beforeFlicking:jindo.$Fn(this._onBeforeFlicking,this).bind(),afterFlicking:jindo.$Fn(this._onAfterFlicking,this).bind()})},_setWrapperElement:function(a){this._htWElement={circularFlickBase:jindo.$Element(a)};var b=jindo.$Element(this._htWElement.circularFlickBase.query("."+this.option("sClassPrefix")+"container")),c=b.queryAll("."+this.option("sClassPrefix")+"panel");if(c&&c.length<3)for(var d=3-c.length,e=0;d>e;e++)b.$value().appendChild(jindo.$('<div class="'+this.option("sClassPrefix")+'panel">'))},getPanelIndex:function(){return this._oFlicking.getIndexByElement(this.getPanelElement().$value())},getPanelElement:function(){return this._oFlicking.getElement()},getRightPanelIndex:function(){return this._oFlicking.getIndexByElement(this.getRightPanelElement().$value())},getRightPanelElement:function(){return this._oFlicking.getNextElement()},getLeftPanelIndex:function(){return this._oFlicking.getIndexByElement(this.getLeftPanelElement().$value())},getLeftPanelElement:function(){return this._oFlicking.getPrevElement()},getContentIndex:function(){return this._oFlicking.getContentIndex()},getRightContentIndex:function(){return this._oFlicking.getNextIndex()},getLeftContentIndex:function(){return this._oFlicking.getPrevIndex()},_onTouchStart:function(a){var b=this.fireEvent("touchStart",a);return b?void 0:void a.stop()},_onTouchMove:function(a){this.fireEvent("touchMove",a)},_onTouchEnd:function(a){this.fireEvent("touchEnd",a)},_onBeforeMove:function(a){var b=a.nContentsNextIndex%3;this.fireEvent("beforeMove",{nPanelIndex:this.getPanelIndex(),nContentIndex:a.nContentsIndex,nNextPanelIndex:b,nNextContentIndex:a.nContentsNextIndex})||a.stop()},_onMove:function(){this.fireEvent("move",{nPanelIndex:this.getPanelIndex(),nPanelLeftIndex:this.getLeftPanelIndex(),nPanelRightIndex:this.getRightPanelIndex(),nContentIndex:this.getContentIndex(),nContentLeftIndex:this.getLeftContentIndex(),nContentRightIndex:this.getRightContentIndex()})},_onRotate:function(a){this.fireEvent("rotate",a)},_onScroll:function(){this.fireEvent("scroll")},_onBeforeFlicking:function(a){var b={nContentIndex:a.nContentsIndex,nNextContentIndex:a.nContentsNextIndex,nPanelIndex:this.getPanelIndex(),nNextPanelIndex:this.getLeftPanelIndex()};a.bTop&&(b.bTop=a.bTop),a.bLeft&&(b.bLeft=a.bLeft),(b.bTop||b.bLeft)&&(b.nNextPanelIndex=this.getRightPanelIndex()),this.fireEvent("beforeFlicking",b)||a.stop()},_onAfterFlicking:function(a){var b={nPanelIndex:this.getPanelIndex(),nPanelLeftIndex:this.getLeftPanelIndex(),nPanelRightIndex:this.getRightPanelIndex(),nContentIndex:this.getContentIndex(),nContentLeftIndex:this.getLeftContentIndex(),nContentRightIndex:this.getRightContentIndex()};a.bTop&&(b.bTop=a.bTop),a.bLeft&&(b.bLeft=a.bLeft),this._htWElement.aPanel=this._oFlicking._oFlickingImpl._htWElement.aPanel,this.fireEvent("afterFlicking",b)},moveNext:function(){this.isActivating()&&this._oFlicking.moveNext()},movePrev:function(){this.isActivating()&&this._oFlicking.movePrev()},refresh:function(a,b,c){this.isActivating()&&("undefined"==typeof b&&(b=!1),"undefined"==typeof c&&(c=!1),this._oFlicking.refresh(a,b,c))},setContentIndex:function(a,b){this.isActivating()&&(a=parseInt(a,10),0>a||a>this.option("nTotalContents")-1||("undefined"==typeof b&&(b=!0),this.refresh(a,b,!0)))},_onActivate:function(){this._oFlicking.activate()},_onDeactivate:function(){this._oFlicking.deactivate()},destroy:function(){this.deactivate(),this._oFlicking=null;for(var a in this._htWElement)this._htWElement[a]=null}}).extend(jindo.m.UIComponent),jindo.m.RevealSidebarUI=jindo.$Class({$init:function(a,b){this.option({bActivateOnload:!0,nSildeThreshold:50,sDefaultArea:"main",htScrollOption:{},nSlideDuration:200,bUseCss3d:jindo.m._isUseCss3d(),bUseTimingFunction:jindo.m._isUseTimingFunction()}),this.option(b||{}),this._initVar(),this._setWrapperElement(a),this._initComponent(),this.option("bActivateOnload")&&this.activate()},_initVar:function(){this._sStatus=this.option("sDefaultArea"),this._oLeftLayoutInfo=null,this._oRightLayoutInfo=null,this._oLeftScroll=null,this._oRightScroll=null,this._oSize={},this._bUseRebuild=!1,this._oSlideReveal={}},_setWrapperElement:function(a){this._htWElement={},a=jindo.$Element(a),this._htWElement.body=jindo.$Element(jindo.$$.getSingle(".rs-body")).css({overflow:"hidden"}),"static"==this._htWElement.body.css("position")&&this._htWElement.body.css("position","relative"),this._bUseRebuild=this._htWElement.body.attr("markup")&&"DETAILED"==this._htWElement.body.attr("markup").toUpperCase()?!1:!0,this._htWElement.main=jindo.$Element(this._htWElement.body.query(".rs-main")),this._bUseRebuild&&a&&!a.isEqual(this._htWElement.body)&&(this._htWElement.main.hide(),this._htWElement.main=a,this._htWElement.main.addClass("rs-main")),this._htWElement.main.css({position:"absolute",zIndex:10,left:0}),this._htWElement.left=jindo.$Element(this._htWElement.body.query(".rs-left")),this._htWElement.left&&this._htWElement.left.css({position:"absolute",zIndex:5,left:0,top:0}).show(),this._htWElement.right=jindo.$Element(this._htWElement.body.query(".rs-right")),this._htWElement.right&&this._htWElement.right.css({position:"absolute",zIndex:5,left:this.option("nSildeThreshold")+"px",top:0}).show(),this._htWElement.blocker=jindo.$Element("<div style='position:absolute;opacity:0;display:none;z-index:1000;opacity:0;-webkit-tap-highlight-color:transparent;top:0px;'>"),this._htWElement.blocker.appendTo(this._htWElement.body),this._htWElement.left&&(this._oLeftLayoutInfo=this._setLayout(this._htWElement.left)),this._htWElement.right&&(this._oRightLayoutInfo=this._setLayout(this._htWElement.right))},resize:function(){this._oSize=jindo.$Document().clientSize();var a=this;jindo.m._maxClientSize(function(b){a._oSize=b,a._setSizeWhenResize()}),this._setSizeWhenResize()},_setSizeWhenResize:function(){this._htWElement.right&&this._htWElement.right.show(),this._htWElement.left&&this._htWElement.left.show();var a=this._getScrollSize(this._oLeftLayoutInfo),b=this._getScrollSize(this._oRightLayoutInfo),c=this._getPos(this._sStatus);switch(this._htWElement.body.css({width:"100%",height:this._oSize.height+"px"}),this._htWElement.blocker.css({width:this.option("nSildeThreshold")+"px",height:this._oSize.height+"px",left:"left"==this._sStatus?c+"px":"0px"}),this._htWElement.main.css({width:this._oSize.width+"px",height:this._oSize.height+"px"}),this._oLeftScroll&&(this._oLeftScroll.option({nWidth:a.nWidth,nHeight:a.nHeight}),this._oLeftScroll.refresh()),this._oRightScroll&&(this._oRightScroll.option({nWidth:b.nWidth,nHeight:b.nHeight}),this._oRightScroll.refresh()),this._sStatus){case"left":this._htWElement.right&&this._htWElement.right.hide();break;case"right":this._htWElement.left&&this._htWElement.left.hide();break;case"main":this._htWElement.left&&this._htWElement.left.hide(),this._htWElement.right&&this._htWElement.right.hide()}},_onRotate:function(a){return"pageShow"!=a.sType||a.$value().persisted?void this.resize():!1},_initComponent:function(){this._oLeftScroll=this._initScroll(this._oLeftLayoutInfo),this._oRightScroll=this._initScroll(this._oRightLayoutInfo)},_initScroll:function(a){return a?new jindo.m.Scroll(a.welWrapper,this.option("htScrollOption")):null},_setLayout:function(a){var b=jindo.$Element(a.query(".rs-header")),c=jindo.$Element(a.query(".rs-footer")),d=jindo.$Element(a.query(".rs-content")),e=b&&"fixed"==b.attr("position"),f=c&&"fixed"==c.attr("position"),g=null;return g=this._bUseRebuild?this._arrangeDom({welContent:d,bHeaderFixed:e,bFooterFixed:f,welHeader:b,welFooter:c}):jindo.$Element(a.query(".scroller")),{welWrapper:g,welHeader:b,welFooter:c,bHeaderFixed:e,bFooterFixed:f}},_getScrollSize:function(a){if(!a)return{nWidth:0,nHeight:0};var b=0,c=this._oSize.height,d=a.welWrapper.visible();return d||(b=a.welWrapper.css("left"),a.welWrapper.css("left","-999px").show()),a.bHeaderFixed&&(c-=a.welHeader.height()),a.bFooterFixed&&(c-=a.welFooter.height()),d||a.welWrapper.css("left",b).hide(),{nWidth:this._oSize.width-this.option("nSildeThreshold"),nHeight:c}},_arrangeDom:function(a){a.welContent.wrap("<div>").wrap("<div>");var b=a.welContent.parent();return!a.bHeaderFixed&&a.welHeader&&b.prepend(a.welHeader),!a.bFooterFixed&&a.welFooter&&b.append(a.welFooter),b.parent()},_slide:function(a,b){if(!this._oSlideReveal.left.isPlaying()||!this._oSlideReveal.right.isPlaying()){var c=this._getPos(a?"right":"left"),d=this;b="undefined"==typeof b?this.option("nSlideDuration"):b,this.fireEvent("beforeSlide",{sStatus:this._sStatus})&&(d._htWElement.blocker.show(),a?(this._htWElement.left&&this._htWElement.left.css("zIndex",5),this._htWElement.right&&this._htWElement.right.css("zIndex",6).show(),d._htWElement.blocker.css("left","0px"),this._sStatus="right"):(this._htWElement.right&&this._htWElement.right.css("zIndex",5),this._htWElement.left&&this._htWElement.left.css("zIndex",6).show(),d._htWElement.blocker.css("left",c+"px"),this._sStatus="left"),a?(this._htWElement.left&&this._oSlideReveal.left.hide(b/2),this._htWElement.right&&this._oSlideReveal.right.show(b)):(this._htWElement.right&&this._oSlideReveal.right.hide(b/2),this._htWElement.left&&this._oSlideReveal.left.show(b)))}},_getPos:function(a){var b=parseInt(this._oSize.width-this.option("nSildeThreshold"),10);switch(a){case"left":break;case"main":b=0;break;case"right":b=-b}return b},move:function(a,b){switch(b="undefined"==typeof b?this.option("nSlideDuration"):b,a){case"left":this._slide(!1,b);break;case"main":this.restore(b);break;case"right":this._slide(!0,b)}},toggleSlide:function(a){return"main"!=this._sStatus?void this.restore():void this._slide(a)},restore:function(a){this._oSlideReveal.left.isPlaying()&&this._oSlideReveal.right.isPlaying()||(a="undefined"==typeof a?this.option("nSlideDuration"):a,this.fireEvent("beforeRestore",{sStatus:this._sStatus})&&("right"==this._sStatus?this._oSlideReveal.right.hide(a):this._oSlideReveal.left.hide(a)))},_onRevealShow:function(){"left"==this._sStatus&&this._oSlideReveal[this._sStatus]&&(this._oSlideReveal.right._bShow=!1,this._htWElement.right.hide()),"right"==this._sStatus&&this._oSlideReveal[this._sStatus]&&(this._oSlideReveal.left._bShow=!1,this._htWElement.left.hide()),this.fireEvent("slide",{sStatus:this._sStatus})},_onRevealRestore:function(a){this._sStatus="main",this._htWElement.blocker.hide(),"left"==a&&this._htWElement.left&&this._htWElement.left.hide(),"right"==a&&this._htWElement.right&&this._htWElement.right.hide(),this.fireEvent("restore",{sStatus:this._sStatus})},_initSlideReveal:function(){var a=this,b={nDuration:this.option("nSlideDuration"),nMargin:this.option("nSildeThreshold"),bUseTimingFunction:this.option("bUseTimingFunction")};this._htWElement.left&&(this._htWElement.main.addClass("revealLeft-contents"),this._htWElement.left.addClass("revealLeft-nav"),this._oSlideReveal.left=new jindo.m.SlideReveal(jindo.$Jindo.mixin(b,{sClassPrefix:"revealLeft-",sDirection:"right"})).attach({show:function(){a._onRevealShow()},hide:function(){a._onRevealRestore("left")}})),this._htWElement.right&&(this._htWElement.main.addClass("revealRight-contents"),this._htWElement.right.addClass("revealRight-nav"),this._oSlideReveal.right=new jindo.m.SlideReveal(jindo.$Jindo.mixin(b,{sClassPrefix:"revealRight-",sDirection:"left"})).attach({show:function(){a._onRevealShow()},hide:function(){a._onRevealRestore("right")}}))},_onActivate:function(){this._attachEvent(),this.resize(),this._initSlideReveal()},_onDeactivate:function(){this._detachEvent()},_attachEvent:function(){this._htEvent={},this._htEvent.restore=jindo.$Fn(this._onRestore,this).attach(this._htWElement.blocker,"click"),this._htEvent.rotate=jindo.$Fn(this._onRotate,this).bind(),jindo.m.bindRotate(this._htEvent.rotate),jindo.m.bindPageshow(this._htEvent.rotate)},_detachEvent:function(){this._htEvent.restore.detach(this._htWElement.blocker,"click"),jindo.m.unbindRotate(this._htEvent.rotate),jindo.m.unbindPageshow(this._htEvent.rotate),this._htEvent=null},_onRestore:function(){this.restore()},destroy:function(){this.deactivate(),this._oLeftScroll.destroy(),this._oLeftScroll=null,this._oRightScroll.destroy(),this._oRightScroll=null}}).extend(jindo.m.UIComponent),jindo.m.SlideTab=jindo.$Class({$init:function(a,b){this.option({nSlideDuration:200,sTimingFunction:"ease-in-out",nCountPerVeiw:3}),this.option(b||{}),this._initData(),this.option("bActivateOnload")&&(this.resize(),this.activate()),this.select(this.option("nDefaultIndex"),{bEffect:!1})},_initVar:function(){this.$super._initVar(),this._nCurrentPage=1,this._nTotalPage=1,this._nPageWidth=0,this._aDummyTab=[],this._oEffect=null,this._isNext=null},_setWrapperElement:function(a){var b=this._sPrefix;this.$super._setWrapperElement(a),this._htWElement.tab_view=jindo.$Element(this._htWElement.baseElement.query("."+b+"tabview")),this._htWElement.tab_container=jindo.$Element(this._htWElement.baseElement.query("."+b+"tab-cont")),this._htWElement.prev=jindo.$Element(this._htWElement.baseElement.query("."+b+"prev")),this._htWElement.next=jindo.$Element(this._htWElement.baseElement.query("."+b+"next")),this._htWElement.baseElement.css("position","relative"),this._htWElement.tab_view.css("overflow","hidden")},_initData:function(){this.$super._initData();var a,b=this.option("nCountPerVeiw"),c=null;this._nTotalPage=parseInt(this._aTab.length/b,10),a=this._aTab.length%b,a>0&&this._nTotalPage++,a=0==a?b:a;for(var d=0,e=b-a;e>d;d++)c=jindo.$("<li></li>"),this._aDummyTab.push(jindo.$Element(c)),this._htWElement.tab_container.append(c);this._oEffect=new jindo.m.LayerEffect(this._htWElement.tab_container.$value())},getCurrentPage:function(){return this._nCurrentPage},getTotalPage:function(){return this._nTotalPage},resize:function(){var a,b=this._nPageWidth;this._nPageWidth=this._htWElement.tab_view.width()-this._htWElement.prev.width()-this._htWElement.next.width(),a=this._nPageWidth/this.option("nCountPerVeiw"),b>this._nPageWidth?(this._setTabWidth(a),this._htWElement.tab_container.width(this._nPageWidth*this._nTotalPage)):(this._htWElement.tab_container.width(this._nPageWidth*this._nTotalPage),this._setTabWidth(a)),this._htWElement.tab_container.css("left",(this._nCurrentPage-1)*-this._nPageWidth)},_setTabWidth:function(a){jindo.$A(this._aTab).forEach(function(b){b.width(a)}),jindo.$A(this._aDummyTab).forEach(function(b){b.width(a)})},_fireEventBeforePrev:function(){return this.fireEvent("beforePrev",{nPage:this._nCurrentPage,nIndex:this._nCurrentIndex,nTotalPage:this._nTotalPage})},_fireEventPrev:function(){this.fireEvent("prev",{nPage:this._nCurrentPage,nIndex:this._nCurrentIndex,nTotalPage:this._nTotalPage})},_fireEventBeforeNext:function(){return this.fireEvent("beforeNext",{nPage:this._nCurrentPage,nIndex:this._nCurrentIndex,nTotalPage:this._nTotalPage})},_fireEventNext:function(){this.fireEvent("next",{nPage:this._nCurrentPage,nIndex:this._nCurrentIndex,nTotalPage:this._nTotalPage})},_onAfterSelect:function(a){this.select(this._getIdx(a))},_beforeSelect:function(){},select:function(a,b){this.$super.select(a);var c=parseInt(a/~~this.option("nCountPerVeiw"),10)+1,d=c-this.getCurrentPage();d>0?this.next(d,b):0>d&&this.prev(-d,b)},_attachEvent:function(){this.$super._attachEvent(),this._htEvent.prev_click={ref:jindo.$Fn(this._onPrev,this).attach(this._htWElement.prev,"click"),el:this._htWElement.prev},this._htEvent.next_click={ref:jindo.$Fn(this._onNext,this).attach(this._htWElement.next,"click"),el:this._htWElement.next},this._oEffect.attach("afterEffect",jindo.$Fn(this._onAfterEffect,this).bind())
},_detachEvent:function(){this._oEffect.detachAll(),this.$super._detachEvent()},_onAfterEffect:function(){this._isNext?(this._nCurrentPage++,this._fireEventNext()):(this._nCurrentPage--,this._fireEventPrev()),this._isNext=null,this._bSelect&&this.select((this._nCurrentPage-1)*this.option("nCountPerVeiw"))},_onPrev:function(a){return this._oPanelEffect&&this._oPanelEffect.isPlaying()?(a.stop(jindo.$Event.CANCEL_ALL),!1):void this.prev(1,{bSelect:!0})},prev:function(a,b){if(void 0!=a&&0>=a)return!1;a=a||1,b=b?b:{},this._bSelect=b.bSelect||!1;var c=this._nCurrentPage-a+1;c>1&&!this._oEffect.isPlaying()&&(b.bEffect||void 0==b.bEffect?this._fireEventBeforePrev()&&this._oEffect.slide({sDirection:"right",nDuration:this.option("nSlideDuration"),sTransitionTimingFunction:this.option("sTimingFunction"),nSize:this._nPageWidth*a}):(this._htWElement.tab_container.css("left",this._nPageWidth*a),this._onAfterEffect()),this._nCurrentPage=c,this._isNext=!1)},_onNext:function(a){return this._oPanelEffect&&this._oPanelEffect.isPlaying()?(a.stop(jindo.$Event.CANCEL_ALL),!1):void this.next(1,{bSelect:!0})},next:function(a,b){if(void 0!=a&&0>=a)return!1;a=a||1,b=b?b:{},this._bSelect=b.bSelect||!1;var c=this._nCurrentPage+a-1;c<this._nTotalPage&&!this._oEffect.isPlaying()&&this._fireEventBeforeNext()&&(this._nCurrentPage=c,this._isNext=!0,b.bEffect||void 0==b.bEffect?this._oEffect.slide({sDirection:"left",nDuration:this.option("nSlideDuration"),sTransitionTimingFunction:this.option("sTimingFunction"),nSize:this._nPageWidth*a}):(this._htWElement.tab_container.css("left",-this._nPageWidth*a),this._onAfterEffect()))},destroy:function(){this.deactivate();for(var a in this._aDummyTab)this._aDummyTab[a]=null;this._aDummyTab=null,this._initVar(),this._oEffect&&(this._oEffect.destroy(),this._oEffect=null),this.$super.destroy()}}).extend(jindo.m.CoreTab),jindo.m.Slider=jindo.$Class({$init:function(a,b){this.option({sClassPrefix:"slider-",bVertical:!1,nMinValue:0,nMaxValue:100,nDefaultValue:0,nMoveThreshold:0,nSlopeThreshold:5,bActivateOnload:!0}),this.option(b||{}),this._setWrapperElement(a),this._initVar(),this.option("bActivateOnload")&&(this.activate(),this.setValue(this.option("nDefaultValue")))},_initVar:function(){this._oTouch=new jindo.m.Touch(this._htWElement.track.$value(),{nTapThreshold:1,nMoveThreshold:this.option("nMoveThreshold"),nSlopeThreshold:this.option("nSlopeThreshold"),bHorizental:!this.option("bVertical"),bVertical:this.option("bVertical"),nEndEventThreshold:jindo.m.getDeviceInfo().win8?100:0,bActivateOnload:!1}),this._oTouch.attach({touchMove:jindo.$Fn(this._onMove,this).bind(),touchEnd:jindo.$Fn(this._onMove,this).bind(),touchStart:jindo.$Fn(this._onStart,this).bind()}),this._htSwap={left:this.option("bVertical")?"top":"left",width:this.option("bVertical")?"height":"width",nX:this.option("bVertical")?"nY":"nX"},this._nPos=this._nBeforeValue=0;var a=this._htWElement.thumb[this._htSwap.width]()/2;this._htWElement.thumb.css("margin-"+this._htSwap.left,-1*a)},_setWrapperElement:function(a){this._htWElement={},a=jindo.$(a);var b="."+this.option("sClassPrefix");this._htWElement.track=jindo.$Element(a);var c=jindo.$$.getSingle(b+"thumb",a);this._htWElement.thumb=c?jindo.$Element(c):null;var d=jindo.$$.getSingle(b+"range",a);this._htWElement.range=d?jindo.$Element(d):null},_onStart:function(a){var b={nValue:this.getValue(),nPosition:this.getPosition()};this.fireEvent("touchStart",b)&&a.oEvent.stop(jindo.$Event.CANCEL_DEFAULT)},_onMove:function(a){if("touchMove"==a.sType&&a.oEvent.stop(jindo.$Event.CANCEL_DEFAULT),"touchEnd"==a.sType&&a.element==this._htWElement.thumb.$value())return void this._fireEvent(a);var b=a[this._htSwap.nX]-this._htWElement.track.offset()[this._htSwap.left]-this._htWElement.thumb[this._htSwap.width]()/2,c=this._getAdjustedPos(b);this._move(c),this._fireEvent(a)},_fireEvent:function(a){this.fireEvent(a.sType,{nValue:this.getValue(),nPosition:this.getPosition()})},_move:function(a,b){if("undefined"==typeof b&&(b=!0),this._nPos!=a||b){var c=this.getValue(a),d=Math.round(a),e=this.getValue(d);this._nBeforeValue=c,this._nPos=a;var f={nValue:c,nPosition:a,nAdjustValue:e,nAdjustPosition:d};(!b||this._fireBeforeEvent(f))&&(f.nAdjustValue!=e&&(f.nAdjustPosition=this._getPositionFromValue(f.nAdjustValue)),this._moveThumb(f.nAdjustPosition),b&&this._fireChangeEvent(f),this._htWElement.range&&this._htWElement.range.css(this._htSwap.width,f.nAdjustPosition+"%"))}},_fireBeforeEvent:function(a){return this.fireEvent("beforeChange",a)},_fireChangeEvent:function(a){this.fireEvent("change",a)},_moveThumb:function(a){a>100||0>a||(this._htWElement.thumb.css("webkitTransitionDuration","0ms"),this._htWElement.thumb.css("webkitTransitionProperty",this._htSwap.left),this._htWElement.thumb.css(this._htSwap.left,a+"%"))},_getTrackInfo:function(){var a=this.option("bVertical")?this._htWElement.track.height():this._htWElement.track.width(),b=this.option("bVertical")?this._htWElement.thumb.height():this._htWElement.thumb.width(),c=a-b/2;return{maxPos:c,max:1*this.option("nMaxValue"),min:1*this.option("nMinValue")}},getValue:function(a){"undefined"==typeof a&&(a=this.getPosition());var b=this._getTrackInfo(),c=b.min+(b.max-b.min)*(a/100);return c},setValue:function(a,b){a=1*a;var c=this._getPositionFromValue(a);"undefined"==typeof b&&(b=!1),this._nBeforeValue!=a&&(b=!0),this._move(c,b)},_getAdjustedPos:function(a){var b=this._getTrackInfo(),c=100*a/b.maxPos;return c=Math.max(0,c),c=Math.min(c,100)},getPosition:function(){var a=this._htWElement.thumb.css(this._htSwap.left);return"auto"==a?0:parseFloat(a,10)},setPosition:function(a,b){"undefined"==typeof b&&(b=!0),this._move(a,b)},_getPositionFromValue:function(a){var b=this._getTrackInfo(),c=100*(a-b.min)/(b.max-b.min);return c=isNaN(c)?100:c,c=Math.max(0,c),c=Math.min(100,c)},_onClick:function(a){a.stop()},_attachEvent:function(){this._htEvent={}},_detachEvent:function(a){if(a){var b=this._htEvent[a];b.ref.detach(b.el,a)}},_onActivate:function(){this._attachEvent(),this._oTouch.activate()},_onDeactivate:function(){this._detachEvent(),this._oTouch.deactivate()},destroy:function(){this.deactivate();for(var a in this._htWElement)this._htWElement[a]=null;this._htWElement=null;for(a in this._htSwap)this._htSwap[a]=null;this._htSwap=null,this._oTouch.detachAll()}}).extend(jindo.m.UIComponent),jindo.m.SwipeCommon=jindo.$Class({$init:function(){this.option({bActivateOnload:!0,bUseHighlight:!0,bUseDiagonalTouch:!0,bUseMomentum:!0,nDeceleration:6e-4,bAutoResize:!0,fEffect:jindo.m.Effect.cubicEaseOut,bUseCss3d:jindo.m.useCss3d(),bUseTimingFunction:jindo.m.useTimingFunction(),nZIndex:2e3})},_getAnimationOption:function(a){return jindo.$Jindo.mixin({bUseH:this._bUseH,bHasOffsetBug:this._hasOffsetBug(),fEffect:this.option("fEffect"),bUseCss3d:this.option("bUseCss3d"),bUseTimingFunction:this.option("bUseTimingFunction")},a||{})},_initVar:function(){this._htWElement={},this._bUseH=!1,this._bUseV=!1,this._nX=0,this._nY=0,this._bUseDiagonalTouch=this.option("bUseDiagonalTouch"),this._bClickBug=jindo.m.hasClickBug(),this._htOffsetBug={hasBug:jindo.m.hasOffsetBug()&&this.option("bUseHighlight"),timer:-1,elDummyTag:null},this._htSize={viewWidth:0,viewHeight:0,contWidth:0,contHeight:0,maxX:0,maxY:0},this._isStop=!1,this._oTouch=null,this._oAnimation=null},_setWrapperElement:function(a){this._htWElement.view=jindo.$Element(a),this._htWElement.base=jindo.$Element(this._htWElement.view.query("."+this.option("sClassPrefix")+"base")),this._htWElement.container=this._htWElement.base?this._htWElement.base.query("."+this.option("sClassPrefix")+"container"):this._htWElement.view.query("."+this.option("sClassPrefix")+"container")||this._htWElement.view.first(),this._htWElement.container=jindo.$Element(this._htWElement.container),this._htWElement.view.css({overflow:"hidden",zIndex:this.option("nZIndex")}),this._htWElement.base&&this._htWElement.base.css({position:"relavite"}),this._htWElement.container.css({left:"0px",top:"0px"}),this._createOffsetBugDummyTag()},_onActivate:function(){this._oTouch||(this._oTouch=new jindo.m.Touch(this._htWElement.view.$value(),{nMoveThreshold:0,nUseDiagonal:0,bVertical:this.bUseH,bHorizental:!this.bUseH,nMomentumDuration:200,nTapThreshold:1,nSlopeThreshold:5,nEndEventThreshold:jindo.m.getDeviceInfo().win8?100:0,bActivateOnload:!1})),this._attachEvent(),this._attachAniEvent(),this._oTouch.activate()},_onDeactivate:function(){this._detachEvent(),this._detachAniEvent(),this._oTouch.deactivate(),this._oAnimation&&this._oAnimation.deactivate()},_attachEvent:function(){this._htEvent={},this._htEvent.touchStart=jindo.$Fn(this._onStart,this).bind(),this._htEvent.touchMove=jindo.$Fn(this._onMove,this).bind(),this._htEvent.touchEnd=jindo.$Fn(this._onEnd,this).bind(),this._oTouch.attach({touchStart:this._htEvent.touchStart,touchMove:this._htEvent.touchMove,touchEnd:this._htEvent.touchEnd}),this.option("bAutoResize")&&(this._htEvent.resize=jindo.$Fn(this._onResize,this).bind(),jindo.m.bindRotate(this._htEvent.resize),jindo.m.bindPageshow(this._htEvent.resize))},_detachEvent:function(){this._oTouch.detachAll(),this.option("bAutoResize")&&(jindo.m.unbindRotate(this._htEvent.resize),jindo.m.unbindPageshow(this._htEvent.resize))},_getX:function(a){return a>=0?0:a<=this._htSize.maxX?this._htSize.maxX:a},_getY:function(a){return a>=0?0:a<=this._htSize.maxY?this._htSize.maxY:a},_attachAniEvent:function(){this._oAnimation&&(this._htEvent.endAni=jindo.$Fn(this._onEndAniImpl,this).bind(),this._oAnimation.attach({end:this._htEvent.endAni}))},_detachAniEvent:function(){this._oAnimation&&this._oAnimation.detachAll()},set:function(){var a=Array.prototype.slice.apply(arguments);return a.length>=1&&(this._oAnimation=a.shift(),this._oAnimation.setStyle(a),this._attachAniEvent()),this._oAnimation},getAnimation:function(){return this._oAnimation},isPlaying:function(){return this._oAnimation?this._oAnimation.isPlaying():!1},isAnimating:this.isPlaying,refresh:function(){},resize:function(){var a=this._htWElement.view,b=this._htWElement.container,c=parseInt(a.css("borderLeftWidth"),10),d=parseInt(a.css("borderRightWidth"),10),e=parseInt(a.css("borderTopWidth"),10),f=parseInt(a.css("borderBottomWidth"),10);c=isNaN(c)?0:c,d=isNaN(d)?0:d,e=isNaN(e)?0:e,f=isNaN(f)?0:f,this._htSize.viewWidth=a.width()-c-d,this._htSize.viewHeight=a.height()-e-f,this._htSize.contWidth=b.width(),this._htSize.contHeight=b.height()},_calcMomentum:function(a,b,c,d,e,f){var g=this.option("nDeceleration"),h=c/g,i=0,j=0;return a>0&&h>d?(j=f/(6/(h/b*g)),d+=j,b=b*d/h,h=d):0>a&&h>e&&(j=f/(6/(h/b*g)),e+=j,b=b*e/h,h=e),h*=0>a?-1:1,i=b/g,{nDist:h,nTime:Math.round(i)}},_onStart:function(a){return this.isPlaying()?void a.oEvent.stop():(this._clearOffsetBug(),void(this.fireEvent("beforeTouchStart",a)?(this._isStop=!1,this._startImpl(a),this.fireEvent("touchStart",jindo.$Jindo.mixin(a,{}))||a.stop()):a.stop()))},_onMove:function(a){if(this._clearOffsetBug(),this._bClickBug&&this._htWElement.container.css("pointerEvents","none"),this.fireEvent("beforeTouchMove",a)){var b=this._preventSystemEvent(a);b&&!this.isPlaying()&&this._moveImpl(a),b||this.fireEvent("scroll");var c=jindo.$Jindo.mixin(a,{});c.bPreventDefaultEvent=b,this.fireEvent("touchMove",c)||a.stop()}else a.stop()},_onEnd:function(a){this.isPlaying()||(this._isStop||this._clearOffsetBug(),this.fireEvent("beforeTouchEnd",a)?(a.sMoveType===jindo.m.MOVETYPE[3]||a.sMoveType===jindo.m.MOVETYPE[4]||a.sMoveType===jindo.m.MOVETYPE[5]?this._isStop?a.oEvent.stop(jindo.$Event.CANCEL_ALL):this._tapImpl&&this._tapImpl():this._endImpl(a),this.fireEvent("touchEnd",jindo.$Jindo.mixin(a,{}))||a.stop()):a.stop(),this._bClickBug&&this._htWElement.container.css("pointerEvents","auto"))},_preventSystemEvent:function(a){var b=a.oEvent;return a.sMoveType===jindo.m.MOVETYPE[0]?this._bUseH?(b.stop(),!0):!1:a.sMoveType===jindo.m.MOVETYPE[1]?this._bUseV?(b.stop(),!0):!1:a.sMoveType===jindo.m.MOVETYPE[2]?this._bUseDiagonalTouch?(b.stop(),!0):!1:a.sMoveType===jindo.m.MOVETYPE[6]||a.sMoveType===jindo.m.MOVETYPE[7]||a.sMoveType===jindo.m.MOVETYPE[8]?(b.stop(),!0):(b.stop(),!0)},_onResize:function(a){"rotate"===a.sType?this.fireEvent("rotate",{isVertical:a.isVertical})&&this._resizeImpl(a):this._resizeImpl(a)},_getMomentumData:function(a,b,c){var d={nDist:0,nTime:0},e={nDist:0,nTime:0},f={momentumX:a.nMomentumX,momentumY:a.nMomentumY,distanceX:a.nDistanceX,distanceY:a.nDistanceY,x:this._nX,y:this._nY,nextX:this._nX,nextY:this._nY};return this.option("bUseMomentum")&&(a.nMomentumX&&a.nMomentumX>b||a.nMomentumY&&a.nMomentumY>b)?(this._bUseH&&(d=this._calcMomentum(a.nDistanceX,a.nSpeedX,a.nMomentumX,-this._nX,-this._htSize.maxX+this._nX,c?this._htSize.viewWidth:0)),this._bUseV&&(e=this._calcMomentum(a.nDistanceY,a.nSpeedY,a.nMomentumY,-this._nY,-this._htSize.maxY+this._nY,c?this._htSize.viewHeight:0)),f.nextX=this._nX+d.nDist,f.nextY=this._nY+e.nDist,f.duration=Math.max(Math.max(d.nTime,e.nTime),10),f.duration=jindo.m.getOsInfo().android?.7*f.duration:f.duration):f.duration=0,f},_makeStylePos:function(a){var b=this.getAnimation(),c=jindo.m.getTranslateOffset(a),d=jindo.m.getStyleOffset(a),e={top:c.top+d.top+"px",left:c.left+d.left+"px"};e[b.p("Transform")]=b.getTranslate("0px","0px"),a.css(e),this._htOffsetBug.elDummyTag.focus()},_createOffsetBugDummyTag:function(){this._hasOffsetBug()&&(this._htOffsetBug.elDummyTag=jindo.$$.getSingle("._offsetbug_dummy_atag_",this._htWElement.view.$value()),this._htOffsetBug.elDummyTag||(this._htOffsetBug.elDummyTag=jindo.$("<a href='javascript:void(0);' style='position:absolute;height:0px;width:0px;' class='_offsetbug_dummy_atag_'></a>"),this._htWElement.view.append(this._htOffsetBug.elDummyTag)))},_clearOffsetBug:function(){this._hasOffsetBug()&&(clearTimeout(this._htOffsetBug.timer),this._htOffsetBug.timer=-1)},_fixOffsetBugImpl:function(){if(this._hasOffsetBug()){var a=this,b=this.getAnimation().getTarget(!0);this._clearOffsetBug(),this._htOffsetBug.timer=setTimeout(function(){b&&a._makeStylePos(b)},200)}},_hasOffsetBug:function(){return this._htOffsetBug.hasBug},destroy:function(){var a;this.deactivate();for(a in this._htWElement)this._htWElement[a]=null;this._htWElement=null;for(a in this._htEvent)this._htEvent[a]=null;this._htEvent=null,this._oTouch&&this._oTouch.destroy(),this._oAnimation&&this._oAnimation.destroy()}}).extend(jindo.m.UIComponent),jindo.m.Tab=jindo.$Class({$init:function(a,b){this.option({sMoreText:"더보기",nCountOnList:0}),this.option(b||{}),this._initData(),this.option("bActivateOnload")&&this.activate(),this.select(this.option("nDefaultIndex"))},_initVar:function(){this.$super._initVar(),this._isMore=!1,this._nCurrentMoreTab=-1},_initData:function(){this.$super._initData();var a=this.option("nCountOnList");a>0&&this._aTab.length>a&&this._makeMoreContainer(a)},_makeMoreContainer:function(a){this._htWElement.more_tab=jindo.$Element('<li class="'+this._sPrefix+'more-tab"><a style="display: block; height: 100%">'+this.option("sMoreText")+' <span class="'+this._sPrefix+'arrow-down"></span></a></li>'),this._htWElement.more_container_wrap=jindo.$Element('<div style="position:relative; width:100%;z-index:10">'),this._htWElement.more_container=jindo.$Element('<ul class="'+this._sPrefix+'more-cont" style="display:none; position: absolute">');for(var b=a,c=this._aTab.length;c>b;b++)this._tab2more(b);this._htWElement.more_container_wrap.append(this._htWElement.more_container),this._htWElement.more_tab.append(this._htWElement.more_container_wrap),this._htWElement.tab_container.append(this._htWElement.more_tab),this._htWElement.more_arrow=jindo.$Element(this._htWElement.more_tab.query("span")),this._nCurrentMoreTab=a-1,this._isMore=!0},_attachMoreContainerEvent:function(){this._htEvent.more_click={el:this._htWElement.more_container,ref:jindo.$Fn(this._onClickMore,this).attach(this._htWElement.more_container,"click")}},_onClickMore:function(a){if(this._isMore){var b=jindo.$Element(a.element),c=this._sPrefix+"more-li";b.hasClass(c)||(b=b.parent(function(a){return a.hasClass(c)},1)[0]),this.select(this._getIdx(b)),a.stop(jindo.$Event.CANCEL_BUBBLE)}},_tab2more:function(a){var b,c=this._htWElement.more_container.first(),d=!1;for(this._aTab[a].className(this._sPrefix+"more-li"),this._aTab[a].first().className(this._sPrefix+"more-lia");c;){if(b=this._getIdx(c),b>a){c.before(this._aTab[a]),d=!0;break}c=c.next()}d||this._htWElement.more_container.append(this._aTab[a])},_more2tab:function(a){this._aTab[a].className(this._sPrefix+"tab"),this._aTab[a].first().className(this._sPrefix+"taba"),this._htWElement.more_tab.before(this._aTab[a]),this._nCurrentMoreTab=a},_onAfterSelect:function(a){if(a.hasClass(this._sPrefix+"more-tab")){var b=this._htWElement.more_container.visible();this._fireEventBefore(b?"beforeHide":"beforeShow")&&(this._htWElement.more_container.toggle(),this._htWElement.more_tab.toggleClass(this._sPrefix+"more-on"),this._htWElement.more_arrow.toggleClass(this._sPrefix+"arrow-down",this._sPrefix+"arrow-up"),this._fireEventBefore(b?"hide":"show"))}else this._hideMoreList(),this.select(this._getIdx(a))},_hideMoreList:function(){this._isMore&&this._fireEventBefore("beforeHide")&&(this._htWElement.more_container.hide(),this._htWElement.more_tab.removeClass(this._sPrefix+"more-on"),this._htWElement.more_arrow.className(this._sPrefix+"arrow-up"),this._fireEventBefore("hide"))},_beforeSelect:function(a){this._isMore&&a>=this.option("nCountOnList")-1&&this._nCurrentMoreTab!=a&&(this._hideMoreList(),this._tab2more(this._nCurrentMoreTab),this._more2tab(a))},_attachEvent:function(){this.$super._attachEvent(),this._isMore&&this._attachMoreContainerEvent()},_detachEvent:function(){this.$super._detachEvent()},destroy:function(){this.deactivate(),this.$super.destroy()}}).extend(jindo.m.CoreTab),jindo.m.TelValidator=jindo.$Class({rx:/^(\d{2,3})(\d{3,4})(\d{4})$/,_isValid:function(a){if(a=a.replace(/[^\d]/g,""),this.rx.test(a)){var b=a.length,c=!1;return"0"===a.charAt(0)&&(9===b&&"02"===a.substring(0,2)||10===b||11===b)&&(c=!0),c}return!1},_getCorrectedValue:function(a,b){return a=a.replace(/[^\d]/g,""),a=a.length>11?a.substr(0,11):a,this._applyFormat(a,b)},_applyFormat:function(a,b){b=b||"-";var c=a.length;return"0"===a.charAt(0)&&(9===c&&"02"===a.substring(0,2)?a=a.substr(0,2)+b+a.substr(2,3)+b+a.substr(5,4):10===c?a="02"===a.substr(0,2)?a.substr(0,2)+b+a.substr(2,4)+b+a.substr(6,4):a.substr(0,3)+b+a.substr(3,3)+b+a.substr(6,4):11===c&&(a="0505"===a.substr(0,4)?a.substr(0,4)+b+a.substr(4,3)+b+a.substr(7,4):a.substr(0,3)+b+a.substr(3,4)+b+a.substr(7,4))),a}}).extend(jindo.m.Validator),jindo.m.TextArea=jindo.$Class({$init:function(a,b){this.option({bActivateOnload:!0,sClassPrefix:"fta-",bUseRadius:!1,sRadiusSize:"0.5em",bUseAutoHeight:!1,nExpandHeight:30,nMaxHeight:-1}),this.option(b||{}),this._initVar(),this._setWrapperElement(a),this.option("bUseRadius")&&this._applyRadiusStyle(this.option("sRadiusSize")),this.option("bActivateOnload")&&this.activate()},_initVar:function(){this._bTouchTextArea=!1,this._touchMoved=!1,this._sBeforeValue="",this._nInitHeight=-1},_setWrapperElement:function(a){this._htWElement={};this.option("sClassPrefix");a="string"==typeof a?jindo.$(a):a,this._htWElement.textarea=jindo.$Element(a),this._nInitHeight=this._htWElement.textarea.height()},_applyRadiusStyle:function(a){var b=(jindo.m.getCssPrefix()+"BorderRadius",{sCssName:a,borderRadius:a});this._htWElement.textarea.css(b)},_onActivate:function(){this._attachEvent()},_onDeactivate:function(){this._detachEvent()},_attachEvent:function(){this._htEvent={};var a=this._htWElement.textarea.$value();this._htEvent.textarea_focus={el:a,ref:jindo.$Fn(this._onFocus,this).attach(a,"focus")},this._htEvent.textarea_blur={el:a,ref:jindo.$Fn(this._onBlur,this).attach(a,"blur")},this._htEvent.textarea_input={el:a,ref:jindo.$Fn(this._checkHeightAndExpand,this).attach(a,"input")}},_detachEvent:function(){for(var a in this._htEvent){var b=this._htEvent[a];b.ref.detach(b.el,a.substring(a.lastIndexOf("_")+1))}this._htEvent=null},_onFocus:function(){this._htWElement.textarea.addClass(this.option("sClassPrefix")+"textarea-focus"),this.fireEvent("focus",{elTextArea:this._htWElement.textarea.$value()})},_onBlur:function(){this._htWElement.textarea.removeClass(this.option("sClassPrefix")+"textarea-focus"),this.fireEvent("blur",{elTextArea:this._htWElement.textarea.$value()})},_checkHeightAndExpand:function(){var a=this._htWElement.textarea.$value().value;this._adjustHeight(),a!=this._sBeforeValue&&(this._sBeforeValue=a,this.fireEvent("change",{elTextArea:this._htWElement.textarea.$value()}))},_adjustHeight:function(){var a=this._htWElement.textarea.$value(),b=this.option("nExpandHeight"),c=a.clientHeight,d=a.scrollHeight,e=this.option("nMaxHeight"),f=this._sBeforeValue.split("\n").length,g=a.value.split("\n").length,h=parseInt(this._htWElement.textarea.css("line-height"),10),i=0;if(f>g){if(this.option("bUseAutoHeight")){if(i=h*g,-1!=e&&i>e)return;a.style.height=this._nInitHeight<=i?i+"px":this._nInitHeight+"px"}}else g>f&&this.option("bUseAutoHeight")&&d>c&&(i=d+b,-1==e||e>=i?(a.style.height=i+"px",this.fireEvent("expand",{elTextArea:this._htWElement.textarea.$value()})):(-1==e||i>e)&&d!=e&&(a.style.height=e+"px",this.fireEvent("expand",{elTextArea:this._htWElement.textarea.$value()})))},_expandHeight:function(){var a=this._htWElement.textarea.$value(),b=this.option("nMaxHeight"),c=this.option("nExpandHeight"),d=parseInt(a.scrollHeight,10),e=parseInt(a.style.height,10),f=d+c;b>0&&e==b||(a.style.height=b>0&&f>b?b+"px":f+"px")},getValue:function(){return this._htWElement.textarea.$value().value},setValue:function(a){this._htWElement.textarea.$value().value=a,this._checkHeightAndExpand()},deleteValue:function(){this._htWElement.textarea.$value().value=""},enable:function(){var a=this._htWElement.textarea.$value();a.disabled=!1,this._htWElement.textarea.removeClass(this.option("sClassPrefix")+"textarea-disable"),this.fireEvent("enable",{elTextArea:a})},disable:function(){var a=this._htWElement.textarea.$value();a.disabled=!0,this._htWElement.textarea.addClass(this.option("sClassPrefix")+"textarea-disable"),this.fireEvent("disable",{elTextArea:a})},setExpandHeight:function(a){this.option("nExpandHeight",a)},getExpandHeight:function(){return this.option("nExpandHeight")},setMaxHeight:function(a){this.option("nMaxHeight",a);var b=this._htWElement.textarea.$value(),c=b.scrollHeight;a>0&&c>a&&(b.style.height=a+"px")},getMaxHeight:function(){return this.option("nMaxHeight")},destroy:function(){this.deactivate();for(var a in this._htWElement)this._htWElement[a]=null;this._htWElement=null,this._bTouchTextArea=null,this._touchMoved=null}}).extend(jindo.m.UIComponent),jindo.m.TextInput=jindo.$Class({$init:function(a,b){this.option({sClassPrefix:"fit-",bUseValidate:!1,bActivateOnload:!0}),this.option(b||{}),this._initVar(),this._setWrapperElement(a),this._init(),this.option("bActivateOnload")&&this.activate()},$static:{INDEX_ATTR:"data-index",VALIDATE_ATTR:"data-validate"},_initVar:function(){this._aTextInput=[],this._sPreValue=null,this._sClickEvent=jindo.m.getDeviceInfo().iphone||jindo.m.getDeviceInfo().ipad||jindo.m.getDeviceInfo().android?"touchstart":"mousedown",this._nBlurTimer=null},_setWrapperElement:function(a){this._htWElement={},this._htWElement.baseElement=jindo.$Element(a)},_init:function(){var a,b,c,d;d=this._htWElement.baseElement.queryAll("."+this.option("sClassPrefix")+"textinput-unit");for(var e=0,f=d.length;f>e;e++)a=jindo.$Element(d[e]),a.attr(jindo.m.TextInput.INDEX_ATTR,e).css("position","relative"),b=jindo.$Element(a.query("input")),b.attr(jindo.m.TextInput.INDEX_ATTR,e),c=a.query("."+this.option("sClassPrefix")+"clear-btn"),c&&(c=jindo.$Element(c),c.attr(jindo.m.TextInput.INDEX_ATTR,e).css({position:"absolute",zIndex:100,cursor:"pointer",right:"0px",top:"0px"}).hide()),this._aTextInput.push({welUnit:a,welInput:b,welDel:c})},_attachEvent:function(){this._htEvent={},this._htEvent.focus=jindo.$Fn(this._onFocus,this),this._htEvent.blur=jindo.$Fn(this._onBlur,this),this._htEvent.clear=jindo.$Fn(this._onClear,this),this._htEvent.input=jindo.$Fn(this._onChange,this);for(var a=0,b=this._aTextInput.length;b>a;a++)this._attachUnitEvent(this._aTextInput[a])},_attachUnitEvent:function(a){this._htEvent.focus.attach(a.welInput,"focus"),this._htEvent.blur.attach(a.welInput,"blur"),this._htEvent.input.attach(a.welInput,"input"),a.welDel&&this._htEvent.clear.attach(a.welDel,this._sClickEvent)},_detachEvent:function(){for(var a=0,b=this._aTextInput.length;b>a;a++)this._detachUnitEvent(this._aTextInput[a]);for(var c in this._htEvent)this._htEvent[c]=null;this._htEvent=null},_detachUnitEvent:function(a){this._htEvent.focus.detach(a.welInput,"focus"),this._htEvent.blur.detach(a.welInput,"blur"),this._htEvent.input.detach(a.welInput,"input"),a.welDel&&this._htEvent.clear.detach(a.welDel,this._sClickEvent)},_displayClearBtn:function(a){var b=this.getIndex(a),c=this._aTextInput[b].welDel;c&&(""!=jindo.$S(a.$value().value).trim()?!c.visible()&&this.fireEvent("beforeShowClearBtn",{nIndex:b,welClearBtn:c})&&(c.show(),this.fireEvent("showClearBtn",{nIndex:b,welClearBtn:c})):c.visible()&&this.fireEvent("beforeHideClearBtn",{nIndex:b,welClearBtn:c})&&(c.hide(),this.fireEvent("hideClearBtn",{nIndex:b,welClearBtn:c})))},_validate:function(a){var b=a.attr(jindo.m.TextInput.VALIDATE_ATTR);if(b){var c=a.$value().value,d=jindo.m.Validation.validate(b,c),e=this.getIndex(a);d&&("undefined"!=typeof d.sCorrectedValue&&null!==d.sCorrectedValue&&(a.$value().value=this._sPreValue=d.sCorrectedValue),this.fireEvent(d.bValid?"valid":"invalid",{htValidate:d,htTextInput:this._aTextInput[e],nIndex:e}))}},_onFocus:function(a){var b=this.getIndex(a.element);this._processFocus(b)},_processFocus:function(a){var b=this._aTextInput[a],c=b.welUnit,d=this.option("sClassPrefix")+"focus";c.hasClass(d)||c.addClass(d),this.fireEvent("focus",{nIndex:a,htTextInput:b})},_onBlur:function(a){var b=this.getIndex(a.element),c=this;jindo.m.getDeviceInfo().android?(clearTimeout(this._nBlurTimer),this._nBlurTimer=setTimeout(function(){c._processBlur(b)},100)):c._processBlur(b)},_processBlur:function(a){if(this._aTextInput[a].welUnit.removeClass(this.option("sClassPrefix")+"focus"),this._stopWatcher(),this.option("bUseValidate")){var b=this._aTextInput[a].welInput;this._validate(b),this._displayClearBtn(b)}this.fireEvent("blur",{nIndex:a,htTextInput:this._aTextInput[a]})},_onClear:function(a){var b=this.option("sClassPrefix")+"textinput-unit",c=jindo.$Element(a.element);if(!c.hasClass(b)){var d=c.parent(function(a){return a.hasClass(b)});if(!(d.length>0))return;c=d[0]}var e=this.getIndex(c),f=this._aTextInput[e].welInput,g=jindo.m.getDeviceInfo(),h=parseInt(g.version,10);return f.$value().value="",g.android&&3===h?(this._detachUnitEvent(this._aTextInput[e]),f.$value().blur(),f.$value().focus(),this._attachUnitEvent(this._aTextInput[e])):!g.android&&h>4&&(f.$value().blur(),f.$value().focus()),this._displayClearBtn(f),this.fireEvent("clear",{nIndex:e,htTextInput:this._aTextInput[e]}),a.stop(jindo.$Event.CANCEL_ALL),!1},_stopWatcher:function(){this._sPreValue=null},_onChange:function(a){a=jindo.$Element(a.element);var b=a.$value().value;this._sPreValue!=b?(this._sPreValue=b,this.fireEvent("change",{sPreValue:b,welInput:a,nIndex:this.getIndex(a)}),this._displayClearBtn(a)):this._displayClearBtn(a)},_getTextInputList:function(a){var b,c,d=[];if(a)if(a instanceof Array)for(b=0,c=a.length;c>b;b++)d.push(jindo.$Element(a[b]));else d.push(jindo.$Element(a));else for(b=0,c=this._aTextInput.length;c>b;b++)d.push(this._aTextInput[b].welUnit);return d},_useSettingUnit:function(a,b){var c=this;this._stopWatcher();var d=this._getTextInputList(a);jindo.m.getDeviceInfo().android?setTimeout(function(){c._useSettingUnitCore(d,b)},100):c._useSettingUnitCore(d,b)},_useSettingUnitCore:function(a,b){for(var c=0,d=a.length;d>c;c++)b?this._enableElement(a[c]):this._disableElement(a[c]);this.fireEvent(b?"enable":"disable",{aTextInputUnit:a})},_enableElement:function(a){var b=this.getIndex(a),c=this._aTextInput[b].welInput;this._detachUnitEvent(this._aTextInput[b]),this._attachUnitEvent(this._aTextInput[b]),a.removeClass(this.option("sClassPrefix")+"disable"),c.$value().disabled=!1,this._displayClearBtn(c)},_disableElement:function(a){var b=this.getIndex(a),c=this._aTextInput[b].welInput,d=this._aTextInput[b].welDel;this._detachUnitEvent(this._aTextInput[b]),a.addClass(this.option("sClassPrefix")+"disable"),c.$value().disabled=!0,d&&d.hide()},enable:function(a){this.isActivating()&&this._useSettingUnit(a,!0)},disable:function(a){this.isActivating()&&this._useSettingUnit(a,!1)},getElement:function(a){return a<this._aTextInput.length&&a>=0?this._aTextInput[a].welUnit:void 0},getInputElement:function(a){return a<this._aTextInput.length&&a>=0?this._aTextInput[a].welInput:void 0},getDelElement:function(a){return a<this._aTextInput.length&&a>=0?this._aTextInput[a].welDel:void 0},getIndex:function(a){return parseInt(jindo.$Element(a).attr(jindo.m.TextInput.INDEX_ATTR),10)},getLength:function(){return this._aTextInput.length},_onActivate:function(){this._attachEvent()},_onDeactivate:function(){this._detachEvent(),this._stopWatcher()},destroy:function(){this.deactivate();for(var a in this._htWElement)this._htWElement[a]=null;this._htWElement=null}}).extend(jindo.m.UIComponent),jindo.m.ToggleSlider=jindo.$Class({$init:function(a,b){this.option({sClassPrefix:"tslider-",bUseDrag:!0,bActivateOnload:!0,nOnPosition:50,nOffPosition:0,bStatus:!0,nDuration:100}),this.option(b||{}),this._setWrapperElement(a),this._initVar(),this.option("bActivateOnload")&&(this.activate(),this.option("bStatus")?(this.bStatusOn=!1,this._move(!0,!1)):(this.bStatusOn=!0,this._move(!1,!1)))},_initVar:function(){this._htWElement.track?(this._oTouch=new jindo.m.Touch(this._htWElement.track.$value(),{nSlopeThreshold:1,nMoveGap:2,bActivateOnload:!1}),this._oTouch.attach({touchMove:jindo.$Fn(this._onMove,this).bind(),touchEnd:jindo.$Fn(this._onEnd,this).bind(),touchStart:jindo.$Fn(this._onStart,this).bind()})):this._oTouch=null,this.bMove=!1,this.bStatusOn=this.option("bStatus"),this.htInfo={nMax:Math.max(this.option("nOnPosition"),this.option("nOffPosition")),nMin:Math.min(this.option("nOnPosition"),this.option("nOffPosition")),nGap:Math.round(Math.abs((this.option("nOnPosition")-this.option("nOffPosition"))/2))},this._wfTransitionEnd=jindo.$Fn(this._onTransitionEnd,this).bind(),this._bFireChange=!1},_setWrapperElement:function(a){this._htWElement={},a=jindo.$(a);var b="."+this.option("sClassPrefix");this._htWElement.base=jindo.$Element(a);var c=a?jindo.$$("[name="+this.option("sClassPrefix")+"radio]",a):null;this._htWElement.aRadio=jindo.$A(c).forEach(function(a,b,c){c[b]=jindo.$Element(a)}).$value(),this._htWElement.track=a?jindo.$Element(jindo.$$.getSingle(b+"track",a)):null,this._htWElement.thumb=a?jindo.$Element(jindo.$$.getSingle(b+"thumb",a)):null},_onStart:function(a){a.oEvent.stop(jindo.$Event.CANCEL_DEFAULT)},_onMove:function(a){if(this.option("bUseDrag")){a.oEvent.stop(jindo.$Event.CANCEL_DEFAULT),this.bMove=!0;var b=a.nDistanceX,c=this._getAdjustedPos(b);this._moveThumb(c)}},_onEnd:function(a){if("tap"==a.sMoveType)this.toggle();else if(this.bMove){var b=this.option(this.isOn()?"nOnPosition":"nOffPosition"),c=this._getPosition();Math.abs(b-c)>this.htInfo.nGap?this.toggle():this._move(this.isOn(),!1)}else this.toggle();this.bMove=!1},_move:function(a,b){"undefined"==typeof b&&(b=!0);var c=this.option("nOffPosition");return b&&!this.fireEvent("beforeChange",{bOn:this.isOn()})?!1:(a&&(c=this.option("nOnPosition")),this._bFireChange=b,this.bStatusOn=a,this._moveThumb(c,this.option("nDuration")),void this._updateForm())},toggle:function(){this.isOn()?this.off():this.on()},on:function(){this.isOn()||this._move(!0)},off:function(){this.isOn()&&this._move(!1)},isOn:function(){return this.bStatusOn},_updateForm:function(){if(this._htWElement.aRadio)for(var a=this.isOn()?"on":"off",b=0,c=this._htWElement.aRadio.length;c>b;b++){var d=this._htWElement.aRadio[b];
d.$value().checked=d.$value().value==a?!0:!1}},_moveThumb:function(a,b){if(!(a>this.htInfo.nMax||a<this.htInfo.nMin)){"undefined"==typeof b&&(b=0);var c=parseInt(this._htWElement.thumb.css("left"),10);b>0&&c!==a&&this._attachTransitionEnd(),this._htWElement.thumb&&(this._htWElement.thumb.css("webkitTransitionDuration",b+"ms"),this._htWElement.thumb.css("webkitTransitionProperty","left"),this._htWElement.thumb.css("left",a+"%")),(0===b||c===a)&&this._onTransitionEnd()}},_onTransitionEnd:function(){this._detachTransitionEnd(),this._bFireChange&&this.fireEvent("change",{bOn:this.isOn()}),this._bFireChange=!1},_attachTransitionEnd:function(){jindo.m.attachTransitionEnd(this._htWElement.thumb.$value(),this._wfTransitionEnd)},_detachTransitionEnd:function(){jindo.m.detachTransitionEnd(this._htWElement.thumb.$value(),this._wfTransitionEnd)},_getAdjustedPos:function(a){var b=Math.round(100*a/this._htWElement.track.width());return b+=this.option(this.isOn()?"nOnPosition":"nOffPosition"),b=Math.max(this.htInfo.nMin,b),b=Math.min(this.htInfo.nMax,b)},_getPosition:function(){var a=this._htWElement.thumb.css("left");return"auto"==a?0:parseInt(a,10)},_onClick:function(a){a.stop(jindo.$Event.CANCEL_DEFAULT)},_attachEvent:function(){this._htEvent={},this._htEvent.click={ref:jindo.$Fn(this._onClick,this).attach(this._htWElement.thumb,"click"),el:this._htWElement.thumb}},_detachEvent:function(a){if(a){var b=this._htEvent[a];b.ref.detach(b.el,a)}},_onActivate:function(){this._attachEvent(),this._oTouch&&this._oTouch.activate()},_onDeactivate:function(){this._detachEvent(),this._oTouch&&this._oTouch.deactivate()},destroy:function(){this.deactivate();for(var a in this._htWElement)this._htWElement[a]=null;this._htWElement=null,this._oTouch.detachAll(),this._oTouch=null,this.bMove=null,this.bStatusOn=null,this._wfTransitionEnd=null,this._bFireChange=null}}).extend(jindo.m.UIComponent),jindo.m.CoreScroll=jindo.$Class({$init:function(a,b){this.option({bActivateOnload:!0,bUseHScroll:!1,bUseVScroll:!0,bUseMomentum:!0,nDeceleration:6e-4,nOffsetTop:0,nOffsetBottom:0,nHeight:0,nWidth:0,bUseBounce:!0,bUseHighlight:!0,sClassPrefix:"scroll_",bUseCss3d:jindo.m._isUseCss3d(),bUseTimingFunction:jindo.m._isUseTimingFunction(),sListElement:"",nRatio:1.5,bUseTranslate:!0}),this.option(b||{}),this._initVar(),this._setWrapperElement(a),this.option("bActivateOnload")&&this.activate()},_initVar:function(){var a=jindo.m.getDeviceInfo();this.isPositionBug=a.android&&!a.bChrome,this.isIos=a.ipad||a.iphone,this.isClickBug=jindo.m.hasClickBug(),this.nVersion=parseFloat(a.version.substr(0,3)),this.sCssPrefix=jindo.m.getCssPrefix(),this.sTranOpen=null,this.sTranEnd=null,this.nWrapperW=null,this.nWrapperH=null,this.nScrollW=null,this.nScrollH=null,this.nMaxScrollLeft=null,this.nMaxScrollTop=null,this.nMinScrollTop=null,this.bUseHScroll=null,this.bUseVScroll=null,this._nLeft=0,this._nTop=0,this.bUseHighlight=this.option("bUseHighlight"),this._aAni=[],this._nAniTimer=-1,this._nFixedPositionBugTimer=-1,this._nTouchEndTimer=-1,this._oTouch=null,this._oDynamicScrollPlugin=null,this._bUseDynamicScroll=!1,this._isAnimating=!1,this._isControling=!1,this._isStop=!1,this.option("sListElement")&&this.option("bUseCss3d",!1),this._setTrans(),this.bUseHighlight&&(this.isPositionBug&&(this._elDummyTag=null),this.isClickBug&&(this._aAnchor=null,this._fnDummyFnc=function(){return!1},this._bBlocked=!1))},_setTrans:function(){this.option("bUseCss3d")?(this.sTranOpen="3d(",this.sTranEnd=",0)"):(this.sTranOpen="(",this.sTranEnd=")")},getCurrentPos:function(){return{nTop:this._nTop,nLeft:this._nLeft}},setLayer:function(a){this._htWElement.wrapper=jindo.$Element(a),this._htWElement.wrapper.css("overflow","hidden"),"static"==this._htWElement.wrapper.css("position")&&this._htWElement.wrapper.css("position","relative"),this.bUseHighlight||this._htWElement.wrapper.css("-"+this.sCssPrefix+"-tap-highlight-color","transparent"),this.setScroller()},setScroller:function(){this._htWElement.scroller=this._htWElement.wrapper.first(),this._htWElement.scroller.css({position:"absolute",zIndex:1,left:0,top:0}),(this.option("bUseTranslate")||this.option("bUseCss3d"))&&this._htWElement.scroller.css("-"+this.sCssPrefix+"-transition-property","-"+this.sCssPrefix+"-transform").css("-"+this.sCssPrefix+"-transform","translate"+this.sTranOpen+"0,0"+this.sTranEnd),this.option("bUseTimingFunction")&&this._htWElement.scroller.css("-"+this.sCssPrefix+"-transition-timing-function","cubic-bezier(0.33,0.66,0.66,1)"),this.isPositionBug&&this.bUseHighlight&&this.nVersion<3&&(this._elDummyTag=this._htWElement.scroller.query("._scroller_dummy_atag_"),this._elDummyTag?this._elDummyTag=this._elDummyTag.$value():(this._elDummyTag=jindo.$("<a href='javascript:void(0);' style='position:absolute;height:0px;width:0px;' class='_scroller_dummy_atag_'></a>"),this._htWElement.scroller.append(this._elDummyTag)))},_setWrapperElement:function(a){this._htWElement={},this.setLayer(a)},refresh:function(a){if(this.isActivating()){this.option("nWidth")&&this._htWElement.wrapper.width(parseInt(this.option("nWidth"),10)),this.option("nHeight")&&this._htWElement.wrapper.height(parseInt(this.option("nHeight"),10));var b=parseInt(this._htWElement.wrapper.css("border-left-width"),10),c=parseInt(this._htWElement.wrapper.css("border-right-width"),10),d=parseInt(this._htWElement.wrapper.css("border-top-width"),10),e=parseInt(this._htWElement.wrapper.css("border-bottom-width"),10);if(b=isNaN(b)?0:b,c=isNaN(c)?0:c,d=isNaN(d)?0:d,e=isNaN(e)?0:e,this.nWrapperW=this._htWElement.wrapper.width()-b-c,this.nWrapperH=this._htWElement.wrapper.height()-d-e,this.nScrollW=this._htWElement.scroller.width(),this.nScrollH=this._htWElement.scroller.height()-this.option("nOffsetBottom"),this.nMaxScrollLeft=this.nWrapperW-this.nScrollW,this.nMaxScrollTop=this.nWrapperH-this.nScrollH,this.nMinScrollTop=-this.option("nOffsetTop"),this.bUseHighlight&&this.isClickBug&&(this._aAnchor=jindo.$$("A",this._htWElement.scroller.$value())),this.bUseHScroll=this.option("bUseHScroll")&&this.nWrapperW<=this.nScrollW,this.bUseVScroll=this.option("bUseVScroll")&&this.nWrapperH<=this.nScrollH,this.bUseHScroll&&!this.bUseVScroll&&(this._htWElement.scroller.$value().style.height="100%"),!this.bUseHScroll&&this.bUseVScroll&&(this._htWElement.scroller.$value().style.width="100%"),this._bUseDynamicScroll=!1,this.option("sListElement")&&(!this.bUseVScroll||!this.bUseHScroll)){var f=2*this.option("nRatio");this.bUseVScroll&&this.nScrollH>this.nWrapperH*f?this._createDynamicScrollPlugin("V"):this.bUseHScroll&&this.nScrollW>this.nWrapperW*f&&this._createDynamicScrollPlugin("H")}this.bUseHScroll||this.bUseVScroll||this._fixPositionBug(),a||this.restorePos(0)}},_createDynamicScrollPlugin:function(a){this._oDynamicScrollPlugin||(this._oDynamicScrollPlugin=new jindo.m.DynamicPlugin(this._htWElement.wrapper,{nRatio:this.option("nRatio"),sListElement:this.option("sListElement"),sDirection:a})),this._oDynamicScrollPlugin.refresh("V"==a?this._nTop:this._nLeft),this.option("bUseTimingFunction",!1),this._bUseDynamicScroll=!0},_setPos:function(a,b){var c;if(a=this.bUseHScroll?a:0,b=this.bUseVScroll?b:0,this._bUseDynamicScroll&&(c=this._checkDirection(a,b)),this._fireEvent("beforePosition")){if(this._isControling=!0,this._nLeft=a,this._nTop=b,this._bUseDynamicScroll&&this._oDynamicScrollPlugin.updateListStatus(c,this.bUseVScroll?this._nTop:this._nLeft),this.option("bUseTranslate")){if(this.bUseHighlight&&this.isPositionBug){var d=this.getStyleOffset(this._htWElement.scroller);a-=d.left,b-=d.top}this._htWElement.scroller.css("-"+this.sCssPrefix+"-transform","translate"+this.sTranOpen+a+"px, "+b+"px"+this.sTranEnd)}else this._htWElement.scroller.css({left:a+"px",top:b+"px"});this._fireEvent("position")}},_checkDirection:function(a,b){var c,d=this.bUseVScroll?this._nTop:this._nLeft,e=this.bUseVScroll?b:a;return c=d>e?"forward":"backward"},restorePos:function(a){if(this.bUseHScroll||this.bUseVScroll){var b=this.getPosLeft(this._nLeft),c=this.getPosTop(this._nTop);return b===this._nLeft&&c===this._nTop?(this._isControling=!1,this._fireEvent("afterScroll"),void this._fixPositionBug()):void this.scrollTo(b,c,a)}},_getMomentum:function(a,b,c,d,e,f){var g=this.option("nDeceleration"),h=c/g,i=0,j=0;return 0>a&&h>e?(j=d/(6/(h/b*g)),e+=j,b=b*e/h,h=e):a>0&&h>f&&(j=d/(6/(h/b*g)),f+=j,b=b*f/h,h=f),h*=a>0?-1:1,i=b/g,{nDist:h,nTime:Math.round(i)}},_stop:function(){this.option("bUseTimingFunction")?jindo.m.detachTransitionEnd(this._htWElement.scroller.$value(),this._htEvent.TransitionEnd):cancelAnimationFrame(this._nAniTimer),this._aAni=[],this._isAnimating=!1,this._isStop=!0},scrollTo:function(a,b,c){this._stop(),a=this.bUseHScroll?a:0,b=this.bUseVScroll?b:0,this._aAni.push({nLeft:a,nTop:b,nDuration:c||0}),this._animate()},isMoving:function(){return this._isControling},_animate:function(){var a,b=this;if(!this._isAnimating){if(!this._aAni.length)return void this.restorePos(300);do if(a=this._aAni.shift(),!a)return;while(a.nLeft==this._nLeft&&a.nTop==this._nTop);if(0==a.nDuration)this.option("bUseTimingFunction")&&this._transitionTime(0),this._setPos(a.nLeft,a.nTop),this._animate();else if(this._isAnimating=!0,this.option("bUseTimingFunction"))this._transitionTime(a.nDuration),this._setPos(a.nLeft,a.nTop),this._isAnimating=!1,jindo.m.attachTransitionEnd(this._htWElement.scroller.$value(),this._htEvent.TransitionEnd);else{var c=(new Date).getTime(),d=this._nLeft,e=this._nTop;!function f(){var g,h=(new Date).getTime();return h>=c+a.nDuration?(b._setPos(a.nLeft,a.nTop),b._isAnimating=!1,void b._animate()):(h=(h-c)/a.nDuration-1,g=Math.sqrt(1-Math.pow(h,2)),b._setPos((a.nLeft-d)*g+d,(a.nTop-e)*g+e),void(b._isAnimating&&(b._nAniTimer=requestAnimationFrame(f))))}()}}},_transitionTime:function(a){a+="ms",this._htWElement.scroller.css("-"+this.sCssPrefix+"-transition-duration",a),this._fireEventSetDuration(a)},_clearAnchor:function(){if(this.isClickBug&&this._aAnchor&&!this._bBlocked){for(var a=null,b=0,c=this._aAnchor.length;c>b;b++)if(!this._aAnchor[b].___isClear___){this._fnDummyFnc!==this._aAnchor[b].onclick&&(this._aAnchor[b]._onclick=this._aAnchor[b].onclick),this._aAnchor[b].onclick=this._fnDummyFnc,this._aAnchor[b].___isClear___=!0,a=this._aAnchor[b].___listeners___||[];for(var d=0,e=a.length;e>d;d++)___Old__removeEventListener___.call(this._aAnchor[b],"click",a[d].listener,a[d].useCapture)}this._bBlocked=!0}},_restoreAnchor:function(){if(this.isClickBug&&this._aAnchor&&this._bBlocked){for(var a=null,b=0,c=this._aAnchor.length;c>b;b++)if(this._aAnchor[b].___isClear___){this._aAnchor[b].onclick=this._fnDummyFnc!==this._aAnchor[b]._onclick?this._aAnchor[b]._onclick:null,this._aAnchor[b].___isClear___=null,a=this._aAnchor[b].___listeners___||[];for(var d=0,e=a.length;e>d;d++)___Old__addEventListener___.call(this._aAnchor[b],"click",a[d].listener,a[d].useCapture)}this._bBlocked=!1}},_stopScroll:function(){var a,b,c=jindo.m.getCssOffset(this._htWElement.scroller.$value()),d={left:0,top:0};(this.isPositionBug&&this.bUseHighlight||!this.option("bUseTranslate"))&&(d=this.getStyleOffset(this._htWElement.scroller)),b=c.left+d.left,a=c.top+d.top,(b!==parseInt(this._nLeft,10)||a!==parseInt(this._nTop,10))&&(this._stop(),this._setPos(this.getPosLeft(b),this.getPosTop(a)),this._isControling=!1,this._fireEvent("afterScroll"),this._fixPositionBug())},getStyleOffset:function(a){var b=parseInt(a.css("left"),10),c=parseInt(a.css("top"),10);return b=isNaN(b)?0:b,c=isNaN(c)?0:c,{left:b,top:c}},getPosLeft:function(a){return a>=0?0:a<=this.nMaxScrollLeft?this.nMaxScrollLeft:a},getPosTop:function(a){return a>=this.nMinScrollTop?this.nMinScrollTop:a<=this.nMaxScrollTop?this.nMaxScrollTop:a},_fireEventSetDuration:function(a){this.fireEvent("setDuration",{nDuration:a,bUseHScroll:this.bUseHScroll,bUseVScroll:this.bUseVScroll})},_fireEventbeforeScroll:function(a){return this.fireEvent("beforeScroll",a)},_fireEventScroll:function(a){this.fireEvent("scroll",a)},_fireEvent:function(a){return this.fireEvent(a,{nLeft:this._nLeft,nTop:this._nTop,nMaxScrollLeft:this.nMaxScrollLeft,nMaxScrollTop:this.nMaxScrollTop})},_fireTouchEvent:function(a,b){return this.fireEvent(a,{nLeft:this._nLeft,nTop:this._nTop,nMaxScrollLeft:this.nMaxScrollLeft,nMaxScrollTop:this.nMaxScrollTop,oEvent:b})},_onStart:function(a){this._clearPositionBug(),this._fireTouchEvent("beforeTouchStart",a)?(this._clearAnchor(),this._isAnimating=!1,this._isControling=!0,this._isStop=!1,this.option("bUseTimingFunction")&&this._transitionTime(0),this._stopScroll(),this._fireTouchEvent("touchStart",a)||a.stop()):a.stop()},_onMove:function(a){this._clearTouchEnd();var b=a.oEvent;if(a.sMoveType===jindo.m.MOVETYPE[0]){if(!this.bUseHScroll)return!0;if(!this.option("bUseBounce")&&(this._nLeft>=0&&a.nVectorX>0||this._nLeft<=this.nMaxScrollLeft&&a.nVectorX<0))return void this._forceRestore(a);b.stop(jindo.$Event.CANCEL_ALL)}else if(a.sMoveType===jindo.m.MOVETYPE[1]){if(!this.bUseVScroll)return!0;if(!this.option("bUseBounce")&&(this._nTop>=this.nMinScrollTop&&a.nVectorY>0||this._nTop<=this.nMaxScrollTop&&a.nVectorY<0))return void this._forceRestore(a);b.stop(jindo.$Event.CANCEL_ALL)}else{if(a.sMoveType!==jindo.m.MOVETYPE[2])return b.stop(jindo.$Event.CANCEL_ALL),!0;b.stop(jindo.$Event.CANCEL_ALL)}if(this._fireTouchEvent("beforeTouchMove",a)){var c,d;if(this._clearPositionBug(),this.option("bUseBounce")){c=this._nLeft+(this._nLeft>=0||this._nLeft<=this.nMaxScrollLeft?a.nVectorX/2:a.nVectorX),d=this._nTop+(this._nTop>=this.nMinScrollTop||this._nTop<=this.nMaxScrollTop?a.nVectorY/2:a.nVectorY);var e=this;this._nTouchEndTimer=setTimeout(function(){e._forceRestore(a)},500)}else c=this.getPosLeft(this._nLeft+a.nVectorX),d=this.getPosTop(this._nTop+a.nVectorY);this._setPos(c,d),this._fireTouchEvent("touchMove",a)||a.stop()}else a.stop()},_onEnd:function(a){this._fireTouchEvent("beforeTouchEnd",a)?(this._clearPositionBug(),this._clearTouchEnd(),a.sMoveType===jindo.m.MOVETYPE[0]||a.sMoveType===jindo.m.MOVETYPE[1]||a.sMoveType===jindo.m.MOVETYPE[2]?(this._endForScroll(a),(this.isClickBug||this.nVersion<4.1)&&a.oEvent.stop(jindo.$Event.CANCEL_DEFAULT)):(this._isControling=!1,this._isStop||this.bUseHighlight&&this._restoreAnchor()),this._fireTouchEvent("touchEnd",a)||a.stop()):a.stop()},_forceRestore:function(a){a.nMomentumX=a.nMomentumY=null,this._endForScroll(a),this._clearPositionBug(),this._clearTouchEnd()},_endForScroll:function(a){clearTimeout(this._nFixedDubbleEndBugTimer);var b={nDist:0,nTime:0},c={nDist:0,nTime:0},d={nMomentumX:a.nMomentumX,nMomentumY:a.nMomentumY,nDistanceX:a.nDistanceX,nDistanceY:a.nDistanceY,nLeft:this._nLeft,nTop:this._nTop};this.option("bUseMomentum")&&(a.nMomentumX||a.nMomentumY)?(this.bUseHScroll&&(b=this._getMomentum(-a.nDistanceX,a.nSpeedX,a.nMomentumX,this.nWrapperW,-this._nLeft,-this.nMaxScrollLeft+this._nLeft)),this.bUseVScroll&&(c=this._getMomentum(-a.nDistanceY,a.nSpeedY,a.nMomentumY,this.nWrapperH,-this._nTop,-this.nMaxScrollTop+this._nTop)),d.nNextLeft=this._nLeft+b.nDist,d.nNextTop=this._nTop+c.nDist,d.nTime=Math.max(Math.max(b.nTime,c.nTime),10),this._fireEventbeforeScroll(d)&&(this.option("bUseBounce")?this.scrollTo(d.nNextLeft,d.nNextTop,d.nTime):this.scrollTo(this.getPosLeft(d.nNextLeft),this.getPosTop(d.nNextTop),d.nTime),this._fireEventScroll(d))):(d.nNextLeft=this._nLeft,d.nNextTop=this._nTop,d.nTime=0,this._fireEventbeforeScroll(d)&&(this._nLeft!==d.nNextLeft||this._nTop!==d.nNextTop?this.scrollTo(d.nNextLeft,d.nNextTop,d.nTime):this.restorePos(300),this._fireEventScroll(d)))},_onTransitionEnd:function(){jindo.m.detachTransitionEnd(this._htWElement.scroller.$value(),this._htEvent.TransitionEnd),this._animate()},_onDocumentStart:function(a){if(this._htWElement.wrapper.visible()){if(this._htWElement.wrapper.isChildOf(a.element))return!0;this._stopScroll()}},_onActivate:function(){this._oTouch?this._oTouch.activate():this._oTouch=new jindo.m.Touch(this._htWElement.wrapper.$value(),{nMoveThreshold:0,nMomentumDuration:jindo.m.getDeviceInfo().android?500:200,nTapThreshold:1,nSlopeThreshold:5,nEndEventThreshold:jindo.m.getDeviceInfo().win8?100:0}),this._attachEvent(),this.refresh()},_onDeactivate:function(){this._detachEvent(),this._oTouch.deactivate()},_attachEvent:function(){this._htEvent={},this._htEvent.touchStart=jindo.$Fn(this._onStart,this).bind(),this._htEvent.touchMove=jindo.$Fn(this._onMove,this).bind(),this._htEvent.touchEnd=jindo.$Fn(this._onEnd,this).bind(),this._htEvent.TransitionEnd=jindo.$Fn(this._onTransitionEnd,this).bind(),this._htEvent.document=jindo.$Fn(this._onDocumentStart,this).attach(document,"touchstart"),this._oTouch.attach({touchStart:this._htEvent.touchStart,touchMove:this._htEvent.touchMove,touchEnd:this._htEvent.touchEnd})},_fixPositionBug:function(){if(this.isPositionBug&&this.bUseHighlight&&this.option("bUseTranslate")){var a=this;this._clearPositionBug(),this._nFixedPositionBugTimer=setTimeout(function(){a._htWElement&&a._htWElement.scroller&&(a.makeStylePos(a._htWElement.scroller),a.nVersion<3&&a._elDummyTag.focus())},200)}},makeStylePos:function(a){var b=a.$value(),c=jindo.m.getCssOffset(b),d=a.offset();b.style["-"+this.sCssPrefix+"-transform"]=this.nVersion>=4?"translate"+this.sTranOpen+"0px, 0px"+this.sTranEnd:null,b.style["-"+this.sCssPrefix+"-transition-duration"]=null,a.offset(c.top+d.top,c.left+d.left)},_clearPositionBug:function(){this.isPositionBug&&this.bUseHighlight&&(clearTimeout(this._nFixedPositionBugTimer),this._nFixedPositionBugTimer=-1)},_clearTouchEnd:function(){clearTimeout(this._nTouchEndTimer),this._nTouchEndTimer=-1},_detachEvent:function(){jindo.m.detachTransitionEnd(this._htWElement.scroller.$value(),this._htEvent.TransitionEnd),this._htEvent.document.detach(document,"touchstart"),this._oTouch.detachAll(),this._elDummyTag&&this._htWElement.scroller.remove(this._elDummyTag)},destroy:function(){this.deactivate();for(var a in this._htWElement)this._htWElement[a]=null;this._htWElement=null,this._oTouch.destroy(),delete this._oTouch}}).extend(jindo.m.UIComponent),jindo.m.Datepicker=jindo.$Class({$init:function(a,b){this.option({sClassPrefix:"calendar-",sFormat:"yyyy-mm-dd",bActivateOnload:!0,bAutoHide:!1}),this.option(b||{}),this._initVar(),this._initCalendar(a),this.option("bActivateOnload")&&this.activate()},$static:{INDEX_ATTR:"data-datepickerid"},_initVar:function(){this._oCalendar=null,this._htDatePickerSet={},this._htSelectedDatePickerSet=null},_initCalendar:function(a){var b=(this.option("sClassPrefix"),this.option());b.bActivateOnload=!0,this._oCalendar=new jindo.m.Calendar(jindo.$Element(a)?jindo.$Element(a):this._insertCalendarTemplate(),b)},_isSelectable:function(a,b){return this._oCalendar.isBetween(b,a.htSelectableDateFrom,a.htSelectableDateTo)},addDatePickerSet:function(a,b){if("undefined"==typeof a)return this;var c="DATEPICKER_"+(new Date).getTime()+"_"+Math.floor(100*Math.random()),d=jindo.$Element(a),e=this._oCalendar.option(),f={nYear:e.htToday.nYear,nMonth:e.htToday.nMonth,nDate:e.htToday.nDate,htSelectableDateFrom:{nYear:1900,nMonth:1,nDate:1},htSelectableDateTo:{nYear:2100,nMonth:12,nDate:31},sPosition:"bottomLeft",zIndex:50,sDatePikerSetId:c,elButton:""};if("undefined"!=typeof b)for(var g in b)"undefined"!=typeof f[g]&&(f[g]=b[g]);return b=f,d.wrap("<span style='position:relative;display:inline-block;'></span>"),d=jindo.$Element(a),d.attr("readOnly",!0).attr(jindo.m.Datepicker.INDEX_ATTR,c),b.elInput=d.$value(),b.wfFocusFunc=this._attachFocusEvent(d),f.elButton&&(b.wfClickFunc=jindo.$Fn(jindo.$Fn(this._onClick,this).bind(c),this).attach(f.elButton,"click")),this._htSelectedDatePickerSet=this._htDatePickerSet[c]=b,this},removeDatePickerSet:function(a){var b=jindo.$Element(a),c=b.attr(jindo.m.Datepicker.INDEX_ATTR),d=this._htDatePickerSet[c];return this._detachFocusEvent(d.wfFocusFunc,b),d===this._htSelectedDatePickerSet&&(this._htSelectedDatePickerSet=null),delete this._htDatePickerSet[c],this},_onActivate:function(){this._attachEvent()},_onDeactivate:function(){this.hide(),this._detachEvent()},_attachEvent:function(){this._htEvent={},this.option("bAutoHide")&&(this._htEvent.document=jindo.$Fn(this._onDocument,this).attach(document,"touchend")),this._htEvent.selectDate=jindo.$Fn(this._onSelectDate,this).bind(),this._htEvent.deliveryEvent=jindo.$Fn(this._onDeliveryEvent,this).bind(),this._oCalendar.attach({selectDate:this._htEvent.selectDate,beforeMoveDate:this._htEvent.deliveryEvent,moveDate:this._htEvent.deliveryEvent,beforeHideCalendar:this._htEvent.deliveryEvent,hideCalendar:this._htEvent.deliveryEvent,beforeShowCalendar:this._htEvent.deliveryEvent,showCalendar:this._htEvent.deliveryEvent})},_insertCalendarTemplate:function(){var a=[],b=jindo.$Element("jmc_calt"),c=this.option("sClassPrefix");return b||(a.push("<div>"),a.push('<a href="javascript:void(0)" class="'+c+"btn "+c+'btn-prev-year">&lt;&lt;</a>'),a.push('<a href="javascript:void(0)" class="'+c+"btn "+c+'btn-prev-mon">&lt;</a>'),a.push('<strong class="'+c+'title"></strong>'),a.push('<a href="javascript:void(0)" class="'+c+"btn "+c+'btn-next-mon">&gt;</a>'),a.push('<a href="javascript:void(0)" class="'+c+"btn "+c+'btn-next-year">&gt;&gt;</a>'),a.push('</div><table cellspacing="0" cellpadding="0" style="'),a.push("-"+jindo.m.getCssPrefix()+'-tap-highlight-color:transparent;"><thead><tr>'),a.push('<th class="'+c+'sun">일</th><th>월</th><th>화</th><th>수</th><th>목</th><th>금</th><th class="'+c+'sat">토</th>'),a.push("</tr></thead><tbody>"),a.push('<tr class="'+c+'week">'),a.push('<td><a href="javascript:void(0)" class="'+c+'date"></a></td>'),a.push('<td><a href="javascript:void(0)" class="'+c+'date"></a></td>'),a.push('<td><a href="javascript:void(0)" class="'+c+'date"></a></td>'),a.push('<td><a href="javascript:void(0)" class="'+c+'date"></a></td>'),a.push('<td><a href="javascript:void(0)" class="'+c+'date"></a></td>'),a.push('<td><a href="javascript:void(0)" class="'+c+'date"></a></td>'),a.push('<td><a href="javascript:void(0)" class="'+c+'date"></a></td>'),a.push("</tr></tbody></table>"),a.push('<div class="'+c+'bottom"><a href="javascript:void(0)" class="'+c+"btn "+c+'btn-close">닫기</a></div>'),b=jindo.$Element('<div id="jmc_calt" class="'+c+'base" style="position:absolute;display:none"></div>'),b.html(a.join("")),b.appendTo(document.body)),b},_detachEvent:function(){var a=null;this.option("bAutoHide")&&this._htEvent.document.detach(document,"touchend");for(var b in this._htDatePickerSet)a=this._htDatePickerSet[b],this._detachFocusEvent(a.wfFocusFunc,a.elInput),this._detachClickEvent(a.wfClickFunc,a.elButton);this._oCalendar.detachAll(),this._htSelectedDatePickerSet=null,this._htEvent=null},_onFocus:function(a){return this.isActivating()?void this.show(a.element):!1},_onClick:function(a){return this.isActivating()?void this.show(this._htDatePickerSet[a].elInput):!1},_onDocument:function(a){var b=a.element,c=jindo.$Element(b),d=this._oCalendar.getCalendarBase(),e=c.attr(jindo.m.Datepicker.INDEX_ATTR),f=null;return this._htSelectedDatePickerSet=e?this._htDatePickerSet[e]:this._htSelectedDatePickerSet,f=this._htSelectedDatePickerSet.elInput,d.$value()==b||d.isParentOf(c)||f==b||(this.hide(),f&&f.blur()),!0},_onSelectDate:function(a){if(this._oCalendar.isVisible()){if(a.wel.hasClass(this.option("sClassPrefix")+"unselectable"))return a.stop(),!1;if(this._isSelectable(this._htSelectedDatePickerSet,a.oSelectDate)){var b=this._htSelectedDatePickerSet.elInput;return this.fireEvent("selectDate",{oSelectDate:a.oSelectDate,oCalendar:this._oCalendar})?(this.setDate(b,a.oSelectDate),b.blur(),!0):(a.stop(),!1)}return a.stop(jindo.$Event.CANCEL_ALL),!1}},_onDeliveryEvent:function(a){return this.fireEvent(a.sType,a)?(a.oCalendar=this._oCalendar,!0):(a.stop(),!1)},setDate:function(a,b){if(!this.isActivating())return!1;var c=a?a.getAttribute(jindo.m.Datepicker.INDEX_ATTR):null,d=this._htDatePickerSet[c];return c&&this._isSelectable(d,b)?(a.value=this._formatDate(b),d.nYear=b.nYear,d.nMonth=b.nMonth,d.nDate=b.nDate,void(this._htDatePickerSet[c]=d)):!1},_formatDate:function(a){var b=new Date(a.nYear,a.nMonth-1,a.nDate),c=this._oCalendar.getDayName(b.getDay());return this.option("sFormat").replace(/(yyyy|yy|mm|dd|day)/gi,function(a){switch(a){case"yyyy":return b.getFullYear();case"yy":return b.getFullYear().toString().substr(2);case"mm":var d=b.getMonth()+1+"";return d=1===d.length?"0"+d:d;case"dd":var e=b.getDate()+"";return e=1===e.length?"0"+e:e;case"day":return c}})},deleteDate:function(a){if(a){var b=jindo.$Element(a),c=this._htDatePickerSet[b.attr(jindo.m.Datepicker.INDEX_ATTR)],d=new Date;a.value="",c.nYear=d.getFullYear(),c.nMonth=d.getMonth()+1,c.nDate=d.getDate(),this._isCurrentDatePicker(b.$value())&&this.hide(),this.fireEvent("clear",{oCalendar:this._oCalendar})}},_isCurrentDatePicker:function(a){var b=a?a.getAttribute(jindo.m.Datepicker.INDEX_ATTR):null,c=this._htSelectedDatePickerSet.sDatePikerSetId;return b==c},enable:function(a){if(a){var b=jindo.$Element(a);b.$value().disabled=!1}else{var c=this._htDatePickerSet;for(var d in c)c[d].elInput.disabled=!1}this.fireEvent("enable",{oCalendar:this._oCalendar})},_attachFocusEvent:function(a){return jindo.$Fn(this._onFocus,this).attach(a,"focus")},_detachFocusEvent:function(a,b){a.detach(b,"focus")},_detachClickEvent:function(a,b){a.detach(b,"click")},disable:function(a){var b=this._htDatePickerSet;if(a){var c=jindo.$Element(a);c.$value().disabled=!0}else for(var d in b)b[d].elInput.disabled=!0;this.hide(),this.fireEvent("disable",{oCalendar:this._oCalendar})},setPosition:function(a,b){var c=jindo.$Element(a),d=this._htDatePickerSet[c.attr(jindo.m.Datepicker.INDEX_ATTR)],e=this._oCalendar.getCalendarBase(),f={},g=e.$value(),h=e.visible();h||(e.css("left","-999px"),e.show());var i=e.height(),j=e.width(),k=c.height(),l=c.width();switch(b=b||d.sPosition,g.style.left=null,g.style.right=null,g.style.top=null,h||e.hide(),b){case"leftTop":f.top="0px",f.left="-"+j+"px";break;case"leftBottom":f.top="-"+(i-k)+"px",f.left="-"+j+"px";break;case"rightTop":f.top="0px",f.left=l+"px";break;case"rightBottom":f.top="-"+(i-k)+"px",f.left=l+"px";break;case"bottomLeft":f.top=k+"px",f.left="0px";break;case"bottomRight":f.top=k+"px",f.right="0px";break;case"topLeft":f.top="-"+i+"px",f.left="0px";break;case"topRight":f.top="-"+i+"px",f.right="0px"}d.sPosition=b,e.css(f)},show:function(a){var b=jindo.$Element(a),c=this._oCalendar.getCalendarBase(),d=this._htDatePickerSet[b.attr(jindo.m.Datepicker.INDEX_ATTR)],e={nYear:d.nYear,nMonth:d.nMonth,nDate:d.nDate};this._htSelectedDatePickerSet=d,b.parent().append(c),"none"!=d.zIndex&&c.css("zIndex",d.zIndex),this.setPosition(a,d.sPosition),d.htSelectableDateFrom&&d.htSelectableDateTo&&this._oCalendar.setSelectableDate(d.htSelectableDateFrom,d.htSelectableDateTo),this._oCalendar.show(e,a.value?e:0)},hide:function(){this._oCalendar.isVisible()&&this._oCalendar.hide()},destroy:function(){this.deactivate(),this._oCalendar=null,this._htDatePickerSet=null}}).extend(jindo.m.UIComponent),jindo.m.CoverFlicking=jindo.$Class({$init:function(a,b){this.option(b||{}),this._initVar(),this._setWrapperElement(a),this.option("bActivateOnload")&&this.activate()},_onActivate:function(){jindo.m.Flick.prototype._onActivate.apply(this);var a=this;this.set(new jindo.m.Cover(this._getAnimationOption(this.option("nDefaultScale")?{nDefaultScale:this.option("nDefaultScale")}:{})).attach({set:function(b){a._setStyle(b.css)}}),this._htWElement.aPanel)},_setStyle:function(a){a[this._bUseH?"width":"height"]="100%",this._htWElement.container.css(a),this._changeTarget(!0)},refresh:function(a){jindo.m.Flick.prototype.refresh.call(this,a),this._changeTarget(!0)},_changeTarget:function(a){var b=this.getElement(),c=a?this.getNextElement():this.getPrevElement();return c=b.isEqual(c)?null:c,this._oAnimation.change(b,c,a),{target:b,zoom:c}},_moveTo:function(a,b){var c=this.getTotalContents()-1,d=this.getContentIndex(),e=a>d;return this.isPlaying()||isNaN(a)||0>a||a>c?!1:(this._bUseCircular&&(d===c&&0===a?e=!0:0===d&&a===c&&(e=!1)),this._changeTarget(e),void jindo.m.Flick.prototype._moveTo.call(this,a,b))},_panelEndBeforeCall:function(a){!a.useCircular&&0==a.duration&&a.moveCount>1&&this._updateFlickInfo(a.no,this._htWElement.aPanel[a.no])},_panelEndAfterCall:function(a){var b=this._changeTarget(a.next),c=this._oAnimation._oMorph._nPtr;if(this._oAnimation._oMorph._aQueue.length>c){var d=this._oAnimation._oMorph._aQueue[c+1];d.length>3&&(b.target&&(d[0]=b.target),b.zoom&&(d[2]=b.zoom))}},_moveAfterCall:function(a){this._changeTarget(a.bNext),this._oAnimation.move(this._nX,this._nY,0,this._makeOption({next:a.bNext}))},destroy:function(){jindo.m.Flick.prototype.destroy.apply(this)}}).extend(jindo.m.Flick),jindo.m.UrlValidator=jindo.$Class({rx:/(^(http:\/\/)|^(https:\/\/)|(^[A-Za-z0-9\.\-]+))+([A-Za-z0-9\.\-])*(\.[A-Za-z]{2,}(\/([A-Za-z0-9\.\-])*)*)$/,_isValid:function(a){return this.rx.test(a)?!0:!1},_getCorrectedValue:function(a){return a.replace(/[^A-Za-z0-9-\?&\.\:\/]/g,"").replace(/\.{2,}/g,"").replace(/\?{2,}/g,"").replace(/&{2,}/g,"").replace(/\:{3,}/g,"")}}).extend(jindo.m.Validator),jindo.m.Validation=jindo.$Class({$init:function(){},$static:{_htValidator:{},_htValidatorType:{email:"jindo.m.EmailValidator",url:"jindo.m.UrlValidator",tel:"jindo.m.TelValidator",date:"jindo.m.DateValidator",number:"jindo.m.NumberValidator",currency:"jindo.m.CurrencyValidator",require:"jindo.m.RequireValidator"},_createValidator:function(sType){jindo.m.Validation._htValidatorType[sType]&&!jindo.m.Validation._htValidator[sType]&&(jindo.m.Validation._htValidator[sType]=eval("new "+jindo.m.Validation._htValidatorType[sType]+"()"))},add:function(a,b){jindo.m.Validation._htValidatorType[a]=b},remove:function(a){delete jindo.m.Validation._htValidatorType[a]},_parse:function(a){for(var b,c,d=a.split(";"),e={},f=0,g=d.length;g>f;f++){var h=d[f].split(":");h&&(b=h[0],c=h.length>1?h[1]:null,e[b]=e[b]||c,jindo.m.Validation._createValidator(b))}return e},validate:function(a,b){var c,d=jindo.m.Validation._parse(a);if("require"in d){if(c=jindo.m.Validation._htValidator.require.validate(b),!c.bValid)return{bValid:!1,sType:"require",sPreValue:b};delete d.require}if(""==jindo.$S(b).trim())return null;for(var e in d)if(c=jindo.m.Validation._htValidator[e].validate(b,d[e]),!c.bValid)return c.sType=e,c.sPreValue=b,c;return c.bValid=!0,c.sPreValue=b,c}}}),jindo.m.DateValidator=jindo.$Class({_isValid:function(a,b){b=b||"yyyy-mm-dd",a=a.replace(/[\.\-]/g,"");var c=b.replace(/[\d\.\-]/g,""),d=1*a.substr(c.indexOf("yyyy"),4),e=1*a.substr(c.indexOf("mm"),2),f=1*a.substr(c.indexOf("dd"),2);return e>=1&&12>=e&&f>=1&&31>=f&&d>=1e3?!0:!1},_getCorrectedValue:function(a,b){b=b||"yyyy-mm-dd";var c=b.replace(/[\d\.\-]/g,"");return a=a.replace(/[^\d]/g,"").substr(0,c.length),a.length>=c.length-1&&(a=this._getFormatted(a,b)),a},_getFormatted:function(a,b){var c=b.replace(/[\.\-]/g,""),d=a.substr(c.indexOf("yyyy"),4),e=a.substr(c.indexOf("mm"),2),f=a.substr(c.indexOf("dd"),2);return b.replace(/(yyyy|mm|dd)/gi,function(a){switch(a){case"yyyy":return d;case"mm":return e;case"dd":return f}})}}).extend(jindo.m.Validator),jindo.m.Visible=jindo.$Class({$init:function(a,b){this._elWrap=jindo.$(a)||document,this._nTimer=null,this.option({sClassName:"check_visible",nExpandSize:0}),this.option(b||{}),this.refresh()},_supportGetElementsByClassName:function(){var a=this.constructor;return"__supportGetElementsByClassName"in a||(a.__supportGetElementsByClassName=function(){var a=document.createElement("div");if(!a.getElementsByClassName)return!1;var b=a.getElementsByClassName("dummy");return a.innerHTML='<span class="dummy"></span>',1===b}()),a.__supportGetElementsByClassName},refresh:function(){return this._supportGetElementsByClassName()?(this._aTargets=this._elWrap.getElementsByClassName(this.option("sClassName")),this.refresh=function(){}):this._aTargets=jindo.$$("."+this.option("sClassName"),this._elWrap),this},check:function(a){var b=this;return"undefined"==typeof a&&(a=-1),this._nTimer&&(clearTimeout(this._nTimer),this._nTimer=null),0>a?this._check():this._nTimer=setTimeout(function(){b._check(),b._nTimer=null
},a),this},_check:function(){var a,b=(new Date,null),c=this._elWrap,d=this._aTargets,e=this.option("nExpandSize"),f={"true":0,"false":0};if(c===document){var g=jindo.$Document(document),h=g.clientSize();b={top:0,left:0,bottom:h.height,right:h.width}}else b=c.getBoundingClientRect(),b={top:b.top,left:b.left,bottom:b.bottom,right:b.right};b.top-=e,b.left-=e,b.bottom+=e,b.right+=e;var i=[];for(a=d.length-1;a>=0;a--){var j=d[a],k=j.getBoundingClientRect();if(this._bSupportQSA||jindo.$Element(j).hasClass(this.option("sClassName"))){var l=!!j.__VISIBLE,m=!(k.bottom<b.top||b.bottom<k.top||k.right<b.left||b.right<k.left);j.__VISIBLE=m,l!==m?(i.push([m,j]),f[!m]++):f[m]++}else delete j.__VISIBLE,d.splice(a,1)}for(a=i.length-1;a>=0;a--){var n=i[a];f[!n[0]]--,f[n[0]]++,this.fireEvent(n[0]?"visible":"invisible",{elTarget:n[1],nVisible:f["true"],nInvisible:f["false"]})}}}).extend(jindo.m.Component),jindo.m._FlickingAnimation_=jindo.$Class({$init:function(a,b){this.option(b||{}),this._setWrapperElement(a),this._initVar(),this._initTouch(),this._createDummyTag(),this.option("bActivateOnload")&&this.activate()},_initVar:function(){this._oTouch=null,this._doFlicking=!1,this._bTouchStart=!1,this._bMove=!1;var a=this.option("nDefaultIndex")||0;this._checkIndex(a)||(a=0),this.option("bUseCircular")&&(a%=3),this._htIndexInfo={nContentIndex:a,nNextContentIndex:a,welElement:this._htWElement.aPanel[a],welNextElement:this._htWElement.aPanel[a],sDirection:null};var b=jindo.m.getDeviceInfo();this._isIos=b.iphone||b.ipad,this._bAndroid=b.android&&!b.bChrome,this._nVersion=b.version,this._fnDummyFnc=function(){return!1},this._bClickBug=jindo.m.hasClickBug(),this._sCssPrefix=jindo.m.getCssPrefix(),this._elTransition=null,this._wfTransitionEnd=jindo.$Fn(this._onTransitionEnd,this).bind(),this._bDummyTagException=this._bAndroid&&this._nVersion<"3"},_setWrapperElement:function(a){this._htWElement={};var b=jindo.$(a),c="."+this.option("sClassPrefix");this._htWElement.base=jindo.$Element(b).css("zIndex",this.option("nZIndex")),this._htWElement.container=jindo.$Element(jindo.$$.getSingle(c+"container",b));var d=jindo.$$(c+this.option("sContentClass"),b);this._htWElement.aPanel=jindo.$A(d).forEach(function(a,b,c){c[b]=jindo.$Element(a)}).$value()},_initFlicking:function(){this._setElementStyle(),this._setElementSize()},_setElementStyle:function(){},_setElementSize:function(){},_initTouch:function(){this._oTouch=new jindo.m.Touch(this._htWElement.base.$value(),{nSlopeThreshold:4,nMoveThreshold:0,nEndEventThreshold:jindo.m.getDeviceInfo().win?400:0,bActivateOnload:!1,bHorizental:this.option("bHorizontal"),bVertical:!1})},_createDummyTag:function(){if(this._bDummyTagException){this._htWElement.aDummyTag=[];for(var a=0,b=this._htWElement.aPanel.length;b>a;a++){var c=this._htWElement.aPanel[a],d=jindo.$$.getSingle("._cflick_dummy_atag_",c.$value());d||(d=jindo.$("<a href='javascript:void(0);' class='_cflick_dummy_atag_'></a>"),d.style.position="absolute",d.style.left="-1000px",d.style.top="-1000px",d.style.width=0,d.style.height=0,c.append(d)),this._htWElement.aDummyTag.push(d)}}},_focusFixedBug:function(){if(this._htWElement&&"undefined"!=typeof this._htWElement.aDummyTag)for(var a=0,b=this._htWElement.aDummyTag.length;b>a;a++)this._htWElement.aDummyTag[a].focus()},_onStart:function(a){if(!this._doFlicking){if(!this.fireEvent("touchStart",a))return void a.stop();this._bTouchStart=!0,this._clearAnchor(),this._onAfterStart()}},_onAfterStart:function(){},_onMove:function(a){var b=this.option("bHorizontal"),c=a.oEvent;if(a.sMoveType===jindo.m.MOVETYPE[0]){if(!b)return this.fireEvent("scroll"),void(this._bTouchStart=!1);c.stop(jindo.$Event.CANCEL_ALL)}else if(a.sMoveType===jindo.m.MOVETYPE[1]){if(b)return this.fireEvent("scroll"),void(this._bTouchStart=!1);c.stop(jindo.$Event.CANCEL_ALL)}else if(a.sMoveType===jindo.m.MOVETYPE[2]){if(!this.option("bUseDiagonalTouch"))return this.fireEvent("scroll"),void(this._bTouchStart=!1);c.stop(jindo.$Event.CANCEL_ALL)}if(!this._doFlicking&&this._bTouchStart){this.fireEvent("touchMove",a);var d=b?a.nDistanceX:a.nDistanceY,e=b?a.nVectorX:a.nVectorY,f=b?a.nX:a.nY;this._onAfterMove(d,e,f),this._bMove=!0}},_onAfterMove:function(){},_onEnd:function(a,b){if(!this._doFlicking&&this._bTouchStart){this._doFlicking=!0;var c=this.option("bHorizontal");this._bAndroid&&this._nVersion>="4.1"||(a.sMoveType===jindo.m.MOVETYPE[0]||a.sMoveType===jindo.m.MOVETYPE[1]||a.sMoveType===jindo.m.MOVETYPE[2])&&a.oEvent.stop(jindo.$Event.CANCEL_DEFAULT),(a.sMoveType===jindo.m.MOVETYPE[3]||a.sMoveType===jindo.m.MOVETYPE[4])&&this._restoreAnchor();var d=this.option("nDuration"),e=this._getSnap(a.nDistanceX,a.nDistanceY,d,a.sMoveType),f=c?a.nDistanceX:a.nDistanceY,g=c?a.nVectorX:a.nVectorY,h=c?a.nX:a.nY;null===e.sDirection&&(d=this.option("nBounceDuration"),(0===f||a.sMoveType===jindo.m.MOVETYPE[2]&&!this.option("bUseDiagonalTouch"))&&this._endAnimation(!1));var i={nContentsIndex:this.getContentIndex(),nContentsNextIndex:e.nContentIndex};if(null!==this._bFlickLeft&&(this.option("bHorizontal")?i.bLeft=this._bFlickLeft:i.bTop=this._bFlickLeft),null!==e.sDirection){if(!this.fireEvent("beforeFlicking",i))return void this.restorePosition()}else if(!this.fireEvent("beforeRestore",{nContentsIndex:this.getContentIndex()}))return;this._htIndexInfo.nNextContentIndex=e.nContentIndex,this._htIndexInfo.welNextElement=e.welElement,this._htIndexInfo.sDirection=e.sDirection,f=c?a.nDistanceX:a.nDistanceY,g=c?a.nVectorX:a.nVectorY,h=c?a.nX:a.nY,this._onAfterEnd(f,g,h,b),this.fireEvent("touchEnd",a)}},_onAfterEnd:function(){},_endAnimation:function(a){var b=this;"undefined"==typeof a&&(a=!0),this._doFlicking=!1,this._bTouchStart=!1,this._bMove=!1;var c=null==this._htIndexInfo.sDirection&&this._htIndexInfo.nContentIndex===this._htIndexInfo.nNextContentIndex?!0:!1;this._resetIndexInfo(this._htIndexInfo.nNextContentIndex,this._htIndexInfo.welNextElement),a&&this._fireCustomEvent("afterFlicking"),c&&this.fireEvent("restore",{nContentsIndex:this._htIndexInfo.nContentIndex}),this._restoreAnchor(),this._setAnchorElement(),setTimeout(function(){b._createDummyTag(),b._focusFixedBug()},5),this._bFlickLeft=null},_resetIndexInfo:function(a,b){this._htIndexInfo.nContentIndex=a,this._htIndexInfo.nNextContentIndex=a,"undefined"==typeof b&&(this.option("bUseCircular")&&(a%=3),b=this._htWElement.aPanel[a]),this._htIndexInfo.welElement=b,this._htIndexInfo.welNextElement=b,this._htIndexInfo.sDirection=null},_checkIndex:function(a){var b=!0;(isNaN(1*a)||0>a)&&(b=!1);var c=this.getTotalContents()-1;return a>c&&(b=!1),b},refresh:function(a,b,c){var d=this;"undefined"==typeof a&&(a=this.getContentIndex()),this._checkIndex(a)&&("undefined"==typeof b&&(b=!0),"undefined"==typeof c&&(c=!0),(!c||this._fireCustomEvent("beforeMove",{nContentsIndex:this.getContentIndex(),nContentsNextIndex:a}))&&(this._refresh(a,b),this._resetIndexInfo(a),c&&this._fireCustomEvent("move"),this._restoreAnchor(),this._setAnchorElement(),this._createDummyTag(),setTimeout(function(){d._focusFixedBug()},100)))},_refresh:function(){},moveTo:function(a,b,c){"undefined"!=typeof a&&a!=this.getContentIndex()&&(0>a||a>=this.getTotalContents()||("undefined"==typeof b&&(b=this.option("nDuration")),"undefined"==typeof c&&(c=!0),this._moveTo(a,b,c)))},_getSnap:function(a,b,c,d){var e=this.option("bHorizontal")?a:b,f=this._htIndexInfo.welElement,g=this.getContentIndex(),h=null;return(d!==jindo.m.MOVETYPE[2]||this.option("bUseDiagonalTouch"))&&this._bMove&&Math.abs(e)>=this.option("nFlickThreshold")&&(0>e?(f=this.getNextElement(),g=this.getNextIndex(),this._bFlickLeft=!0,h="next"):(f=this.getPrevElement(),g=this.getPrevIndex(),this._bFlickLeft=!1,h="prev")),this._htIndexInfo.welElement.$value()===f.$value()&&(h=null),{elElement:f.$value(),welElement:f,nContentIndex:g,sDirection:h}},_onResize:function(a){this.option("bAutoResize")&&this.refresh(this.getContentIndex(),!0,!1),this.fireEvent("rotate",{isVertical:a.isVertical})},_fireCustomEvent:function(a,b){return"undefined"==typeof b&&(b={nContentsIndex:this._htIndexInfo.nContentIndex},this._bFlickLeft&&(this.option("bHorizontal")?b.bLeft=this._bFlickLeft:b.bTop=this._bFlickLeft)),this.fireEvent(a,b)},restorePosition:function(){this._onAfterEnd()},movePrev:function(a){if(!this._doFlicking){var b=this.getPrevElement();b.$value()!==this.getElement().$value()&&("undefined"==typeof a&&(a=this.option("nDuration")),this._bTouchStart=!0,this._bMove=!0,this._movePrev(a))}},_movePrev:function(a){var b=this.option("nFlickThreshold");this._onEnd({nDistanceX:b+10,nDistanceY:b+10,nX:10,nY:10},a)},moveNext:function(a){if(!this._doFlicking){var b=this.getNextElement();b.$value()!==this.getElement().$value()&&("undefined"==typeof a&&(a=this.option("nDuration")),this._bTouchStart=!0,this._bMove=!0,this._moveNext(a))}},_moveNext:function(a){{var b=-1*this.option("nFlickThreshold");this.option("bHorizontal")?this._htWElement.base.width():this._htWElement.base.height()}this._onEnd({nDistanceX:b-10,nDistanceY:b-10,nX:10,nY:10},a)},_attachTransitionEnd:function(a,b){if(a!==this._elTransition){this._elTransition=a;var c=this;0===b?setTimeout(function(){c._onTransitionEnd()},10):jindo.m.attachTransitionEnd(a,this._wfTransitionEnd)}},_detachTarnsitonEnd:function(){this._elTransition&&(jindo.m.detachTransitionEnd(this._elTransition,this._wfTransitionEnd),this._elTransition=null)},getIndexByElement:function(a){for(var b=-1,c=0,d=this._htWElement.aPanel.length;d>c;c++)if(this._htWElement.aPanel[c].$value()===a){b=c;break}return b},getElement:function(){return this._htIndexInfo.welElement},getContentElement:function(){return this.getElement()},getContentIndex:function(){return this._htIndexInfo.nContentIndex},getNextElement:function(){var a=this.getNextIndex();return this.option("bUseCircular")&&(a=this.getIndexByElement(this.getElement().$value()),a=a+1>2?0:a+1),this._htWElement.aPanel[a]},getPrevElement:function(){var a=this.getPrevIndex();return this.option("bUseCircular")&&(a=this.getIndexByElement(this.getElement().$value()),a=0>a-1?2:a-1),this._htWElement.aPanel[a]},getTotalContents:function(){var a=this._htWElement.aPanel.length;return this.option("bUseCircular")&&(a="undefined"==typeof this.option("nTotalContents")?3:this.option("nTotalContents")),a},getTotalPanels:function(){return this.option("bUseCircular")?3:this.getTotalContents()},getPanels:function(){return this._htWElement.aPanel},getPrevIndex:function(){var a=this.getContentIndex()-1;return this.option("bUseCircular")&&0>a&&(a=this.getTotalContents()-1),a=Math.max(0,a)},getNextIndex:function(){var a=this.getContentIndex()+1,b=this.getTotalContents()-1;return this.option("bUseCircular")&&a>b&&(a=0),a=Math.min(b,a)},_onTransitionEnd:function(){},_setAnchorElement:function(){this._bClickBug&&(this._aAnchor=jindo.$$("A",this._htWElement.container.$value()))},_clearAnchor:function(){if(this._aAnchor&&!this._bBlocked){for(var a=null,b=0,c=this._aAnchor.length;c>b;b++){this._fnDummyFnc!==this._aAnchor[b].onclick&&(this._aAnchor[b]._onclick=this._aAnchor[b].onclick),this._aAnchor[b].onclick=this._fnDummyFnc,a=this._aAnchor[b].___listeners___||[];for(var d=0,e=a.length;e>d;d++)___Old__removeEventListener___.call(this._aAnchor[b],"click",a[d].listener,a[d].useCapture)}this._bBlocked=!0}},_restoreAnchor:function(){if(this._aAnchor&&this._bBlocked){for(var a=null,b=0,c=this._aAnchor.length;c>b;b++){this._aAnchor[b].onclick=this._fnDummyFnc!==this._aAnchor[b]._onclick?this._aAnchor[b]._onclick:null,a=this._aAnchor[b].___listeners___||[];for(var d=0,e=a.length;e>d;d++)___Old__addEventListener___.call(this._aAnchor[b],"click",a[d].listener,a[d].useCapture)}this._bBlocked=!1}},_onActivate:function(){this._attachEvent(),this._setAnchorElement(),this._oTouch.activate()},_onDeactivate:function(){this._detachEvent(),this._oTouch.deactivate()},_attachEvent:function(){this._htEvent={},this._htEvent.touchMove=jindo.$Fn(this._onMove,this).bind(),this._htEvent.touchEnd=jindo.$Fn(this._onEnd,this).bind(),this._htEvent.touchStart=jindo.$Fn(this._onStart,this).bind(),this._oTouch.attach("touchStart",this._htEvent.touchStart),this._oTouch.attach("touchMove",this._htEvent.touchMove),this._oTouch.attach("touchEnd",this._htEvent.touchEnd),this._htEvent.rotate=jindo.$Fn(this._onResize,this).bind(),jindo.m.bindRotate(this._htEvent.rotate),jindo.m.bindPageshow(this._htEvent.rotate)},_detachEvent:function(){this._oTouch.detachAll(),jindo.m.unbindRotate(this._htEvent.rotate),jindo.m.unbindPageshow(this._htEvent.rotate);for(var a in this._htEvent){var b=this._htEvent[a];"undefined"!=typeof b.ref&&b.ref.detach(b.el,a)}this._htEvent=null},destroy:function(){this.deactivate();for(var a in this._htWElement)this._htWElement[a]=null;this._htWElement=null,this._oTouch=null,this._o_FlickingAnimation_=null;for(var b in this._htIndexInfo)this._htIndexInfo[a]=null;this._isIos=null,this._bAndroid=null,this._nVersion=null,this._fnDummyFnc=null,this._doFlicking=null,this._bClickBug=null,this._b3dExecption=null,this._bDummyTagException=null}}).extend(jindo.m.UIComponent),jindo.m.ContractEffect=jindo.$Class({sEffectName:"contract",getCommand:function(a,b){var c=b.sDirection?b.sDirection:"down",d="width",e=this._htLayerInfo.nWidth;("up"==c||"down"==c)&&(d="height",e=this._htLayerInfo.nHeight);var f=b.htTo||{};f[d]="0px","right"==c&&(f.marginLeft=this._htLayerInfo.nMarginLeft+this._htLayerInfo.nWidth+"px"),"down"==c&&(f.marginTop=this._htLayerInfo.nMarginTop+this._htLayerInfo.nHeight+"px");var g={};return this.getTranslateStyle(f,g),{sTaskName:this.sEffectName+"-"+c,htStyle:g,htTransform:{},fCallback:{htStyle:{"@marginLeft":this._htLayerInfo.nMarginLeft+"px","@marginTop":this._htLayerInfo.nMarginTop+"px"}}}},getBeforeCommand:function(a,b){var c=(b.sDirection?b.sDirection:"down",b.htFrom||{});c.overflow="hidden";var d={};return this.getTranslateStyle(c,d),{htStyle:d,htTransform:{}}}}).extend(jindo.m._Effect_),jindo.m._AlignFlipFlicking_=jindo.$Class({sAnimationName:"alignFlip",$init:function(){this._bMoveDirection=null,this._bMove=!1,this._initFlicking()},_initFlicking:function(){this._setElementSize(),this._setElementStyle()},_setElementStyle:function(){this._htWElement.base.css("overflow","hidden").css("position","relative"),jindo.$A(this._htWElement.aPanel).forEach(function(a){var b=a;b.css("position","absolute").css("width","100%").css("height","100%")}),this._htWElement.base.css(this._sCssPrefix+"Perspective",1200)},_setElementSize:function(){this.nWidth=this._htWElement.base.width(),this.nHeight=this._htWElement.base.height()},_setFlipElement:function(){var a=90,b=this._getFlipElement();this._setFlipAlign(b),"prev"===this._bMoveDirection?"left"===this._htOption.sFlipAlign?this._rotate(b,-1*a):"top"===this._htOption.sFlipAlign&&this._rotate(b,a):"next"===this._bMoveDirection&&("bottom"===this._htOption.sFlipAlign?this._rotate(b,-1*a):"right"===this._htOption.sFlipAlign&&this._rotate(b,a)),b.show().css("zIndex",110);var c="prev"===this._bMoveDirection?this.getPrevElement():this.getNextElement();c.$value()!==b.$value()&&c.show().css("zIndex",90)},_getFlipElement:function(){var a=this.getContentElement();return"prev"===this._bMoveDirection?("left"===this.option("sFlipAlign")||"top"==this.option("sFlipAlign"))&&(a=this.getPrevElement()):"next"===this._bMoveDirection&&("right"===this.option("sFlipAlign")||"bottom"==this.option("sFlipAlign"))&&(a=this.getNextElement()),a},_setFlipAlign:function(a){var b="";b=this.option("bHorizontal")?this.option("sFlipAlign")+" center":"center "+this.option("sFlipAlign"),a.css(this._sCssPrefix+"TransformOrigin",b)},_rotate:function(a,b){if(a){var c=this.option("bHorizontal")?"rotateY("+b+"deg)":"rotateX("+b+"deg)",d={};d[this._sCssPrefix+"Transition"]=this._sCssPrefix+"-transform 0s linear",d[this._sCssPrefix+"Transform"]="perspective(500px) "+c+" rotateZ(0deg)",a.css(d)}return a},_setPrevRotate:function(a,b){var c=this.option("bHorizontal")?b:-b,d=0;"left"===this.option("sFlipAlign")?d=-70:"top"===this.option("sFlipAlign")&&(d=80);var e=d+c;e="right"===this.option("sFlipAlign")?Math.min(90,e):"bottom"===this.option("sFlipAlign")?Math.max(-90,e):"left"===this.option("sFlipAlign")?Math.min(0,e):Math.max(0,e),this._rotate(a,e).css("zIndex",110)},_setNextRotate:function(a,b){var c=this.option("bHorizontal")?-b:b,d=0;"right"===this.option("sFlipAlign")?d=70:"bottom"===this.option("sFlipAlign")&&(d=-80);var e=d+c;e="top"===this.option("sFlipAlign")?Math.min(90,e):"left"===this.option("sFlipAlign")?Math.max(-90,e):"bottom"===this.option("sFlipAlign")?Math.min(0,e):Math.max(0,e),this._rotate(a,e).css("zIndex",110)},_onAfterStart:function(){this._resetInfo()},_onAfterMove:function(a){if(null===this._bMoveDirection){if(a>0)this._bMoveDirection="prev";else{if(!(0>a))return;this._bMoveDirection="next"}this._setFlipElement(),this._restoreAnchor(),this._setAnchorElement(),this._clearAnchor()}else{var b=this.option("bHorizontal")?this.nWidth:this.nHeight,c=this.getContentElement();"prev"===this._bMoveDirection?(("left"===this.option("sFlipAlign")||"top"===this.option("sFlipAlign"))&&(c=this.getPrevElement()),this._nDeg=Math.max(0,Math.min(70,Math.round(1*a/b*70))),this._setPrevRotate(c,this._nDeg)):"next"===this._bMoveDirection&&(("right"===this.option("sFlipAlign")||"bottom"===this.option("sFlipAlign"))&&(c=this.getNextElement()),this._nDeg=Math.max(0,Math.min(70,Math.round(-1*a/b*70))),this._setNextRotate(c,this._nDeg))}this._bMove=!0},_onAfterEnd:function(){this._bFinished=!1;var a=null===this._htIndexInfo.sDirection?!0:!1;this._bMoveDirection!==this._htIndexInfo.sDirection&&(a=!0,this._htIndexInfo.sDirection=null,this._htIndexInfo.nNextContentIndex=this._htIndexInfo.nContentIndex,this._htIndexInfo.welNextElement=this._htIndexInfo.welElement),"prev"===this._bMoveDirection&&this.getElement().$value()===this.getPrevElement()&&(a=!0,this._htIndexInfo.sDirection=null,this._htIndexInfo.nNextContentIndex=this._htIndexInfo.nContentIndex,this._htIndexInfo.welNextElement=this._htIndexInfo.welElement),"next"===this._bMoveDirection&&this.getElement().$value()===this.getNextElement().$value()&&(a=!0,this._htIndexInfo.sDirection=null,this._htIndexInfo.nNextContentIndex=this._htIndexInfo.nContentIndex,this._htIndexInfo.welNextElement=this._htIndexInfo.welElement);var b=this._getFlipElement(),c=this,d=this.option(a?"nBounceDuration":"nDuration"),e=a?0:90;if(0===this._nDeg)this._bFinished=!0,setTimeout(function(){c._onTransitionEnd()},10);else{var f=(new Date).getTime(),g=this._nDeg,h=90;!function i(){var a,j=(new Date).getTime();if(j>=f+d)return cancelAnimationFrame(c._nTimerAnimate),"next"===c._bMoveDirection?c._setNextRotate(b,e):c._setPrevRotate(b,e),void c._onTransitionEnd();j=(j-f)/d-1,a=Math.sqrt(1-Math.pow(j,2));var k=(e-g)*a+g;c._nDeg=Math.min(k,h),"next"===c._bMoveDirection?c._setNextRotate(b,c._nDeg):c._setPrevRotate(b,c._nDeg),c._nTimerAnimate=requestAnimationFrame(i)}()}},_resetInfo:function(){this._bMoveDirection=null,this._bMove=!1,this._nDeg=-1,this._bFinished=!0},_onTransitionEnd:function(){this._detachTarnsitonEnd();var a=!0;null===this._htIndexInfo.sDirection&&(a=!1),this._restorePanel(this._htIndexInfo.welNextElement.$value()),this._resetInfo(),this._endAnimation(a)},_restorePanel:function(a){jindo.$A(this._htWElement.aPanel).forEach(function(b){b.$value().style[this._sCssPrefix+"TransitionDuration"]=null,b.$value().style[this._sCssPrefix+"Transform"]="",b.$value()===a?b.show().css("zIndex",10):b.hide().css("zIndex",1)},this)},_refresh:function(a,b){"undefined"==typeof a&&(a=this.getContentIndex());var c=a;this.option("bUseCircular")&&(c=a%3),b&&this._setElementSize(),this._htWElement.base.css(this._sCssPrefix+"PerspectiveOrigin","50% 50%");for(var d=0,e=this._htWElement.aPanel.length;e>d;d++)d===c?this._htWElement.aPanel[d].show().css("zIndex",10):this._htWElement.aPanel[d].hide().css("zIndex",1);this._htIndexInfo.nContentIndex=a,this._htIndexInfo.welElement=this._htWElement.aPanel[c]},_moveTo:function(a,b,c){this.refresh(a,!1,c)},_movePrev:function(a){this._bMoveDirection="prev",this._bMove=!0,this._nDeg=1;var b=this.option("nFlickThreshold");this._setFlipElement(),this._onEnd({nDistanceX:b+10,nDistanceY:b+10,nX:10,nY:10},a)},_moveNext:function(a){this._bMoveDirection="next",this._bMove=!0,this._nDeg=1,this._setFlipElement();var b=-1*this.option("nFlickThreshold"),c=this.option("bHorizontal")?this._htWElement.base.width():this._htWElement.base.height();this._onEnd({nDistanceX:b-10,nDistanceY:b-10,nX:c-10,nY:c-10},a)}}).extend(jindo.m._FlickingAnimation_),jindo.m._FlipFlicking_=jindo.$Class({sAnimationName:"flip",$init:function(){this._bMoveDirection=null,this._bMove=!1,this._initFlicking()},_initFlicking:function(){this._setElementSize(),this._setElementStyle(),this._prepareFlip()},_prepareFlip:function(){if("undefined"==typeof this._htWElement.left){this._htWElement.base.css(this._sCssPrefix+"Perspective",1200);var a=this.option("sClassPrefix")+"left",b=this.option("sClassPrefix")+"right";this._htWElement.container.append(jindo.$('<div class="'+a+'" style="position:absolute;overflow:hidden;left:0px;top:0px;outline:1px solid rgba(255, 0, 0, .0);"></div>')),this._htWElement.container.append(jindo.$('<div class="'+b+'"  style="position:absolute;overflow:hidden;left:0px;top:0px;outline:1px solid rgba(255, 0, 0, .0);"></div>')),this._htWElement.container.height(this._htWElement.base.height()),this._htWElement.left=jindo.$Element(jindo.$$.getSingle("."+a,this._htWElement.container.$value())),this._htWElement.right=jindo.$Element(jindo.$$.getSingle("."+b,this._htWElement.container.$value())),this.option("bHorizontal")?(this._htWElement.left.css("height","100%"),this._htWElement.right.css("height","100%")):(this._htWElement.left.css("width","100%"),this._htWElement.right.css("width","100%"))}this.option("bHorizontal")?(this._htWElement.left.width(this.nCenter),this._htWElement.right.width(this.nCenter)):(this._htWElement.left.height(this.nCenter),this._htWElement.right.height(this.nCenter))},_setElementStyle:function(){this._htWElement.base.css("overflow","hidden"),this._htWElement.container.css("position","relative").height(this.nHeight),jindo.$A(this._htWElement.aPanel).forEach(function(a){var b=a;b.css("position","absolute").css("width","100%").css("height","100%")})},_setElementSize:function(){this.nWidth=this._htWElement.base.width(),this.nHeight=this._htWElement.base.height(),this.nCenter=Math.round((this.option("bHorizontal")?this.nWidth:this.nHeight)/2)},_refresh:function(a,b){"undefined"==typeof a&&(a=this.getContentIndex());var c=a;this.option("bUseCircular")&&(c=a%3),b&&(this._setElementSize(),this._prepareFlip()),this._htWElement.left.hide().show(),this._htWElement.right.hide().show(),this._htWElement.right.css(this.option("bHorizontal")?"left":"top",this.nCenter+"px");var d={};d[this._sCssPrefix+"PerspectiveOrigin"]="50% 50%",this._htWElement.base.css(d);for(var e=0,f=this._htWElement.aPanel.length;f>e;e++)e===c?this._htWElement.aPanel[e].show().css("zIndex",10):this._htWElement.aPanel[e].hide().css("zIndex",1);this._htIndexInfo.nContentIndex=a,this._htIndexInfo.welElement=this._htWElement.aPanel[c]},_setCloneElement:function(){var a,b=this.option("bHorizontal"),c=this.getContentElement();"prev"===this._bMoveDirection?(a=this.getPrevElement(),this._htWElement.left.empty().append(a.$value()===c.$value()?jindo.$Element(jindo.$("<div></div>")).show().width(this.nWidth):jindo.$Element(a.$value().cloneNode(!0)).show().width(this.nWidth)),this._htWElement.right.empty().append(jindo.$Element(c.$value().cloneNode(!0)).css(b?"margin-left":"margin-top","-"+this.nCenter+"px").width(this.nWidth).height(this.nHeight)),a.before(this._htWElement.left).after(this._htWElement.right)):"next"===this._bMoveDirection&&(a=this.getNextElement(),this._htWElement.left.empty().append(jindo.$Element(c.$value().cloneNode(!0)).show().width(this.nWidth)),this._htWElement.right.empty().append(a.$value()===c.$value()?jindo.$Element(jindo.$("<div></div>")).show().css(b?"margin-left":"margin-top","-"+this.nCenter+"px").width(this.nWidth).height(this.nHeight):jindo.$Element(a.$value().cloneNode(!0)).show().css(b?"margin-left":"margin-top","-"+this.nCenter+"px").width(this.nWidth).height(this.nHeight)),c.before(this._htWElement.left).after(this._htWElement.right))},_onAfterMove:function(a){if(null===this._bMoveDirection){if(a>0)this._bMoveDirection="prev";else{if(!(0>a))return;this._bMoveDirection="next"}this._setCloneElement(),this._restoreAnchor(),this._setAnchorElement(),this._clearAnchor()}else{var b,c,d=this.option("bHorizontal")?this.nWidth:this.nHeight,e=this.getContentElement();"prev"===this._bMoveDirection?(b=this.getPrevElement(),c=b.$value()===e.$value()?60:180,this._nDeg=Math.max(0,Math.min(c,Math.round(1*a/d*c))),this._setPrevRotate(e,b,this._htWElement.left,this._htWElement.right,this._nDeg)):"next"===this._bMoveDirection&&(b=this.getNextElement(),c=b.$value()===e.$value()?60:180,this._nDeg=Math.max(0,Math.min(c,Math.round(-1*a/d*c))),this._setNextRotate(e,b,this._htWElement.left,this._htWElement.right,this._nDeg))}this._bMove=!0},_onAfterEnd:function(){this._bMove&&this._flipAnimate()},_rotate:function(a,b){if(a){var c=this.option("bHorizontal")?"rotateY("+b+"deg)":"rotateX("+b+"deg)",d={};d[this._sCssPrefix+"Transition"]=this._sCssPrefix+"-transform 0s linear",d[this._sCssPrefix+"Transform"]="perspective(500px) "+c+" rotateZ(0deg)",a.css(d)}return a},_setBackgroundShadow:function(a,b){var c,d=b>90?180-b:b,e="#000000";return c=Number(Math.round(d/90*255)).toString(16),c.length<2&&(c+=c),e="#"+c+c+c,a.css("background-image","-webkit-gradient(linear, 100% 0%, 0% 0%, from("+e+"), to("+e+"))"),a.css("background-image","-ms-gradient(linear, 100% 0%, 0% 0%, from("+e+"), to("+e+"))"),a},_clearBackgrond:function(a){return a.css({"background-image":"","background-color":"#fff"})},_setNextRotate:function(a,b,c,d,e){var f=this.option("bHorizontal")?-e:e,g=this.option("bHorizontal")?180-e:-(180-e);a.$value()===b.$value()&&(b=null),this._rotate(a,f).addClass("gradient"),b&&this._rotate(b,g).addClass("gradient"),0===e?(c.hide(),d.hide(),b&&this._rotate(b,0).hide()):90>e?(setTimeout(function(){},0),c.show("inline-block"),d.show(),c.css("zIndex",110),a.css("zIndex",100),d.css("zIndex",90),this._clearBackgrond(c.first()),this._setBackgroundShadow(d.first(),e),a.show(),b&&b.hide()):180>e?(b.show().css("zIndex",100),a.hide(),c.show().css("zIndex",90),d.show().css("zIndex",110),this._setBackgroundShadow(c.first(),e),this._clearBackgrond(d.first()),b.show(),a.hide()):(c.hide(),d.hide())},_setPrevRotate:function(a,b,c,d,e){var f=this.option("bHorizontal"),g=f?e:-e,h=f?-(180-e):180-e;a.$value()===b.$value()&&(b=null),this._rotate(a,g).addClass("gradient"),b&&this._rotate(b,h).addClass("gradient"),0===e?(c.hide(),d.hide(),a.removeClass("gradient"),b&&this._rotate(b,0).hide().removeClass("gradient")):90>e?(c.show().css("zIndex",90),d.show().css("zIndex",110),this._setBackgroundShadow(c.first(),e),this._clearBackgrond(d.first()),a.show().css("zIndex",100),b&&b.hide()):180>e?(c.show().css("zIndex",110),d.show().css("zIndex",90),this._clearBackgrond(c.first()),this._setBackgroundShadow(d.first()),a.hide(),b&&b.show().css("zIndex",100)):(c.hide(),d.hide(),b&&b.removeClass("gradient"))},_flipAnimate:function(){this._bFinished=!1;var a=null===this._htIndexInfo.sDirection?!0:!1,b=this.getContentElement(),c=this,d=null;"next"===this._bMoveDirection?d=this.getNextElement():"prev"===this._bMoveDirection&&(d=this.getPrevElement()),b.$value()===d.$value()&&(a=!0,this._htIndexInfo.sDirection=null);var e=this.option(a?"nBounceDuration":"nDuration"),f=a?0:180;if(0===this._nDeg)this._bFinished=!0,setTimeout(function(){c._onTransitionEnd()},10);else{var g=(new Date).getTime(),h=this._nDeg;!function i(){var a,j=(new Date).getTime();if(j>=g+e)return cancelAnimationFrame(c._nTimerAnimate),void c._onTransitionEnd();j=(j-g)/e-1,a=Math.sqrt(1-Math.pow(j,2));var k=(f-h)*a+h;c._nDeg=Math.min(k,180),"next"===c._bMoveDirection?c._setNextRotate(b,d,c._htWElement.left,c._htWElement.right,c._nDeg):c._setPrevRotate(b,d,c._htWElement.left,c._htWElement.right,c._nDeg),c._nTimerAnimate=requestAnimationFrame(i)}()}},_onAfterStart:function(){this._resetInfo()},_resetInfo:function(){this._bMoveDirection=null,this._bMove=!1,this._nDeg=-1,this._bFinished=!0,this._htWElement.left.css("zIndex",1),this._htWElement.right.css("zIndex",1)},_onTransitionEnd:function(){var a=!0;null===this._htIndexInfo.sDirection&&(a=!1),jindo.$A(this._htWElement.aPanel).forEach(function(a){a.$value().style[this._sCssPrefix+"TransitionDuration"]=null,a.$value().style[this._sCssPrefix+"Transform"]=""},this),this._resetInfo(),this._endAnimation(a)},_movePrev:function(a){this._bMoveDirection="prev",this._bMove=!0,this._nDeg=1,this._setCloneElement();var b=this.option("nFlickThreshold");this._onEnd({nDistanceX:b+10,nDistanceY:b+10,nX:10,nY:10},a)},_moveNext:function(a){this._bMoveDirection="next",this._bMove=!0,this._nDeg=1,this._setCloneElement();var b=-1*this.option("nFlickThreshold"),c=this.option("bHorizontal")?this._htWElement.base.width():this._htWElement.base.height();this._onEnd({nDistanceX:b-10,nDistanceY:b-10,nX:c-10,nY:c-10},a)}}).extend(jindo.m._FlickingAnimation_),jindo.m.Accordion=jindo.$Class({$init:function(a,b){var c={bActivateOnload:!0,sClassPrefix:"accordion-",sDirection:"vertical",nDefalutIndex:-1,bUseToggle:!1,sTransitionTimingFunction:"ease",nDuration:500};this.option(c),this.option(b||{}),this._initVar(a),this._setWrapperElement(),this.option("bActivateOnload")&&this.activate(),this._setSize(),this._setDefaultExpand()},_initVar:function(a){this._elContainer="string"==typeof a?jindo.$(a):a,this._aAccordionBlock=jindo.$$("."+this.option("sClassPrefix")+"block",this._elContainer),this._setBlockGpu();var b=jindo.m.getDeviceInfo(),c=parseFloat(b.version,10);if(b.android&&3>c){var d=jindo.$$.getSingle("._accordion_dummy_atag_",this._elContainer);d||(d=jindo.$("<a href='javascript:void(0);' class='_accordion_dummy_atag_'></a>"),d.style.position="absolute",d.style.left="-1000px",d.style.top="-1000px",d.style.width=0,d.style.height=0,jindo.$Element(this._elContainer).append(d))}this._nExpand=-1,this._wfTransitionEnd=jindo.$Fn(this._onTransitionEnd,this).bind()},_setBlockGpu:function(){var a=jindo.m.useCss3d(),b=jindo.m.getCssPrefix();a&&jindo.$A(this._aAccordionBlock).forEach(function(a){jindo.$Element(a).css(b+"Transform","translateZ(0)")},this)},_setWrapperElement:function(){},_onActivate:function(){this._attachEvent()},_onDeactivate:function(){this._detachEvent()},_attachEvent:function(){this._htEvent={},jindo.$A(this._aAccordionBlock).forEach(function(a,b){this._htEvent["click_"+b]={ref:jindo.$Fn(this._onClick,this).attach(this.getHandler(b),"click"),el:this.getHandler(b)}},this)},_detachEvent:function(a){if(a){var b=this._htEvent[a];b.ref.detach(b.el,a.substring(0,a.indexOf("_")))}},_detachEventAll:function(){for(var a in this._htEvent)this._detachEvent(a);this._htEvent=null},_onClick:function(a){a.stop();var b=this._getBlock(a.element),c=b?jindo.$A(this._aAccordionBlock).indexOf(b):null,d=this.getExpandIndex(),e=this.option("bUseToggle");"number"==typeof c&&(c==d?e&&(this.collapse(d),this._nExpand=-1):(this.expand(c),d>-1&&this.collapse(d)))},_setSize:function(){this._htBlockSize={};var a,b;jindo.$A(this._aAccordionBlock).forEach(function(c,d){a=this._getHeaderSize(d),b=this._getBodySize(d),this._htBlockSize[d]={nHeaderSize:a,nBodySize:b},"vertical"==this.option("sDirection")?jindo.$Element(c).height(a):jindo.$Element(c).width(a)},this)},_getHeaderSize:function(a){var b=jindo.$Element(this.getHead(a)),c="vertical"==this.option("sDirection")?b.height():b.width();return c},_getBodySize:function(a){var b=jindo.$Element(this.getBody(a)),c="vertical"==this.option("sDirection")?b.height():b.width();return c},_getSize:function(a){this._htBlockSize&&this._htBlockSize[a]||this._setSize();var b=this._htBlockSize[a].nHeaderSize+this._htBlockSize[a].nBodySize;return b},_setDefaultExpand:function(){var a=this.option("nDefalutIndex");a>-1&&setTimeout(jindo.$Fn(function(){this.expand(a)
},this).bind(),100)},getHead:function(a){return jindo.$$.getSingle("dt",this._aAccordionBlock[a])},getBody:function(a){return jindo.$$.getSingle("dd",this._aAccordionBlock[a])},_getBlock:function(a){var b=this.option("sClassPrefix")+"block",c=jindo.m.getClosest(b,a);return c},getHandler:function(a){var b=this.getHead(a);return jindo.$$.getSingle("."+this.option("sClassPrefix")+"handler",b)||b},getExpandIndex:function(){return this._nExpand},expand:function(a){this._elBlock=this._aAccordionBlock[a],"undefined"!=typeof this._elBlock&&this.fireEvent("beforeExpand",{sType:"beforeExpand",elBlock:this._elBlock,nBeforeIndex:this._nExpand,nIndex:a})&&(this._setTransition(this._elBlock,this._getSize(a)),this._nExpand=a,this.fireEvent("expand",{sType:"expand",elBlock:this._elBlock,nIndex:a}))},collapse:function(a){this._elBlock=this._aAccordionBlock[a],"undefined"!=typeof this._elBlock&&this.fireEvent("beforeCollapse",{sType:"beforeCollapse",elBlock:this._elBlock,nIndex:a})&&(this._setTransition(this._elBlock,this._getHeaderSize(a)),this._nExpand==a&&(this._nExpand=-1),this.fireEvent("collapse",{sType:"collapse",elBlock:this._elBlock,nIndex:a}))},collapseAll:function(){var a=this.getExpandIndex();a>-1&&this.collapse(a),this._nExpand=-1},setEffect:function(a){!a.sTransitionTimingFunction||"ease"!=a.sTransitionTimingFunction&&"linear"!=a.sTransitionTimingFunction&&"ease-in"!=a.sTransitionTimingFunction&&"ease-out"!=a.sTransitionTimingFunction&&"ease-in-out"!=a.sTransitionTimingFunction||this.option("sTransitionTimingFunction",a.sTransitionTimingFunction),a.nDuration&&a.nDuration>0&&this.option("nDuration",a.nDuration)},_setTransition:function(a,b,c,d){c=c||this.option("sTransitionTimingFunction"),d=d||this.option("nDuration"),d>0&&this._attachTransitionEnd(a);var e="",f=this.option("sDirection");a.style.webkitTransition="",a.style.mozTransition="","vertical"===f?(e="height "+d+"ms "+c,a.style.webkitTransition=e,a.style.mozTransition=e,a.style.height=b+"px"):"horizontal"===f&&(e="width "+d+"ms "+c,a.style.webkitTransition=e,a.style.mozTransition=e,a.style.width=b+"px"),0===d&&this._onTransitionEnd({srcElement:a})},_attachTransitionEnd:function(a){this._elTransition=a,this._elTransition.addEventListener("webkitTransitionEnd",this._wfTransitionEnd,!1)},_detachTransitionEnd:function(a){a.removeEventListener("webkitTransitionEnd",this._wfTransitionEnd,!1),this._elTransition=null},_onTransitionEnd:function(a){var b=jindo.$$.getSingle("._accordion_dummy_atag_",this._elContainer);b&&b.focus(),this._detachTransitionEnd(a.srcElement)},destroy:function(){this._detachEventAll(),this._elContainer=null,this._aAccordionBlock=null,this._elBlock=null,this._htBlockSize=null,this._nExpand=null}}).extend(jindo.m.UIComponent);