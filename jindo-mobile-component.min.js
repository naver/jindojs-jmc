/**
 * Jindo Mobile Component
 * @version 1.16.0
 * 
 * NAVER Corp; JindoJS JavaScript Framework
 * http://jindo.dev.naver.com/
 * 
 * Released under the LGPL v2 license
 * http://www.gnu.org/licenses/old-licenses/lgpl-2.0.html
 */
/**
 *	jindo.m
 *	jindo.m.Component
 *	jindo.m.UIComponent
 *	jindo.m.Accordion
 *	jindo.m.AjaxHistory
 *	jindo.m.Effect
 *	jindo.m.Morph
 *	jindo.m.Animation
 *	jindo.m.Transition
 *	jindo.m.Calendar
 *	jindo.m.CheckRadioCore
 *	jindo.m.CheckBox
 *	jindo.m.Flicking
 *	jindo.m.Touch
 *	jindo.m.SwipeCommon
 *	jindo.m.Flick
 *	jindo.m.Slide
 *	jindo.m.SlideFlicking
 *	jindo.m.CircularFlicking
 *	jindo.m.LayerEffect
 *	jindo.m._Effect_
 *	jindo.m.ContractEffect
 *	jindo.m.CorePagination
 *	jindo.m.Scroll
 *	jindo.m.DynamicPlugin
 *	jindo.m.CoreScroll
 *	jindo.m.SlideEffect
 *	jindo.m.CoreTab
 *	jindo.m.Cover
 *	jindo.m.CoverFlicking
 *	jindo.m.Cube
 *	jindo.m.CubeFlicking
 *	jindo.m.RevealCommon
 *	jindo.m.CubeReveal
 *	jindo.m.Validator
 *	jindo.m.NumberValidator
 *	jindo.m.CurrencyValidator
 *	jindo.m.DateValidator
 *	jindo.m.Datepicker
 *	jindo.m.PopEffect
 *	jindo.m.FlipEffect
 *	jindo.m.Dialog
 *	jindo.m.DragArea
 *	jindo.m.DropArea
 *	jindo.m.EmailValidator
 *	jindo.m.ExpandEffect
 *	jindo.m.FadeEffect
 *	jindo.m.LayerPosition
 *	jindo.m.ScrollEnd
 *	jindo.m.FloatingLayer
 *	jindo.m.IndexScroll
 *	jindo.m.InfiniteCard
 *	jindo.m.Keyframe
 *	jindo.m.LayerManager
 *	jindo.m.Loading
 *	jindo.m.MoreContentButton
 *	jindo.m.MovableCoord
 *	jindo.m._FlickingAnimation_
 *	jindo.m._AlignFlipFlicking_
 *	jindo.m._FlipFlicking_
 *	jindo.m.PageLayoutUI
 *	jindo.m.PageNavigation
 *	jindo.m.PreventClickEvent
 *	jindo.m.PreviewFlicking
 *	jindo.m.PullPlugin
 *	jindo.m.RadioButton
 *	jindo.m.RequireValidator
 *	jindo.m.SlideReveal
 *	jindo.m.RevealSidebarUI
 *	jindo.m.Selectbox
 *	jindo.m.SlideTab
 *	jindo.m.Slider
 *	jindo.m.Tab
 *	jindo.m.TelValidator
 *	jindo.m.TextArea
 *	jindo.m.UrlValidator
 *	jindo.m.Validation
 *	jindo.m.TextInput
 *	jindo.m.ToggleSlider
 *	jindo.m.Visible
 */
var raf=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,caf=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame;if(raf&&!caf){var keyInfo={},oldraf=raf;raf=function(t){function e(){keyInfo[i]&&t()}var i=oldraf(e);return keyInfo[i]=!0,i},caf=function(t){delete keyInfo[t]}}else raf&&caf||(raf=function(t){return window.setTimeout(t,16)},caf=window.clearTimeout);window.requestAnimationFrame=raf,window.cancelAnimationFrame=caf,jindo.m=function(){function _initTouchEventName(){"ontouchstart"in window?(_htTouchEventName.start="touchstart",_htTouchEventName.move="touchmove",_htTouchEventName.end="touchend",_htTouchEventName.cancel="touchcancel"):window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0&&(_htTouchEventName.start="MSPointerDown",_htTouchEventName.move="MSPointerMove",_htTouchEventName.end="MSPointerUp",_htTouchEventName.cancel="MSPointerCancel")}function _getOrientationChangeEvt(){var t="onorientationchange"in window?"orientationchange":"resize";return _htOsInfo.android&&"2.1"===_htOsInfo.version&&(t="resize"),t}function _getVertical(){var t=null,e=_getOrientationChangeEvt();if("resize"===e){var i=document.documentElement.clientWidth;t=-1==_nPreWidth?i<document.documentElement.clientHeight:_nPreWidth>i?!0:i==_nPreWidth?_isVertical:!1,_nPreWidth=i}else{var n=window.orientation;0===n||180==n?t=!0:(90==n||-90==n)&&(t=!1)}return t}function _attachEvent(){jindo.$Fn(_onOrientationChange,this).attach(window,_getOrientationChangeEvt()).attach(window,"load"),jindo.$Fn(_onPageshow,this).attach(window,"pageshow")}function _initDeviceInfo(){function t(t,e){return(e||"").indexOf(t)>-1}_setOsInfo(),_setBrowserInfo();var e=navigator.userAgent;_htDeviceInfo={iphone:_htOsInfo.iphone,ipad:_htOsInfo.ipad,android:_htOsInfo.android,win:t("Windows Phone",e),galaxyTab:/SHW-M180/.test(e),galaxyTab2:/SHW-M380/.test(e),galaxyS:/SHW-M110/.test(e),galaxyS2:/SHW-M250|GT-I9100/.test(e),galaxyS2LTE:/SHV-E110/.test(e),galaxyS3:/SHV-E210|SHW-M440|GT-I9300/.test(e),galaxyNote:/SHV-E160/.test(e),galaxyNote2:/SHV-E250/.test(e),galaxyNexus:/Galaxy Nexus/.test(e),optimusLte2:/LG-F160/.test(e),optimusVu:/LG-F100/.test(e),optimusLte:/LG-LU6200|LG-SU640|LG-F120K'/.test(e),galaxyS4:/SHV-E300|GT-I9500|GT-I9505|SGH-M919|SPH-L720|SGH-I337|SCH-I545/.test(e),bChrome:_htBrowserInfo.chrome,bSBrowser:_htBrowserInfo.bSBrowser,bInapp:!1,version:_htOsInfo.version,browserVersion:_htBrowserInfo.version};for(var i in _htDeviceInfo)"boolean"==typeof _htDeviceInfo[i]&&_htDeviceInfo[i]&&_htDeviceInfo.hasOwnProperty(i)&&"b"!==i[0]&&(_htDeviceInfo.name=i);_htDeviceInfo.samsung=/GT-|SCH-|SHV-|SHW-|SPH|SWT-|SGH-|EK-|Galaxy Nexus|SAMSUNG/.test(e),_htDeviceInfo.lg=/LG-/.test(e),_htDeviceInfo.pantech=/IM-/.test(e),_htDeviceInfo.iphone||_htDeviceInfo.ipad?t("Safari",e)||(_htDeviceInfo.bInapp=!0):_htDeviceInfo.android&&(e=e.toLowerCase(),(t("inapp",e)||t("app",e.replace("applewebkit","")))&&(_htDeviceInfo.bInapp=!0))}function _setOsInfo(){_htOsInfo=jindo.$Agent().os(),_isInapp(),_htOsInfo.version=_htOsInfo.version||_getOsVersion(),_htOsInfo.ios="undefined"==typeof _htOsInfo.ios?_htOsInfo.ipad||_htOsInfo.iphone:_htOsInfo.ios}function _setBrowserInfo(){_htBrowserInfo=jindo.$Agent().navigator(),_htOsInfo.ios&&/CriOS/.test(navigator.userAgent)&&(_htBrowserInfo.chrome=!0),"undefined"==typeof _htBrowserInfo.firefox&&(_htBrowserInfo.firefox=/Firefox/.test(navigator.userAgent)),_isSBrowser(),_updateUnderVersion()}function _updateUnderVersion(){_htBrowserInfo.msafari&&_htBrowserInfo.chrome?_htBrowserInfo.version=parseFloat(_htOsInfo.ios?navigator.userAgent.match(/CriOS[ \/]([0-9.]+)/)[1]:navigator.userAgent.match(/Chrome[ \/]([0-9.]+)/)[1]):_htBrowserInfo.firefox&&(_htBrowserInfo.version=parseFloat(navigator.userAgent.match(/Firefox[ \/]([0-9.]+)/)[1]))}function _isInapp(){var t=navigator.userAgent;_htOsInfo.bInapp=!1,_htOsInfo.ios?-1==t.indexOf("Safari")&&(_htOsInfo.bInapp=!0):_htOsInfo.android&&(t=t.toLowerCase(),(-1!=t.indexOf("inapp")||-1!=t.replace("applewebkit","").indexOf("app"))&&(_htOsInfo.bInapp=!0))}function _isSBrowser(){_htBrowserInfo.bSBrowser=!1;var t=navigator.userAgent,e=t.match(/(SAMSUNG|Chrome)/gi)||"";e.length>1&&(_htBrowserInfo.bSBrowser=!0)}function _getOsVersion(){if(!_htOsInfo.version){var t,e=navigator.userAgent,i="";return _htOsInfo.iphone||_htOsInfo.ipad?(t=e.match(/OS\s([\d|\_]+\s)/i),null!==t&&t.length>1&&(i=t[1])):_htOsInfo.android?(t=e.match(/Android\s([^\;]*)/i),null!==t&&t.length>1&&(i=t[1])):_htOsInfo.mwin&&(t=e.match(/Windows Phone\s([^\;]*)/i),null!==t&&t.length>1&&(i=t[1])),i.replace(/\_/g,".").replace(/\s/g,"")}}function _onOrientationChange(t){if("load"===t.type)return _nPreWidth=document.documentElement.clientWidth,void(_isVertical=_htOsInfo.bInapp||!_htOsInfo.iphone&&!_htOsInfo.ipad&&"resize"===_getOrientationChangeEvt()?_nPreWidth>document.documentElement.clientHeight?!1:!0:_getVertical());if("resize"===_getOrientationChangeEvt())setTimeout(function(){_orientationChange(t)},0);else{var e=jindo.$Document().clientSize().width,i=300;if(_htDeviceInfo.android){if("orientationchange"==t.type&&e==_nPreWidth)return setTimeout(function(){_onOrientationChange(t)},500),!1;_nPreWidth=e}clearTimeout(_nRotateTimer),_nRotateTimer=setTimeout(function(){_orientationChange(t)},i)}}function _orientationChange(t){var e=_isVertical;_isVertical=_getVertical(),(jindo.$Agent().navigator().mobile||jindo.$Agent().os().ipad)&&e!==_isVertical&&(t.sType="rotate",t.isVertical=_isVertical,_fireEvent("mobilerotate",t))}function _onPageshow(t){_isVertical=_getVertical(),t.sType="pageShow",setTimeout(function(){_fireEvent("mobilePageshow",t)},300)}function _getTranslateOffsetFromCSSMatrix(t){var e=new WebKitCSSMatrix(window.getComputedStyle(t).webkitTransform);return{top:e.m42,left:e.m41}}function _fireEvent(t,e){if(_htHandler[t])for(var i=_htHandler[t].concat(),n=0,s=i.length;s>n;n++)i[n].call(this,e)}function _getTranslateOffsetFromStyle(t){var e=0,i=0,n=[],s=[],o=t.style[""==jindo.m.getCssPrefix()?"transform":jindo.m.getCssPrefix()+"Transform"];if(o&&o.length>0){if(/translate[XY]/.test(o)){var h=o.match(/translateX\(([-0-9px]*)\)/),a=o.match(/translateY\(([-0-9px]*)\)/);s.push(h&&h.length>1?h[1]:"0px"),s.push(a&&a.length>1?a[1]:"0px"),n[1]=s.join(",")}else n=o.match(/translate.{0,2}\((.*)\)/);if(n&&n.length>1){var r=n[1].split(",");r&&r.length>1&&(e=parseInt(r[1],10),i=parseInt(r[0],10))}}return{top:e,left:i}}var _isVertical=null,_nPreWidth=-1,_nRotateTimer=null,_htHandler={},_htDeviceInfo={},_htAddPatch={},_htOsInfo={},_htBrowserInfo={},_htTouchEventName={start:"mousedown",move:"mousemove",end:"mouseup",cancel:null},_htDeviceList={galaxyTab:["SHW-M180"],galaxyTab2:["SHW-M380"],galaxyS:["SHW-M110"],galaxyS2:["SHW-M250","GT-I9100"],galaxyS2LTE:["SHV-E110"],galaxyS3:["SHV-E210","SHW-M440","GT-I9300"],galaxyNote:["SHV-E160"],galaxyNote2:["SHV-E250"],galaxyNexus:["Galaxy Nexus"],optimusLte2:["LG-F160"],optimusVu:["LG-F100"],optimusLte:["LG-LU6200","LG-SU640","LG-F120K"]},__M__={MOVETYPE:{0:"hScroll",1:"vScroll",2:"dScroll",3:"tap",4:"longTap",5:"doubleTap",6:"pinch",7:"rotate",8:"pinch-rotate"},KITKAT_HIGHLIGHT_CLASS:"_jmc_no_tap_highlight_",KITKAT_HIGHLIGHT_ID:"_jmc_no_tap_highlight_tag_",sVersion:"unknown",$init:function(){_initDeviceInfo(),_initTouchEventName(),_attachEvent();var t=jindo.$(this.KITKAT_HIGHLIGHT_ID);if(!t){t=document.createElement("style");var e=document.getElementsByTagName("html")[0];t.type="text/css",t.id=this.KITKAT_HIGHLIGHT_ID,e.insertBefore(t,e.firstChild);var i=t.sheet||t.styleSheet;i.insertRule("."+this.KITKAT_HIGHLIGHT_CLASS+" { -webkit-tap-highlight-color: rgba(0,0,0,0); }",0),i.insertRule("."+this.KITKAT_HIGHLIGHT_CLASS+" * { -webkit-tap-highlight-color: rgba(0,0,0,0); }",0)}},bindRotate:function(t){var e=_htHandler.mobilerotate;"undefined"==typeof e&&(e=_htHandler.mobilerotate=[]),e.push(t)},unbindRotate:function(t){var e=_htHandler.mobilerotate;if(e)for(var i,n=0;i=e[n];n++)if(i===t){e.splice(n,1);break}},bindPageshow:function(t){var e=_htHandler.mobilePageshow;"undefined"==typeof e&&(e=_htHandler.mobilePageshow=[]),e.push(t)},unbindPageshow:function(t){var e=_htHandler.mobilePageshow;if(e)for(var i,n=0;i=e[n];n++)if(i===t){e.splice(n,1);break}},getDeviceInfo:function(){return _htDeviceInfo},getOsInfo:function(){return _htOsInfo},getBrowserInfo:function(){return _htBrowserInfo},isVertical:function(){return null===_isVertical?_isVertical=_getVertical():_isVertical},getNodeElement:function(t){for(;1!=t.nodeType;)t=t.parentNode;return t},getTranslateOffset:function(t){t=jindo.$Element(t);var e,i=t.$value();return e=_htOsInfo.android&&3===parseInt(_htOsInfo.version,10)?_getTranslateOffsetFromStyle(i):"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix?_getTranslateOffsetFromCSSMatrix(i):_getTranslateOffsetFromStyle(i)},getStyleOffset:function(t){var e=parseInt(t.css("left"),10),i=parseInt(t.css("top"),10);return e=isNaN(e)?0:e,i=isNaN(i)?0:i,{left:e,top:i}},attachTransitionEnd:function(t,e){var i=+jindo.$Jindo().version.replace(/[a-z.]/gi,"");if(i>230)t._jindo_fn_=jindo.$Fn(e,this).attach(t,"transitionend");else{var n=("ms"===this.getCssPrefix()?"MS":this.getCssPrefix())+"TransitionEnd";t.addEventListener(n,e,!1)}},detachTransitionEnd:function(t,e){var i=+jindo.$Jindo().version.replace(/[a-z.]/gi,"");if(i>230)t._jindo_fn_&&(t._jindo_fn_.detach(t,"transitionend"),delete t._jindo_fn_);else{var n=("ms"===this.getCssPrefix()?"MS":this.getCssPrefix())+"TransitionEnd";t.removeEventListener(n,e,!1)}},_attachFakeJindo:function(t,e,i){var n=+jindo.$Jindo().version.replace(/[a-z.]/gi,""),s=null;return s=230>n&&"undefined"!=typeof _notSupport?_notSupport.$Fn(e).attach(t,i):jindo.$Fn(e).attach(t,i)},_getTouchEventName:function(){return _htTouchEventName},getCssPrefix:function(){var t="";return"undefined"!=typeof document.body.style.webkitTransition?t="webkit":"undefined"!=typeof document.body.style.transition||("undefined"!=typeof document.body.style.MozTransition?t="Moz":"undefined"!=typeof document.body.style.OTransition?t="O":"undefined"!=typeof document.body.style.msTransition&&(t="ms")),jindo.m.getCssPrefix=function(){return t},t},getClosest:function(t,e){var i,n=jindo.$Element(e),s=/<\/?(?:h[1-5]|[a-z]+(?:\:[a-z]+)?)[^>]*>/gi;return s.test(t)?"<"+e.tagName.toUpperCase()+">"==t.toUpperCase()?i=e:(i=n.parent(function(e){return"<"+e.$value().tagName.toUpperCase()+">"==t.toUpperCase()?e:void 0}),i=i.length?i[0].$value():!1):(0==t.indexOf(".")&&(t=t.substring(1,t.length)),n.hasClass(t)?i=e:(i=n.parent(function(e){return e.hasClass(t)?e:void 0}),i=i.length?i[0].$value():!1)),i},useCss3d:function(){if(_htAddPatch.useCss3d&&"function"==typeof _htAddPatch.useCss3d)switch(_htAddPatch.useCss3d()){case-1:return!1;case 1:return!0}var t=!1;if(_htBrowserInfo.chrome&&_htBrowserInfo.version<"25"&&!_htBrowserInfo.bSBrowser)return t;if(_htOsInfo.ios)t=!0;else if(_htBrowserInfo.firefox)t=!0;else if(_htOsInfo.android){var e=navigator.userAgent.match(/\(.*\)/);e instanceof Array&&e.length>0&&(e=e[0]),_htOsInfo.version>="4.1.0"?t=/EK-GN120|SM-G386F/.test(e)?!1:!0:(_htOsInfo.version>="4.0"&&(t=!0),_htOsInfo.version>="4.0.3"&&/SHW-|SHV-|GT-|SCH-|SGH-|SPH-|LG-F160|LG-F100|LG-F180|LG-F200|EK-|IM-A|LG-F240|LG-F260/.test(e)&&!/SHW-M420|SHW-M200|GT-S7562/.test(e)&&(t=!0))}return t},patch:function(t){return _htAddPatch.ver=t,this},_checkPatchVersion:function(){var t=jindo.m.Component.VERSION.split("."),e=t.slice(0,3).join(".");return _htAddPatch.ver>=e?!0:!1},add:function(t){if(this._checkPatchVersion())for(var e in t)_htAddPatch[e]=t[e];return this},getDeviceName:function(){if(_htAddPatch.getDeviceName&&"function"==typeof _htAddPatch.getDeviceName&&_htAddPatch.getDeviceName())return _htAddPatch.getDeviceName();var sUserAgent=navigator.userAgent;for(var i in _htDeviceList)if(eval("/"+_htDeviceList[i].join("|")+"/").test(sUserAgent))return i;var htInfo=jindo.$Agent().os();for(var x in htInfo)if(htInfo[x]===!0&&htInfo.hasOwnProperty(x))return x},useFixed:function(){if(_htAddPatch.useFixed&&"function"==typeof _htAddPatch.useFixed)switch(_htAddPatch.useFixed()){case-1:return!1;case 1:return!0}var t=!1;return(_htBrowserInfo.chrome||_htBrowserInfo.firefox||_htOsInfo.android&&parseInt(_htOsInfo.version,10)>=3||_htOsInfo.ios&&parseInt(_htOsInfo.version,10)>=5||_htOsInfo.mwin&&parseInt(_htOsInfo.version,10)>=8)&&(t=!0),t},useTimingFunction:function(){if(_htAddPatch.useTimingFunction&&"function"==typeof _htAddPatch.useTimingFunction&&_htAddPatch.useTimingFunction())switch(_htAddPatch.useTimingFunction()){case-1:return!1;case 1:return!0}var t=this.useCss3d();return _htOsInfo.android?t=!1:_htOsInfo.ios&&parseInt(_htOsInfo.version,10)>=6&&(t=!1),t},_cacheMaxClientSize:{},_fullSizeCheckElement:null,_allEventStop:function(t,e){this._htEvent||(this._htEvent={}),"detach"==e?(this._htEvent.touchstart.detach(document.body,"touchstart").detach(document.body,"touchmove"),this._htEvent={}):this._htEvent.touchstart||"attach"!=e||(this._htEvent.touchstart=jindo.$Fn(t,this).attach(document.body,"touchstart").attach(document.body,"touchmove"))},_stopDefault:function(t){t.stop()},_hasOrientation:void 0!==window.orientation,_maxClientSize:function(t,e){var i=this.getOsInfo();this._allEventStop(this._stopDefault,"attach"),this._fullSizeCheckElement||(this._fullSizeCheckElement=document.createElement("div"));var n=i.android?500:100;n=e?1:n;var s;this._hasOrientation&&(s=Math.abs(window.orientation/90)%2,n=void 0!==this._cacheMaxClientSize[s]?0:n);var o=this;document.body.scrollTop<=1?(document.body.appendChild(o._fullSizeCheckElement),o._fullSizeCheckElement.style.cssText="position:absolute; top: 0px; width:100%;height:"+parseInt(window.innerHeight+200,10)+"px;",window.scrollTo(0,1),setTimeout(function(){o._checkSize(o._hasOrientation,o._cacheMaxClientSize,s,t,o,n)},n)):(this._fullSizeCheckElement.style.height=window.innerHeight+"px",this._checkSize(this._hasOrientation,this._cacheMaxClientSize,s,t,o,n))},_checkSize:function(t,e,i,n,s,o){var h=this.getOsInfo(),a=this.getBrowserInfo();this._allEventStop(this._stopDefault,"attach");var r;t&&e[i]?r=e[i]:(s._fullSizeCheckElement.style.cssText="position:absolute; top: 0px; width:100%;height:"+window.innerHeight+"px;overflow:hidden",r=a.mobile||h.ipad?{width:window.innerWidth,height:window.innerHeight}:{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight},t&&(e[i]=r)),n.call(s,r);var l=this;this._allEventStop(this._stopDefault,"detach"),0===o?this._fullSizeCheckElement.style.height="0px":setTimeout(function(){l._fullSizeCheckElement.style.height="0px"},o)},hasOffsetBug:function(){if(_htAddPatch.hasOffsetBug&&"function"==typeof _htAddPatch.hasOffsetBug)switch(_htAddPatch.hasOffsetBug()){case-1:return!1;case 1:return!0}var t=!1;return t=_htOsInfo.android?_htBrowserInfo.chrome||_htBrowserInfo.firefox?!1:_htOsInfo.version<"4"?!0:!1:!1},hasClickBug:function(){if(_htAddPatch.hasClickBug&&"function"==typeof _htAddPatch.hasClickBug)switch(_htAddPatch.hasClickBug()){case-1:return!1;case 1:return!0}return _htOsInfo.ios||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0||!1},_getTranslate:function(t,e,i){return i="undefined"==typeof i?!0:i,"translate"+(i?"3d(":"(")+t+","+e+(i?",0)":")")},_toPrefixStr:function(t){return t.length<=0?t:(t=""==this.getCssPrefix()?t.charAt(0).toLowerCase()+t.substr(1):t.charAt(0).toUpperCase()+t.substr(1),this.getCssPrefix()+t)},_hasJindoOffsetBug:function(){return!(jindo.$Element.prototype.offset_get&&-1==jindo.$Element.prototype.offset_get.toString().indexOf("fpSafari"))},_hasKitkatHighlightBug:function(){if(_htAddPatch._hasKitkatHighlightBug&&"function"==typeof _htAddPatch._hasKitkatHighlightBug)switch(_htAddPatch._hasKitkatHighlightBug()){case-1:return!1;case 1:return!0}return _htBrowserInfo.chrome&&!_htBrowserInfo.bSBrowser&&_htBrowserInfo.version<35}};return __M__._isUseFixed=__M__.useFixed,__M__._isUseTimingFunction=__M__.useTimingFunction,__M__._isUseCss3d=__M__.useCss3d,__M__.getCssOffset=__M__.getTranslateOffset,__M__.$init(),__M__}(),"mixin"in jindo.$Jindo||(jindo.$Jindo.mixin=function(t,e){var i={};for(var n in t)i[n]=t[n];for(n in e)e.hasOwnProperty(n)&&"undefined"!=typeof e[n]&&(i[n]=e[n]);return i}),jindo.m.Component=jindo.$Class({_htEventHandler:null,_htOption:null,$init:function(){this._htEventHandler={},this._htOption={},this._htOption._htSetter={},this.constructor.$count=(this.constructor.$count||0)+1},option:function(t,e){switch(typeof t){case"undefined":var i={};for(var n in this._htOption)"htCustomEventHandler"!=n&&"_htSetter"!=n&&(i[n]=this._htOption[n]);return i;case"string":if("undefined"==typeof e)return this._htOption[t];if("htCustomEventHandler"==t){if("undefined"!=typeof this._htOption[t])return this;this.attach(e)}this._htOption[t]=e,"function"==typeof this._htOption._htSetter[t]&&this._htOption._htSetter[t](e);break;case"object":for(var s in t){if("htCustomEventHandler"==s){if("undefined"!=typeof this._htOption[s])continue;this.attach(t[s])}"_htSetter"!==s&&(this._htOption[s]=t[s]),"function"==typeof this._htOption._htSetter[s]&&this._htOption._htSetter[s](t[s])}}return this},optionSetter:function(t,e){switch(typeof t){case"undefined":return this._htOption._htSetter;case"string":if("undefined"==typeof e)return this._htOption._htSetter[t];this._htOption._htSetter[t]=jindo.$Fn(e,this).bind();break;case"object":for(var i in t)this._htOption._htSetter[i]=jindo.$Fn(t[i],this).bind()}return this},fireEvent:function(t,e){e=e||{};var i=this["on"+t],n=this._htEventHandler[t]||[],s="function"==typeof i,o=n.length>0;if(!s&&!o)return!0;n=n.concat(),e.sType=t,"undefined"==typeof e._aExtend&&(e._aExtend=[],e.stop=function(){e._aExtend.length>0&&(e._aExtend[e._aExtend.length-1].bCanceled=!0)}),e._aExtend.push({sType:t,bCanceled:!1});var h,a,r=[e];for(h=2,a=arguments.length;a>h;h++)r.push(arguments[h]);if(s&&i.apply(this,r),o){var l;for(h=0,l;l=n[h];h++)l.apply(this,r)}return!e._aExtend.pop().bCanceled},attach:function(t,e){if(1==arguments.length)return jindo.$H(arguments[0]).forEach(jindo.$Fn(function(t,e){this.attach(e,t)},this).bind()),this;var i=this._htEventHandler[t];return"undefined"==typeof i&&(i=this._htEventHandler[t]=[]),i.push(e),this},detach:function(t,e){if(1==arguments.length)return jindo.$H(arguments[0]).forEach(jindo.$Fn(function(t,e){this.detach(e,t)},this).bind()),this;var i=this._htEventHandler[t];if(i)for(var n,s=0;n=i[s];s++)if(n===e){i=i.splice(s,1);break}return this},detachAll:function(t){var e=this._htEventHandler;if(arguments.length)return"undefined"==typeof e[t]?this:(delete e[t],this);for(var i in e)delete e[i];return this}}),jindo.m.Component.factory=function(t,e){var i,n=[];"undefined"==typeof e&&(e={});for(var s,o=0;s=t[o];o++)i=new this(s,e),n[n.length]=i;return n},jindo.m.Component.getInstance=function(){throw new Error("JC 1.11.0 or JMC 1.13.0 later, getInstance method of Component is not longer supported.")},jindo.m.Component.VERSION="1.16.0",jindo.m.UIComponent=jindo.$Class({$init:function(){this._bIsActivating=!1},isActivating:function(){return this._bIsActivating},activate:function(){return this.isActivating()?this:(this._bIsActivating=!0,arguments.length>0?this._onActivate.apply(this,arguments):this._onActivate(),this)},deactivate:function(){return this.isActivating()?(this._bIsActivating=!1,arguments.length>0?this._onDeactivate.apply(this,arguments):this._onDeactivate(),this):this}}).extend(jindo.m.Component),jindo.m.Accordion=jindo.$Class({$init:function(t,e){var i={bActivateOnload:!0,sClassPrefix:"accordion-",sDirection:"vertical",nDefalutIndex:-1,bUseToggle:!1,sTransitionTimingFunction:"ease",nDuration:500};this.option(i),this.option(e||{}),this._initVar(t),this._setWrapperElement(),this.option("bActivateOnload")&&this.activate(),this._setSize(),this._setDefaultExpand()},_initVar:function(t){this._elContainer="string"==typeof t?jindo.$(t):t,this._aAccordionBlock=jindo.$$("."+this.option("sClassPrefix")+"block",this._elContainer),this._setBlockGpu();var e=jindo.m.getDeviceInfo(),i=parseFloat(e.version,10);if(e.android&&3>i){var n=jindo.$$.getSingle("._accordion_dummy_atag_",this._elContainer);n||(n=jindo.$("<a href='javascript:void(0);' class='_accordion_dummy_atag_'></a>"),n.style.position="absolute",n.style.left="-1000px",n.style.top="-1000px",n.style.width=0,n.style.height=0,jindo.$Element(this._elContainer).append(n))}this._nExpand=-1,this._wfTransitionEnd=jindo.$Fn(this._onTransitionEnd,this).bind()},_setBlockGpu:function(){var t=jindo.m.useCss3d(),e=jindo.m.getCssPrefix();t&&jindo.$A(this._aAccordionBlock).forEach(function(t){jindo.$Element(t).css(e+"Transform","translateZ(0)")},this)},_setWrapperElement:function(){},_onActivate:function(){this._attachEvent()},_onDeactivate:function(){this._detachEvent()},_attachEvent:function(){this._htEvent={},jindo.$A(this._aAccordionBlock).forEach(function(t,e){this._htEvent["click_"+e]={ref:jindo.$Fn(this._onClick,this).attach(this.getHandler(e),"click"),el:this.getHandler(e)}},this)},_detachEvent:function(t){if(t){var e=this._htEvent[t];e.ref.detach(e.el,t.substring(0,t.indexOf("_")))}},_detachEventAll:function(){for(var t in this._htEvent)this._detachEvent(t);this._htEvent=null},_onClick:function(t){t.stop();var e=this._getBlock(t.element),i=e?jindo.$A(this._aAccordionBlock).indexOf(e):null,n=this.getExpandIndex(),s=this.option("bUseToggle");"number"==typeof i&&(i==n?s&&(this.collapse(n),this._nExpand=-1):(this.expand(i),n>-1&&this.collapse(n)))},_setSize:function(){this._htBlockSize={};var t,e;jindo.$A(this._aAccordionBlock).forEach(function(i,n){t=this._getHeaderSize(n),e=this._getBodySize(n),this._htBlockSize[n]={nHeaderSize:t,nBodySize:e},"vertical"==this.option("sDirection")?jindo.$Element(i).height(t):jindo.$Element(i).width(t)},this)},_getHeaderSize:function(t){var e=jindo.$Element(this.getHead(t)),i="vertical"==this.option("sDirection")?e.height():e.width();return i},_getBodySize:function(t){var e=jindo.$Element(this.getBody(t)),i="vertical"==this.option("sDirection")?e.height():e.width();return i},_getSize:function(t){this._htBlockSize&&this._htBlockSize[t]||this._setSize();var e=this._htBlockSize[t].nHeaderSize+this._htBlockSize[t].nBodySize;return e},_setDefaultExpand:function(){var t=this.option("nDefalutIndex");t>-1&&setTimeout(jindo.$Fn(function(){this.expand(t)},this).bind(),100)},getHead:function(t){return jindo.$$.getSingle("dt",this._aAccordionBlock[t])},getBody:function(t){return jindo.$$.getSingle("dd",this._aAccordionBlock[t])},_getBlock:function(t){var e=this.option("sClassPrefix")+"block",i=jindo.m.getClosest(e,t);return i},getHandler:function(t){var e=this.getHead(t);return jindo.$$.getSingle("."+this.option("sClassPrefix")+"handler",e)||e},getExpandIndex:function(){return this._nExpand},expand:function(t){this._elBlock=this._aAccordionBlock[t],"undefined"!=typeof this._elBlock&&this.fireEvent("beforeExpand",{sType:"beforeExpand",elBlock:this._elBlock,nBeforeIndex:this._nExpand,nIndex:t})&&(this._setTransition(this._elBlock,this._getSize(t)),this._nExpand=t,this.fireEvent("expand",{sType:"expand",elBlock:this._elBlock,nIndex:t}))},collapse:function(t){this._elBlock=this._aAccordionBlock[t],"undefined"!=typeof this._elBlock&&this.fireEvent("beforeCollapse",{sType:"beforeCollapse",elBlock:this._elBlock,nIndex:t})&&(this._setTransition(this._elBlock,this._getHeaderSize(t)),this._nExpand==t&&(this._nExpand=-1),this.fireEvent("collapse",{sType:"collapse",elBlock:this._elBlock,nIndex:t}))},collapseAll:function(){var t=this.getExpandIndex();t>-1&&this.collapse(t),this._nExpand=-1},setEffect:function(t){!t.sTransitionTimingFunction||"ease"!=t.sTransitionTimingFunction&&"linear"!=t.sTransitionTimingFunction&&"ease-in"!=t.sTransitionTimingFunction&&"ease-out"!=t.sTransitionTimingFunction&&"ease-in-out"!=t.sTransitionTimingFunction||this.option("sTransitionTimingFunction",t.sTransitionTimingFunction),t.nDuration&&t.nDuration>0&&this.option("nDuration",t.nDuration)},_setTransition:function(t,e,i,n){i=i||this.option("sTransitionTimingFunction"),n=n||this.option("nDuration"),n>0&&this._attachTransitionEnd(t);var s="",o=this.option("sDirection");t.style.webkitTransition="",t.style.mozTransition="","vertical"===o?(s="height "+n+"ms "+i,t.style.webkitTransition=s,t.style.mozTransition=s,t.style.height=e+"px"):"horizontal"===o&&(s="width "+n+"ms "+i,t.style.webkitTransition=s,t.style.mozTransition=s,t.style.width=e+"px"),0===n&&this._onTransitionEnd({srcElement:t})},_attachTransitionEnd:function(t){this._elTransition=t,this._elTransition.addEventListener("webkitTransitionEnd",this._wfTransitionEnd,!1)},_detachTransitionEnd:function(t){t.removeEventListener("webkitTransitionEnd",this._wfTransitionEnd,!1),this._elTransition=null},_onTransitionEnd:function(t){var e=jindo.$$.getSingle("._accordion_dummy_atag_",this._elContainer);e&&e.focus(),this._detachTransitionEnd(t.srcElement)},destroy:function(){this._detachEventAll(),this._elContainer=null,this._aAccordionBlock=null,this._elBlock=null,this._htBlockSize=null,this._nExpand=null}}).extend(jindo.m.UIComponent),jindo.m.AjaxHistory=jindo.$Class({bHashEvent:!1,bPushState:!1,_nIntervalId:0,_htLastState:{},$init:function(t){this.option({nCheckInterval:100,bUseHash:!1}),this.option(t||{})},initialize:function(){this._initVar(),this._attachEvent();var t=this._getHash();return t?(this._htLastState=this._getDecodedData(t),this.fireEvent("change",{bLoad:!0,htHistoryData:this._htLastState})):this.fireEvent("load"),this},_initVar:function(){var t=jindo.m.getDeviceInfo();this.bHashEvent="onhashchange"in window,this.bPushState="undefined"!=typeof window.history&&"undefined"!=typeof window.history.pushState&&"undefined"!=typeof window.history.replaceState&&!((t.iphone||t.ipad)&&parseFloat(t.version,10)<4.3),this._nIntervalId=0,this._oAgent=jindo.$Agent().navigator(),this._bAndroid=t.android,this.option("bUseHash")&&(this.bPushState=!1)},_attachEvent:function(){this._htEvent={},this.bPushState?this._htEvent.popstate={ref:jindo.$Fn(this._onPopState,this).attach(window,"popstate"),el:window}:this.bHashEvent?this._htEvent.hashchange={ref:jindo.$Fn(this._onHashChange,this).attach(window,"hashchange"),el:window}:(clearInterval(this._nIntervalId),this._nIntervalId=setInterval(jindo.$Fn(this._onHashChange,this).bind(),this.option("nCheckInterval")))},_onPopState:function(t){var e=t.$value().state;if(e){var i=this._cloneObject(e);this._compareData(i,this._htLastState)||(this._htLastState=i,this._onChange())}},_onHashChange:function(){var t=this._getDecodedData(this._getHash());this._compareData(t,this._htLastState)||(this._htLastState=t,this._onChange())},_onChange:function(){this.fireEvent("change",{bLoad:!1,htHistoryData:this._htLastState})},addHistory:function(t,e){if("undefined"==typeof e&&(e=!1),t&&"object"==typeof t&&jindo.$H(t).length()>0){var i=this._cloneObject(t);if(this._compareData(i,this._htLastState))return;this._htLastState=i;var n=this._getEncodedData(this._htLastState);if(this.bPushState)e?this._replaceState(this._htLastState):this._pushState(this._htLastState);else{var s=this;this._bAndroid?setTimeout(function(){s._setHash(n)},0):this._setHash(n)}}},_replaceState:function(t){history.replaceState(t,document.title,location.href)},_pushState:function(t){history.pushState(t,document.title,location.href)},_setHash:function(t){location.hash=t},_compareData:function(t,e){if(t&&e){if(jindo.$H(t).length()==jindo.$H(e).length()){for(var i in t)if("object"==typeof t[i]){if(!arguments.callee(t[i],e[i]))return!1}else if(t[i]!=e[i])return!1;return!0}return!1}return!1},_getEncodedData:function(t){return t?encodeURIComponent("object"==typeof JSON&&"function"==typeof JSON.stringify?JSON.stringify(t):jindo.$Json(t).toString()):""},_getDecodedData:function(t){try{if(t){var e=decodeURIComponent(t);return"object"==typeof JSON&&"function"==typeof JSON.parse?JSON.parse(e):jindo.$Json(e).toObject()}}catch(i){}return{}},_cloneObject:function(t){var e,i;return t?(e=jindo.$Json(t).toString(),i=jindo.$Json(e).toObject()):i={},i},_getHash:function(){return this._oAgent.firefox?encodeURIComponent(location.hash.substring(1)):location.hash.substring(1)},_detachEvent:function(){for(var t in this._htEvent){var e=this._htEvent[t];e.ref.detach(e.el,t)}this._htEvent=null},destroy:function(){this._detachEvent(),clearInterval(this._nIntervalId),this._nIntervalId=null}}).extend(jindo.m.Component),jindo.m.Effect=function(t){if(this instanceof arguments.callee)throw new Error("You can't create a instance of this");var e=/^(\-?[0-9\.]+)(%|\w+)?$/,i=/^rgb\(([0-9]+)\s?,\s?([0-9]+)\s?,\s?([0-9]+)\)$/i,n=/^rgba\(([0-9]+)\s?,\s?([0-9]+)\s?,\s?([0-9]+),\s?([0-9\.]+)\)$/i,s=/^hsl\(([0-9\.]+)\s?,\s?([0-9\.]+)%\s?,\s?([0-9\.]+)%\)$/i,o=/^hsla\(([0-9\.]+)\s?,\s?([0-9\.]+)%\s?,\s?([0-9\.]+)%,\s?([0-9\.]+)\)$/i,h=/^#([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,a=/^#([0-9A-F])([0-9A-F])([0-9A-F])$/i,r=function(t){var r,l=t;if(e.test(t))l=parseFloat(t),r=RegExp.$2||"";else if(i.test(t))l={rgb:[parseInt(RegExp.$1,10),parseInt(RegExp.$2,10),parseInt(RegExp.$3,10),1]},r="color";else if(n.test(t))l={rgb:[parseInt(RegExp.$1,10),parseInt(RegExp.$2,10),parseInt(RegExp.$3,10),parseFloat(RegExp.$4)]},r="color";else if(s.test(t))l={hsl:[parseFloat(RegExp.$1),parseFloat(RegExp.$2)/100,parseFloat(RegExp.$3)/100,1]},l.rgb=u.apply(this,l.hsl),r="color";else if(o.test(t))l={hsl:[parseFloat(RegExp.$1),parseFloat(RegExp.$2)/100,parseFloat(RegExp.$3)/100,parseFloat(RegExp.$4)]},l.rgb=u.apply(this,l.hsl),r="color";else{if(!h.test(t=t.replace(a,"#$1$1$2$2$3$3")))throw new Error("unit error ("+t+")");l={rgb:[parseInt(RegExp.$1,16),parseInt(RegExp.$2,16),parseInt(RegExp.$3,16),1]},r="color"}return{nValue:l,sUnit:r}},l=function(t){var e=[];return t.replace(/([^\s]+\([^\)]*\)|[^\s]+)\s?/g,function(t,i){e.push(i)}),e},_=function(t){for(var e=l(t?t+"":"0"),i=[],n=0,s=e.length;s>n;n++)i.push(r(e[n]));return i},c=function(t){return"object"==typeof t?{nValue:t.nValue,sUnit:t.sUnit}:t},u=function(t,e,i,n){t=t%360/60;var s=(1-Math.abs(2*i-1))*e,o=s*(1-Math.abs(t%2-1)),h=0,a=0,r=0;t>=5||1>t?(h=s,r=o):t>=4?(h=o,r=s):t>=3?(a=o,r=s):t>=2?(a=s,r=o):t>=1&&(h=o,a=s);var l=i-s/2;return[Math.round(255*(h+l)),Math.round(255*(a+l)),Math.round(255*(r+l)),n]};return function(e,i){var n,s,o=function(){var t=!1;if(h.start!==e&&(n=_(h.start),e=h.start,t=!0),h.end!==i&&(s=_(h.end),i=h.end,t=!0),t){var o,a,r=Math.max(n.length,s.length);if(n.length!==s.length&&r>1){switch(n.length){case 1:n[1]=c(n[0]);case 2:n[2]=c(n[0]);case 3:n[3]=c(n[1])}switch(s.length){case 1:s[1]=c(s[0]);case 2:s[2]=c(s[0]);case 3:s[3]=c(s[1])}}for(var l=0;r>l;l++)if(o=n[l],a=s[l],0===o.nValue?o.sUnit=a.sUnit:0===a.nValue&&(a.sUnit=o.sUnit),o.sUnit!=a.sUnit)throw new Error("unit error ("+e+" ~ "+i+")")}},h=function(e){var i=[];o();for(var h,a,r,l,_,c,u=0,f=Math.max(n.length,s.length);f>u;u++){h=n[u],a=s[u],r=h.nValue,l=a.nValue,_=h.sUnit;var d=t(e),m=function(t,e,i){return Math.round(1e6*((e-t)*d+t))/1e6+(i||0)};if("color"===_)if(r.hsl&&l.hsl){r=r.hsl,l=l.hsl;var p=Math.round(m(r[0],l[0])),g=100*Math.max(0,Math.min(1,m(r[1],l[1]))),v=100*Math.max(0,Math.min(1,m(r[2],l[2])));c=m(r[3],l[3]),i.push(1===c?"hsl("+[p,g+"%",v+"%"].join(",")+")":"hsla("+[p,g+"%",v+"%",c].join(",")+")")}else{r=r.rgb,l=l.rgb;var E=Math.max(0,Math.min(255,Math.round(m(r[0],l[0])))),b=Math.max(0,Math.min(255,Math.round(m(r[1],l[1])))),x=Math.max(0,Math.min(255,Math.round(m(r[2],l[2]))));if(c=m(r[3],l[3]),1===c){var T=(E<<16|b<<8|x).toString(16).toUpperCase();i.push("#"+Array(7-T.length).join("0")+T)}else i.push("rgba("+[E,b,x,c].join(",")+")")}else i.push(m(r,l,_))}return i.join(" ")};switch(arguments.length){case 0:break;case 1:i=e||"0",e="0",h.setStart=function(t){this.start=t}}return h.start=e,h.end=i,h.effectConstructor=arguments.callee,e=i=null,arguments.length>1&&o(),h}},jindo.m.Effect.linear=jindo.m.Effect(function(t){return t}),jindo.m.Effect.linear.toString=function(){return"linear"},jindo.m.Effect.easeInSine=jindo.m.Effect(function(t){return 1==t?1:-Math.cos(t*(Math.PI/2))+1
}),jindo.m.Effect.easeOutSine=jindo.m.Effect(function(t){return Math.sin(t*(Math.PI/2))}),jindo.m.Effect.easeInOutSine=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeInSine(0,1)(2*t):.5*jindo.m.Effect.easeOutSine(0,1)(2*t-1)+.5}),jindo.m.Effect.easeOutInSine=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeOutSine(0,1)(2*t):.5*jindo.m.Effect.easeInSine(0,1)(2*t-1)+.5}),jindo.m.Effect.easeInQuad=jindo.m.Effect(function(t){return t*t}),jindo.m.Effect.easeOutQuad=jindo.m.Effect(function(t){return-(t*(t-2))}),jindo.m.Effect.easeInOutQuad=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeInQuad(0,1)(2*t):.5*jindo.m.Effect.easeOutQuad(0,1)(2*t-1)+.5}),jindo.m.Effect.easeOutInQuad=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeOutQuad(0,1)(2*t):.5*jindo.m.Effect.easeInQuad(0,1)(2*t-1)+.5}),jindo.m.Effect.easeInCubic=jindo.m.Effect(function(t){return Math.pow(t,3)}),jindo.m.Effect.easeOutCubic=jindo.m.Effect(function(t){return Math.pow(t-1,3)+1}),jindo.m.Effect.easeInOutCubic=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeIn(0,1)(2*t):.5*jindo.m.Effect.easeOut(0,1)(2*t-1)+.5}),jindo.m.Effect.easeOutInCubic=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeOut(0,1)(2*t):.5*jindo.m.Effect.easeIn(0,1)(2*t-1)+.5}),jindo.m.Effect.easeInQuart=jindo.m.Effect(function(t){return Math.pow(t,4)}),jindo.m.Effect.easeOutQuart=jindo.m.Effect(function(t){return-(Math.pow(t-1,4)-1)}),jindo.m.Effect.easeInOutQuart=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeInQuart(0,1)(2*t):.5*jindo.m.Effect.easeOutQuart(0,1)(2*t-1)+.5}),jindo.m.Effect.easeOutInQuart=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeOutQuart(0,1)(2*t):.5*jindo.m.Effect.easeInQuart(0,1)(2*t-1)+.5}),jindo.m.Effect.easeInQuint=jindo.m.Effect(function(t){return Math.pow(t,5)}),jindo.m.Effect.easeOutQuint=jindo.m.Effect(function(t){return Math.pow(t-1,5)+1}),jindo.m.Effect.easeInOutQuint=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeInQuint(0,1)(2*t):.5*jindo.m.Effect.easeOutQuint(0,1)(2*t-1)+.5}),jindo.m.Effect.easeOutInQuint=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeOutQuint(0,1)(2*t):.5*jindo.m.Effect.easeInQuint(0,1)(2*t-1)+.5}),jindo.m.Effect.easeInCircle=jindo.m.Effect(function(t){return-(Math.sqrt(1-t*t)-1)}),jindo.m.Effect.easeOutCircle=jindo.m.Effect(function(t){return Math.sqrt(1-(t-1)*(t-1))}),jindo.m.Effect.easeInOutCircle=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeInCircle(0,1)(2*t):.5*jindo.m.Effect.easeOutCircle(0,1)(2*t-1)+.5}),jindo.m.Effect.easeOutInCircle=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeOutCircle(0,1)(2*t):.5*jindo.m.Effect.easeInCircle(0,1)(2*t-1)+.5}),jindo.m.Effect.easeInBack=jindo.m.Effect(function(t){var e=1.70158;return 1==t?1:t/1*(t/1)*((1+e)*t-e)}),jindo.m.Effect.easeOutBack=jindo.m.Effect(function(t){var e=1.70158;return 0===t?0:(t=t/1-1)*t*((e+1)*t+e)+1}),jindo.m.Effect.easeInOutBack=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeInBack(0,1)(2*t):.5*jindo.m.Effect.easeOutBack(0,1)(2*t-1)+.5}),jindo.m.Effect.easeInElastic=jindo.m.Effect(function(t){var e,i=0,n=0;return 0===t?0:1==(t/=1)?1:(i||(i=.3),!n||1>n?(n=1,e=i/4):e=i/(2*Math.PI)*Math.asin(1/n),-(n*Math.pow(2,10*(t-=1))*Math.sin(2*(t-1)*Math.PI/i)))}),jindo.m.Effect.easeOutElastic=jindo.m.Effect(function(t){var e,i=0,n=0;return 0===t?0:1==(t/=1)?1:(i||(i=.3),!n||1>n?(n=1,e=i/4):e=i/(2*Math.PI)*Math.asin(1/n),n*Math.pow(2,-10*t)*Math.sin(2*(t-e)*Math.PI/i)+1)}),jindo.m.Effect.easeInOutElastic=jindo.m.Effect(function(t){var e,i=0,n=0;return 0===t?0:2==(t/=.5)?1:(i||(i=.3*1.5),!n||1>n?(n=1,e=i/4):e=i/(2*Math.PI)*Math.asin(1/n),1>t?-.5*n*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/i):n*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-e)*Math.PI/i)*.5+1)}),jindo.m.Effect.easeOutBounce=jindo.m.Effect(function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}),jindo.m.Effect.easeInBounce=jindo.m.Effect(function(t){return 1-jindo.m.Effect.easeOutBounce(0,1)(1-t)}),jindo.m.Effect.easeInOutBounce=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeInBounce(0,1)(2*t):.5*jindo.m.Effect.easeOutBounce(0,1)(2*t-1)+.5}),jindo.m.Effect.easeInExpo=jindo.m.Effect(function(t){return 0===t?0:Math.pow(2,10*(t-1))}),jindo.m.Effect.easeOutExpo=jindo.m.Effect(function(t){return 1==t?1:-Math.pow(2,-10*t/1)+1}),jindo.m.Effect.easeInOutExpo=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeInExpo(0,1)(2*t):.5*jindo.m.Effect.easeOutExpo(0,1)(2*t-1)+.5}),jindo.m.Effect.easeOutInExpo=jindo.m.Effect(function(t){return.5>t?.5*jindo.m.Effect.easeOutExpo(0,1)(2*t):.5*jindo.m.Effect.easeInExpo(0,1)(2*t-1)+.5}),jindo.m.Effect._cubicBezier=function(t,e,i,n){return function(s){function o(t){return((c*t+_)*t+l)*t}function h(t){return((d*t+f)*t+u)*t}function a(t){return(3*c*t+2*_)*t+l}function r(t,e){var i,n,s,h,r,l;for(s=t,l=0;8>l;l++){if(h=o(s)-t,Math.abs(h)<e)return s;if(r=a(s),Math.abs(r)<1e-6)break;s-=h/r}if(i=0,n=1,s=t,i>s)return i;if(s>n)return n;for(;n>i;){if(h=o(s),Math.abs(h-t)<e)return s;t>h?i=s:n=s,s=.5*(n-i)+i}return s}var l=3*t,_=3*(i-t)-l,c=1-l-_,u=3*e,f=3*(n-e)-u,d=1-u-f;return h(r(s,.005))}},jindo.m.Effect.cubicBezier=function(t,e,i,n){var s=jindo.m.Effect(jindo.m.Effect._cubicBezier(t,e,i,n)),o="cubic-bezier("+[t,e,i,n].join(",")+")";return s.toString=function(){return o},s},jindo.m.Effect.cubicEase=jindo.m.Effect.cubicBezier(.25,.1,.25,1),jindo.m.Effect.cubicEase.toString=function(){return"ease"},jindo.m.Effect.cubicEaseIn=jindo.m.Effect.cubicBezier(.42,0,1,1),jindo.m.Effect.cubicEaseIn.toString=function(){return"ease-in"},jindo.m.Effect.cubicEaseOut=jindo.m.Effect.cubicBezier(0,0,.58,1),jindo.m.Effect.cubicEaseOut.toString=function(){return"ease-out"},jindo.m.Effect.cubicEaseInOut=jindo.m.Effect.cubicBezier(.42,0,.58,1),jindo.m.Effect.cubicEaseInOut.toString=function(){return"ease-in-out"},jindo.m.Effect.cubicEaseOutIn=jindo.m.Effect.cubicBezier(0,.42,1,.58),jindo.m.Effect.overphase=jindo.m.Effect(function(t){return t/=.652785,(Math.sqrt((2-t)*t)+.1*t).toFixed(5)}),jindo.m.Effect.sinusoidal=jindo.m.Effect(function(t){return-Math.cos(t*Math.PI)/2+.5}),jindo.m.Effect.mirror=jindo.m.Effect(function(t){return jindo.m.Effect.sinusoidal(0,1)(.5>t?2*t:1-2*(t-.5))}),jindo.m.Effect.pulse=function(t){return jindo.m.Effect(function(e){return-Math.cos(e*(t-.5)*2*Math.PI)/2+.5})},jindo.m.Effect.wave=function(t,e){return jindo.m.Effect(function(i){return(e||1)*Math.sin(360*t*i*Math.PI/180).toFixed(5)})},jindo.m.Effect.stepStart=jindo.m.Effect(function(t){return 0===t?0:1}),jindo.m.Effect.stepEnd=jindo.m.Effect(function(t){return 1===t?1:0}),jindo.m.Effect.easeIn=jindo.m.Effect.easeInCubic,jindo.m.Effect.easeOut=jindo.m.Effect.easeOutCubic,jindo.m.Effect.easeInOut=jindo.m.Effect.easeInOutCubic,jindo.m.Effect.easeOutIn=jindo.m.Effect.easeOutInCubic,jindo.m.Effect.bounce=jindo.m.Effect.easeOutBounce,jindo.m.Effect.elastic=jindo.m.Effect.easeInElastic,jindo.m.Morph=jindo.$Class({$init:function(t){this.option({fEffect:jindo.m.Effect.linear,bUseTransition:!0}).option(t);var e=document.body.style;this._bTransitionSupport="transition"in e||"webkitTransition"in e||"MozTransition"in e||"OTransition"in e||"msTransition"in e;var i=jindo.$Agent(),n=i.os(),s=i.navigator();this._bHasTransformRenderBug=n.ios&&5===parseInt(n.version,10)&&s.msafari,this._aQueue=[],this._aIngItem=null,this._oRAF=null,this._bPlaying=null,this._nPtr=0,this._nPausePassed=0,this._aRepeat=[],this._sTransitionEnd="webkitTransition"in e&&"webkitTransitionEnd"||"transition"in e&&"transitionend"||"MozTransition"in e&&"transitionend"||"OTransition"in e&&"oTransitionEnd"||"msTransition"in e&&"MSTransitionEnd"},pushAnimate:function(t,e){if(e&&!(e instanceof Array))throw Error("aLists should be a instance of Array");return e=[].concat(e),e.duration=t,this._aQueue.push(e),this},pushKeyframe:function(t,e){return this._aQueue.push({action:"keyframe",args:{duration:t,keyframe:e}}),this},pushWait:function(){for(var t=0,e=arguments.length;e>t;t++){var i=arguments[t];i instanceof this.constructor?this._aQueue.push(i):this.pushAnimate(i,[])}return this},pushCall:function(t){return this._aQueue.push(t),this},pushRepeatStart:function(t){"undefined"==typeof t&&(t=1);var e="L"+Math.round((new Date).getTime()*Math.random());return this._aRepeat.push(e),this._pushLabel(e,t),this},_pushLabel:function(t,e){return"undefined"==typeof e&&(e=1/0),this._aQueue.push({action:"label",args:{label:t,times:e,loops:0}}),this},pushRepeatEnd:function(){var t=this._aRepeat.pop();return this._aQueue.push({action:"goto",args:{label:t}}),this},_waitMorph:function(t){var e=this;if(!t.isPlaying())return!0;var i=function(){t.detach("end",i).detach("pause",i),e._flushQueue()};return t.attach("end",i).attach("pause",i),!1},_getLabelIndex:function(t){for(var e=null,i=0,n=this._aQueue.length;n>i;i++)if(e=this._aQueue[i],"label"===e.action&&e.args.label===t)return i;return-1},_getRepeatEndIndex:function(t,e){for(var i=null,n=e||0,s=this._aQueue.length;s>n;n++)if(i=this._aQueue[n],"goto"===i.action&&i.args.label===t)return n;return-1},_flushQueue:function(){var t,e,i,n,s,o=this;do{if(t=!1,e=this._aIngItem=this._aQueue[this._nPtr],!e)return this._bPlaying=!1,void(e||this.fireEvent("end"));if(this._nPtr++,e instanceof Function)e.call(this),t=!0;else if(e instanceof this.constructor)t=this._waitMorph(e);else if("number"!=typeof e)if("label"!==e.action)if("goto"!==e.action)if("keyframe"!==e.action){if(s=this._aCompiledItem,n=this._nPausePassed){for(var h=0,a=s.length;a>h;h++)s[h].sTimingFunc="";s.allCSS=!1}else s=this._aCompiledItem=this._compileItem(e);0!==s.length?(t=s.duration<0,t?this._processItem(1,!0):(this._playAnimate(n),this._nPausePassed=0)):setTimeout(function(){o._flushQueue()},s.duration)}else{if(i=e.args.keyframe,n=this._nPausePassed,s=this._aCompiledItem=e.args,t=s.duration<0){this._processKeyframe(1,i);continue}this._playKeyframe(n,i),this._nPausePassed=0}else this._goto(e.args.label),t=!0;else{if(++e.args.loops>e.args.times){var r=this._getRepeatEndIndex(e.args.label,this._nPtr);e.args.loops=0,r>-1&&this._goto(r+1)}t=!0}else setTimeout(function(){o._flushQueue()},e)}while(t)},_playKeyframe:function(t,e){var i=this;this._nStart=(new Date).getTime()-t;var n=this._aCompiledItem,s=n.duration;!function o(){i._oRAF=i._requestAnimationFrame(function(){var t=i._nStart;if(null!==i._oRAF){i._oRAF=null;var n=Math.min(1,Math.max(0,((new Date).getTime()-t)/s));e.frame(n),1>n?o():(i.fireEvent("timerEnd"),i._flushQueue())}})}()},_processKeyframe:function(t,e){e.preprocess().frame(t)},_playAnimate:function(t){var e=this;this._nStart=(new Date).getTime()-t,this._nIng=2,t||this._processItem(0,!0,3,!0);var i=this._aCompiledItem;i.allCSS?this._nIng--:this._animationLoop(!0),function(){var t=e._processItem(1,!0,1).transitionCache;if(!t||0===i.duration)return void(0===--e._nIng&&e._flushQueue());for(var n=null,s=t.length,o=0;s>o;o++){n=t[o];break}var h=function(i){for(var n,s=[];n=t.pop();)n.css(e._getCSSKey("transitionDuration"),"0.0001ms"),s.push(n);t=null,(window.requestAnimationFrame||window.setTimeout)(function(){for(;n=s.pop();)n.css(e._getCSSKey("transitionDuration"),"0"),n.css(e._getCSSKey("transitionProperty"),"none");s=null},0),e.fireEvent("transitionEnd"),0!==--e._nIng||i||e._requestAnimationFrame(function(){e._flushQueue()})};if(!n)return void h();var a=n.$value(),r=function(t){a.removeEventListener(e._sTransitionEnd,e._fpOnTransitionEnd,!0),e._fpOnTransitionEnd=null,h(t===!0)};e._fpOnTransitionEnd=function(t){r(t)},a.addEventListener(e._sTransitionEnd,e._fpOnTransitionEnd,!0)}()},_animationLoop:function(t){var e=this;this._oRAF=this._requestAnimationFrame(function(){var i=e._nStart,n=e._aCompiledItem.duration;if(null!==e._oRAF){e._oRAF=null;var s=Math.min(1,Math.max(0,((new Date).getTime()-i)/n));e._processItem(s,t,2),1>s?e._animationLoop():(e.fireEvent("timerEnd"),0===--e._nIng&&e._flushQueue())}})},_processItem:function(t,e,i,n){var s={normalPropsToPause:[],transitionCache:[]},o=s.normalPropsToPause,h=s.transitionCache,a=this._aCompiledItem,r=a.duration;0===r?r=1:0>r&&(r=0);var l,_,c,u,f,d,m=this._bHasTransformRenderBug;if(i=i||3,this.fireEvent("beforeProgress",{nRate:t})){for(var p,g,v=[],E=0;g=a[E];E++){l=g.oObj,_=g.welObj,c=g.oProps;var b=g.sTimingFunc;b&&1&i&&(_&&_.$value().clientHeight,"@transition"in c||n||("@transitionProperty"in c||_.css(this._getCSSKey("transitionProperty"),"all"),"@transitionDuration"in c||_.css(this._getCSSKey("transitionDuration"),(r/1e3).toFixed(3)+"s"),"@transitionTimingFunction"in c||_.css(this._getCSSKey("transitionTimingFunction"),b)),h.push(_)),p={},v.push(l,p),n&&1===t&&"@transform"in c&&/AppleWebKit\/534\.30/.test(navigator.userAgent)&&(_.css(this._getCSSKey("transform"),""),l.clientHeight);for(var x in c)if(c.hasOwnProperty(x)){if(u=c[x],d=/^@(.*)$/.test(x)&&RegExp.$1,f=b&&d?1:2,!(i&f))continue;if("function"==typeof u)u=u(t);else if(!e)continue;d?(/transition/.test(x)&&(u=this._getCSSVal(u)),m&&"@transform"===x&&("@left"in c||"@top"in c)&&l.clientHeight,_.css(this._getCSSKey(d),u)):n?o.push([l,x,u]):l[x]=u,p[x]=u}}return this.fireEvent("progress",{aLists:v,nRate:t}),s}},_compileItem:function(t){var e=0==t.length,i=[];i.duration=t.duration;for(var n,s,o,h,a,r,l,_,c=this.option("fEffect"),u=0,f=t.length;f>u;u+=2){var d=null;n=t[u],s=jindo.$Element(n),o=t[u+1],r={};var m=!1;for(var p in o)if(o.hasOwnProperty(p)){var g,v;if(a=o[p],l=/^@(.*)$/.test(p),_=RegExp.$1,a instanceof Array?(h=a[0],a=a[1]):h=l?s.css(this._getCSSKey(_)):n[p],h=0===h?h:h||"",g="function"==typeof a?a.effectConstructor:c,v=this._getEffectCSS(g)||"",/^@transform$/.test(p)){if("function"==typeof a&&(a=a.end),r[p]=this._getTransformFunction(h,a,g,n),jindo.m){var E=jindo.m.getOsInfo();(/matrix/.test(h)||/matrix/.test(a))&&E.android&&parseFloat(E.version)<3&&(v="")}}else if("function"==typeof a)"setStart"in a&&a.setStart(h),r[p]=a;else try{r[p]=g(h,a)}catch(b){if(!/^unit error/.test(b.message))throw b;r[p]=a}var x=r[p];if("function"==typeof x&&x(0)===x(1)){delete r[p];continue}l?null===d?d=v:d!==v&&(d=""):v="",e=e||!v,m=!0}s.visible()||(d=null,e=!0),m&&i.push({oObj:n,welObj:s,oProps:r,sTimingFunc:d})}return i.allCSS=!e,i},play:function(){return this._bPlaying||(this._bPlaying=!0,this.fireEvent("play"),this._flushQueue()),this},reset:function(){return this._goto(0)},pause:function(t){if(!this._bPlaying)return this;this._cancelAnimationFrame(this._oRAF),this._oRAF=null;var e=this._aCompiledItem,i=e.duration;if("undefined"==typeof t){var n=(new Date).getTime()-this._nStart;t=n/i}t=Math.max(0,Math.min(1,t));var s=null;if(e.keyframe?this._processKeyframe(t,e.keyframe):s=this._processItem(t,!0,3,!0).normalPropsToPause,this._nPtr--,this._nPausePassed=Math.round(i*t),this._fpOnTransitionEnd&&this._fpOnTransitionEnd(!0),s)for(var o=0,h=s.length;h>o;o++){var a=s[o];a[0][a[1]]=a[2]}return this._bPlaying=!1,this.fireEvent("pause"),this},_goto:function(t){var e=t;if("number"==typeof t)t=t||0;else if(t=this._getLabelIndex(e),-1===t)throw"Label not found";return this._nPtr=t,this._nPausePassed=0,this},isPlaying:function(){return this._bPlaying||!1},clear:function(){return this._aQueue.length=0,this._aRepeat.length=0,this._nPtr=0,this._nPausePassed=0,this},_getPointer:function(){return this._nPtr},_getEffectCSS:function(t){var e=this.option("bUseTransition")&&this._bTransitionSupport;if(!e)return null;if(this._htEventHandler.progress&&this._htEventHandler.progress.length||this._htEventHandler.beforeProgress&&this._htEventHandler.beforeProgress.length)return null;if(t.hasOwnProperty("toString"))return t.toString();switch(t){case jindo.m.Effect.linear:return"linear";case jindo.m.Effect.cubicEase:return"ease";case jindo.m.Effect.cubicEaseIn:return"ease-in";case jindo.m.Effect.cubicEaseOut:return"ease-out";case jindo.m.Effect.cubicEaseInOut:return"ease-in-out";default:if(t.cubicBezier&&Math.max.apply(Math,t.cubicBezier)<=1&&Math.min.apply(Math,t.cubicBezier)>=0)return"cubic-bezier("+t.cubicBezier.join(",")+")"}return null},_requestAnimationFrame:function(t){var e,i=this,n=function(){e===i._oLastRAF&&(i._oLastRAF=null,t())};return e=window.requestAnimationFrame?requestAnimationFrame(n):setTimeout(n,1e3/60),this._oLastRAF=e},_cancelAnimationFrame:function(t){var e;return e=window.cancelAnimationFrame?cancelAnimationFrame(t):clearTimeout(t),this._oLastRAF=null,e},_oProperPrefix:{},_getProperPrefix:function(t){var e=this._oProperPrefix;if(t in e)return e[t];for(var i,n,s=document.body.style,o=["webkit","","Moz","O","ms"],h=function(t){return t.toUpperCase()},a=0,r=o.length;r>a;a++)if(i=o[a],n=i+(i?t.replace(/^[a-z]/,h):t),n in s)return e[t]=i;return e[t]=""},_getCSSKey:function(t){var e=this,i="",n=t.replace(/^(\-(webkit|o|moz|ms)\-)?([a-z]+)/,function(t,n,s,o){return i=s||e._getProperPrefix(o),i&&(o=o.replace(/^[a-z]/,function(t){return t.toUpperCase()})),o}).replace(/\-(\w)/g,function(t,e){return e.toUpperCase()});return({o:"O",moz:"Moz",webkit:"Webkit"}[i]||i)+n},_getCSSVal:function(t){var e=this,i=t.replace(/(^|\s)(\-(webkit|moz|o|ms)\-)?([a-z]+)/g,function(t,i,n,s,o){return s=s||e._getProperPrefix(o),i+(s&&"-"+s+"-")+o});return i},_getMatrixObj:function(t,e){t=t.replace(/\b(translate(3d)?)\(\s*([^,]+)\s*,\s*([^,\)]+)/g,function(t,i,n,s,o){return/%$/.test(s)&&(s=parseFloat(s)/100*e.offsetWidth+"px"),/%$/.test(o)&&(o=parseFloat(o)/100*e.offsetHeight+"px"),i+"("+s+","+o}).replace(/\b(translate([XY]))\(\s*([^\)]+)/g,function(t,i,n,s){return"X"===n&&/%$/.test(s)?s=parseFloat(s)/100*e.offsetWidth+"px":"Y"===n&&/%$/.test(s)&&(s=parseFloat(s)/100*e.offsetHeight+"px"),i+"("+s});var i,n=window.WebKitCSSMatrix||window.MSCSSMatrix||window.OCSSMatrix||window.MozCSSMatrix||window.CSSMatrix;if(n)i=function(t){return new n(t).toString()};else{var s="M"+Math.round((new Date).getTime()*Math.random()),o=jindo.$Agent().navigator(),h=o.firefox?"moz":o.ie?"ms":"o",a="-"+h+"-transform",r=document.createElement("style");r.type="text/css";var l=document.getElementsByTagName("html")[0];l.insertBefore(r,l.firstChild);var _=r.sheet||r.styleSheet,c=document.createElement("div");c.id=s;var u=window.getComputedStyle(c,null);i=function(t){var e=null;return _.insertRule("#"+s+" { "+a+": "+t+" !important; }",0),document.body.insertBefore(c,document.body.firstChild),e=u.getPropertyValue(a),document.body.removeChild(c),_.deleteRule(0),e}}var f=i(t);return/^([^\(]+)\(([^\)]*)\)$/.test(f)?{key:RegExp.$1,val:RegExp.$2.replace(/\s*,\s*/g," ")}:{key:"matrix",val:"1 0 0 1 0 0"}},_convertMatrix3d:function(t){if("matrix3d"===t.key)return t;var e=t.val.split(" ");return t.key="matrix3d",e.splice(2,0,"0"),e.splice(3,0,"0"),e.splice(6,0,"0"),e.splice(7,0,"0"),e.splice(8,0,"0"),e.splice(9,0,"0"),e.splice(10,0,"1"),e.splice(11,0,"0"),e.splice(14,0,"0"),e.splice(15,0,"1"),t.val=e.join(" "),t},_parseTransformText:function(t){t=t||"";var e={};return t.replace(/([\w\-]+)\(([^\)]*)\)/g,function(t,i,n){var s=n.split(/\s*,\s*/);switch(i){case"translate3d":case"scale3d":case"skew3d":i=i.replace(/3d$/,""),e[i+"Z"]=s[2];case"translate":case"scale":case"skew":e[i+"X"]=s[0],"undefined"==typeof s[1]?"scale"===i&&(e[i+"Y"]=s[0]):e[i+"Y"]=s[1];break;default:e[i]=s.join(",")}}),e},_getTransformFunction:function(t,e,i,n){var s,o,h;if(/matrix/.test(t+e))return o=this._getMatrixObj(t,n),h=this._getMatrixObj(e,n),o.key!==h.key&&(o=this._convertMatrix3d(o),h=this._convertMatrix3d(h)),i=i(o.val,h.val),function(t){return 1===t?e:o.key+"("+i(t).replace(/ /g,",")+")"};o=this._parseTransformText(t),h=this._parseTransformText(e);var a={};for(s in o)o.hasOwnProperty(s)&&(a[s]=i(o[s],h[s]||(/^scale/.test(s)?1:0)));for(s in h)!h.hasOwnProperty(s)||s in o||(a[s]=i(o[s]||(/^scale/.test(s)?1:0),h[s]));var r=function(t){var e=[];for(var i in a)a.hasOwnProperty(i)&&e.push(i+"("+a[i](t)+")");return e.join(" ")};return r}}).extend(jindo.m.Component),jindo.m.Animation=jindo.$Class({$init:function(t){this.option({bUseH:!0,bHasOffsetBug:!1,fEffect:jindo.m.Effect.cubicEaseOut,bUseCss3d:jindo.m.useCss3d(),bUseTimingFunction:jindo.m.useTimingFunction()}),this.option(t||{}),this._initVar()},_initVar:function(){this.sCssPrefix=jindo.m.getCssPrefix(),this._htTans=this.option("bUseCss3d")?{open:"3d(",end:",0)"}:{open:"(",end:")"},this._oMorph=new jindo.m.Morph({fEffect:this.option("fEffect"),bUseTransition:this.option("bUseTimingFunction")}).attach({end:jindo.$Fn(function(t){this._oMorph.clear(),this.fireEvent("end",t)},this).bind()}),this._welTarget=null},setStyle:function(){},move:function(){},getTarget:function(t){return t?this._welTarget:this._welTarget.$value()},p:function(t){return jindo.m._toPrefixStr(t)},getTranslate:function(t,e){return"translate"+this._htTans.open+t+","+e+this._htTans.end},toCss:function(t){var e,i,n,s={};for(e in t)i=e,/^@/.test(e)&&(e.match(/^(@\w)/),n=RegExp.$1,/transition|transform/.test(i)?(i=""==this.sCssPrefix?e.replace(n,n.toLowerCase()):e.replace(n,n.toUpperCase()),i=i.replace("@",this.sCssPrefix)):i=i.replace("@","")),s[i]=t[e];return s},isPlaying:function(){return this._oMorph.isPlaying()},stop:function(t){"undefined"==typeof t&&(t=0),this._oMorph.pause(t).clear()},destroy:function(){this._oMorph.detachAll("end")}}).extend(jindo.m.UIComponent),jindo.m.Transition=jindo.$Class({_aTaskQueue:null,$init:function(t){this.option({sTransitionTimingFunction:"ease-in-out",bUseTimingFunction:jindo.m._isUseTimingFunction()}),this.option(t||{});var e=this;this._oMorph=new jindo.m.Morph({bUseTransition:this._htOption.bUseTimingFunction,fEffect:this._getEffect(this.option("sTransitionTimingFunction"))}).attach({end:function(){e._onTransitionEnd()},pause:function(){e._onTransitionEnd()}}),this._aTaskQueue=[],this._bIsPlaying=!1,this._initVar()},_initVar:function(){this._aTaskQueue=[],this._bIsPlaying=!1,this._sCssPrefix=jindo.m.getCssPrefix(),this._aBeforeStatus=[],this._sCssPrefix.length>0&&(this._sCssPrefix="-"+this._sCssPrefix.toLowerCase()+"-"),this._htCurrentTask=null},_getEffect:function(t){var e=jindo.m.Effect.cubicEaseInOut;switch(t){case"linear":e=jindo.m.Effect.linear;break;case"ease":e=jindo.m.Effect.cubicEase;break;case"ease-in":e=jindo.m.Effect.cubicEaseIn;break;case"ease-out":e=jindo.m.Effect.cubicEaseOut;break;case"ease-in-out":e=jindo.m.Effect.cubicEaseInOut}return e},start:function(){this._oMorph.isPlaying()||this.isPlaying()||!this.isExistTask()||this._prepareTask()},isPlaying:function(){return this._bIsPlaying},isExistTask:function(){if(!this._aTaskQueue)return!1;var t=this._aTaskQueue.length,e=t>0?!0:!1;return e},queue:function(t,e,i){var n={sType:"style",sTaskName:"",elTarget:t,nDuration:e};n.htDefault={},n.htStyle=i.htStyle||{},n.htTransform=i.htTransform||{},n.sTaskName=i.sTaskName||null,n.fCallback=i.fCallback;var s={};return s=this._getTranslateStyle(i.htStyle||{},s),s=this._getTranslateStyle(i.htTransform||{},s),this._pushTask(e,t,s,n),this},_getTranslateStyle:function(t,e){var i=e||{};for(var n in t)i["@"+n]=t[n];return i},stop:function(t){this.isPlaying()&&("undefined"==typeof t&&(t=!0),this._fireCustomEvent("stop",{element:this._htCurrentTask.elTarget,sTaskName:this._htCurrentTask.sTaskName,nDuration:this._htCurrentTask.nDuration})&&this._stopTransition(t))},clear:function(t){this.stop(t),this._aTaskQueue=[]},_resume:function(){this._htCurrentTask&&this._doTask()},_stopTransition:function(t){var e=0;if(t)e=1;else{var i=this._getBeforeStatusElement(this._elCurrent);i>-1&&jindo.$Element(this._elCurrent).attr("style",this._aBeforeStatus[i].style)}this._oMorph.pause(e),this._bIsPlaying=!1,this._htCurrentTask=null},_prepareTask:function(){var t=this._popTask();return null!==t&&t?(this._htCurrentTask=t,void this._resume()):(this._oMorph.clear(),void(this._bIsPlaying=!1))},_pushTask:function(t,e,i,n){this._aTaskQueue.push({nDuration:t,elTarget:e,htTask:i,sTaskName:n.sTaskName,fCallback:n.fCallback})},_popTask:function(){if(!this.isExistTask())return null;var t=this._aTaskQueue.shift();return t?t:null},_doTask:function(){if(this._htCurrentTask){if(this._bIsPlaying=!0,!this._fireCustomEvent("start",{element:this._htCurrentTask.elTarget,sTaskName:this._htCurrentTask.sTaskName,nDuration:this._htCurrentTask.nDuration}))return;this._oMorph.pushAnimate(0==this._htCurrentTask.nDuration?-1:this._htCurrentTask.nDuration,[this._htCurrentTask.elTarget,this._htCurrentTask.htTask]),this._oMorph.play();var t=this._htCurrentTask.elTarget,e=jindo.$Element(t);this._elCurrent=t,this._setBeforeStatus(e)}},_setBeforeStatus:function(t){var e=this._getBeforeStatusElement(t.$value());e>-1?this._aBeforeStatus[e].style=t.attr("style"):this._aBeforeStatus.push({el:t.$value(),style:t.attr("style")})},_getBeforeStatusElement:function(t){for(var e=-1,i=0,n=this._aBeforeStatus.length;n>i;i++)if(this._aBeforeStatus[i].el===t){e=i;break}return e},_fireCustomEvent:function(t,e){return this.fireEvent(t,e)},_onTransitionEnd:function(){var t=this;if(this._htCurrentTask){var e=typeof this._htCurrentTask.fCallback;if("function"==e)t._htCurrentTask.fCallback();else if("object"==e){var i,n=jindo.$Element(this._htCurrentTask.elTarget);for(i in this._htCurrentTask.fCallback.htTransform){var s=this._htCurrentTask.fCallback.htTransform[i];if("transform"==i){var o=this._sCssPrefix+i,h=n.$value().style[o];h.length>0&&(s=s)}n.$value().style[this._sCssPrefix+i]=s}for(i in this._htCurrentTask.fCallback.htStyle)n.css(i,this._htCurrentTask.fCallback.htStyle[i])}this._fireCustomEvent("end",{element:this._htCurrentTask.elTarget,sTaskName:this._htCurrentTask.sTaskName,nDuration:this._htCurrentTask.nDuration}),setTimeout(function(){t._prepareTask()},10)}},destroy:function(){for(var t in this._htWElement)this._htWElement[t]=null;this._htWElement=null,this._aTaskQueue=null,this._bIsPlaying=null,this._sCssPrefix=null,this._aBeforeStatus=null,this._htCurrentTask=null}}).extend(jindo.m.Component),jindo.m.Calendar=jindo.$Class({$init:function(t,e){var i=new Date;this.option({bActivateOnload:!0,sClassPrefix:"calendar-",bUseEffect:!1,nEffectDuration:200,sTitleFormat:"yyyy.mm",aMonthTitle:["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],htToday:{nYear:i.getFullYear(),nMonth:i.getMonth()+1,nDate:i.getDate()}}),this.option(e||{}),this._initVar(),this._setWrapperElement(t),this.option("bActivateOnload")&&this.activate()},_initVar:function(){this._bVisible=!1,this._oToday=this.option("htToday"),this._oViewDate=null,this._nSelectDate=-1,this._sClassPrefix=this.option("sClassPrefix"),this._aDayInfo=[],this.option("bUseEffect")&&(this._oTransition=new jindo.m.Transition)},_setWrapperElement:function(t){this._htWElement={},this._htWElement.calendarBase=jindo.$Element(t),this._htWElement.calendarBase.css({position:"absolute",display:"none"});for(var e=this._htWElement.calendarBase.queryAll("th"),i=0,n=e.length;n>i;i++)this._aDayInfo.push(jindo.$Element(e[i]).text());this._htWElement.calendarTitle=jindo.$Element(this._htWElement.calendarBase.query("."+this._sClassPrefix+"title")),this._htWElement.calendarTable=jindo.$Element(this._htWElement.calendarBase.query("table")),this._htWElement.calendarTbody=jindo.$Element(this._htWElement.calendarTable.query("tbody")),this._htWElement.yearPreBtn=jindo.$Element(this._htWElement.calendarBase.query("."+this._sClassPrefix+"btn-prev-year")),this._htWElement.preBtn=jindo.$Element(this._htWElement.calendarBase.query("."+this._sClassPrefix+"btn-prev-mon")),this._htWElement.yearNextBtn=jindo.$Element(this._htWElement.calendarBase.query("."+this._sClassPrefix+"btn-next-year")),this._htWElement.nextBtn=jindo.$Element(this._htWElement.calendarBase.query("."+this._sClassPrefix+"btn-next-mon")),this._htWElement.closeBtn=jindo.$Element(this._htWElement.calendarBase.query("."+this._sClassPrefix+"btn-close"))},getCalendarBase:function(){return this._htWElement.calendarBase},_onActivate:function(){this._attachEvent()},_onDeactivate:function(){this._detachEvent()},_attachEvent:function(){this._htEvent={},this._htWElement.yearPreBtn&&(this._htEvent.pre_year_click={el:this._htWElement.yearPreBtn,ref:jindo.$Fn(this._onYearPre,this).attach(this._htWElement.yearPreBtn,"click")}),this._htWElement.preBtn&&(this._htEvent.pre_click={el:this._htWElement.preBtn,ref:jindo.$Fn(this._onPre,this).attach(this._htWElement.preBtn,"click")}),this._htWElement.yearNextBtn&&(this._htEvent.next_year_click={el:this._htWElement.yearNextBtn,ref:jindo.$Fn(this._onYearNext,this).attach(this._htWElement.yearNextBtn,"click")}),this._htWElement.nextBtn&&(this._htEvent.next_click={el:this._htWElement.nextBtn,ref:jindo.$Fn(this._onNext,this).attach(this._htWElement.nextBtn,"click")}),this._htWElement.closeBtn&&(this._htEvent.close_click={el:this._htWElement.closeBtn,ref:jindo.$Fn(this._onClose,this).attach(this._htWElement.closeBtn,"click")}),this._htEvent.table_click={el:this._htWElement.calendarTable,ref:jindo.$Fn(this._onDate,this).attach(this._htWElement.calendarTable,"click")}},_onPre:function(t){this._moveDate("pre"),t.stop()},_onYearPre:function(t){this._moveDate("preYear"),t.stop()},_onNext:function(t){this._moveDate("next"),t.stop()},_onYearNext:function(t){this._moveDate("nextYear"),t.stop()},_onClose:function(t){this.hide(),t.stop()},_onDate:function(t){if(this._bVisible){var e=jindo.$Element(t.element),i="";if("td"!=e.$value().tagName&&(e=e.parent(function(t){return"td"==t.$value().tagName.toLowerCase()})[0]),e&&(i=e.attr("data-cal-date"),i&&8==i.length)){if(this._nSelectDate=1*i,!this.fireEvent("beforeSelectDate",{wel:e,oSelectDate:this.getSelectDate()}))return!1;this.fireEvent("selectDate",{wel:e,oSelectDate:this.getSelectDate()})&&(e.addClass(this._sClassPrefix+"selected"),this.hide())}return t.stopDefault(),!1}},_moveDate:function(t){if(this._bVisible){var e={nYear:this._oViewDate.nYear,nMonth:this._oViewDate.nMonth,nDate:this._oViewDate.nDate},i={nDate:this._oViewDate.nDate};switch(t){case"pre":i.nYear=1==e.nMonth?e.nYear-1:e.nYear,i.nMonth=1==e.nMonth?12:e.nMonth-1;break;case"preYear":i.nYear=e.nYear-1,i.nMonth=e.nMonth;break;case"next":i.nYear=12==e.nMonth?e.nYear+1:e.nYear,i.nMonth=12==e.nMonth?1:e.nMonth+1;break;case"nextYear":i.nYear=e.nYear+1,i.nMonth=e.nMonth}this.fireEvent("beforeMoveDate",{oOldDate:e,oMoveDate:i})&&(this._drawCalendar(i),this.fireEvent("moveDate",{oOldDate:e,oMoveDate:i}))}},_detachEvent:function(){for(var t in this._htEvent){var e=this._htEvent[t];e.ref.detach(e.el,t.substring(t.lastIndexOf("_")+1))}this._htEvent=null},show:function(t,e){if(t||(t=this._oToday),this.fireEvent("beforeShowCalendar",{oDrawDate:t})){this._nSelectDate=this._getDateNumber(e),(this._getDateNumber(t,"YearMonth")!=this._oViewDate?this._getDateNumber(this._oViewDate,"YearMonth"):0)?this._drawCalendar(t):this._drawDayColor();var i=this;this._htWElement.calendarBase.show(),this.option("bUseEffect")?(this._htWElement.calendarBase.opacity(0),this._oTransition.clear(),this._oTransition.queue(this._htWElement.calendarBase.$value(),this.option("nEffectDuration"),{htStyle:{opacity:"0.9999"},fCallback:function(){i._afterShow(t)}}),setTimeout(function(){i._oTransition.start()},10)):this._afterShow(t)}},_afterShow:function(t){this._htWElement.calendarBase.css("zIndex","1000"),this._bVisible=!0,this.fireEvent("showCalendar",{oDrawDate:t})},hide:function(){var t=this.getSelectDate();if(this.fireEvent("beforeHideCalendar",{oSelectDate:t}))if(this._bVisible=!1,this.option("bUseEffect")){var e=this;this._oTransition.queue(this._htWElement.calendarBase.$value(),this.option("nEffectDuration"),{htStyle:{opacity:0},fCallback:function(){e._afterHide(t)}}),e._oTransition.start()}else this._afterHide(t)},_afterHide:function(t){this._htWElement.calendarBase.css("zIndex","0").hide(),this.fireEvent("hideCalendar",{oSelectDate:t})},isVisible:function(){return this._bVisible},getSelectDate:function(){var t,e;return this._nSelectDate&&this._nSelectDate>0&&(t=this._nSelectDate+"",e={nYear:Number(t.substr(0,4)),nMonth:Number(t.substr(4,2)),nDate:Number(t.substr(6,4))}),e},_drawCalendar:function(t){this._oViewDate={nYear:t.nYear,nMonth:t.nMonth,nDate:t.nDate},this._drawCalendarHeaderHtml(),this._drawCalendarBodyHtml(),this._drawDayColor()
},_drawDayColor:function(){for(var t,e=this._getDateNumber(this._oToday),i=this._nSelectDate,n=this._htWElement.calendarTbody.queryAll("td"),s=!0,o=0,h=n.length;h>o;o++){t=jindo.$Element(n[o]);var a=1*t.attr("data-cal-date");this._htSelectableData&&(s=this.isBetween(this.getStringToObject(a),this._htSelectableData.htDateFrom,this._htSelectableData.htDateTo)),s||t.addClass(this._sClassPrefix+"unselectable"),t.hasClass(this._sClassPrefix+"prev-mon")||t.hasClass(this._sClassPrefix+"next-mon")||(t[e===a?"addClass":"removeClass"](this._sClassPrefix+"today"),t[i>-1&&i===a?"addClass":"removeClass"](this._sClassPrefix+"selected"),e==i&&t.removeClass(this._sClassPrefix+"today"))}},_drawCalendarHeaderHtml:function(){var t=this._oViewDate.nYear,e=this._oViewDate.nMonth;10>e&&(e=("0"+1*e).toString()),this._htWElement.calendarTitle&&this._htWElement.calendarTitle.text(this.option("sTitleFormat").replace(/yyyy/g,t).replace(/y/g,t.toString().substr(2,2)).replace(/mm/g,e).replace(/m/g,1*e).replace(/M/g,this.option("aMonthTitle")[e-1]))},_drawCalendarBodyHtml:function(){var t,e,i,n,s,o,h,a,r,l=[],_=!1;for(t=new Date(this._oViewDate.nYear,this._oViewDate.nMonth,0),i=t.getTime(),t=new Date(this._oViewDate.nYear,this._oViewDate.nMonth-1,1),e=t.getTime();0!==t.getDay();)t.setDate(t.getDate()-1);for(;!_;){l.push("<tr>");for(var c=0;7>c;c++)n=t.getTime(),s=[],o="",h=t.getDay(),a=!1,r=!1,e>n&&(s.push(this._sClassPrefix+"prev-mon"),a=!0),n>i&&(s.push(this._sClassPrefix+"next-mon"),r=!0),0===h&&s.push(this._sClassPrefix+"sun"),6===h&&s.push(this._sClassPrefix+"sat"),o=1e4*t.getFullYear()+100*(t.getMonth()+1)+t.getDate(),l.push('<td class="'+s.join(" ")+'" data-cal-date="'+o+'"><a href="javascript:void(0)" class="'+this._sClassPrefix+'date">'+t.getDate()+"</a></td>"),t.setDate(t.getDate()+1),i===n&&(_=!0);l.push("</tr>")}this._htWElement.calendarTbody.html(l.join(""))},isBetween:function(t,e,i){return this.getDateObject(t).getTime()>this.getDateObject(i).getTime()||this.getDateObject(t).getTime()<this.getDateObject(e).getTime()?!1:!0},setSelectableDate:function(t,e){this._htSelectableData={htDateFrom:t,htDateTo:e}},getDayName:function(t){return this._aDayInfo[t]},getDateObject:function(t){return 3==arguments.length?new Date(arguments[0],arguments[1]-1,arguments[2]):new Date(t.nYear,t.nMonth-1,t.nDate)},getStringToObject:function(t){return t+="",{nYear:parseInt(t.substring(0,4),10),nMonth:parseInt(t.substring(4,6),10),nDate:parseInt(t.substring(6,8),10)}},_getDateNumber:function(t,e){var i;return i="YearMonth"===e?t?1e4*t.nYear+100*t.nMonth:-1:t?1e4*t.nYear+100*t.nMonth+t.nDate:-1},destroy:function(){this.deactivate(),this._bVisible=!1,this._oToday=null,this._oViewDate=null,this._nSelectDate=-1,this._sClassPrefix=null,this.option("bUseEffect")&&(this._oTransition.destroy(),this._oTransition=null),this._aDayInfo=null}}).extend(jindo.m.UIComponent),jindo.m.CheckRadioCore=jindo.$Class({$init:function(){},_initVar:function(t,e){this._sFormType=t,this._sFormFixClass=e,this._sUnitClass=this.option("sClassPrefix")+e+"-unit",this._sOnClass=this.option("sClassPrefix")+e+"-on",this._sFormClass=this.option("sClassPrefix")+e,this._sDisableClass=this.option("sClassPrefix")+e+"-disable";var i=jindo.m.getDeviceInfo();this._bMobile=i.iphone||i.ipad||i.android,this._sClickEvent=this._bMobile?"touchend":"click",this._bMove=!1},_setWrapperElement:function(t,e){this._htWElement={},this._aWElUnitList=[],this._aWElFormList=[],t="string"==typeof t?jindo.$(t):t,this._htWElement.base=jindo.$Element(t),this._htWElement.container=jindo.$Element(jindo.$$.getSingle("."+e+this._sFormFixClass+"-cont",t));for(var i=this._htWElement.container.queryAll("."+this._sUnitClass),n=this._htWElement.container.queryAll("."+this._sFormClass),s=0;s<i.length;s++)this._aWElUnitList[s]=jindo.$Element(i[s]),this._aWElFormList[s]=jindo.$Element(n[s])},_onActivate:function(){this._attachEvent()},_onDeactivate:function(){this._detachEvent()},_attachEvent:function(){if(this._htEvent={},this._htEvent.form_touchmove={el:this._htWElement.container.$value(),ref:jindo.$Fn(this._onTouchMove,this).attach(this._htWElement.container.$value(),"touchmove")},this._htEvent["form_"+this._sClickEvent]={el:this._htWElement.container.$value(),ref:jindo.$Fn(this._onCheck,this).attach(this._htWElement.container.$value(),this._sClickEvent)},this._bMobile)for(var t=0;t<this._aWElFormList.length;t++)this._htEvent["form"+t+"_click"]={el:this._aWElFormList[t].$value(),ref:jindo.$Fn(this._onFormClick,this).attach(this._aWElFormList[t].$value(),"click")}},_detachEvent:function(){for(var t in this._htEvent){var e=this._htEvent[t];e.ref.detach(e.el,t.substring(t.lastIndexOf("_")+1))}this._htEvent=null},_onTouchMove:function(){this._bMove=!0},_onFormClick:function(t){var e=this._sUnitClass,i=jindo.$Element(t.element);i=i.parent(function(t){return t.hasClass(e)})[0];var n=t.element.checked,s=i.attr("data-cb-checked"),o=s&&"on"==s?!0:!1;n!=o&&(t.element.checked=o)},_onCheck:function(t){if(t.stopDefault(),t.element&&!this._bMove){var e=jindo.m.getNodeElement(t.element),i=jindo.$Element(e),n=this._sUnitClass,s=e.tagName.toLowerCase(),o=e.getAttribute("type");if(o=o?o:"",this._htWElement.container.isParentOf(i)&&!i.hasClass(n))i=i.parent(function(t){return t.hasClass(n)})[0];else if(i.$value()===this._htWElement.container.$value())return!1;if(i.hasClass(this._sDisableClass))return!1;var h=!1;"input"==s&&o.toLowerCase()==this._sFormType&&(h=!0),this._afterCheck(i,h)}this._bMove=!1},_afterCheck:function(){},_getFormIdx:function(t){var e=[],i=[],n=(this._sUnitClass,this._sFormClass,jindo.$A(this._aWElUnitList)),s=jindo.$A(this._aWElFormList);if(t instanceof Array)i=t;else if("object"==typeof t)i.push(t);else if(!t||null===t)for(var o=this._aWElUnitList.length,h=0;o>h;h++)e.push(h);return i.length>0&&(n.forEach(function(t,n){for(var s=0;s<i.length;s++)i[s]===t.$value()&&e.push(n)}),i.length>e.length&&s.forEach(function(t,n){for(var s=0;s<i.length;s++)i[s]===t.$value()&&e.push(n)})),e},_useSettingForm:function(t,e){for(var i=this._getFormIdx(t),n=[],s=[],o=0;o<i.length;o++)this._setUsedForm(e,this._aWElFormList[i[o]].$value(),this._aWElUnitList[i[o]]),n[o]=this._aWElFormList[i[o]].$value(),s[o]=this._aWElUnitList[i[o]].$value();return{aFormList:n,aUnitList:s}},_setUsedForm:function(t,e,i){t?(i.removeClass(this._sDisableClass),e.disabled=!1):(i.addClass(this._sDisableClass),e.disabled=!0)},destroy:function(){this.deactivate();for(var t in this._htWElement)this._htWElement[t]=null;this._htWElement=null,this._sUnitClass=null,this._sOnClass=null,this._sFormClass=null,this._sDisableClass=null,this._aWElUnitList=null,this._aWElFormList=null}}).extend(jindo.m.UIComponent),jindo.m.CheckBox=jindo.$Class({$init:function(t,e){this.option({sClassPrefix:"fcb-",sType:"v",bActivateOnload:!0,sUncheckBgColor:"transparent"}),this.option(e||{}),this._initVar(),this._setWrapperElement(t,this.option("sClassPrefix")),this._initCheckLoad(),this.option("bActivateOnload")&&this.activate()},_initVar:function(){this.$super._initVar("checkbox","checkbox")},_initCheckLoad:function(){for(var t,e,i=this._htWElement.container.queryAll("."+this._sUnitClass),n=0;n<i.length;n++)t=jindo.$Element(i[n]),e=jindo.$$.getSingle("input[type=checkbox]",t.$value()),this._setChecked(e.checked,e,t);t=e=null},_afterCheck:function(t){var e=jindo.$$.getSingle("."+this._sFormClass,t.$value()),i=t.attr("data-cb-checked"),n=i&&"on"==i?!1:!0;e.checked=n,this._setChecked(n,e,t)},_setChecked:function(t,e,i){var n="unchecked",s=this.option("sCheckBgColor");t?(i.addClass(this._sOnClass),i.attr("data-cb-checked","on"),n="checked"):(s=s?this.option("sUncheckBgColor"):null,i.removeClass(this._sOnClass),i.attr("data-cb-checked","off")),this.fireEvent(n,{elCheckBoxUnit:i.$value(),elCheckBox:e})},getCheckedValue:function(){for(var t=[],e=this._aWElFormList,i=null,n=0;n<e.length;n++)i=e[n].$value(),!i.disabled&&i.checked&&t.push(i.value);return t},setCheckedBox:function(t,e){for(var i=this._getFormIdx(e),n=null,s=0;s<i.length;s++)n=this._aWElFormList[i[s]].$value(),n.disabled||(n.checked=t,this._setChecked(t,n,this._aWElUnitList[i[s]]))},enable:function(t){var e=this._useSettingForm(t,!0);this.fireEvent("enable",{aCheckBoxList:e.aFormList,aCheckBoxUnitList:e.aUnitList})},disable:function(t){var e=this._useSettingForm(t,!1);this.fireEvent("disable",{aCheckBoxList:e.aFormList,aCheckBoxUnitList:e.aUnitList})},geElementtByIndex:function(t){return{elCheckBox:this._aWElFormList[t].$value(),elCheckBoxUnit:this._aWElUnitList[t].$value()}},destroy:function(){this.$super.destroy()}}).extend(jindo.m.CheckRadioCore),jindo.m.Flicking=jindo.$Class({$init:function(t,e){this.option({bHorizontal:!0,nDefaultIndex:0,sClassPrefix:"flick-",sContentClass:"ct",nDuration:100,nFlickThreshold:40,bUseCircular:!1,sAnimation:"slide",nFlickDistanceOffset:null,bAutoResize:!0,nBounceDuration:100,bSetNextPanelPos:!1,bUseCss3d:jindo.m.useCss3d(),bUseTimingFunction:jindo.m.useTimingFunction(),bUseTranslate:!0,bActivateOnload:!0,bUseDiagonalTouch:!1,nDefaultScale:.94,nZIndex:2e3}),this.option(e||{}),this._initVar(t),this.option("bActivateOnload")&&this.activate()},$static:{_htAnimation:{flip:"_FlipFlicking_","circular-flip":"_FlipFlicking_",alignFlip:"_AlignFlipFlicking_","circular-alignFlip":"_AlignFlipFlicking_","circular-slide":"SlideFlicking",slide:"SlideFlicking","circular-cover":"CoverFlicking",cover:"CoverFlicking"}},_initVar:function(t){this._el=jindo.$(t),this._oFlickingImpl=null,this._isSwipeType=/slide|cover/.test(this.option("sAnimation"))?!0:!1},_createFlicking:function(){var t=this.option("sAnimation");this.option("bUseCircular")&&(t="circular-"+t);try{var e=this.option();e.bActivateOnload=!1,this._oFlickingImpl=new jindo.m[jindo.m.Flicking._htAnimation[t]](this._el,e)}catch(i){console.error("_createFlicking ERROR ! "+i)}},refresh:function(t,e,i){this._oFlickingImpl&&(this._isSwipeType?(this._oFlickingImpl.resize(),this._oFlickingImpl.refresh(t,i,!0)):this._oFlickingImpl.refresh(t,e,i))},getIndexByElement:function(t){return this._oFlickingImpl?this._isSwipeType?this._oFlickingImpl._getIndexByElement(t):this._oFlickingImpl.getIndexByElement(t):-1},getElement:function(){return this._oFlickingImpl?this._oFlickingImpl.getElement():null},getContentElement:function(){return this.getElement()},getContentIndex:function(){return this._oFlickingImpl?this._oFlickingImpl.getContentIndex():null},getNextElement:function(){return this._oFlickingImpl?this._oFlickingImpl.getNextElement():null},getPrevElement:function(){return this._oFlickingImpl?this._oFlickingImpl.getPrevElement():null},getTotalContents:function(){return this._oFlickingImpl?this._oFlickingImpl.getTotalContents():null},getTotalPanels:function(){return this._oFlickingImpl?this._oFlickingImpl.getTotalPanels():null},getPanels:function(){return this._oFlickingImpl?this._oFlickingImpl._htWElement.aPanel:null},getPrevIndex:function(){return this._oFlickingImpl?this._oFlickingImpl.getPrevIndex():null},getNextIndex:function(){return this._oFlickingImpl?this._oFlickingImpl.getNextIndex():null},moveNext:function(t){this.isActivating()&&this._oFlickingImpl&&this._oFlickingImpl.moveNext(t)},movePrev:function(t){this.isActivating()&&this._oFlickingImpl&&this._oFlickingImpl.movePrev(t)},moveTo:function(t,e,i){"undefined"!=typeof t&&t!=this.getContentIndex()&&(0>t||t>=this.getTotalContents()||this._oFlickingImpl&&(this._isSwipeType?this._oFlickingImpl._moveTo(t,{duration:"undefined"==typeof e?0:e,fireEvent:i,fireMoveEvent:!0}):this._oFlickingImpl.moveTo(t,e,i)))},isAnimating:function(){return this._oFlickingImpl?this._isSwipeType?this._oFlickingImpl.isPlaying():this._oFlickingImpl._doFlicking:void 0},_onActivate:function(){this._oFlickingImpl||this._createFlicking(),this._oFlickingImpl&&!this._oFlickingImpl.isActivating()&&(this._oFlickingImpl.activate(),this._attachEvent(),this._isSwipeType||this.refresh(this.getContentIndex(),!0,!1))},_onDeactivate:function(){this._oFlickingImpl.deactivate(),this._detachEvent()},_attachEvent:function(){if(this._oFlickingImpl){var t=this;this._oFlickingImpl.attach({touchStart:function(e){t.fireEvent("touchStart",e)||e.stop()},touchMove:function(e){t.fireEvent("touchMove",e)},touchEnd:function(e){t.fireEvent("touchEnd",e)},beforeFlicking:function(e){t.fireEvent("beforeFlicking",e)||e.stop()},afterFlicking:function(e){t.fireEvent("afterFlicking",e)},beforeMove:function(e){t.fireEvent("beforeMove",e)||e.stop()},move:function(e){t.fireEvent("move",e)},scroll:function(){t.fireEvent("scroll")},beforeRestore:function(e){t.fireEvent("beforeRestore",e)||e.stop()},restore:function(e){t.fireEvent("restore",e)},rotate:function(e){t.fireEvent("rotate",e)}})}},_detachEvent:function(){this._oFlickingImpl&&this._oFlickingImpl.detachAll()},destroy:function(){this.deactivate(),this._el=null,this._oFlickingImpl=null,this._isSwipeType=!1}}).extend(jindo.m.UIComponent),jindo.m.Touch=jindo.$Class({$init:function(t,e){this._el=jindo.$Element(t).$value();var i={nMomentumDuration:350,nMoveThreshold:7,nSlopeThreshold:25,nLongTapDuration:1e3,nDoubleTapDuration:400,nTapThreshold:6,nPinchThreshold:.1,nRotateThreshold:5,bActivateOnload:!0,bUseAutoDirection:!1,nUseDiagonal:0,bVertical:!0,bHorizental:!1};this.option(i),this.option(e||{}),this.option("nUseDiagonal")>0&&this.option({bVertical:!0,bHorizental:!0}),this._initVariable(),this._initTouchEventName(),this._initPreventSystemEvent(),this._setSlope(),this.option("bActivateOnload")&&this.activate()},$static:{MOVETYPE:{0:"hScroll",1:"vScroll",2:"dScroll",3:"tap",4:"longTap",5:"doubleTap",6:"pinch",7:"rotate",8:"pinch-rotate"}},_initTouchEventName:function(){"ontouchstart"in window?(this._htEventName.start="touchstart",this._htEventName.move="touchmove",this._htEventName.end="touchend",this._htEventName.cancel="touchcancel",this._hasTouchEvent=!0):window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0&&(this._htEventName.start="MSPointerDown",this._htEventName.move="MSPointerMove",this._htEventName.end="MSPointerUp",this._htEventName.cancel="MSPointerCancel",this._hasTouchEvent=!1)},_initPreventSystemEvent:function(){if(this._el.style&&"undefined"!=typeof this._el.style.msTouchAction){var t="none";this.option("bHorizental")&&!this.option("bVertical")&&(t="pan-x"),this.option("bVertical")&&!this.option("bHorizental")&&(t="pan-y"),this._el.style.msTouchAction=t}},_preventSystemEvent:function(){var t=this.nMoveType;switch(t){case 0:this.option("bHorizental")||this.option("bUseAutoDirection");break;case 1:this.option("bVertical")||this.option("bUseAutoDirection");break;case 2:this.option("bUseAutoDirection")||this.option("bVertical")||this.option("bHorizental")}return!0},_initVariable:function(){this._htEventName={start:"mousedown",move:"mousemove",end:"mouseup",cancel:null},this._hasTouchEvent=!1,this._radianToDegree=180/Math.PI,this._htMoveInfo={nStartX:0,nStartY:0,nBeforeX:0,nBeforeY:0,nStartTime:0,nBeforeTime:0,nStartDistance:0,nBeforeDistance:0,nStartAngle:0,nLastAngle:0,aPos:[]},this.htEndInfo={nX:0,nY:0},this.bStart=!1,this.bMove=!1,this.nMoveType=-1,this._nStartMoveType=-1,this._nVSlope=0,this._nHSlope=0,this.bSetSlope=!1},_attachEvents:function(){this._htEvent={};this._hasTouchEvent;this._htEvent[this._htEventName.start]={fn:jindo.$Fn(this._onStart,this).bind(),el:this._el},this._htEvent[this._htEventName.move]={fn:jindo.$Fn(this._onMove,this).bind(),el:this._el},this._htEvent[this._htEventName.end]={fn:jindo.$Fn(this._onEnd,this).bind(),el:this._el},this._htEvent.rotate=jindo.$Fn(this._onResize,this).bind(),jindo.m.bindRotate(this._htEvent.rotate),this._htEventName.cancel&&(this._htEvent[this._htEventName.cancel]={fn:jindo.$Fn(this._onCancel,this).bind(),el:this._el});for(var t in this._htEvent)this._htEvent[t].fn&&(this._htEvent[t].ref=this._attachFakeJindo(this._htEvent[t].el,this._htEvent[t].fn,t))},_attachFakeJindo:function(t,e,i){var n=+jindo.$Jindo().version.replace(/[a-z.]/gi,""),s=null;return s=230>n&&"undefined"!=typeof _notSupport?_notSupport.$Fn(e).attach(t,i):jindo.$Fn(e).attach(t,i)},_detachEvents:function(){for(var t in this._htEvent){var e=this._htEvent[t];e.ref&&e.ref.detach(e.el,t)}jindo.m.unbindRotate(this._htEvent.rotate),this._htEvent=null},_onCancel:function(t){this._onEnd(t)},_onStart:function(t){this._resetTouchInfo();var e=this._getTouchInfo(t),i={element:e[0].el,nX:e[0].nX,nY:e[0].nY,oEvent:t};this._fireCustomEvent("touchStart",i)&&(this.bStart=!0,this._updateTouchInfo(e,"start"),this._startLongTapTimer(e,t))},_onMove:function(t){if(this.bStart){this.bMove=!0;var e=this._getTouchInfo(t);if(1===e.length){if(this.nMoveType<0||3==this.nMoveType||4==this.nMoveType){var i=this._getMoveType(e);(4!=this.nMoveType||3!=i)&&(2!=this.option("nUseDiagonal")||0!=i&&1!=i?this.nMoveType=this._nStartMoveType=i:(this._nStartMoveType=i,this.nMoveType=2))}}else 8!==this.nMoveType&&(this.nMoveType=this._nStartMoveType=this._getMoveType(e));var n=this._getCustomEventParam(e,!1,t);3!=this.nMoveType&&this._deleteLongTapTimer();var s=0;if(s=Math.abs(0==this.nMoveType?n.nDistanceX:1==this.nMoveType?n.nDistanceY:Math.sqrt(Math.pow(n.nDistanceX,2)+Math.pow(n.nDistanceY,2))),!(s<this.option("nMoveThreshold")||s<this.option("nSlopeThreshold"))||!(this.nMoveType<0||this.nMoveType>2)){this._updateTouchInfo(e,"move"),n.sMoveTypeAgree=!1;var o=n.sMoveType,h=(Math.abs(n.nVectorX),this.option("bHorizental")&&o==jindo.m.Touch.MOVETYPE[0]),a=this.option("bVertical")&&o==jindo.m.Touch.MOVETYPE[1],r=1==this.option("nUseDiagonal")&&o==jindo.m.Touch.MOVETYPE[2],l=2==this.option("nUseDiagonal");return(h||a||r||l)&&(n.sMoveTypeAgree=!0),this.fireEvent("touchMove",n)?void 0:void(this.bStart=!1)}}},_onEnd:function(t){if(this.bStart){var e=this;if(this._deleteLongTapTimer(),this.bMove||4==this.nMoveType||(this.nMoveType=3),!(this.nMoveType<0)){var i=this._getTouchInfo(t);this._isDblTap(i[0].nX,i[0].nY,i[0].nTime)&&(clearTimeout(this._nTapTimer),this._nTapTimer=-1,this.nMoveType=5),this._updateTouchInfo(i,"end");var n=this._getCustomEventParam(i,!0,t),s=n.sMoveType;"undefined"!=typeof this._htEventHandler[jindo.m.Touch.MOVETYPE[5]]&&this._htEventHandler[jindo.m.Touch.MOVETYPE[5]].length>0&&3==this.nMoveType?this._nTapTimer=setTimeout(function(){e._fireCustomEvent(s,n),e.fireEvent("touchEnd",n),delete e._nTapTimer},this.option("nDoubleTapDuration")):(this.fireEvent("touchEnd",n),4!=this.nMoveType&&(8===this.nMoveType?(n.sMoveType=jindo.m.Touch.MOVETYPE[6],this._fireCustomEvent(jindo.m.Touch.MOVETYPE[6],n),n.sMoveType=jindo.m.Touch.MOVETYPE[7],this._fireCustomEvent(jindo.m.Touch.MOVETYPE[7],n)):setTimeout(function(){e._fireCustomEvent(s,n)},0))),this._updateTouchEndInfo(i),this._resetTouchInfo()}}},_fireCustomEvent:function(t,e){return this.fireEvent(t,e)},_getCustomEventParam:function(t,e,i){var n=this._htMoveInfo.aPos[this._htMoveInfo.aPos.length>0&&!e?this._htMoveInfo.aPos.length-1:0],s=jindo.m.Touch.MOVETYPE[this.nMoveType],o=jindo.m.Touch.MOVETYPE[this._nStartMoveType],h=t[0].nTime-this._htMoveInfo.nStartTime,a=0,r=0,l=0,_=0,c=0,u=0,f=0,d=0,m=1===this.nMoveType?0:t[0].nX-this._htMoveInfo.nStartX,p=0===this.nMoveType?0:t[0].nY-this._htMoveInfo.nStartY,g=1===this.nMoveType?0:t[0].nX-n.nX,v=0===this.nMoveType?0:t[0].nY-n.nY,E=t[0].nTime-n.nTime,b={element:t[0].el,nX:t[0].nX,nY:t[0].nY,nVectorX:t[0].nX-this._htMoveInfo.nBeforeX,nVectorY:t[0].nY-this._htMoveInfo.nBeforeY,nDistanceX:m,nDistanceY:p,sMoveType:s,sStartMoveType:o,nStartX:this._htMoveInfo.nStartX,nStartY:this._htMoveInfo.nStartY,nStartTimeStamp:this._htMoveInfo.nStartTime,htMomentum:{nDistanceX:g,nDistanceY:v,nDuration:E},oEvent:i||{}};if((t.length>1||this.nMoveType>=6)&&(b.nScale=this._getScale(t),b.nRotation=this._getRotation(t),null===b.nScale&&(b.nScale=this._htMoveInfo.nBeforeScale),null===b.nRotation&&(b.nRotation=this._htMoveInfo.nBeforeRotation)),t.length>=1){b.aX=[],b.aY=[],b.aElement=[];for(var x=0,T=t.length;T>x;x++)b.aX.push(t[x].nX),b.aY.push(t[x].nY),b.aElement.push(t[x].el)}return e&&((0==this.nMoveType||1==this.nMoveType||2==this.nMoveType)&&(h<=this.option("nMomentumDuration"),h<=this.option("nMomentumDuration")&&(l=Math.abs(m)/h,a=l*l/2,_=Math.abs(p)/h,r=_*_/2),E<=this.option("nMomentumDuration")&&(f=Math.abs(g)/E,c=f*f/2,d=Math.abs(v)/E,u=d*d/2)),b.nMomentumX=a,b.nMomentumY=r,b.nSpeedX=l,b.nSpeedY=_,b.nDuration=h,b.htMomentum.nMomentumX=c,b.htMomentum.nMomentumY=u,b.htMomentum.nSpeedX=f,b.htMomentum.nSpeedY=d),b},_updateTouchEndInfo:function(t){this.htEndInfo={element:t[0].el,time:t[0].nTime,movetype:this.nMoveType,nX:t[0].nX,nY:t[0].nY}},_deleteLongTapTimer:function(){"undefined"!=typeof this._nLongTapTimer&&(clearTimeout(this._nLongTapTimer),delete this._nLongTapTimer)},_startLongTapTimer:function(t,e){var i=this;"undefined"!=typeof this._htEventHandler[jindo.m.Touch.MOVETYPE[4]]&&this._htEventHandler[jindo.m.Touch.MOVETYPE[4]].length>0&&(i._nLongTapTimer=setTimeout(function(){i.fireEvent("longTap",{element:t[0].el,oEvent:e,nX:t[0].nX,nY:t[0].nY}),i.nMoveType=4},i.option("nLongTapDuration")))},_onResize:function(){this._setSlope()},_isDblTap:function(t,e){if("undefined"!=typeof this._nTapTimer&&3==this.nMoveType){var i=this.option("nTapThreshold");if(Math.abs(this.htEndInfo.nX-t)<=i&&Math.abs(this.htEndInfo.nY-e)<=i)return!0}return!1},_setSlope:function(){this.bSetSlope||(this._nHSlope=1*(window.innerHeight/2/window.innerWidth).toFixed(2),this._nVSlope=1*(window.innerHeight/(window.innerWidth/2)).toFixed(2))},setSlope:function(t,e){this._nHSlope=e,this._nVSlope=t,this.bSetSlope=!0},getSlope:function(){return{nVSlope:this._nVSlope,nHSlope:this._nHSlope}},_resetTouchInfo:function(){for(var t in this._htMoveInfo)"aPos"!=t?this._htMoveInfo[t]=0:this._htMoveInfo.aPos.length=0;this._deleteLongTapTimer(),this.bStart=!1,this.bMove=!1,this.nMoveType=-1,this._nStartMoveType=-1},_updateTouchInfo:function(t,e){"end"==e?(this.htEndInfo={nX:t[0].nX,nY:t[0].nY},this._htMoveInfo.aPos.length>3&&this._htMoveInfo.aPos.pop()):("start"==e?(this._htMoveInfo.nStartX=t[0].nX,this._htMoveInfo.nStartY=t[0].nY,this._htMoveInfo.nStartTime=t[0].nTime):this._htMoveInfo.nBeforeTime=t[0].nTime,this._htMoveInfo.nBeforeX=t[0].nX,this._htMoveInfo.nBeforeY=t[0].nY,this._htMoveInfo.aPos.push({nX:t[0].nX,nY:t[0].nY,nTime:t[0].nTime}),this._htMoveInfo.aPos.length>5&&this._htMoveInfo.aPos.shift())},_getMoveTypeBySingle:function(t,e){var i=this.nMoveType,n=Math.abs(this._htMoveInfo.nStartX-t),s=Math.abs(this._htMoveInfo.nStartY-e),o=n+s,h=this.option("nTapThreshold");if(i=h>=n&&h>=s?3:-1,this.option("nSlopeThreshold")<=o){var a=parseFloat((s/n).toFixed(2),10);i=-1===this._nHSlope&&-1===this._nVSlope&&this.option("nUseDiagonal")>0?2:a<=this._nHSlope?0:a>=this._nVSlope?1:this.option("nUseDiagonal")>1?2:2}return i},_getMoveTypeByMulti:function(){var t=-1;return(6===this.nMoveType||Math.abs(1-this._htMoveInfo.nBeforeScale)>=this.option("nPinchThreshold"))&&(t=6),(7===this.nMoveType||Math.abs(0-this._htMoveInfo.nBeforeRotation)>=this.option("nRotateThreshold"))&&(t=6===t?8:7),-1===t?this.nMoveType:t},_getScale:function(t){var e=-1,i=this._getDistance(t);return 0>=i?null:(0===this._htMoveInfo.nStartDistance?(e=1,this._htMoveInfo.nStartDistance=i):e=i/this._htMoveInfo.nStartDistance,this._htMoveInfo.nBeforeScale=e,e)},_getRotation:function(t){var e=-1,i=this._getAngle(t);return null===i?null:(0===this._htMoveInfo.nStartAngle?(this._htMoveInfo.nStartAngle=i,e=0):e=i-this._htMoveInfo.nStartAngle,this._htMoveInfo.nLastAngle=i,this._htMoveInfo.nBeforeRotation=e,e)},_getMoveType:function(t){var e=this.nMoveType;return 1===t.length?e=this._getMoveTypeBySingle(t[0].nX,t[0].nY):2===t.length&&(e=this._getMoveTypeByMulti(t)),e},_getDistance:function(t){return 1===t.length?-1:Math.sqrt(Math.pow(Math.abs(t[0].nX-t[1].nX),2)+Math.pow(Math.abs(t[0].nY-t[1].nY),2))},_getAngle:function(t){if(1===t.length)return null;var e=t[0].nX-t[1].nX,i=t[0].nY-t[1].nY,n=Math.atan2(i,e)*this._radianToDegree;if(null!==this._htMoveInfo.nLastAngle){var s=Math.abs(this._htMoveInfo.nLastAngle-n),o=n+360,h=n-360;Math.abs(o-this._htMoveInfo.nLastAngle)<s?n=o:Math.abs(h-this._htMoveInfo.nLastAngle)<s&&(n=h)}return n},_getTouchInfo:function(t){var e=[],i=t.$value().timeStamp,n=null;if(this._hasTouchEvent){n="touchend"===t.type||"touchcancel"===t.type?t.$value().changedTouches:t.$value().targetTouches||t.$value().changedTouches;for(var s=0,o=n.length;o>s;s++)e.push({el:jindo.m.getNodeElement(n[s].target),nX:n[s].pageX,nY:n[s].pageY,nTime:i})}else e.push({el:t.element,nX:t.pos().pageX,nY:t.pos().pageY,nTime:i});return e},getBaseElement:function(){return this._el},_onDeactivate:function(){this._detachEvents()},_onActivate:function(){this._attachEvents()},destroy:function(){var t;this.deactivate(),this._el=null;for(t in this._htMoveInfo)this._htMoveInfo[t]=null;this._htMoveInfo=null;for(t in this.htEndInfo)this.htEndInfo[t]=null;this.htEndInfo=null,this.bStart=null,this.bMove=null,this.nMoveType=null,this._nStartMoveType=null,this._nVSlope=null,this._nHSlope=null,this.bSetSlope=null}}).extend(jindo.m.UIComponent),jindo.m.SwipeCommon=jindo.$Class({$init:function(){this.option({bActivateOnload:!0,bUseHighlight:!0,bUseDiagonalTouch:!0,bUseMomentum:!0,nDeceleration:6e-4,bAutoResize:!0,fEffect:jindo.m.Effect.cubicEaseOut,bUseCss3d:jindo.m.useCss3d(),bUseTimingFunction:jindo.m.useTimingFunction(),nZIndex:2e3})},_getAnimationOption:function(t){return jindo.$Jindo.mixin({bUseH:this._bUseH,bHasOffsetBug:this._hasOffsetBug(),fEffect:this.option("fEffect"),bUseCss3d:this.option("bUseCss3d"),bUseTimingFunction:this.option("bUseTimingFunction")},t||{})},_initVar:function(){this._htWElement={},this._bUseH=!1,this._bUseV=!1,this._nX=0,this._nY=0,this._bUseDiagonalTouch=this.option("bUseDiagonalTouch"),this._bClickBug=jindo.m.hasClickBug(),this._htOffsetBug={hasBug:jindo.m.hasOffsetBug()&&this.option("bUseHighlight"),timer:-1,elDummyTag:null},this._htSize={viewWidth:0,viewHeight:0,contWidth:0,contHeight:0,maxX:0,maxY:0},this._isStop=!1,this._oTouch=null,this._oAnimation=null},_setWrapperElement:function(t){this._htWElement.view=jindo.$Element(t),this._htWElement.base=jindo.$Element(this._htWElement.view.query("."+this.option("sClassPrefix")+"base")),this._htWElement.container=this._htWElement.base?this._htWElement.base.query("."+this.option("sClassPrefix")+"container"):this._htWElement.view.query("."+this.option("sClassPrefix")+"container")||this._htWElement.view.first(),this._htWElement.container=jindo.$Element(this._htWElement.container),this._htWElement.view.css({overflow:"hidden",zIndex:this.option("nZIndex")}),this._htWElement.base&&this._htWElement.base.css({position:"relavite"}),this._htWElement.container.css({left:"0px",top:"0px"}),this._createOffsetBugDummyTag()},_onActivate:function(){this._oTouch||(this._oTouch=new jindo.m.Touch(this._htWElement.view.$value(),{nMoveThreshold:0,nUseDiagonal:0,bVertical:this.bUseH,bHorizental:!this.bUseH,nMomentumDuration:200,nTapThreshold:1,nSlopeThreshold:5,nEndEventThreshold:jindo.m.getDeviceInfo().win8?100:0,bActivateOnload:!1})),this._attachEvent(),this._attachAniEvent(),this._oTouch.activate()},_onDeactivate:function(){this._detachEvent(),this._detachAniEvent(),this._oTouch.deactivate(),this._oAnimation&&this._oAnimation.deactivate()},_attachEvent:function(){this._htEvent={},this._htEvent.touchStart=jindo.$Fn(this._onStart,this).bind(),this._htEvent.touchMove=jindo.$Fn(this._onMove,this).bind(),this._htEvent.touchEnd=jindo.$Fn(this._onEnd,this).bind(),this._oTouch.attach({touchStart:this._htEvent.touchStart,touchMove:this._htEvent.touchMove,touchEnd:this._htEvent.touchEnd}),this.option("bAutoResize")&&(this._htEvent.resize=jindo.$Fn(this._onResize,this).bind(),jindo.m.bindRotate(this._htEvent.resize),jindo.m.bindPageshow(this._htEvent.resize))},_detachEvent:function(){this._oTouch.detachAll(),this.option("bAutoResize")&&(jindo.m.unbindRotate(this._htEvent.resize),jindo.m.unbindPageshow(this._htEvent.resize))},_getX:function(t){return t>=0?0:t<=this._htSize.maxX?this._htSize.maxX:t},_getY:function(t){return t>=0?0:t<=this._htSize.maxY?this._htSize.maxY:t},_attachAniEvent:function(){this._oAnimation&&(this._htEvent.endAni=jindo.$Fn(this._onEndAniImpl,this).bind(),this._oAnimation.attach({end:this._htEvent.endAni}))},_detachAniEvent:function(){this._oAnimation&&this._oAnimation.detachAll()},set:function(){var t=Array.prototype.slice.apply(arguments);return t.length>=1&&(this._oAnimation=t.shift(),this._oAnimation.setStyle(t),this._attachAniEvent()),this._oAnimation},getAnimation:function(){return this._oAnimation},isPlaying:function(){return this._oAnimation?this._oAnimation.isPlaying():!1},isAnimating:this.isPlaying,refresh:function(){},resize:function(){var t=this._htWElement.view,e=this._htWElement.container,i=parseInt(t.css("borderLeftWidth"),10),n=parseInt(t.css("borderRightWidth"),10),s=parseInt(t.css("borderTopWidth"),10),o=parseInt(t.css("borderBottomWidth"),10);i=isNaN(i)?0:i,n=isNaN(n)?0:n,s=isNaN(s)?0:s,o=isNaN(o)?0:o,this._htSize.viewWidth=t.width()-i-n,this._htSize.viewHeight=t.height()-s-o,this._htSize.contWidth=e.width(),this._htSize.contHeight=e.height()},_calcMomentum:function(t,e,i,n,s,o){var h=this.option("nDeceleration"),a=i/h,r=0,l=0;return t>0&&a>n?(l=o/(6/(a/e*h)),n+=l,e=e*n/a,a=n):0>t&&a>s&&(l=o/(6/(a/e*h)),s+=l,e=e*s/a,a=s),a*=0>t?-1:1,r=e/h,{nDist:a,nTime:Math.round(r)}},_onStart:function(t){return this.isPlaying()?void t.oEvent.stop():(this._clearOffsetBug(),void(this.fireEvent("beforeTouchStart",t)?(this._isStop=!1,this._startImpl(t),this.fireEvent("touchStart",jindo.$Jindo.mixin(t,{}))||t.stop()):t.stop()))},_onMove:function(t){if(this._clearOffsetBug(),this._bClickBug&&this._htWElement.container.css("pointerEvents","none"),this.fireEvent("beforeTouchMove",t)){var e=this._preventSystemEvent(t);e&&!this.isPlaying()&&this._moveImpl(t),e||this.fireEvent("scroll");var i=jindo.$Jindo.mixin(t,{});i.bPreventDefaultEvent=e,this.fireEvent("touchMove",i)||t.stop()}else t.stop()},_onEnd:function(t){this.isPlaying()||(this._isStop||this._clearOffsetBug(),this.fireEvent("beforeTouchEnd",t)?(t.sMoveType===jindo.m.MOVETYPE[3]||t.sMoveType===jindo.m.MOVETYPE[4]||t.sMoveType===jindo.m.MOVETYPE[5]?this._isStop?t.oEvent.stop(jindo.$Event.CANCEL_ALL):this._tapImpl&&this._tapImpl():this._endImpl(t),this.fireEvent("touchEnd",jindo.$Jindo.mixin(t,{}))||t.stop()):t.stop(),this._bClickBug&&this._htWElement.container.css("pointerEvents","auto"))},_preventSystemEvent:function(t){var e=t.oEvent;return t.sMoveType===jindo.m.MOVETYPE[0]?this._bUseH?(e.stop(),!0):!1:t.sMoveType===jindo.m.MOVETYPE[1]?this._bUseV?(e.stop(),!0):!1:t.sMoveType===jindo.m.MOVETYPE[2]?this._bUseDiagonalTouch?(e.stop(),!0):!1:t.sMoveType===jindo.m.MOVETYPE[6]||t.sMoveType===jindo.m.MOVETYPE[7]||t.sMoveType===jindo.m.MOVETYPE[8]?(e.stop(),!0):(e.stop(),!0)},_onResize:function(t){"rotate"===t.sType?this.fireEvent("rotate",{isVertical:t.isVertical})&&this._resizeImpl(t):this._resizeImpl(t)},_getMomentumData:function(t,e,i){var n={nDist:0,nTime:0},s={nDist:0,nTime:0},o={momentumX:t.nMomentumX,momentumY:t.nMomentumY,distanceX:t.nDistanceX,distanceY:t.nDistanceY,x:this._nX,y:this._nY,nextX:this._nX,nextY:this._nY};return this.option("bUseMomentum")&&(t.nMomentumX&&t.nMomentumX>e||t.nMomentumY&&t.nMomentumY>e)?(this._bUseH&&(n=this._calcMomentum(t.nDistanceX,t.nSpeedX,t.nMomentumX,-this._nX,-this._htSize.maxX+this._nX,i?this._htSize.viewWidth:0)),this._bUseV&&(s=this._calcMomentum(t.nDistanceY,t.nSpeedY,t.nMomentumY,-this._nY,-this._htSize.maxY+this._nY,i?this._htSize.viewHeight:0)),o.nextX=this._nX+n.nDist,o.nextY=this._nY+s.nDist,o.duration=Math.max(Math.max(n.nTime,s.nTime),10),o.duration=jindo.m.getOsInfo().android?.7*o.duration:o.duration):o.duration=0,o},_makeStylePos:function(t){var e=this.getAnimation(),i=jindo.m.getTranslateOffset(t),n=jindo.m.getStyleOffset(t),s={top:i.top+n.top+"px",left:i.left+n.left+"px"};s[e.p("Transform")]=e.getTranslate("0px","0px"),t.css(s),this._htOffsetBug.elDummyTag.focus()},_createOffsetBugDummyTag:function(){this._hasOffsetBug()&&(this._htOffsetBug.elDummyTag=jindo.$$.getSingle("._offsetbug_dummy_atag_",this._htWElement.view.$value()),this._htOffsetBug.elDummyTag||(this._htOffsetBug.elDummyTag=jindo.$("<a href='javascript:void(0);' style='position:absolute;height:0px;width:0px;' class='_offsetbug_dummy_atag_'></a>"),this._htWElement.view.append(this._htOffsetBug.elDummyTag)))
},_clearOffsetBug:function(){this._hasOffsetBug()&&(clearTimeout(this._htOffsetBug.timer),this._htOffsetBug.timer=-1)},_fixOffsetBugImpl:function(){if(this._hasOffsetBug()){var t=this,e=this.getAnimation().getTarget(!0);this._clearOffsetBug(),this._htOffsetBug.timer=setTimeout(function(){e&&t._makeStylePos(e)},200)}},_hasOffsetBug:function(){return this._htOffsetBug.hasBug},destroy:function(){var t;this.deactivate();for(t in this._htWElement)this._htWElement[t]=null;this._htWElement=null;for(t in this._htEvent)this._htEvent[t]=null;this._htEvent=null,this._oTouch&&this._oTouch.destroy(),this._oAnimation&&this._oAnimation.destroy()}}).extend(jindo.m.UIComponent),jindo.m.Flick=jindo.$Class({$init:function(){this.option({bHorizontal:!0,sClassPrefix:"flick-",sContentClass:"ct",bUseCircular:!1,nTotalContents:3,nFlickThreshold:40,nDuration:100,nBounceDuration:100,fpPanelEffect:jindo.m.Effect.cubicEaseIn,nDefaultIndex:0,bFitContentSize:!0,nDeceleration:.001,bUseMomentum:!1})},_initVar:function(){jindo.m.SwipeCommon.prototype._initVar.apply(this),this._bUseH=this.option("bHorizontal"),this._bUseV=!this._bUseH,this._bUseCircular=this.option("bUseCircular"),this._nContentIndex=0,this._welElement=null,this._aPos=[],this._nRange=null,this._nDefaultPanel=3,this._hasKitkatHighlightBug=jindo.m._hasKitkatHighlightBug(),this._nKitkatHighlightBug=-1},_setWrapperElement:function(t){jindo.m.SwipeCommon.prototype._setWrapperElement.call(this,t);var e=this.option("bHorizontal")?"height":"width";this._htWElement.aPanel=this._htWElement.container.queryAll("."+this.option("sClassPrefix")+this.option("sContentClass"));var i=jindo.$A(this._htWElement.aPanel);this._bUseCircular||(i=i.filter(function(t){return jindo.$Element(t).visible()})),this._htWElement.container.css({position:"relative"}).css(e,"100%"),this._htWElement.aPanel=i.forEach(function(t,i,n){n[i]=jindo.$Element(t).css(e,"100%")}).$value()},_checkIndex:function(t){var e=!0,i=this.getTotalContents()-1;return(isNaN(1*t)||0>t)&&(e=!1),t>i&&(e=!1),e},_refreshPanelInfo:function(){var t=0;this._aPos=[0];for(var e=0,i=this._bUseH?"width":"height",n=this.getTotalContents();n>e;e++)t-=null!=this._nRange?this._nRange:this._htWElement.aPanel[e][i](),this._aPos.push(t)},_onActivate:function(){jindo.m.SwipeCommon.prototype._onActivate.apply(this)},_onDeactivate:function(){jindo.m.SwipeCommon.prototype._onDeactivate.apply(this)},set:function(){if(!this._oAnimation){jindo.m.SwipeCommon.prototype.set.apply(this,Array.prototype.slice.apply(arguments)),this._bUseCircular?this.option("nTotalContents",parseInt(this.option("nTotalContents"),10)):this.option("nTotalContents",this._htWElement.aPanel.length);var t=this.option("nDefaultIndex");this._checkIndex(t)||(t=0),this.resize(),this.refresh(t)}return this._oAnimation},refresh:function(t,e,i){jindo.m.SwipeCommon.prototype.refresh.call(this),t="undefined"==typeof t?this.getContentIndex():t,this._hasKitkatHighlightBug&&this._htWElement.container.addClass(jindo.m.KITKAT_HIGHLIGHT_CLASS),this._moveTo(t,{duration:0,fireEvent:e,fireMoveEvent:i,corrupt:!0})},resize:function(){jindo.m.SwipeCommon.prototype.resize.call(this),this.option("bFitContentSize")||this._bUseCircular?(this._nRange=this._bUseH?this._htSize.viewWidth:this._htSize.viewHeight,0==this._nRange&&(this._nRange=this._htWElement.view[this._bUseH?"width":"height"]())):this._nRange=null,this._refreshPanelInfo(),null!=this._nRange&&(this._bUseH?(this._htSize.maxX=(this.option("nTotalContents")-1)*-this._nRange,this._nX=this._aPos[this.getContentIndex()]):(this._htSize.maxY=(this.option("nTotalContents")-1)*-this._nRange,this._nY=this._aPos[this.getContentIndex()]))},getElement:function(){var t=this.getContentIndex();return this._bUseCircular?this._welElement?this._welElement:(t%=this._nDefaultPanel,this._htWElement.aPanel[t]):this._htWElement.aPanel[t]},getNextElement:function(){var t;return this._bUseCircular?(t=this._getIndexByElement(this.getElement()),t=((t+1)%this._nDefaultPanel>this._nDefaultPanel-1?0:t+1)%this._nDefaultPanel):t=this.getNextIndex(),this._htWElement.aPanel[t]},getPrevElement:function(){var t;return this._bUseCircular?(t=this._getIndexByElement(this.getElement()),t=0>t-1?this._nDefaultPanel-1:t-1):t=this.getPrevIndex(),this._htWElement.aPanel[t]},_getIndexByElement:function(t){var e=-1;return jindo.$A(this._htWElement.aPanel).forEach(function(i,n){i.isEqual(t)&&(e=n)}),e},getContentIndex:function(){return parseInt(this._nContentIndex,10)},getNextIndex:function(){var t=this.getContentIndex()+1,e=this.getTotalContents()-1;return this._bUseCircular&&t>e&&(t=0),Math.min(e,t)},getPrevIndex:function(){var t=this.getContentIndex()-1;return this._bUseCircular&&0>t&&(t=this.getTotalContents()-1),Math.max(0,t)},getTotalContents:function(){return this._bUseCircular?this.option("nTotalContents"):this._htWElement.aPanel.length},setTotalContents:function(t){isNaN(t)||1>t||(t=parseInt(t,10),this.getContentIndex()+1>t&&this._moveTo(t-1,{duration:0,fireEvent:!0,fireMoveEvent:!0}),this.option("nTotalContents",t),this.resize())},getTotalPanels:function(){return this._htWElement.aPanel.length},getPanels:function(){return this._htWElement.aPanel},moveTo:function(t,e){return t!=this.getContentIndex()?this._moveTo(t,{duration:e}):void 0},_moveTo:function(t,e){if(!(null==this._nRange&&this._aPos.indexOf(this._bUseH?this._htSize.maxX:this._htSize.maxY)<t)){var i={duration:"undefined"==typeof e.duration?this.option("nDuration"):e.duration,fireEvent:"undefined"==typeof e.fireEvent?!0:e.fireEvent,fireMoveEvent:"undefined"==typeof e.fireMoveEvent?!1:e.fireMoveEvent,corrupt:"undefined"==typeof e.corrupt?!1:e.corrupt,direct:"undefined"==typeof e.direct?!1:e.direct};if(!(this.isPlaying()||isNaN(t)||0>t||t>=this.getTotalContents())){var n=this._bUseH?this._nX:this._nY,s=this._getPos(t);if(this._bUseCircular){var o=this._posToIndex(n),h=this.getTotalContents();0==o&&t==h-1?this.option("nTotalContents")>=3&&(s=this._nRange):o==h-1&&0==t&&(s=this._getPos(o)-this._nRange)}if(n!=s)this._move(n,s,{duration:i.duration,contentsNextIndex:t,fireEvent:i.fireEvent,fireMoveEvent:i.fireMoveEvent,corrupt:i.corrupt,direct:e.direct});else if(0===i.duration&&i.fireEvent)if(i.fireMoveEvent)this._fireMoveEvent(t)&&this._fireMoveEvent();else{var a={next:null,moveCount:0,corrupt:i.corrupt,contentsNextIndex:t};this._fireFlickingEvent("beforeFlicking",a)&&(this._fireFlickingEvent("flicking",a),this._fireFlickingEvent("afterFlicking",a))}}}},moveNext:function(t){var e={duration:t,direct:!1};if(this._bUseCircular&&this.option("nTotalContents")<3){var i=this.getContentIndex();this._bUseH?this._nX=0==i?1:this._nX-1:this._nY=0==i?1:this._nY-1,e.direct=!0}this._moveTo(this.getNextIndex(),e)},movePrev:function(t){var e={duration:t,direct:!1};if(this._bUseCircular&&this.option("nTotalContents")<3){var i=this.getContentIndex();e.direct=!0,this._bUseH?this._nX=0==i?this._aPos[this.getTotalContents()-1]-1:this._nX+1:this._nY=0==i?this._aPos[this.getTotalContents()-1]-1:this._nY+1,this._moveTo(this.getNextIndex(),e)}else this._moveTo(this.getPrevIndex(),e)},_startImpl:function(){this.isPlaying()||(this._nPosToIndex=this._posToIndex(this._bUseH?this._nX:this._nY))},_moveImpl:function(t){var e=this._bUseH?t.nVectorX:t.nVectorY,i=this._bUseH?t.nDistanceX:t.nDistanceY,n=0>i,s=this._bUseH?this._nX:this._nY,o=n?this.getNextIndex():this.getPrevIndex();return s+=this._bUseCircular?e:o==this.getContentIndex()?e/2:e,this._nX=this._bUseH?s:0,this._nY=this._bUseV?s:0,t.bNext=n,this._moveAfterCall&&this._moveAfterCall(t),n},_endImpl:function(t){var e=null,i=(this._bUseH?t.nDistanceX:t.nDistanceY)<0,n=this.getContentIndex(),s=i?this.getNextIndex():this.getPrevIndex(),o=this._getPos(n),h=Math.abs((this._bUseH?this._nX:this._nY)-o),a=n===s||h<parseInt(this.option("nFlickThreshold"),10)||this._aPos.indexOf(this._bUseH?this._htSize.maxX:this._htSize.maxY)<s;if(0!=h)if(a)this._restore();else if(e=this._getMomentumData(t,1.5),0===e.duration||i&&n===this.getTotalContents()-1||!i&&0===n){var r=this._bUseH?this._nX:this._nY;(i&&r<this._aPos[s]||!i&&r>this._aPos[s])&&(this._bUseCircular&&this.option("nTotalContents")<3?0!=n||1!=s||i||(this._bUseH?this._nX=this._aPos[this.getTotalContents()-1]-1:this._nY=this._aPos[this.getTotalContents()-1]-1):this._setCurrentPos(n,i)),this._moveTo(null==this._nRange?this._getNextIndexByView(n,i):s,{duration:this.option("nDuration"),direct:!0})}else{var l=this._posToIndex(this._bUseH?e.nextX:e.nextY);l==n?this._restore():(this._bUseCircular?(n+=i?1:-1,this._setCurrentPos(n,i)):this._setCurrentPos(n,i),this._moveTo(l,{duration:e.duration}))}},_getNextIndexByView:function(t,e){return e?this.getNextIndex():this.getPrevIndex()},_setCurrentPos:function(t){this._bUseH?this._nX=this._aPos[t]:this._nY=this._aPos[t]},_resizeImpl:function(){this.resize()},_restore:function(){if(this._bUseH||this._bUseV){var t,e=this._getPos(this.getContentIndex());t=this._bUseH?this._nX:this._nY,e!==t&&this._move(t,e,{duration:this.option("nBounceDuration"),restore:!0})}},_getRevisionNo:function(t){var e=this.getTotalContents();return 0>t?t+=e:t>e-1&&(t%=e),t},_fireCustomBeforeEvent:function(t){if(t.restore){if(!this._fireRestoreEvent("beforeRestore",t))return!1}else if(t.fireMoveEvent){if(0==t.moveIndex&&!this._fireMoveEvent(t.contentsNextIndex))return!1}else if(!this._fireFlickingEvent("beforeFlicking",t))return!1;return!0},_setPanelEndInfo:function(t){t.restore?(this._nX=this._bUseH?this._getPos(t.no):0,this._nY=this._bUseV?this._getPos(t.no):0):(t.no=this._getRevisionNo(t.no),this._updateFlickInfo(t.no,t.next?this.getNextElement():this.getPrevElement()))},_fireCustomEvent:function(t){t.restore?this._fireRestoreEvent("restore",t):t.fireMoveEvent?(0===t.duration||t.moveCount==t.moveIndex+1)&&this._fireMoveEvent():(this._fireFlickingEvent("flicking",t),this._fireFlickingEvent("afterFlicking",t))},_fireFlickingEvent:function(t,e){if("undefined"==typeof this._htEventHandler[t])return!0;var i={nContentsIndex:this.getContentIndex(),bNext:e.next};return/before/.test(t)&&(i.nContentsNextIndex=e.direct||0===e.duration&&e.moveCount>1?e.contentsNextIndex:e.next?this.getNextIndex():this.getPrevIndex()),i.nMoveCount=e.moveCount,i.bCorrupt=e.corrupt,i[this._bUseH?"bLeft":"bTop"]=i.bNext,this.fireEvent(t,i)},_fireRestoreEvent:function(t){return this.fireEvent(t,{nContentsIndex:this.getContentIndex()})},_fireMoveEvent:function(t){return"undefined"==typeof t?this.fireEvent("move",{nContentsIndex:this.getContentIndex()}):this.fireEvent("beforeMove",{nContentsIndex:this.getContentIndex(),nContentsNextIndex:t})},_updateFlickInfo:function(t,e){this._nContentIndex="undefined"==typeof t?this.getContentIndex():t,e="undefined"==typeof e?this.getElement():e,this._nX=this._bUseH?this._getPos(this._nContentIndex):0,this._nY=this._bUseV?this._getPos(this._nContentIndex):0,this._welElement=e},_onEndAniImpl:function(){this._bUseCircular},_makeOption:function(t){var e=jindo.$Jindo.mixin({duration:0,restore:!1,fireEvent:!0,fireMoveEvent:!1,moveCount:1,moveIndex:0,corrupt:!1,useCircular:this._bUseCircular,range:this._nRange},t||{});return e.restore&&(e.moveCount=0),e.moveCount>1&&0===e.duration&&(e.corrupt=!0),e.direct=e.direct||jindo.m.SlideFlicking&&this instanceof jindo.m.SlideFlicking&&"undefined"==typeof this._htEventHandler.beforeFlicking&&"undefined"==typeof this._htEventHandler.flicking&&"undefined"==typeof this._htEventHandler.afterFlicking,e},_moveWithEvent:function(t,e,i){var n=this,s={};return i.no=this._posToIndex(t),s=jindo.$Jindo.mixin(i,{}),!s.fireMoveEvent&&s.moveCount>1&&(s.contentsNextIndex=s.no),n._panelEndBeforeCall&&n._panelEndBeforeCall(s),this._oAnimation._oMorph.pushCall(function(){s.fireEvent&&!n._fireCustomBeforeEvent(s)&&(this.clear(),n._restore())}),this._oAnimation.move(this._bUseH?t:0,this._bUseV?t:0,e,s),this._oAnimation._oMorph.pushCall(function(){n._setPanelEndInfo(s),n._panelEndAfterCall&&n._panelEndAfterCall(s),s.fireEvent&&n._fireCustomEvent(s)}),this._oAnimation._oMorph},_move:function(t,e,i){if(!this._bUseCircular){var n=this._bUseH?this._htSize.maxX:this._htSize.maxY;e=n>e?n:e}if(t!==e){this._clearOffsetBug();var s=t>e,o=this._getStepCount(t,e);if(i=i||{},i.moveCount=o,i.next=s,i=this._makeOption(i),i.restore)return void this._moveWithEvent(e,i.duration,i).play();if(0==i.duration)this._moveWithEvent(e,0,i).play();else{if(i.direct)this._moveWithEvent(e,i.duration,i).play();else for(var h=0,a=t,r=0,l=this.option("fpPanelEffect")(0,i.duration),_=0;o>_;_++)i.moveIndex=_,r=this._getPanelEndPos(a,e,s),h=l((_+1)/o)-l(_/o),this._moveWithEvent(r,h,i),a=r;this._oAnimation._oMorph.play()}}},_getPos:function(t){return 0>t||t>=this._aPos.length?(console.error("wrong index",t),0):this._aPos[t]},_isPosPoint:function(t){return-1!=this._aPos.indexOf(t)},_getStepCount:function(t,e){var i=t>e,n=this._posToIndex(t),s=this._posToIndex(e),o=Math.abs(s-n);return i||this._isPosPoint(t)||!this._isPosPoint(e)||o++,o},_posToIndex:function(t){for(var e,i=0,n=-1,s=this._aPos.length;s>i;i++){if(e=this._aPos[i],!(e>t)){if(t==e){n++;break}break}n++}return n},_getPanelEndPos:function(t,e,i){var n,s=this._posToIndex(t);return!i&&!this._isPosPoint(t)&&s++,s+=i?1:-1,n=this._bUseCircular&&0>s?t+e:this._getPos(s),null==this._nRange&&i&&(n=e>n?e:n),n},_getTranslate:function(t){return this._oAnimation.getTranslate(this._bUseH?t:0,this._bUseV?t:0)},_tapImpl:function(){if(this._hasKitkatHighlightBug){this._htWElement.container.removeClass(jindo.m.KITKAT_HIGHLIGHT_CLASS),this._htWElement.container._element.clientHeight;var t=this;clearTimeout(this._nKitkatHighlightBug),this._nKitkatHighlightBug=setTimeout(function(){t._htWElement.container.addClass(jindo.m.KITKAT_HIGHLIGHT_CLASS)},200)}},destroy:function(){jindo.m.SwipeCommon.prototype.destroy.apply(this)}}).extend(jindo.m.SwipeCommon),jindo.m.Slide=jindo.$Class({$init:function(t){this.option({}),this.option(t||{})},setStyle:function(t){var e={};return e[this.p("TransitionProperty")]=""==this.sCssPrefix?"tranform":"-"+this.sCssPrefix+"-transform",e[this.p("TransitionDuration")]="0ms",e[this.p("Transform")]=this.getTranslate(0,0),this._welTarget=t[0].css(e),this.fireEvent("set",{css:e}),e},move:function(t,e,i,n){n=n||{};var s,o=this.getTarget(!0);if(n.useCircular)this.option("bUseH")?t=this._getPos(t,n):e=this._getPos(e,n);else if(this.option("bHasOffsetBug")){var h=jindo.m.getStyleOffset(o);t-=h.left,e-=h.top}return s={"@transitionProperty":""==this.sCssPrefix?"tranform":"-"+this.sCssPrefix+"-transform","@transform":this.getTranslate(t+"px",e+"px")},i?this._oMorph.pushAnimate(i,[o,s]):o.css(this.toCss(s)),this._oMorph},_getPos:function(t,e){var i=t,n=e.next,s=e.range;if(e.restore)i=0;else if(0!=e.duration&&t%s===0)i=n?-s:s;else if("undefined"!=typeof e.startIndex){var o=-1*parseInt(i/s,10);n=o==e.startIndex||o>e.startIndex?!0:!1,i=i%s+(n?-1:1)*Math.abs(o-e.startIndex)*s}else i=i%s+(n?0:2*s),i%=s;return i}}).extend(jindo.m.Animation),jindo.m.SlideFlicking=jindo.$Class({$init:function(t,e){this.option(e||{}),this._initVar(),this._oDocFragment=document.createDocumentFragment(),this._setWrapperElement(t),this.option("bActivateOnload")&&this.activate()},_onActivate:function(){jindo.m.Flick.prototype._onActivate.apply(this);var t=this;this.set(new jindo.m.Slide(this._getAnimationOption()).attach({set:function(e){t._setStyle(e.css)}}),this._htWElement.container)},_setStyle:function(t){var e={},i=0,n=this._bUseH?"width":"height",s=this._bUseH?"left":"top";jindo.$Jindo.mixin(e,t),this._bUseCircular&&(e[n]="100%",e[s]="-100%",t.position="absolute",t[n]="100%",t.left=0,t.top=0),this._bUseH&&(e.clear="both",t["float"]="left"),this._htWElement.container.css(e),jindo.$A(this._htWElement.aPanel).forEach(function(e,n){this._bUseCircular&&(i=(n+1)%this._nDefaultPanel*100+"%",this._hasOffsetBug()?t[s]=i:t[jindo.m._toPrefixStr("Transform")]=this._getTranslate(i)),e.css(t)},this)},resize:function(){jindo.m.Flick.prototype.resize.call(this);var t=this._bUseH?"width":"height",e=this._htWElement.view[t]();if(!this._bUseCircular){if(this._htWElement.container.css(t,-this._aPos[this._aPos.length-1]+"px"),this.option("bFitContentSize"))jindo.$A(this._htWElement.aPanel).forEach(function(i){i.css(t,e+"px")});else{var i=this._aPos[this._aPos.length-1]+e;0>i&&(jindo.$A(this._aPos).forEach(function(t,e){i>t&&(this._aPos.length=e,jindo.$A.Break())},this),this._aPos.push(i),this._bUseH?this._htSize.maxX=i:this._htSize.maxY=i,this._aPos.length<=this.getContentIndex()&&(this._nContentIndex=this._aPos.length-1))}this._updateFlickInfo(),this._oAnimation.move(this._nX,this._nY)}},_restorePanel:function(t){t=t||this.getElement();var e=this._getIndexByElement(t),i=this._hasOffsetBug()?this._bUseH?"left":"top":jindo.m._toPrefixStr("Transform"),n=(0>e-1?this._nDefaultPanel-1:e-1)%this._nDefaultPanel,s=((e+1)%this._nDefaultPanel>this._nDefaultPanel-1?0:e+1)%this._nDefaultPanel,o=e%this._nDefaultPanel;this._welElement=this._htWElement.aPanel[o],this._htWElement.container.css(jindo.m._toPrefixStr("Transform"),this._getTranslate(0)),this._welElement.css(i,this._getPosValue("100%")).css("zIndex",10),this._htWElement.aPanel[n].css(i,this._getPosValue("0%")).css("zIndex",1),this._htWElement.aPanel[s].css(i,this._getPosValue("200%")).css("zIndex",1),jindo.m.getOsInfo().ios&&this._bUseCircular&&(this._oDocFragment.appendChild(this._htWElement.aPanel[n].$value()),this._oDocFragment.appendChild(this._htWElement.aPanel[s].$value()),this._htWElement.container.$value().appendChild(this._oDocFragment))},_getPosValue:function(t){return this._hasOffsetBug()?t:this._getTranslate(t)},_panelEndAfterCall:function(){this._bUseCircular&&this._restorePanel()},_moveAfterCall:function(t){this._oAnimation.move(this._nX,this._nY,0,this._makeOption({next:t.bNext}))},_onEndAniImpl:function(){jindo.m.Flick.prototype._onEndAniImpl.apply(this),this._bUseCircular||this._fixOffsetBugImpl()},destroy:function(){jindo.m.Flick.prototype.destroy.apply(this)}}).extend(jindo.m.Flick),jindo.m.CircularFlicking=jindo.$Class({$init:function(t,e){this.option({bHorizontal:!0,sClassPrefix:"flick-",nFlickThreshold:40,nDuration:100,nTotalContents:3,nBounceDuration:100,bActivateOnload:!0,bSetNextPanelPos:!1,bUseCss3d:jindo.m.useCss3d(),bUseTimingFunction:jindo.m.useTimingFunction(),bUseTranslate:!0,bUseDiagonalTouch:!0}),this.option(e||{}),this._initVar(),this._setWrapperElement(t),this._initFlicking(t),this.option("bActivateOnload")&&this.activate()},_initVar:function(){this._oFlicking=null},_initFlicking:function(t){var e=this.option();e.sContentClass="panel",e.sAnimation="slide",e.bUseCircular=!0,e.bActivateOnload=!1,this._oFlicking=new jindo.m.Flicking(jindo.$Element(t),e).attach({touchStart:jindo.$Fn(this._onTouchStart,this).bind(),touchMove:jindo.$Fn(this._onTouchMove,this).bind(),touchEnd:jindo.$Fn(this._onTouchEnd,this).bind(),beforeMove:jindo.$Fn(this._onBeforeMove,this).bind(),move:jindo.$Fn(this._onMove,this).bind(),rotate:jindo.$Fn(this._onRotate,this).bind(),scroll:jindo.$Fn(this._onScroll,this).bind(),beforeFlicking:jindo.$Fn(this._onBeforeFlicking,this).bind(),afterFlicking:jindo.$Fn(this._onAfterFlicking,this).bind()})},_setWrapperElement:function(t){this._htWElement={circularFlickBase:jindo.$Element(t)};var e=jindo.$Element(this._htWElement.circularFlickBase.query("."+this.option("sClassPrefix")+"container")),i=e.queryAll("."+this.option("sClassPrefix")+"panel");if(i&&i.length<3)for(var n=3-i.length,s=0;n>s;s++)e.$value().appendChild(jindo.$('<div class="'+this.option("sClassPrefix")+'panel">'))},getPanelIndex:function(){return this._oFlicking.getIndexByElement(this.getPanelElement().$value())},getPanelElement:function(){return this._oFlicking.getElement()},getRightPanelIndex:function(){return this._oFlicking.getIndexByElement(this.getRightPanelElement().$value())},getRightPanelElement:function(){return this._oFlicking.getNextElement()},getLeftPanelIndex:function(){return this._oFlicking.getIndexByElement(this.getLeftPanelElement().$value())},getLeftPanelElement:function(){return this._oFlicking.getPrevElement()},getContentIndex:function(){return this._oFlicking.getContentIndex()},getRightContentIndex:function(){return this._oFlicking.getNextIndex()},getLeftContentIndex:function(){return this._oFlicking.getPrevIndex()},_onTouchStart:function(t){var e=this.fireEvent("touchStart",t);return e?void 0:void t.stop()},_onTouchMove:function(t){this.fireEvent("touchMove",t)},_onTouchEnd:function(t){this.fireEvent("touchEnd",t)},_onBeforeMove:function(t){var e=t.nContentsNextIndex%3;this.fireEvent("beforeMove",{nPanelIndex:this.getPanelIndex(),nContentIndex:t.nContentsIndex,nNextPanelIndex:e,nNextContentIndex:t.nContentsNextIndex})||t.stop()},_onMove:function(){this.fireEvent("move",{nPanelIndex:this.getPanelIndex(),nPanelLeftIndex:this.getLeftPanelIndex(),nPanelRightIndex:this.getRightPanelIndex(),nContentIndex:this.getContentIndex(),nContentLeftIndex:this.getLeftContentIndex(),nContentRightIndex:this.getRightContentIndex()})},_onRotate:function(t){this.fireEvent("rotate",t)},_onScroll:function(){this.fireEvent("scroll")},_onBeforeFlicking:function(t){var e={nContentIndex:t.nContentsIndex,nNextContentIndex:t.nContentsNextIndex,nPanelIndex:this.getPanelIndex(),nNextPanelIndex:this.getLeftPanelIndex()};t.bTop&&(e.bTop=t.bTop),t.bLeft&&(e.bLeft=t.bLeft),(e.bTop||e.bLeft)&&(e.nNextPanelIndex=this.getRightPanelIndex()),this.fireEvent("beforeFlicking",e)||t.stop()},_onAfterFlicking:function(t){var e={nPanelIndex:this.getPanelIndex(),nPanelLeftIndex:this.getLeftPanelIndex(),nPanelRightIndex:this.getRightPanelIndex(),nContentIndex:this.getContentIndex(),nContentLeftIndex:this.getLeftContentIndex(),nContentRightIndex:this.getRightContentIndex()};t.bTop&&(e.bTop=t.bTop),t.bLeft&&(e.bLeft=t.bLeft),this._htWElement.aPanel=this._oFlicking._oFlickingImpl._htWElement.aPanel,this.fireEvent("afterFlicking",e)},moveNext:function(){this.isActivating()&&this._oFlicking.moveNext()},movePrev:function(){this.isActivating()&&this._oFlicking.movePrev()},refresh:function(t,e,i){this.isActivating()&&("undefined"==typeof e&&(e=!1),"undefined"==typeof i&&(i=!1),this._oFlicking.refresh(t,e,i))},setContentIndex:function(t,e){this.isActivating()&&(t=parseInt(t,10),0>t||t>this.option("nTotalContents")-1||("undefined"==typeof e&&(e=!0),this.refresh(t,e,!0)))},_onActivate:function(){this._oFlicking.activate()},_onDeactivate:function(){this._oFlicking.deactivate()},destroy:function(){this.deactivate(),this._oFlicking=null;for(var t in this._htWElement)this._htWElement[t]=null}}).extend(jindo.m.UIComponent),jindo.m.LayerEffect=jindo.$Class({$init:function(t,e){this.option({nDuration:250,fEffect:jindo.m.Effect.linear,bActivateOnload:!0}),this._initVar(),!arguments[0]||"string"!=typeof arguments[0]&&1!=arguments[0].nodeType?this.option(arguments[0]||{}):(this.setLayer(t),this.option(e||{})),this._initTransition(),this.option("bActivateOnload")&&this.activate()},_htEffect:{expand:"jindo.m.ExpandEffect",contract:"jindo.m.ContractEffect",fade:"jindo.m.FadeEffect",pop:"jindo.m.PopEffect",slide:"jindo.m.SlideEffect",flip:"jindo.m.FlipEffect"},_initVar:function(){this._htEffectInstance={},this._htLayerInfo={},this._htWElement={},this._htCurrentTask={},this.bAndroid=jindo.m.getDeviceInfo().android,this.sClassHighligting="_effct_hide_highlighting_tmp"},_initTransition:function(){this._oMorph=new jindo.m.Morph({fEffect:this.option("fEffect")||(this.option("sEffect")?this._getEffect(this.option("sEffect")):null),bUseTransition:jindo.m.useTimingFunction()})},_getEffect:function(t){var e=jindo.m.Effect.cubicEaseInOut;switch(t){case"linear":e=jindo.m.Effect.linear;break;case"ease":e=jindo.m.Effect.cubicEase;break;case"ease-in":e=jindo.m.Effect.cubicEaseIn;break;case"ease-out":e=jindo.m.Effect.cubicEaseOut;break;case"ease-in-out":e=jindo.m.Effect.cubicEaseInOut}return e},_createEffect:function(sType){if(this._htEffect[sType]&&!this._htEffectInstance[sType]){try{this._htEffectInstance[sType]=eval("new "+this._htEffect[sType]+"()")}catch(e){}this._htEffectInstance[sType].setLayerInfo(this._htLayerInfo)}},_createFunc:function(){for(var t=["slide","pop","flip","fade","expand","contract"],e=0,i=t.length;i>e;e++)this[t[e]]=function(t){return function(e){var i=t;if("string"==typeof arguments[0]||1==arguments[0].nodeType){this.setLayer(arguments[0]);var n=arguments[2]||{};n.sDirection=arguments[1],this._run(i,n)}else this._run(i,e)}}(t[e])},isPlaying:function(){return this._oMorph.isPlaying()},_fireCustomEvent:function(t,e){return this.fireEvent(t,e)},_run:function(t,e){if(this._isAvailableEffect()){this._createEffect(t),"undefined"==typeof e&&(e={});var i=this._htEffectInstance[t],n=this.getLayer(),s="undefined"==typeof e.nDuration?this.option("nDuration"):parseInt(e.nDuration,10),o=i.getBeforeCommand(n,e),h=i.getCommand(n,e);if(this._htCurrentTask=e,this._htCurrentTask.elLayer=n,this._htCurrentTask.sTaskName=h.sTaskName,this._htCurrentTask.nDuration=s,this._fireCustomEvent("beforeEffect",{elLayer:n,sEffect:h.sTaskName,nDuration:s})){o&&this._oMorph.pushAnimate(-1,[this.getLayer(),o.htStyle]);var a=this;e.sEffect&&this._oMorph.pushCall(function(){this.option({fEffect:a._getEffect(e.sEffect)})}),s=0==s?-1:s,this._oMorph.pushAnimate(s,[this.getLayer(),h.htStyle]),h.fCallback&&("function"==typeof h.fCallback?this._oMorph.pushCall(function(){h.fCallback()}):"object"==typeof h.fCallback&&this._oMorph.pushAnimate(-1,[this.getLayer(),h.fCallback.htStyle||{}])),this._oMorph.play()}}},setLayer:function(t){this._htWElement.el=jindo.$(t),this._htWElement.wel=jindo.$Element(this._htWElement.el);var e;if(this.bAndroid&&(e=jindo.$$.getSingle("."+this.sClassHighligting,this._htWElement.el),!e)){var i='<a href="javascript:void(0)" style="position:absolute" class="'+this.sClassHighligting+'"></a>';e=jindo.$(i),this._htWElement.wel.append(e),e.style.opacity="0",e.style.width=0,e.style.height=0,e.style.left="-1000px",e.style.top="-1000px"}this.setSize()},stop:function(t){"undefined"==typeof t&&(t=!0),this._oMorph&&this._oMorph.pause(t)},clearEffect:function(t){this._oMorph&&(this.stop(t),this._oMorph.clear())},getLayer:function(){return this._htWElement.el},setSize:function(){var t=this._htWElement.el.cloneNode(!0),e=jindo.$Element(t);e.opacity(0),this._htWElement.wel.after(e),e.show(),this._htLayerInfo.nWidth=this._htWElement.wel.width(),this._htLayerInfo.nHeight=this._htWElement.wel.height(),e.css({position:"absolute",top:"0px",left:"0px"}),this._htLayerInfo.nMarginLeft=parseInt(e.css("marginLeft"),10),this._htLayerInfo.nMarginTop=parseInt(e.css("marginTop"),10),this._htLayerInfo.nMarginLeft=isNaN(this._htLayerInfo.nMarginLeft)?0:this._htLayerInfo.nMarginLeft,this._htLayerInfo.nMarginTop=isNaN(this._htLayerInfo.nMarginTop)?0:this._htLayerInfo.nMarginTop,this._htLayerInfo.nOpacity=this._htWElement.wel.opacity(),this._htLayerInfo.sPosition=this._htWElement.wel.css("position");var i=this._htWElement.wel.css("display");i="none"===i||0===i.length?"block":i,this._htLayerInfo.sDisplay=i,this._htLayerInfo.sClassHighligting=this.sClassHighligting,e.leave(),this._setEffectLayerInfo()},_setEffectLayerInfo:function(){for(var t in this._htEffectInstance)this._htEffectInstance[t].setLayerInfo(this._htLayerInfo)},_onTransitionEnd:function(){this._htCurrentTask&&this._fireCustomEvent("afterEffect",{elLayer:this._htCurrentTask.elLayer,sEffect:this._htCurrentTask.sTaskName,nDuration:this._htCurrentTask.nDuration})},_onTransitionStop:function(t){t.sTaskName&&this._fireCustomEvent("stop",{elLayer:this._htCurrentTask.elLayer,sEffect:this._htCurrentTask.sTaskName,nDuration:this._htCurrentTask.nDuration})},_isAvailableEffect:function(){return this.isActivating()},_onActivate:function(){this._attachEvent(),this._createFunc()},_onDeactivate:function(){this._detachEvent()},_attachEvent:function(){this._htEvent={},this._htEvent.end=jindo.$Fn(this._onTransitionEnd,this).bind(),this._htEvent.stop=jindo.$Fn(this._onTransitionStop,this).bind(),this._oMorph&&this._oMorph.attach({end:this._htEvent.end,stop:this._htEvent.stop})},_detachEvent:function(){this._htEvent=null},destroy:function(){this.deactivate();for(var t in this._htWElement)this._htWElement[t]=null;this._htWElement=null}}).extend(jindo.m.UIComponent),jindo.m._Effect_=jindo.$Class({$init:function(){this._sCssPrefix=jindo.m.getCssPrefix();var t=jindo.m.getDeviceInfo();this.bIos=t.iphone||t.ipad,this.bIos3=t.iphone&&t.version.length>0&&"3"==t.version.substring(0,1),this.bAndroid=t.android,this.bAndroid3Up=t.android&&t.version.length>0&&t.version.substring(0,1)>="3",this.bAndroid2_1=t.android&&t.version.length>0&&"2.1"===t.version,this.sTranOpen=this.bIos?"translate3d(":"translate(",this.sTranEnd=this.bIos?",0px)":")",this._initVar()},_initVar:function(){this._htLayerInfo={}},setLayerInfo:function(t){this._htLayerInfo={};for(var e in t)this._htLayerInfo[e]=t[e]},getTranslateStyle:function(t,e){var i=e||{};for(var n in t)i["@"+n]=t[n];return i},getTransitionTask:function(){return null},getBeforeCommand:function(){return null},getCommand:function(){return null}}),jindo.m.ContractEffect=jindo.$Class({sEffectName:"contract",getCommand:function(t,e){var i=e.sDirection?e.sDirection:"down",n="width",s=this._htLayerInfo.nWidth;("up"==i||"down"==i)&&(n="height",s=this._htLayerInfo.nHeight);var o=e.htTo||{};o[n]="0px","right"==i&&(o.marginLeft=this._htLayerInfo.nMarginLeft+this._htLayerInfo.nWidth+"px"),"down"==i&&(o.marginTop=this._htLayerInfo.nMarginTop+this._htLayerInfo.nHeight+"px");var h={};return this.getTranslateStyle(o,h),{sTaskName:this.sEffectName+"-"+i,htStyle:h,htTransform:{},fCallback:{htStyle:{"@marginLeft":this._htLayerInfo.nMarginLeft+"px","@marginTop":this._htLayerInfo.nMarginTop+"px"}}}},getBeforeCommand:function(t,e){var i=(e.sDirection?e.sDirection:"down",e.htFrom||{});i.overflow="hidden";var n={};return this.getTranslateStyle(i,n),{htStyle:n,htTransform:{}}}}).extend(jindo.m._Effect_),jindo.m.CorePagination=jindo.$Class({_nCurrentPage:1,$init:function(t){this.option({nItem:10,nItemPerPage:10,nPage:1,bActivateOnload:!0}),this.option(t||{}),this._nCurrentPage=this.option("nPage")},getItemCount:function(){return this.option("nItem")},getItemPerPage:function(){return this.option("nItemPerPage")},getCurrentPage:function(){return this._nCurrentPage},setItemCount:function(t){this.option("nItem",t)},setItemPerPage:function(t){this.option("nItemPerPage",t)},movePageTo:function(t){var e=(this._nCurrentPage,this._convertToAvailPage(t));e!=this._nCurrentPage&&(this._nCurrentPage=e)},nextPageTo:function(){var t=this._nCurrentPage+1;this.movePageTo(t)},previousPageTo:function(){var t=this._nCurrentPage-1;this.movePageTo(t)},hasNextPage:function(){var t=this.getCurrentPage(),e=this.getTotalPages();return t&&e>t},hasPreviousPage:function(){return this.getCurrentPage()>1},getTotalPages:function(){var t=this.option("nItem"),e=this.option("nItemPerPage");return e?Math.ceil(t/e):null},getPageItemIndex:function(t){t=this._convertToAvailPage(t);var e,i,n=this.option("nItem"),s=this.option("nItemPerPage");return t&&s?(e=(t-1)*s,i=Math.min(e+s,n)-1,{nStart:e,nEnd:i}):null},getPageOfItem:function(t){return Math.ceil(t/this.getItemPerPage())},_convertToAvailPage:function(t){var e=this.getTotalPages();return t=Math.max(t,1),t=Math.min(t,e)}}).extend(jindo.m.UIComponent),jindo.m.Scroll=jindo.$Class({$init:function(t,e){this.option({bActivateOnload:!0,bUseHScroll:!1,bUseVScroll:!0,bUseMomentum:!0,nDeceleration:6e-4,nOffsetTop:0,nOffsetBottom:0,nHeight:0,nWidth:0,bUseBounce:!0,bUseHighlight:!0,sClassPrefix:"scroll_",bUseCss3d:jindo.m.useCss3d(!0),bUseTimingFunction:jindo.m.useTimingFunction(!0),bAutoResize:!1,bUseDiagonalTouch:!0,fEffect:jindo.m.Effect.cubicBezier(.18,.35,.56,1),nZIndex:2e3,sListElement:"",nRatio:1.5,bUseScrollbar:!0,nScrollbarHideThreshold:0,bUseFixedScrollbar:!1,sScrollbarBorder:"1px solid white",sScrollbarColor:"#8e8e8e",bUseScrollBarRadius:!0,bUsePullDown:!1,bUsePullUp:!1,fnPullDownIdle:null,fnPullDownBeforeUpdate:null,fnPullDownUpdating:null,fnPullUpIdle:null,fnPullUpBeforeUpdate:null,fnPullUpUpdating:null}),this.option(e||{}),this._initVar(),this._setWrapperElement(t),this.option("bActivateOnload")&&this.activate()
},$static:{SCROLLBAR_CLASS:"__scroll_for_scrollbar__"},_initVar:function(){this.isPositionBug=jindo.m.hasOffsetBug(),this.isClickBug=jindo.m.hasClickBug(),this.nVersion=parseFloat(jindo.m.getDeviceInfo().version.substr(0,3)),this.sCssPrefix=jindo.m.getCssPrefix(),this._bUseCss3d=this.option("bUseCss3d"),this.nWrapperW=null,this.nWrapperH=null,this.nScrollW=null,this.nScrollH=null,this.nMaxScrollLeft=null,this.nMaxScrollTop=null,this.nMinScrollTop=0,this.bUseHScroll=null,this.bUseVScroll=null,this.bUseHighlight=this.option("bUseHighlight"),this._nPropHScroll=null,this._nPropVScroll=null,this._nLeft=0,this._nTop=0,this._aAni=[],this._htTimer={ani:-1,fixed:-1,touch:-1,scrollbar:-1},this._htPlugin={dynamic:{},pull:{}},this._oTouch=null,this._isAnimating=!1,this._isControling=!1,this._isStop=!1,this._hasJindoOffsetBug=jindo.m._hasJindoOffsetBug(),this.option("sListElement")&&this.option("bUseTimingFunction",!1),this.bUseHighlight&&(this._hasKitkatHighlightBug=jindo.m._hasKitkatHighlightBug(),this._nHightlightBug=-1,this.isPositionBug&&(this._elDummyTag=null)),this._nUpdater=-1,this._oMoveData={nLeft:0,nTop:0}},getCurrentPos:function(){return{nTop:this._nTop,nLeft:this._nLeft}},setLayer:function(t){this._htWElement.wrapper=jindo.$Element(t),this._htWElement.wrapper.css({overflow:"hidden",zIndex:this.option("nZIndex")}),"static"==this._htWElement.wrapper.css("position")&&this._htWElement.wrapper.css("position","relative"),this.bUseHighlight||this._htWElement.wrapper.css(jindo.m._toPrefixStr("TapHighlightColor"),"rgba(0,0,0,0)"),this.setScroller()},setScroller:function(){this._htWElement.scroller=this._htWElement.wrapper.first(),this._htWElement.scroller.css({position:"absolute",zIndex:1,left:0,top:0}),this._htWElement.scroller.css(jindo.m._toPrefixStr("TransitionProperty"),""==this.sCssPrefix?"transform":"-"+this.sCssPrefix+"-transform").css(this.sCssPrefix+"Transform",jindo.m._getTranslate(0,0,this._bUseCss3d)),this.option("bUseTimingFunction")&&this._htWElement.scroller.css(jindo.m._toPrefixStr("TransitionTimingFunction"),this.option("fEffect").toString()),this.isPositionBug&&this.bUseHighlight&&this.nVersion<3&&(this._elDummyTag=this._htWElement.scroller.query("._scroller_dummy_atag_"),this._elDummyTag?this._elDummyTag=this._elDummyTag.$value():(this._elDummyTag=jindo.$("<a href='javascript:void(0);' style='position:absolute;height:0px;width:0px;' class='_scroller_dummy_atag_'></a>"),this._htWElement.scroller.append(this._elDummyTag)))},width:function(t){return t?(this.option("nWidth",t),void this.refresh()):this.option("nWidth")?parseInt(this.option("nWidth"),10):this._htWElement.wrapper.width()},height:function(t){return t?(this.option("nHeight",t),void this.refresh()):this.option("nHeight")?parseInt(this.option("nHeight"),10):this._htWElement.wrapper.height()},_setWrapperElement:function(t){this._htWElement={},this.setLayer(t)},hasHScroll:function(){return this.bUseHScroll},hasVScroll:function(){return this.bUseVScroll},_createDynamicPlugin:function(t){var e={nRatio:this.option("nRatio"),sListElement:this.option("sListElement"),sDirection:t};this._inst("dynamic")?this._inst("dynamic").option(e):this._htPlugin.dynamic.o=new jindo.m.DynamicPlugin(this._htWElement.wrapper,e),this._inst("dynamic").refresh("V"==t?this._nTop:this._nLeft),this.option("bUseTimingFunction",!1),this._htPlugin.dynamic.bUse=!0},_refreshDynamicPlugin:function(){if(this._htPlugin.dynamic.bUse=!1,this.option("sListElement")&&(!this.bUseVScroll||!this.bUseHScroll)){var t=2*this.option("nRatio");this.bUseVScroll&&this.nScrollH>this.nWrapperH*t?this._createDynamicPlugin("V"):this.bUseHScroll&&this.nScrollW>this.nWrapperW*t&&this._createDynamicPlugin("H")}},_refreshPullPlugin:function(){return this._htPlugin.pull.bUse=this.option("bUsePullDown")||this.option("bUsePullUp"),this._isUse("pull")?(this._inst("pull")||(this._htPlugin.pull.o=new jindo.m.PullPlugin(this)),this._inst("pull").refresh(),!0):!1},refresh:function(t){if(this.isActivating()){this._hasKitkatHighlightBug&&this._htWElement.wrapper.addClass(jindo.m.KITKAT_HIGHLIGHT_CLASS),this.option("nWidth")&&this._htWElement.wrapper.width(parseInt(this.option("nWidth"),10)),this.option("nHeight")&&this._htWElement.wrapper.height(parseInt(this.option("nHeight"),10));var e=parseInt(this._htWElement.wrapper.css("border-left-width"),10),i=parseInt(this._htWElement.wrapper.css("border-right-width"),10),n=parseInt(this._htWElement.wrapper.css("border-top-width"),10),s=parseInt(this._htWElement.wrapper.css("border-bottom-width"),10);e=isNaN(e)?0:e,i=isNaN(i)?0:i,n=isNaN(n)?0:n,s=isNaN(s)?0:s,this.nWrapperW=this._htWElement.wrapper.width()-e-i,this.nWrapperH=this._htWElement.wrapper.height()-n-s,this._refreshPullPlugin()||(this.nScrollW=this._htWElement.scroller.width(),this.nScrollH=this._htWElement.scroller.height()-this.option("nOffsetBottom"),this.nMinScrollTop=-this.option("nOffsetTop"),this.nMaxScrollTop=this.nWrapperH-this.nScrollH),this.nMaxScrollLeft=this.nWrapperW-this.nScrollW,this.bUseHScroll=this.option("bUseHScroll")&&this.nWrapperW<=this.nScrollW,this.bUseVScroll=this.option("bUseVScroll")&&this.nWrapperH<=this.nScrollH,this.bUseHScroll&&!this.bUseVScroll&&(this._htWElement.scroller.$value().style.height="100%"),!this.bUseHScroll&&this.bUseVScroll&&(this._htWElement.scroller.$value().style.width="100%"),this._refreshDynamicPlugin(),this.option("bUseScrollbar")&&(this._refreshScroll("V"),this._refreshScroll("H")),!this.bUseHScroll&&!this.bUseVScroll&&this._fixPositionBug(),!t&&this.restorePos(0)}},_setPos:function(t,e){var i;t=this.bUseHScroll?parseInt(t,10):0,e=this.bUseVScroll?parseInt(e,10):0,this._isUse("dynamic")&&(i=this._checkDirection(t,e));var n={nLeft:this._nLeft,nTop:this._nTop,nNextLeft:t,nNextTop:e,nVectorX:t-this._nLeft,nVectorY:e-this._nTop,nMaxScrollLeft:this.nMaxScrollLeft,nMaxScrollTop:this.nMaxScrollTop};if(this.fireEvent("beforePosition",n)){if(this._isControling=!0,this._nLeft=t=n.nNextLeft,this._nTop=e=n.nNextTop,this._isUse("dynamic")&&this._inst("dynamic").updateListStatus(i,this.bUseVScroll?this._nTop:this._nLeft),this.bUseHighlight&&this.isPositionBug){var s=this.getStyleOffset(this._htWElement.scroller);t-=s.left,e-=s.top}this._htWElement.scroller.css(jindo.m._toPrefixStr("Transform"),jindo.m._getTranslate(t+"px",e+"px",this._bUseCss3d)),this.option("bUseScrollbar")&&(this._setScrollBarPos("V",this._nTop),this._setScrollBarPos("H",this._nLeft)),this._oMoveData={nLeft:this._nLeft,nTop:this._nTop},this.fireEvent("position",{nLeft:this._nLeft,nTop:this._nTop,nMaxScrollLeft:this.nMaxScrollLeft,nMaxScrollTop:this.nMaxScrollTop})}else this._isAnimating=!1},_isUse:function(t){return this._htPlugin[t].bUse},_inst:function(t){return this._htPlugin[t].o},_checkDirection:function(t,e){var i,n=this.bUseVScroll?this._nTop:this._nLeft,s=this.bUseVScroll?e:t;return i=n>s?"forward":"backward"},restorePos:function(t){var e=this.getPosLeft(this._nLeft),i=this.getPosTop(this._nTop);return e===this._nLeft&&i===this._nTop?(this._isControling=!1,this._isStop=!1,this._fireAfterScroll(),void this._fixPositionBug()):void this._scrollTo(e,i,t)},_getMomentum:function(t,e,i,n,s,o){var h=this.option("nDeceleration"),a=i/h,r=0,l=0;return 0>t&&a>s?(l=n/(6/(a/e*h)),s+=l,e=e*s/a,a=s):t>0&&a>o&&(l=n/(6/(a/e*h)),o+=l,e=e*o/a,a=o),a*=t>0?-1:1,r=e/h,{nDist:a,nTime:Math.round(r)}},_stop:function(){this.option("bUseTimingFunction")?(jindo.m.detachTransitionEnd(this._htWElement.scroller.$value(),this._htEvent.TransitionEnd),this._transitionTime(0)):(cancelAnimationFrame(this._htTimer.ani),this._stopUpdater()),this._isAnimating&&this._setPos(this._nLeft,this._nTop),this._aAni=[],this._isAnimating=!1,this._isStop=!0},_scrollTo:function(t,e,i){this._stop(),t=this.bUseHScroll?t:0,e=this.bUseVScroll?e:0,this._aAni.push({nLeft:t,nTop:e,nDuration:i||0}),this._animate()},scrollTo:function(t,e,i){i=i||0,t=-Math.abs(t),e=-Math.abs(e),e+=this.getTop(),this._scrollTo(t>=this.getLeft()?this.getLeft():t<=this.getRight()?this.getRight():t,e>=this.getTop()?this.getTop():e<=this.getBottom()?this.getBottom():e,i)},getRight:function(){return this.nMaxScrollLeft},getLeft:function(){return 0},getBottom:function(){return this.nMaxScrollTop},getTop:function(){return this.nMinScrollTop},isMoving:function(){return this._isControling},_animate:function(){var t,e=this;if(!this._isAnimating){if(!this._aAni.length)return void this.restorePos(300);do if(t=this._aAni.shift(),!t)return;while(t.nLeft==this._nLeft&&t.nTop==this._nTop);if(0==t.nDuration)this.option("bUseTimingFunction")&&this._transitionTime(0),this._setPos(t.nLeft,t.nTop),this._animate();else if(this._isAnimating=!0,this.option("bUseTimingFunction"))this._transitionTime(t.nDuration),this._setPos(t.nLeft,t.nTop),this._isAnimating=!1,jindo.m.attachTransitionEnd(this._htWElement.scroller.$value(),this._htEvent.TransitionEnd);else{e._startUpdater();var i,n=(new Date).getTime(),s=this.bUseHScroll?this.option("fEffect")(this._nLeft,t.nLeft):null,o=this.bUseVScroll?this.option("fEffect")(this._nTop,t.nTop):null;!function h(){return i=(new Date).getTime(),i>=n+t.nDuration?(e._stopUpdater(),e._setPos(t.nLeft,t.nTop),e._isAnimating=!1,void e._animate()):(i=(i-n)/t.nDuration,e._oMoveData={nLeft:s&&s(i),nTop:o&&o(i)},void(e._isAnimating?e._htTimer.ani=requestAnimationFrame(h):e._stopUpdater()))}()}}},_onRotate:function(t){this.fireEvent("rotate",{isVertical:t.isVertical})&&this.refresh()},_transitionTime:function(t){t+="ms",this._htWElement.scroller.css(jindo.m._toPrefixStr("TransitionDuration"),t),this.option("bUseScrollbar")&&this._setScrollbarDuration(t)},_setScrollbarDuration:function(t){this.bUseHScroll&&this._htWElement.HscrollbarIndicator&&this._htWElement.HscrollbarIndicator.css(jindo.m._toPrefixStr("TransitionDuration"),t),this.bUseVScroll&&this._htWElement.VscrollbarIndicator&&this._htWElement.VscrollbarIndicator.css(jindo.m._toPrefixStr("TransitionDuration"),t)},_stopScroll:function(){var t,e,i=jindo.m.getTranslateOffset(this._htWElement.scroller.$value()),n={left:0,top:0};this.isPositionBug&&this.bUseHighlight&&(n=this.getStyleOffset(this._htWElement.scroller)),e=i.left+n.left,t=i.top+n.top,this.option("bUseFixedScrollbar")||(this._hideScrollBar("V"),this._hideScrollBar("H")),this._stopUpdater(),this._stop(),this._setPos(this.getPosLeft(e),this.getPosTop(t)),this._isControling=!1,this._fireAfterScroll(),this._fixPositionBug()},getStyleOffset:function(t){var e=parseInt(t.css("left"),10),i=parseInt(t.css("top"),10);return e=isNaN(e)?0:e,i=isNaN(i)?0:i,{left:e,top:i}},getPosLeft:function(t){return this.bUseHScroll?t>=0?0:t<=this.nMaxScrollLeft?this.nMaxScrollLeft:t:0},getPosTop:function(t){return this.bUseVScroll?t>=this.nMinScrollTop?this.nMinScrollTop:t<=this.nMaxScrollTop?this.nMaxScrollTop:t:0},_hideScrollBar:function(t){if(this._htWElement){var e=this._htWElement[t+"scrollbar"],i="H"===t?this.bUseHScroll:this.bUseVScroll;i&&e&&(e.hide(),e.$value().offsetHeight,this.isPositionBug&&this.bUseHighlight&&this.makeStylePos(this._htWElement[t+"scrollbarIndicator"]))}},_fireAfterScroll:function(){if(this.option("bUseScrollbar")){var t=this;this._htTimer.scrollbar=setTimeout(function(){t.option("bUseFixedScrollbar")||(t._hideScrollBar("V"),t._hideScrollBar("H"))},this.option("nScrollbarHideThreshold"))}this._fireEvent("afterScroll")},_fireEvent:function(t){return this.fireEvent(t,this._getNowPosition())},_fireTouchEvent:function(t,e){return this.fireEvent(t,this._getNowPosition(e))},_getNowPosition:function(t){return{nLeft:this._nLeft,nTop:this._nTop,nMaxScrollLeft:this.nMaxScrollLeft,nMaxScrollTop:this.nMaxScrollTop,oEvent:t||{}}},setUsePullDown:function(t){this._isUse("pull")&&(this.option("bUsePullDown",t),this.refresh())},setUsePullUp:function(t){this._isUse("pull")&&(this.option("bUsePullUp",t),this.refresh())},_onUpdater:function(){(this._oMoveData.nLeft!=this._nLeft||this._oMoveData.nTop!=this._nTop)&&this._setPos(this._oMoveData.nLeft,this._oMoveData.nTop),this._startUpdater()},_startUpdater:function(){this._stopUpdater(),this._nUpdater=window.requestAnimationFrame(this._htEvent.updater)},_stopUpdater:function(){window.cancelAnimationFrame(this._nUpdater),this._nUpdater=-1},_onStart:function(t){this._clearPositionBug(),this._isStop=!1,this._fireTouchEvent("beforeTouchStart",t)?(this.option("bUseTimingFunction")&&this._transitionTime(0),this._isAnimating&&this._stopScroll()&&(this._isAnimating=!1),this._isControling=!0,this._fireTouchEvent("touchStart",t)||t.stop()):t.stop()},_onMove:function(t){var e=0,i=0;if(this._clearTouchEnd(),this._clearPositionBug(),this.isClickBug&&this._htWElement.scroller.css("pointerEvents","none"),this._fireTouchEvent("beforeTouchMove",t)){this._isUse("pull")&&this._inst("pull").touchMoveForUpdate(t,this.nMaxScrollTop);var n=t.oEvent;if(t.sMoveType===jindo.m.MOVETYPE[0]){if(!this.bUseHScroll)return!0;if(!this.option("bUseBounce")&&(this._nLeft>=0&&t.nVectorX>0||this._nLeft<=this.nMaxScrollLeft&&t.nVectorX<0))return void this._forceRestore(t);n.stop(jindo.$Event.CANCEL_ALL)}else if(t.sMoveType===jindo.m.MOVETYPE[1]){if(!this.bUseVScroll)return!0;if(!this.option("bUseBounce")&&(this._nTop>=this.nMinScrollTop&&t.nVectorY>0||this._nTop<=this.nMaxScrollTop&&t.nVectorY<0))return void this._forceRestore(t);n.stop(jindo.$Event.CANCEL_ALL)}else{if(t.sMoveType!==jindo.m.MOVETYPE[2])return n.stop(jindo.$Event.CANCEL_ALL),!0;if(!this.option("bUseDiagonalTouch"))return;n.stop(jindo.$Event.CANCEL_ALL)}if(this.option("bUseBounce")){this.bUseHScroll&&(e=this._nLeft+(this._nLeft>=0||this._nLeft<=this.nMaxScrollLeft?t.nVectorX/2:t.nVectorX)),this.bUseVScroll&&(i=this._nTop+(this._nTop>=this.nMinScrollTop||this._nTop<=this.nMaxScrollTop?t.nVectorY/2:t.nVectorY));var s=this;this._htTimer.touch=setTimeout(function(){s._forceRestore(t)},500)}else e=this.getPosLeft(this._nLeft+t.nVectorX),i=this.getPosTop(this._nTop+t.nVectorY);this._setPos(e,i),this._fireTouchEvent("touchMove",t)||t.stop()}else t.stop()},_onEnd:function(t){this._isUse("pull")&&this._inst("pull").pullUploading(),this._fireTouchEvent("beforeTouchEnd",t)?(this._clearPositionBug(),this._clearTouchEnd(),t.sMoveType===jindo.m.MOVETYPE[0]||t.sMoveType===jindo.m.MOVETYPE[1]||t.sMoveType===jindo.m.MOVETYPE[2]?(this._endForScroll(t),this.nVersion<4.1&&t.oEvent.stop(jindo.$Event.CANCEL_DEFAULT)):(this._isControling=!1,this._isStop||this._tapHighlight()),this._fireTouchEvent("touchEnd",t)||t.stop()):t.stop(),this.isClickBug&&this._htWElement.scroller.css("pointerEvents","auto")},_tapHighlight:function(){if(this._hasKitkatHighlightBug){this._htWElement.wrapper.removeClass(jindo.m.KITKAT_HIGHLIGHT_CLASS),this._htWElement.wrapper._element.clientHeight;var t=this;clearTimeout(this._nHightlightBug),this._nHightlightBug=setTimeout(function(){t._htWElement.wrapper.addClass(jindo.m.KITKAT_HIGHLIGHT_CLASS)},200)}},_forceRestore:function(t){t.nMomentumX=t.nMomentumY=null,this._endForScroll(t),this._clearPositionBug(),this._clearTouchEnd()},_endForScroll:function(t){clearTimeout(this._nFixedDubbleEndBugTimer);var e={nDist:0,nTime:0},i={nDist:0,nTime:0},n={nMomentumX:t.nMomentumX,nMomentumY:t.nMomentumY,nDistanceX:t.nDistanceX,nDistanceY:t.nDistanceY,nLeft:this._nLeft,nTop:this._nTop,nMaxScrollLeft:this.nMaxScrollLeft,nMaxScrollTop:this.nMaxScrollTop};this.option("bUseMomentum")&&(t.nMomentumX||t.nMomentumY)?(this.bUseHScroll&&(e=this._getMomentum(-t.nDistanceX,t.nSpeedX,t.nMomentumX,this.nWrapperW,-this._nLeft,-this.nMaxScrollLeft+this._nLeft)),this.bUseVScroll&&(i=this._getMomentum(-t.nDistanceY,t.nSpeedY,t.nMomentumY,this.nWrapperH,-this._nTop,-this.nMaxScrollTop+this._nTop)),n.nNextLeft=this._nLeft+e.nDist,n.nNextTop=this._nTop+i.nDist,n.nTime=Math.max(Math.max(e.nTime,i.nTime),10),this.fireEvent("beforeScroll",n)&&(this.option("bUseBounce")?this._scrollTo(n.nNextLeft,n.nNextTop,n.nTime):this._scrollTo(this.getPosLeft(n.nNextLeft),this.getPosTop(n.nNextTop),n.nTime))):(n.nNextLeft=this._nLeft,n.nNextTop=this._nTop,n.nTime=0,this.fireEvent("beforeScroll",n)&&(this._nLeft!==n.nNextLeft||this._nTop!==n.nNextTop?this._scrollTo(n.nNextLeft,n.nNextTop,n.nTime):this.restorePos(300)))},_onTransitionEnd:function(){jindo.m.detachTransitionEnd(this._htWElement.scroller.$value(),this._htEvent.TransitionEnd),this._animate()},_onDocumentStart:function(t){if(this._htWElement.wrapper.visible()){if(this._htWElement.wrapper.isChildOf(t.element))return!0;this._isAnimating&&this._isControling&&this._stopScroll()}},_onActivate:function(){this._oTouch?this._oTouch.activate():this._oTouch=new jindo.m.Touch(this._htWElement.wrapper.$value(),{nMoveThreshold:0,nMomentumDuration:jindo.m.getDeviceInfo().android?500:200,nUseDiagonal:0,nTapThreshold:1,nSlopeThreshold:5,nEndEventThreshold:jindo.m.getDeviceInfo().win8?100:0,bHorizental:this.option("bUseHScroll"),bVertical:this.option("bUseVScroll")}),this._attachEvent(),this.refresh()},_onDeactivate:function(){this._detachEvent(),this._oTouch.deactivate()},_attachEvent:function(){this._htEvent={},this._htEvent.touchStart=jindo.$Fn(this._onStart,this).bind(),this._htEvent.touchMove=jindo.$Fn(this._onMove,this).bind(),this._htEvent.touchEnd=jindo.$Fn(this._onEnd,this).bind(),this._htEvent.TransitionEnd=jindo.$Fn(this._onTransitionEnd,this).bind(),this._htEvent.document=jindo.$Fn(this._onDocumentStart,this).attach(document,"touchstart"),this._oTouch.attach({touchStart:this._htEvent.touchStart,touchMove:this._htEvent.touchMove,touchEnd:this._htEvent.touchEnd}),this.option("bAutoResize")&&(this._htEvent.rotate=jindo.$Fn(this._onRotate,this).bind(),jindo.m.bindRotate(this._htEvent.rotate)),this.option("bUseTimingFunction")||(this._htEvent.updater=jindo.$Fn(this._onUpdater,this).bind())},_fixPositionBug:function(){if(this.isPositionBug&&this.bUseHighlight){var t=this;this._clearPositionBug(),this._htTimer.fixed=setTimeout(function(){t._htWElement&&t._htWElement.scroller&&(t.makeStylePos(t._htWElement.scroller),t.nVersion<=3&&t._elDummyTag.focus())},200)}},makeStylePos:function(t){var e=t.$value(),i=jindo.m.getTranslateOffset(e),n=t.offset();e.style[jindo.m._toPrefixStr("Transform")]=this.nVersion>=4?jindo.m._getTranslate(0,0,this._bUseCss3d):null,e.style[jindo.m._toPrefixStr("TransitionDuration")]=null,this._hasJindoOffsetBug?t.offset(i.top+n.top,i.left+n.left):t.offset(n.top,n.left)},_clearPositionBug:function(){this.isPositionBug&&this.bUseHighlight&&(clearTimeout(this._htTimer.fixed),this._htTimer.fixed=-1)},_clearTouchEnd:function(){clearTimeout(this._htTimer.touch),this._htTimer.touch=-1},_detachEvent:function(){jindo.m.detachTransitionEnd(this._htWElement.scroller.$value(),this._htEvent.TransitionEnd),this._htEvent.document.detach(document,"touchstart"),this.option("bAutoResize")&&jindo.m.unbindRotate(this._htEvent.rotate),this._oTouch.detachAll(),this._elDummyTag&&this._htWElement.scroller.remove(this._elDummyTag),this.option("bUseTimingFunction")||this._stopUpdater()},_createScroll:function(t){if("H"===t?this.bUseHScroll:this.bUseVScroll){var e,i=this._htWElement.wrapper,n=jindo.$Element(i.query("div."+jindo.m.Scroll.SCROLLBAR_CLASS));n&&(i.remove(n),n=this._htWElement[t+"scrollbar"]=this._htWElement[t+"scrollbarIndicator"]=null),n=this._createScrollbar(t),e=this._createScrollbarIndicator(t),this._htWElement[t+"scrollbar"]=n,this._htWElement[t+"scrollbarIndicator"]=e,n.append(e),i.append(n)}},_createScrollbar:function(t){var e=jindo.$Element("<div class='"+jindo.m.Scroll.SCROLLBAR_CLASS+"'>");return e.css({position:"absolute",zIndex:100,bottom:"H"===t?"1px":(this.bUseHScroll?"7":"2")+"px",right:"H"===t?(this.bUseVScroll?"7":"2")+"px":"1px",pointerEvents:"none"}),this.option("bUseFixedScrollbar")?e.show():e.hide(),e.css("H"===t?{height:"5px",left:"2px"}:{width:"5px",top:"2px"}),e},_createScrollbarIndicator:function(t){var e=jindo.$Element("<div>").css({position:"absolute",zIndex:100,border:this.option("sScrollbarBorder"),pointerEvents:"none",left:0,top:0,backgroundColor:this.option("sScrollbarColor")});return jindo.m.getOsInfo().ios&&this.option("bUseScrollBarRadius")&&e.css(jindo.m._toPrefixStr("BorderRadius"),"12px"),e.css(jindo.m._toPrefixStr("TransitionProperty"),""==this.sCssPrefix?"transform":"-"+this.sCssPrefix+"-transform").css(jindo.m._toPrefixStr("Transform"),jindo.m._getTranslate(0,0,this._bUseCss3d)),this.option("bUseTimingFunction")&&e.css(jindo.m._toPrefixStr("TransitionTimingFunction"),this.option("fEffect").toString()),"H"===t?e.height(5):e.width(5),e},_refreshScroll:function(t){if("H"===t){if(!this.bUseHScroll||this.nWrapperW==this.nScrollW)return}else if(!this.bUseVScroll||this.nWrapperH==this.nScrollH)return;this._htWElement[t+"scrollbar"]||this._createScroll(t);var e=this._htWElement[t+"scrollbar"],i=this._htWElement[t+"scrollbarIndicator"],n=0;"H"===t?(n=Math.max(Math.round(Math.pow(this.nWrapperW,2)/this.nScrollW),8),this._nPropHScroll=(this.nWrapperW-n)/this.nMaxScrollLeft,e.width(this.nWrapperW),i.width(isNaN(n)?0:n)):(n=Math.max(Math.round(Math.pow(this.nWrapperH,2)/this.nScrollH),8),this._nPropVScroll=(this.nWrapperH-n)/this.nMaxScrollTop,e.height(this.nWrapperH),i.height(isNaN(n)?0:n))},_setScrollBarPos:function(t,e){if("H"===t?this.bUseHScroll:this.bUseVScroll){var i=this._htWElement[t+"scrollbarIndicator"],n=this._htWElement[t+"scrollbar"];if(i&&n&&(e=this["_nProp"+t+"Scroll"]*e,this.option("bUseFixedScrollbar")||!n||n.visible()||(n.show(),this.option("bUseTimingFunction")&&n.$value().clientHeight),i)){if(this.isPositionBug&&this.bUseHighlight){var s=parseInt(i.css("H"===t?"left":"top"),10);e-=isNaN(s)?0:s}i.css(jindo.m._toPrefixStr("Transform"),jindo.m._getTranslate("H"==t?e+"px":0,"H"==t?0:e+"px",this._bUseCss3d))}}},destroy:function(){this.deactivate(),this.detachAll();for(var t in this._htWElement)this._htWElement[t]=null;this._htWElement=null,this._oTouch.destroy(),delete this._oTouch}}).extend(jindo.m.UIComponent),jindo.m.DynamicPlugin=jindo.$Class({$init:function(t,e){this.option({nRatio:1.5,sListElement:"li",sDirection:"V"}),this.option(e||{}),this._initVar(t)},_initVar:function(t){this._wel=jindo.$Element(t),this._aListElement=null,this._nStartIdx=-1,this._nEndIdx=-1,this._nRatio=parseInt(this.option("nRatio"),10),this._nPos=-1,this._nSize=-1,this._sDirection=this.option("sDirection")},refresh:function(t){var e,i=this._wel.queryAll(this.option("sListElement"));if(i){this._aListElement=[];for(var n=0,s=i.length;s>n;n++)e=jindo.$Element(i[n]),this._aListElement.push({el:e.$value(),wel:e,htRange:this._getElementPos(e),sDisplay:e.css("display"),sPosition:e.css("position")});this._nPos=t||0,this._nSize="V"==this._sDirection?this._wel.height():this._wel.width(),this._covertPositionType()}},_covertPositionType:function(){for(var t,e=this._getStartBoundary(),i=this._getEndBoundary(),n=0,s=this._aListElement.length;s>n;n++)t=this._aListElement[n],t.wel.css("V"==this._sDirection?{top:t.htRange.nStartPos+"px",width:"100%"}:{left:t.htRange.nStartPos+"px",height:"100%"}),t.wel.css("position","absolute"),t.htRange.nStartPos<=-e?this._nStartIdx=n:t.htRange.nEndPos<=-i?(t.el.style.display=t.sDisplay,this._nEndIdx=n):t.el.style.display="none"},updateListStatus:function(t,e){if(this._aListElement){this._nPos=e;var i,n,s,o=this._getStartBoundary(),h=this._getEndBoundary(),a=this._aListElement.length;if("forward"==t){for(n=this._nStartIdx+1;a>n&&(i=this._aListElement[n],s=i.htRange.nEndPos,-o>s);n++)i.el.style.display="none",this._nStartIdx=n;for(n=this._nEndIdx;a>n&&(i=this._aListElement[n],s=i.htRange.nStartPos,-h>s);n++)i.el.style.display=i.sDisplay,this._nEndIdx++}else if("backward"==t){for(n=this._nEndIdx-1;n>=0&&(i=this._aListElement[n],s=i.htRange.nStartPos,!(-h>s));n--)i.el.style.display="none",this._nEndIdx--;for(n=this._nStartIdx;n>=0&&(i=this._aListElement[n],s=i.htRange.nEndPos,!(-o>s));n--)i.el.style.display=i.sDisplay,this._nStartIdx--}}},_getStartBoundary:function(){return this._nPos+this._nSize*this._nRatio},_getEndBoundary:function(){return this._nPos-this._nSize-this._nSize*this._nRatio},_getElementPos:function(t){var e,i;return"V"==this._sDirection?(e=t.offset().top-this._wel.offset().top,i=e+t.height()):(e=t.offset().left-this._wel.offset().left,i=e+t.width()),{nStartPos:e,nEndPos:i}}}).extend(jindo.m.Component),jindo.m.CoreScroll=jindo.$Class({$init:function(t,e){this.option({bActivateOnload:!0,bUseHScroll:!1,bUseVScroll:!0,bUseMomentum:!0,nDeceleration:6e-4,nOffsetTop:0,nOffsetBottom:0,nHeight:0,nWidth:0,bUseBounce:!0,bUseHighlight:!0,sClassPrefix:"scroll_",bUseCss3d:jindo.m._isUseCss3d(),bUseTimingFunction:jindo.m._isUseTimingFunction(),sListElement:"",nRatio:1.5,bUseTranslate:!0}),this.option(e||{}),this._initVar(),this._setWrapperElement(t),this.option("bActivateOnload")&&this.activate()},_initVar:function(){var t=jindo.m.getDeviceInfo();this.isPositionBug=t.android&&!t.bChrome,this.isIos=t.ipad||t.iphone,this.isClickBug=jindo.m.hasClickBug(),this.nVersion=parseFloat(t.version.substr(0,3)),this.sCssPrefix=jindo.m.getCssPrefix(),this.sTranOpen=null,this.sTranEnd=null,this.nWrapperW=null,this.nWrapperH=null,this.nScrollW=null,this.nScrollH=null,this.nMaxScrollLeft=null,this.nMaxScrollTop=null,this.nMinScrollTop=null,this.bUseHScroll=null,this.bUseVScroll=null,this._nLeft=0,this._nTop=0,this.bUseHighlight=this.option("bUseHighlight"),this._aAni=[],this._nAniTimer=-1,this._nFixedPositionBugTimer=-1,this._nTouchEndTimer=-1,this._oTouch=null,this._oDynamicScrollPlugin=null,this._bUseDynamicScroll=!1,this._isAnimating=!1,this._isControling=!1,this._isStop=!1,this.option("sListElement")&&this.option("bUseCss3d",!1),this._setTrans(),this.bUseHighlight&&(this.isPositionBug&&(this._elDummyTag=null),this.isClickBug&&(this._aAnchor=null,this._fnDummyFnc=function(){return!1},this._bBlocked=!1))},_setTrans:function(){this.option("bUseCss3d")?(this.sTranOpen="3d(",this.sTranEnd=",0)"):(this.sTranOpen="(",this.sTranEnd=")")},getCurrentPos:function(){return{nTop:this._nTop,nLeft:this._nLeft}},setLayer:function(t){this._htWElement.wrapper=jindo.$Element(t),this._htWElement.wrapper.css("overflow","hidden"),"static"==this._htWElement.wrapper.css("position")&&this._htWElement.wrapper.css("position","relative"),this.bUseHighlight||this._htWElement.wrapper.css("-"+this.sCssPrefix+"-tap-highlight-color","transparent"),this.setScroller()},setScroller:function(){this._htWElement.scroller=this._htWElement.wrapper.first(),this._htWElement.scroller.css({position:"absolute",zIndex:1,left:0,top:0}),(this.option("bUseTranslate")||this.option("bUseCss3d"))&&this._htWElement.scroller.css("-"+this.sCssPrefix+"-transition-property","-"+this.sCssPrefix+"-transform").css("-"+this.sCssPrefix+"-transform","translate"+this.sTranOpen+"0,0"+this.sTranEnd),this.option("bUseTimingFunction")&&this._htWElement.scroller.css("-"+this.sCssPrefix+"-transition-timing-function","cubic-bezier(0.33,0.66,0.66,1)"),this.isPositionBug&&this.bUseHighlight&&this.nVersion<3&&(this._elDummyTag=this._htWElement.scroller.query("._scroller_dummy_atag_"),this._elDummyTag?this._elDummyTag=this._elDummyTag.$value():(this._elDummyTag=jindo.$("<a href='javascript:void(0);' style='position:absolute;height:0px;width:0px;' class='_scroller_dummy_atag_'></a>"),this._htWElement.scroller.append(this._elDummyTag)))},_setWrapperElement:function(t){this._htWElement={},this.setLayer(t)},refresh:function(t){if(this.isActivating()){this.option("nWidth")&&this._htWElement.wrapper.width(parseInt(this.option("nWidth"),10)),this.option("nHeight")&&this._htWElement.wrapper.height(parseInt(this.option("nHeight"),10));var e=parseInt(this._htWElement.wrapper.css("border-left-width"),10),i=parseInt(this._htWElement.wrapper.css("border-right-width"),10),n=parseInt(this._htWElement.wrapper.css("border-top-width"),10),s=parseInt(this._htWElement.wrapper.css("border-bottom-width"),10);if(e=isNaN(e)?0:e,i=isNaN(i)?0:i,n=isNaN(n)?0:n,s=isNaN(s)?0:s,this.nWrapperW=this._htWElement.wrapper.width()-e-i,this.nWrapperH=this._htWElement.wrapper.height()-n-s,this.nScrollW=this._htWElement.scroller.width(),this.nScrollH=this._htWElement.scroller.height()-this.option("nOffsetBottom"),this.nMaxScrollLeft=this.nWrapperW-this.nScrollW,this.nMaxScrollTop=this.nWrapperH-this.nScrollH,this.nMinScrollTop=-this.option("nOffsetTop"),this.bUseHighlight&&this.isClickBug&&(this._aAnchor=jindo.$$("A",this._htWElement.scroller.$value())),this.bUseHScroll=this.option("bUseHScroll")&&this.nWrapperW<=this.nScrollW,this.bUseVScroll=this.option("bUseVScroll")&&this.nWrapperH<=this.nScrollH,this.bUseHScroll&&!this.bUseVScroll&&(this._htWElement.scroller.$value().style.height="100%"),!this.bUseHScroll&&this.bUseVScroll&&(this._htWElement.scroller.$value().style.width="100%"),this._bUseDynamicScroll=!1,this.option("sListElement")&&(!this.bUseVScroll||!this.bUseHScroll)){var o=2*this.option("nRatio");this.bUseVScroll&&this.nScrollH>this.nWrapperH*o?this._createDynamicScrollPlugin("V"):this.bUseHScroll&&this.nScrollW>this.nWrapperW*o&&this._createDynamicScrollPlugin("H")}this.bUseHScroll||this.bUseVScroll||this._fixPositionBug(),t||this.restorePos(0)}},_createDynamicScrollPlugin:function(t){this._oDynamicScrollPlugin||(this._oDynamicScrollPlugin=new jindo.m.DynamicPlugin(this._htWElement.wrapper,{nRatio:this.option("nRatio"),sListElement:this.option("sListElement"),sDirection:t})),this._oDynamicScrollPlugin.refresh("V"==t?this._nTop:this._nLeft),this.option("bUseTimingFunction",!1),this._bUseDynamicScroll=!0},_setPos:function(t,e){var i;if(t=this.bUseHScroll?t:0,e=this.bUseVScroll?e:0,this._bUseDynamicScroll&&(i=this._checkDirection(t,e)),this._fireEvent("beforePosition")){if(this._isControling=!0,this._nLeft=t,this._nTop=e,this._bUseDynamicScroll&&this._oDynamicScrollPlugin.updateListStatus(i,this.bUseVScroll?this._nTop:this._nLeft),this.option("bUseTranslate")){if(this.bUseHighlight&&this.isPositionBug){var n=this.getStyleOffset(this._htWElement.scroller);t-=n.left,e-=n.top}this._htWElement.scroller.css("-"+this.sCssPrefix+"-transform","translate"+this.sTranOpen+t+"px, "+e+"px"+this.sTranEnd)}else this._htWElement.scroller.css({left:t+"px",top:e+"px"});this._fireEvent("position")}},_checkDirection:function(t,e){var i,n=this.bUseVScroll?this._nTop:this._nLeft,s=this.bUseVScroll?e:t;return i=n>s?"forward":"backward"},restorePos:function(t){if(this.bUseHScroll||this.bUseVScroll){var e=this.getPosLeft(this._nLeft),i=this.getPosTop(this._nTop);return e===this._nLeft&&i===this._nTop?(this._isControling=!1,this._fireEvent("afterScroll"),void this._fixPositionBug()):void this.scrollTo(e,i,t)}},_getMomentum:function(t,e,i,n,s,o){var h=this.option("nDeceleration"),a=i/h,r=0,l=0;return 0>t&&a>s?(l=n/(6/(a/e*h)),s+=l,e=e*s/a,a=s):t>0&&a>o&&(l=n/(6/(a/e*h)),o+=l,e=e*o/a,a=o),a*=t>0?-1:1,r=e/h,{nDist:a,nTime:Math.round(r)}},_stop:function(){this.option("bUseTimingFunction")?jindo.m.detachTransitionEnd(this._htWElement.scroller.$value(),this._htEvent.TransitionEnd):cancelAnimationFrame(this._nAniTimer),this._aAni=[],this._isAnimating=!1,this._isStop=!0},scrollTo:function(t,e,i){this._stop(),t=this.bUseHScroll?t:0,e=this.bUseVScroll?e:0,this._aAni.push({nLeft:t,nTop:e,nDuration:i||0}),this._animate()},isMoving:function(){return this._isControling},_animate:function(){var t,e=this;if(!this._isAnimating){if(!this._aAni.length)return void this.restorePos(300);do if(t=this._aAni.shift(),!t)return;while(t.nLeft==this._nLeft&&t.nTop==this._nTop);if(0==t.nDuration)this.option("bUseTimingFunction")&&this._transitionTime(0),this._setPos(t.nLeft,t.nTop),this._animate();else if(this._isAnimating=!0,this.option("bUseTimingFunction"))this._transitionTime(t.nDuration),this._setPos(t.nLeft,t.nTop),this._isAnimating=!1,jindo.m.attachTransitionEnd(this._htWElement.scroller.$value(),this._htEvent.TransitionEnd);else{var i=(new Date).getTime(),n=this._nLeft,s=this._nTop;!function o(){var h,a=(new Date).getTime();return a>=i+t.nDuration?(e._setPos(t.nLeft,t.nTop),e._isAnimating=!1,void e._animate()):(a=(a-i)/t.nDuration-1,h=Math.sqrt(1-Math.pow(a,2)),e._setPos((t.nLeft-n)*h+n,(t.nTop-s)*h+s),void(e._isAnimating&&(e._nAniTimer=requestAnimationFrame(o))))}()}}},_transitionTime:function(t){t+="ms",this._htWElement.scroller.css("-"+this.sCssPrefix+"-transition-duration",t),this._fireEventSetDuration(t)
},_clearAnchor:function(){if(this.isClickBug&&this._aAnchor&&!this._bBlocked){for(var t=null,e=0,i=this._aAnchor.length;i>e;e++)if(!this._aAnchor[e].___isClear___){this._fnDummyFnc!==this._aAnchor[e].onclick&&(this._aAnchor[e]._onclick=this._aAnchor[e].onclick),this._aAnchor[e].onclick=this._fnDummyFnc,this._aAnchor[e].___isClear___=!0,t=this._aAnchor[e].___listeners___||[];for(var n=0,s=t.length;s>n;n++)___Old__removeEventListener___.call(this._aAnchor[e],"click",t[n].listener,t[n].useCapture)}this._bBlocked=!0}},_restoreAnchor:function(){if(this.isClickBug&&this._aAnchor&&this._bBlocked){for(var t=null,e=0,i=this._aAnchor.length;i>e;e++)if(this._aAnchor[e].___isClear___){this._aAnchor[e].onclick=this._fnDummyFnc!==this._aAnchor[e]._onclick?this._aAnchor[e]._onclick:null,this._aAnchor[e].___isClear___=null,t=this._aAnchor[e].___listeners___||[];for(var n=0,s=t.length;s>n;n++)___Old__addEventListener___.call(this._aAnchor[e],"click",t[n].listener,t[n].useCapture)}this._bBlocked=!1}},_stopScroll:function(){var t,e,i=jindo.m.getCssOffset(this._htWElement.scroller.$value()),n={left:0,top:0};(this.isPositionBug&&this.bUseHighlight||!this.option("bUseTranslate"))&&(n=this.getStyleOffset(this._htWElement.scroller)),e=i.left+n.left,t=i.top+n.top,(e!==parseInt(this._nLeft,10)||t!==parseInt(this._nTop,10))&&(this._stop(),this._setPos(this.getPosLeft(e),this.getPosTop(t)),this._isControling=!1,this._fireEvent("afterScroll"),this._fixPositionBug())},getStyleOffset:function(t){var e=parseInt(t.css("left"),10),i=parseInt(t.css("top"),10);return e=isNaN(e)?0:e,i=isNaN(i)?0:i,{left:e,top:i}},getPosLeft:function(t){return t>=0?0:t<=this.nMaxScrollLeft?this.nMaxScrollLeft:t},getPosTop:function(t){return t>=this.nMinScrollTop?this.nMinScrollTop:t<=this.nMaxScrollTop?this.nMaxScrollTop:t},_fireEventSetDuration:function(t){this.fireEvent("setDuration",{nDuration:t,bUseHScroll:this.bUseHScroll,bUseVScroll:this.bUseVScroll})},_fireEventbeforeScroll:function(t){return this.fireEvent("beforeScroll",t)},_fireEventScroll:function(t){this.fireEvent("scroll",t)},_fireEvent:function(t){return this.fireEvent(t,{nLeft:this._nLeft,nTop:this._nTop,nMaxScrollLeft:this.nMaxScrollLeft,nMaxScrollTop:this.nMaxScrollTop})},_fireTouchEvent:function(t,e){return this.fireEvent(t,{nLeft:this._nLeft,nTop:this._nTop,nMaxScrollLeft:this.nMaxScrollLeft,nMaxScrollTop:this.nMaxScrollTop,oEvent:e})},_onStart:function(t){this._clearPositionBug(),this._fireTouchEvent("beforeTouchStart",t)?(this._clearAnchor(),this._isAnimating=!1,this._isControling=!0,this._isStop=!1,this.option("bUseTimingFunction")&&this._transitionTime(0),this._stopScroll(),this._fireTouchEvent("touchStart",t)||t.stop()):t.stop()},_onMove:function(t){this._clearTouchEnd();var e=t.oEvent;if(t.sMoveType===jindo.m.MOVETYPE[0]){if(!this.bUseHScroll)return!0;if(!this.option("bUseBounce")&&(this._nLeft>=0&&t.nVectorX>0||this._nLeft<=this.nMaxScrollLeft&&t.nVectorX<0))return void this._forceRestore(t);e.stop(jindo.$Event.CANCEL_ALL)}else if(t.sMoveType===jindo.m.MOVETYPE[1]){if(!this.bUseVScroll)return!0;if(!this.option("bUseBounce")&&(this._nTop>=this.nMinScrollTop&&t.nVectorY>0||this._nTop<=this.nMaxScrollTop&&t.nVectorY<0))return void this._forceRestore(t);e.stop(jindo.$Event.CANCEL_ALL)}else{if(t.sMoveType!==jindo.m.MOVETYPE[2])return e.stop(jindo.$Event.CANCEL_ALL),!0;e.stop(jindo.$Event.CANCEL_ALL)}if(this._fireTouchEvent("beforeTouchMove",t)){var i,n;if(this._clearPositionBug(),this.option("bUseBounce")){i=this._nLeft+(this._nLeft>=0||this._nLeft<=this.nMaxScrollLeft?t.nVectorX/2:t.nVectorX),n=this._nTop+(this._nTop>=this.nMinScrollTop||this._nTop<=this.nMaxScrollTop?t.nVectorY/2:t.nVectorY);var s=this;this._nTouchEndTimer=setTimeout(function(){s._forceRestore(t)},500)}else i=this.getPosLeft(this._nLeft+t.nVectorX),n=this.getPosTop(this._nTop+t.nVectorY);this._setPos(i,n),this._fireTouchEvent("touchMove",t)||t.stop()}else t.stop()},_onEnd:function(t){this._fireTouchEvent("beforeTouchEnd",t)?(this._clearPositionBug(),this._clearTouchEnd(),t.sMoveType===jindo.m.MOVETYPE[0]||t.sMoveType===jindo.m.MOVETYPE[1]||t.sMoveType===jindo.m.MOVETYPE[2]?(this._endForScroll(t),(this.isClickBug||this.nVersion<4.1)&&t.oEvent.stop(jindo.$Event.CANCEL_DEFAULT)):(this._isControling=!1,this._isStop||this.bUseHighlight&&this._restoreAnchor()),this._fireTouchEvent("touchEnd",t)||t.stop()):t.stop()},_forceRestore:function(t){t.nMomentumX=t.nMomentumY=null,this._endForScroll(t),this._clearPositionBug(),this._clearTouchEnd()},_endForScroll:function(t){clearTimeout(this._nFixedDubbleEndBugTimer);var e={nDist:0,nTime:0},i={nDist:0,nTime:0},n={nMomentumX:t.nMomentumX,nMomentumY:t.nMomentumY,nDistanceX:t.nDistanceX,nDistanceY:t.nDistanceY,nLeft:this._nLeft,nTop:this._nTop};this.option("bUseMomentum")&&(t.nMomentumX||t.nMomentumY)?(this.bUseHScroll&&(e=this._getMomentum(-t.nDistanceX,t.nSpeedX,t.nMomentumX,this.nWrapperW,-this._nLeft,-this.nMaxScrollLeft+this._nLeft)),this.bUseVScroll&&(i=this._getMomentum(-t.nDistanceY,t.nSpeedY,t.nMomentumY,this.nWrapperH,-this._nTop,-this.nMaxScrollTop+this._nTop)),n.nNextLeft=this._nLeft+e.nDist,n.nNextTop=this._nTop+i.nDist,n.nTime=Math.max(Math.max(e.nTime,i.nTime),10),this._fireEventbeforeScroll(n)&&(this.option("bUseBounce")?this.scrollTo(n.nNextLeft,n.nNextTop,n.nTime):this.scrollTo(this.getPosLeft(n.nNextLeft),this.getPosTop(n.nNextTop),n.nTime),this._fireEventScroll(n))):(n.nNextLeft=this._nLeft,n.nNextTop=this._nTop,n.nTime=0,this._fireEventbeforeScroll(n)&&(this._nLeft!==n.nNextLeft||this._nTop!==n.nNextTop?this.scrollTo(n.nNextLeft,n.nNextTop,n.nTime):this.restorePos(300),this._fireEventScroll(n)))},_onTransitionEnd:function(){jindo.m.detachTransitionEnd(this._htWElement.scroller.$value(),this._htEvent.TransitionEnd),this._animate()},_onDocumentStart:function(t){if(this._htWElement.wrapper.visible()){if(this._htWElement.wrapper.isChildOf(t.element))return!0;this._stopScroll()}},_onActivate:function(){this._oTouch?this._oTouch.activate():this._oTouch=new jindo.m.Touch(this._htWElement.wrapper.$value(),{nMoveThreshold:0,nMomentumDuration:jindo.m.getDeviceInfo().android?500:200,nTapThreshold:1,nSlopeThreshold:5,nEndEventThreshold:jindo.m.getDeviceInfo().win8?100:0}),this._attachEvent(),this.refresh()},_onDeactivate:function(){this._detachEvent(),this._oTouch.deactivate()},_attachEvent:function(){this._htEvent={},this._htEvent.touchStart=jindo.$Fn(this._onStart,this).bind(),this._htEvent.touchMove=jindo.$Fn(this._onMove,this).bind(),this._htEvent.touchEnd=jindo.$Fn(this._onEnd,this).bind(),this._htEvent.TransitionEnd=jindo.$Fn(this._onTransitionEnd,this).bind(),this._htEvent.document=jindo.$Fn(this._onDocumentStart,this).attach(document,"touchstart"),this._oTouch.attach({touchStart:this._htEvent.touchStart,touchMove:this._htEvent.touchMove,touchEnd:this._htEvent.touchEnd})},_fixPositionBug:function(){if(this.isPositionBug&&this.bUseHighlight&&this.option("bUseTranslate")){var t=this;this._clearPositionBug(),this._nFixedPositionBugTimer=setTimeout(function(){t._htWElement&&t._htWElement.scroller&&(t.makeStylePos(t._htWElement.scroller),t.nVersion<3&&t._elDummyTag.focus())},200)}},makeStylePos:function(t){var e=t.$value(),i=jindo.m.getCssOffset(e),n=t.offset();e.style["-"+this.sCssPrefix+"-transform"]=this.nVersion>=4?"translate"+this.sTranOpen+"0px, 0px"+this.sTranEnd:null,e.style["-"+this.sCssPrefix+"-transition-duration"]=null,t.offset(i.top+n.top,i.left+n.left)},_clearPositionBug:function(){this.isPositionBug&&this.bUseHighlight&&(clearTimeout(this._nFixedPositionBugTimer),this._nFixedPositionBugTimer=-1)},_clearTouchEnd:function(){clearTimeout(this._nTouchEndTimer),this._nTouchEndTimer=-1},_detachEvent:function(){jindo.m.detachTransitionEnd(this._htWElement.scroller.$value(),this._htEvent.TransitionEnd),this._htEvent.document.detach(document,"touchstart"),this._oTouch.detachAll(),this._elDummyTag&&this._htWElement.scroller.remove(this._elDummyTag)},destroy:function(){this.deactivate();for(var t in this._htWElement)this._htWElement[t]=null;this._htWElement=null,this._oTouch.destroy(),delete this._oTouch}}).extend(jindo.m.UIComponent),jindo.m.SlideEffect=jindo.$Class({sEffectName:"slide",getCommand:function(t,e){e.nDistance&&(e.nSize=e.nDistance);var i,n,s,o=e.sDirection?e.sDirection:"left",h=jindo.m.getCssOffset(t),a=h.left,r=h.top;if(i="undefined"!=typeof e.nSize?e.nSize:this._htLayerInfo.nWidth,n="undefined"!=typeof e.nSize?e.nSize:this._htLayerInfo.nHeight,("up"==o||"down"==o)&&(r+="up"==o?-1*n:n),("left"==o||"right"==o)&&(a+="left"==o?-1*i:i),"undefined"!=typeof e.elBaseLayer){a=0,r=0;var l=jindo.$Element(e.elBaseLayer);s=jindo.$Element(t),n="undefined"!=typeof e.nSize?e.nSize:l.height(),i="undefined"!=typeof e.nSize?e.nSize:l.width(),("up"==o||"down"==o)&&(r="down"==o?-1*n:n),("left"==o||"right"==o)&&(a="left"==o?i:-1*i),a=-1*a,r=-1*r}var _=this._htLayerInfo.sPosition,c=this.bAndroid,u=this.bAndroid3Up,f=this._htLayerInfo.sClassHighligting,d=this.bAndroid2_1;s=jindo.$Element(t);var m=e.htTo||{};m.transform=this.sTranOpen+a+"px, "+r+"px"+this.sTranEnd;var p={};return this.getTranslateStyle(m,p),{sTaskName:this.sEffectName+"-"+o,htStyle:p,fCallback:function(){var e=jindo.m.getCssOffset(t),i=1*s.css("top").replace("px",""),n=1*s.css("left").replace("px","");i=isNaN(i)?0:i,n=isNaN(n)?0:n,"relative"==_?s.css("position","relative"):s.css("position","absolute");var o=jindo.m.getCssPrefix();if(s.css(o+"Transform",""),u&&s.offset(),s.$value().style.top=parseInt(i+e.top,10)+"px",s.$value().style.left=parseInt(e.left+n,10)+"px",c&&!u){var h=jindo.$$.getSingle("."+f,s.$value());h&&(d?setTimeout(function(){h.focus()},5):h.focus())}}}},getBeforeCommand:function(t,e){var i=e.sDirection?e.sDirection:"left",n=e.htFrom||{},s=jindo.$Element(t);if("undefined"!=typeof e.elBaseLayer){var o=jindo.$Element(e.elBaseLayer);if(!o.isParentOf(s)){o.append(s);var h=s.css("position");"relative"!=h&&"absolute"!=h&&s.css("position","absolute"),s.css("opacity",0)}var a=0,r=0,l=o.height(),_=o.width();("up"==i||"down"==i)&&(r="down"==i?-1*l:l),("left"==i||"right"==i)&&(a="left"==i?_:-1*_),o.css("overflow","hidden"),n.left=a+"px",n.top=r+"px",n.opacity=this._htLayerInfo.nOpacity}var c={};return this.getTranslateStyle(n,c),{htStyle:c}}}).extend(jindo.m._Effect_),jindo.m.CoreTab=jindo.$Class({$init:function(t,e){this.option({sClassPrefix:"tc-",nDefaultIndex:0,nPanelDuration:0,nHeight:0,nWidth:0,bActivateOnload:!0}),this.option(e||{}),this._initVar(),this._setWrapperElement(t)},_initVar:function(){this._sPrefix=this.option("sClassPrefix"),this._nCurrentIndex=-1,this._aTab=[],this._aPanel=[],this._oPanelEffect=null},_setWrapperElement:function(t){this._htWElement={},t="string"==typeof t?jindo.$(t):t,t&&(this._htWElement.baseElement=jindo.$Element(t),this._htWElement.tab_container=jindo.$Element(this._htWElement.baseElement.query("."+this._sPrefix+"tab-cont")),this._htWElement.panel_container=jindo.$Element(this._htWElement.baseElement.query("."+this._sPrefix+"panel-cont")),this._htWElement.tab_container&&this._htWElement.tab_container.css("-"+jindo.m.getCssPrefix()+"-tap-highlight-color","transparent"))},_initData:function(){var t,e,i,n,s=this.option("nPanelDuration");for(this._aTab=this._htWElement.tab_container.queryAll("."+this._sPrefix+"tab"),this._aPanel=this._htWElement.panel_container.queryAll("."+this._sPrefix+"panel"),i=0,n=this._aTab.length;n>i;i++)this._aTab[i]=jindo.$Element(this._aTab[i]),this._aPanel[i]=jindo.$Element(this._aPanel[i]);for(s&&(t=(0==this.option("nWidth")?this._htWElement.panel_container.width()-parseInt(this._aPanel[0].css("paddingLeft"),10)-parseInt(this._aPanel[0].css("paddingRight"),10):this.option("nWidth"))+"px",e=this.option("nHeight")+"px"),i=0,n=this._aTab.length;n>i;i++)this._aTab[i]=this._aTab[i].attr("data-index",i),s&&this._aPanel[i].css({width:t,height:e,position:"absolute"});s&&(this._oPanelEffect=new jindo.m.LayerEffect(this._aPanel[0].$value()),this._htWElement.panel_container.css({position:"relative",overflow:"hidde",height:e}))},_getIdx:function(t){return parseInt(t.attr("data-index"),10)},_getTabElement:function(t){var e=this._sPrefix+"tab",i=this._sPrefix+"more-tab";return t.hasClass(e)||t.hasClass(i)?t:!this._htWElement.tab_container.isParentOf(t)||t.hasClass(e)&&t.hasClass(i)?t:t.parent(function(t){return t.hasClass(e)||t.hasClass(i)},2)[0]},_onActivate:function(){this._attachEvent()},_onDeactivate:function(){this._detachEvent()},_attachEvent:function(){this._htEvent={},this._htEvent.tab_click={el:this._htWElement.tab_container,ref:jindo.$Fn(this._onSelect,this).attach(this._htWElement.tab_container,"click")}},_detachEvent:function(){for(var t in this._htEvent){var e=this._htEvent[t];e.ref.detach(e.el,t.substring(t.lastIndexOf("_")+1))}this._htEvent=null,this._oPanelEffect&&this._oPanelEffect.detachAll()},getCurrentIndex:function(){return this._nCurrentIndex},getTab:function(t){return null!==t&&this._aTab.length>t?this._aTab[t]:this._aTab},getPanel:function(t){return null!==t&&this._aPanel.length>t?this._aPanel[t]:this._aPanel},_onSelect:function(t){if(t.element){if(this._oPanelEffect&&this._oPanelEffect.isPlaying())return t.stop(jindo.$Event.CANCEL_ALL),!1;var e=this._getTabElement(jindo.$Element(t.element));this._onAfterSelect(e)}},select:function(t){if(null!==t&&t>=0&&this._aTab.length>t&&this._nCurrentIndex!=t&&this._fireEventBefore("beforeSelect")){var e=this._sPrefix+"selected";this._beforeSelect(t),this._aTab[t].addClass(e),this._aPanel[t].addClass(e),this._aPanel[t].show(),this._nCurrentIndex>-1&&(this._aTab[this._nCurrentIndex].removeClass(e),this._oPanelEffect?this._slide(this._nCurrentIndex,t):(this._aPanel[this._nCurrentIndex].removeClass(e),this._aPanel[this._nCurrentIndex].hide())),this._nCurrentIndex=t,this._fireEvent("select")}},_slide:function(t,e){var i=this,n=e>t,s=this._aPanel[e].width();this._fireEventBefore("beforeSlide")&&(this._oPanelEffect.setLayer(this._aPanel[e].$value()),this._oPanelEffect.attach("afterEffect",function(){i._onPannelAfterEffct(t,e)}),this._aPanel[e].css({left:n?s:-s,zIndex:9}),this._oPanelEffect.slide({sDirection:n?"left":"right",nDuration:this.option("nPanelDuration"),nSize:s}))},_onPannelAfterEffct:function(t,e){this._aPanel[t].removeClass(this._sPrefix+"selected"),this._aPanel[t].hide(),this._aPanel[t].css("zIndex",1),this._aPanel[e].css("zIndex",2),this._oPanelEffect.detachAll("afterEffect"),this._fireEvent("slide")},_fireEventBefore:function(t){return this.fireEvent(t,{nIndex:this._nCurrentIndex,elTab:this._aTab[this._nCurrentIndex],elPanel:this._aPanel[this._nCurrentIndex]})},_fireEvent:function(t){this.fireEvent(t,{nIndex:this._nCurrentIndex,elTab:this._aTab[this._nCurrentIndex],elPanel:this._aPanel[this._nCurrentIndex]})},destroy:function(){for(var t in this._htWElement)this._htWElement[t]=null;this._htWElement=null;for(t in this._aTab)this._aTab[t]=null;this._aTab=null;for(t in this._aPanel)this._aPanel[t]=null;this._aPanel=null,this._oPanelEffect&&(this._oPanelEffect.destroy(),this._oPanelEffect=null)}}).extend(jindo.m.UIComponent),jindo.m.Cover=jindo.$Class({$init:function(t){this.option({nDefaultScale:.94}),this.option(t||{}),this._welZoom=null},setStyle:function(t){var e={position:"absolute",width:"100%",height:"100%",left:"0px",top:"0px",zIndex:1,opacity:.2,display:"none"},i={};i[this.p("TransitionProperty")]=""==this.sCssPrefix?"tranform":"-"+this.sCssPrefix+"-transform",i[this.p("Transform")]=this.getTranslate(0,0),e=jindo.$Jindo.mixin(e,i),jindo.$A(t[0]).forEach(function(t){t.css(e)}),this.fireEvent("set",{css:i})},move:function(t,e,i,n){this.option("bUseH")?t=this._getPos(t,n):e=this._getPos(e,n);var s=this.getTarget(!0),o={"@transitionProperty":""==this.sCssPrefix?"tranform":"-"+this.sCssPrefix+"-transform","@transform":this.getTranslate(t+"px",e+"px")};if(i){var h=[s,o];this._welZoom&&(h.push(this._welZoom),h.push(this.getZoomCss(this.option("bUseH")?t:e,n))),this._oMorph.pushAnimate(i,h)}else s.css(this.toCss(o)),this._welZoom&&this._welZoom.css(this.toCss(this.getZoomCss(this.option("bUseH")?t:e,n)));return this._oMorph},getZoomCss:function(t,e){var i=e.range,n=e.next?(i-t)/i-1:1-(i-t)/i,s=this.option("nDefaultScale"),o={};s+=n*(1-s);var h=" scale"+this._htTans.open+s+", "+s+(this.option("bUseCss3d")?", 0.1)":this._htTans.end);return o["@opacity"]=n,o["@transitionProperty"]=""==this.sCssPrefix?"tranform":"-"+this.sCssPrefix+"-transform",o["@transform"]=this.getTranslate(0,0)+h,o},change:function(t,e,i){var n={zIndex:1,opacity:.2,display:"block"};n[this.p("TransitionProperty")]=""==this.sCssPrefix?"tranform":"-"+this.sCssPrefix+"-transform",this._changeZoom(e,n,i),this._changeTarget(t,n)},_changeTarget:function(t,e){this._welTarget&&this._welTarget.isEqual(t)||(this._welTarget&&this._welTarget.hide(),e.zIndex=10,e.opacity=1,e[this.p("Transform")]=this.getTranslate(0,0),this._welTarget=t.css(e))},_changeZoom:function(t,e){this._welZoom&&this._welZoom.isEqual(t)||(this._welZoom&&this._welZoom.hide(),t?(e.zIndex=1,e.opacity=.2,e[this.p("Transform")]=this.getTranslate(0,0)+" scale"+this._htTans.open+this.option("nDefaultScale")+","+this.option("nDefaultScale")+this._htTans.end,this._welZoom=t.css(e)):this._welZoom=null)},_getPos:function(t,e){var i=t,n=e.range,s=e.next;return e.restore?i=0:(i%=n,0===i?i+=s?-n:n:0>t&&(i+=s?0:n)),i}}).extend(jindo.m.Animation),jindo.m.CoverFlicking=jindo.$Class({$init:function(t,e){this.option(e||{}),this._initVar(),this._setWrapperElement(t),this.option("bActivateOnload")&&this.activate()},_onActivate:function(){jindo.m.Flick.prototype._onActivate.apply(this);var t=this;this.set(new jindo.m.Cover(this._getAnimationOption(this.option("nDefaultScale")?{nDefaultScale:this.option("nDefaultScale")}:{})).attach({set:function(e){t._setStyle(e.css)}}),this._htWElement.aPanel)},_setStyle:function(t){t[this._bUseH?"width":"height"]="100%",this._htWElement.container.css(t),this._changeTarget(!0)},refresh:function(t){jindo.m.Flick.prototype.refresh.call(this,t),this._changeTarget(!0)},_changeTarget:function(t){var e=this.getElement(),i=t?this.getNextElement():this.getPrevElement();return i=e.isEqual(i)?null:i,this._oAnimation.change(e,i,t),{target:e,zoom:i}},_moveTo:function(t,e){var i=this.getTotalContents()-1,n=this.getContentIndex(),s=t>n;return this.isPlaying()||isNaN(t)||0>t||t>i?!1:(this._bUseCircular&&(n===i&&0===t?s=!0:0===n&&t===i&&(s=!1)),this._changeTarget(s),void jindo.m.Flick.prototype._moveTo.call(this,t,e))},_panelEndBeforeCall:function(t){!t.useCircular&&0==t.duration&&t.moveCount>1&&this._updateFlickInfo(t.no,this._htWElement.aPanel[t.no])},_panelEndAfterCall:function(t){var e=this._changeTarget(t.next),i=this._oAnimation._oMorph._nPtr;if(this._oAnimation._oMorph._aQueue.length>i){var n=this._oAnimation._oMorph._aQueue[i+1];n.length>3&&(e.target&&(n[0]=e.target),e.zoom&&(n[2]=e.zoom))}},_moveAfterCall:function(t){this._changeTarget(t.bNext),this._oAnimation.move(this._nX,this._nY,0,this._makeOption({next:t.bNext}))},destroy:function(){jindo.m.Flick.prototype.destroy.apply(this)}}).extend(jindo.m.Flick),jindo.m.Cube=jindo.$Class({$init:function(t){t=t||{},this.option(t.htOption||{})},_initVar:function(t){jindo.m.Animation.prototype._initVar.call(this,t),this._sRotate=this.option("bUseH")?"Y":"X"},setStyle:function(t){var e={};return e[this.p("TransitionProperty")]=""==this.sCssPrefix?"tranform":"-"+this.sCssPrefix+"-transform",e[this.p("Transform")]="translateZ(-"+t[1]+"px) rotate"+this._sRotate+"(0deg)",this.option("bUseH")&&(e.clear="both"),e.position="relative",e[this.p("TransformStyle")]="preserve-3d",this._welTarget=t[0].container.css(e),t[0].view.css(this.p("Perspective"),4*t[1]+"px"),this.fireEvent("set",{css:e}),e},move:function(t,e,i,n){n||(n={});var s=this.option("bUseH")?t:-e;s=45*s/n.nHalpSize;var o=this.getTarget(!0),h={"@transitionProperty":""==this.sCssPrefix?"tranform":"-"+this.sCssPrefix+"-transform","@transform":"translateZ(-"+n.nHalpSize+"px) rotate"+this._sRotate+"("+s+"deg)"};return i?this._oMorph.pushAnimate(i,[o,h]):o.css(this.toCss(h)),this._oMorph}}).extend(jindo.m.Animation),jindo.m.CubeFlicking=jindo.$Class({$init:function(t,e){this.option(e||{}),this._initVar(),this._setWrapperElement(t),this.option("bActivateOnload")&&this.activate()},_initVar:function(){jindo.m.Flick.prototype._initVar.apply(this),this._sCssPrefix=jindo.m.getCssPrefix()},_onActivate:function(){jindo.m.Flick.prototype._onActivate.apply(this),this._setHalfWidth(),this._sRotate=this._bUseH?"Y":"X";var t=this;this.set(new jindo.m.Cube(this._getAnimationOption()).attach({set:function(){t._setStyle()}}),this._htWElement,this._nHalpSize)},_setHalfWidth:function(){this._nHalpSize=parseInt(this._htWElement.view.css(this._bUseH?"width":"height"),10)/2},_setStyle:function(t){function e(e){i={},i.position="absolute",i["float"]="left",i[n._oAnimation.p("BackfaceVisibility")]="hidden";var s=0;s=-s+90*e*(n._bUseH?1:-1),!n._bUseCircular&&(t-1>e||e>t+1)?i.display="none":(i.display="block",i[n._oAnimation.p("Transform")]="rotate"+n._sRotate+"("+s+"deg) translateZ("+n._nHalpSize+"px) ")}var i=null,n=(this._bUseH?"width":"height",this);t=t||this.option("nDefaultIndex")||0,jindo.$A(this._htWElement.aPanel).forEach(function(t,n){e(n),t.css(i)})},refresh:function(t){jindo.m.Flick.prototype.refresh.call(this,t),this._bUseCircular&&this._restorePanel()},resize:function(){jindo.m.Flick.prototype.resize.call(this),this._sRotate=this._bUseH?"Y":"X",this._setHalfWidth();var t=this._bUseH?"width":"height",e=this._htWElement.view[t](),i={},n={};this._bUseCircular||(this._updateFlickInfo(),this._oAnimation.move(this._nX,this._nY,0,this._makeOption({nHalpSize:this._nHalpSize}))),n[t]=e+"px",i[t]=e+"px",this._htWElement.container.css(n);var s=this;jindo.$A(this._htWElement.aPanel).forEach(function(i,n){i.css(t,e+"px"),i.css(s._oAnimation.p("Transform"),"rotate"+s._sRotate+"("+90*n*(s._bUseH?1:-1)+"deg) translateZ("+s._nHalpSize+"px) ")}),this._bUseCircular&&this._restorePanel()},_moveAfterCall:function(t){this._oAnimation.move(this._nX,this._nY,0,this._makeOption({next:t.bNext,nDis:(this._bUseH?this._nX:this._nY)-this._aPos[this.getContentIndex()],nHalpSize:this._nHalpSize,no:this.getContentIndex()}))},_moveWithEvent:function(t,e,i){return i.nHalpSize=this._nHalpSize,jindo.m.Flick.prototype._moveWithEvent.call(this,t,e,i)},_restorePanel:function(t,e){function i(t,e){u._htWElement.aPanel[t].css(r,l+"("+e+"deg) translateZ("+c+"px)")}t=t||this.getElement();var n=this._getIndexByElement(t),s=(this._bUseH?"left":"top",(0>n-1?this._nDefaultPanel-1:n-1)%this._nDefaultPanel),o=((n+1)%this._nDefaultPanel>this._nDefaultPanel-1?0:n+1)%this._nDefaultPanel,h=n%this._nDefaultPanel,a=this.getContentIndex(),r=this._oAnimation.p("Transform"),l="rotate"+this._sRotate,_=90*(this._bUseH?1:-1),c=this._nHalpSize,u=this;this._bUseCircular&&(0==a||"undefined"==typeof e||a==this.option("nTotalContents")-1&&!e?(this._htWElement.container.css(this._oAnimation.p("TransitionDuration"),"").css(r,"translateZ(-"+c+"px) "+l+"("+a*-_+"deg) "),i(s,(a-1)*_),i(h,a*_),i(o,(a+1)*_)):e?i(o,(a+1)*_):i(s,(a-1)*_))},_panelEndAfterCall:function(t){this._bUseCircular?this._restorePanel("",t.next):this._setStyle(t.no)},destroy:function(){jindo.m.Flick.prototype.destroy.apply(this)}}).extend(jindo.m.Flick),jindo.m.RevealCommon=jindo.$Class({$init:function(t){this.option({sClassPrefix:"reveal-",sDirection:"right",nDuration:500,nMargin:100,bActivateOnload:!0,bAutoResize:!0,bFixNaviSize:!1,bUseTimingFunction:jindo.m.useTimingFunction(),bUseOffsetBug:jindo.m.hasOffsetBug()}),this.option(t||{}),this.option("bActivateOnload")&&this.activate()},_initVar:function(t){t&&(this._bShow=!1,this._sCssPrefix=jindo.m.getCssPrefix(),this._htEvent={},this._htInstance={},this._htNavSize={}),this._aEndStatus=[],this._htSize=jindo.$Document().clientSize(),this._htWElement.nav.visible()?this._nNavHeight=this._htWElement.nav.height():(this._htWElement.nav.show(),this._nNavHeight=this._htWElement.nav.height(),this._htWElement.nav.hide()),this._bUseCss3d=jindo.m.useCss3d(),this._getTranslate()},setNavHeight:function(t){this._htNavSize.height=t},_getTranslate:function(){this._sTranslateStart="translate(",this._sTranslateEnd=")",this._bUseCss3d&&(this._sTranslateStart="translate3d(",this._sTranslateEnd=",0px)")},_setWrapperElement:function(){this._htWElement={},this._htWElement.nav=jindo.$Element(jindo.$$.getSingle("."+this.option("sClassPrefix")+"nav")),this._htWElement.header=jindo.$Element(jindo.$$.getSingle("."+this.option("sClassPrefix")+"header")),this._htWElement.content=jindo.$Element(jindo.$$.getSingle("."+this.option("sClassPrefix")+"contents")),this._htWElement.wrap=jindo.$Element(jindo.$$.getSingle("."+this.option("sClassPrefix")+"wrap")),this._htWElement.header||(this._htWElement.header=this._htWElement.nav),this._htWElement.header.indexOf(this._htWElement.nav)>-1&&(this._bNavInHeader=!0)},_attachEvent:function(){this.option("bAutoResize")&&(this._htEvent.rotate=jindo.$Fn(this._onResize,this).bind(),jindo.m.bindRotate(this._htEvent.rotate),jindo.m.bindPageshow(this._htEvent.rotate))},_setInitStyle:function(t){this._htWElement.content.css("position","relative");var e=this._getPosInfo();this._setHeaderStyle(),this._setNavStyle(e,t)},_setHeaderStyle:function(){"down"==this.option("sDirection")&&(this._bNavInHeader?this._htWElement.header.css("top",this._bShow&&this.option("bUseOffsetBug")?0:-this._nNavHeight):this._htWElement.nav.css({position:"absolute",top:this._bShow?0:-this._nNavHeight}))},_setNavStyle:function(t){var e={width:this._getNaviWidth()+"px"};"down"!=this.option("sDirection")&&("left"==this.option("sDirection")?e.left=this._htSize.width:"right"==this.option("sDirection")&&(e.left=t.nMarginLeftPos),this._htWElement.nav.css(e))},_onResize:function(){if(this._initVar(),!this.fireEvent("beforeRotate"))return!1;this._setInitStyle();var t=this._getPosInfo();if(t.nMarginLeftPos&&("left"==this.option("sDirection")||"right"==this.option("sDirection"))&&this._bShow){this.option("bUseOffsetBug")?(this._htWElement.header.css({left:-t.nMarginLeftPos+"px"}),this._htWElement.content.css({left:-t.nMarginLeftPos+"px"}),this._htWElement.nav.css("left","left"==this.option("sDirection")?this.option("bFixNaviSize")?this._htSize.width-this.option("nMargin"):this.option("nMargin"):0),this._setWrapStyle()):(this._htMorph.pushAnimate(-1,[this._htWElement.header.$value(),{"@transform":this._sTranslateStart+-t.nMarginLeftPos+"px, "+t.nHeader.Y+"px"+this._sTranslateEnd},this._htWElement.content.$value(),{"@transform":this._sTranslateStart+-t.nMarginLeftPos+"px, "+t.nContent.Y+"px"+this._sTranslateEnd},this._htWElement.nav.$value(),{"@transform":this._sTranslateStart+-t.nMarginLeftPos+"px, "+t.nNav.Y+"px"+this._sTranslateEnd}]),this._htMorph.play(),this._htMorph.clear());var e=this;return this._setMaxClientSize({fFunction:function(){e._rotateFireEvent(),e._setWrapStyle()},bInit:!1}),!1}this._rotateFireEvent()},_getWrapStyle:function(){return this._nNavHeight=this._htWElement.nav.height(),{overflow:"hidden",width:this._htSize.width+"px",height:(this._nNavHeight>this._htSize.height?this._nNavHeight:this._htSize.height)+"px",position:"relative"}},_setWrapStyle:function(){var t={overflow:"",width:"",height:"",position:""};this._bShow&&(t=this._getWrapStyle()),this._htWElement.wrap&&"down"!=this.option("sDirection")&&this._htWElement.wrap.css(t)},_rotateFireEvent:function(){this.fireEvent("rotate")},_getPosInfo:function(){},toggle:function(t,e){return this.isPlaying()?void 0:("undefined"==typeof t&&(t=this._bShow?"hide":"show"),"show"==t&&this._bShow?!1:"hide"!=t||this._bShow?void this._setMoveCss(t,e):!1)},show:function(t){this.option("bUseTimingFunction")||0!=t||(t=1),this.toggle("show",t)},isPlaying:function(){return this._htMorph.isPlaying()},hide:function(t){this.option("bUseTimingFunction")||0!=t||(t=1),this.toggle("hide",t)},getVisible:function(){return this._bShow},_getTransitionOption:function(){return{fEffect:jindo.m.Effect.cubicEaseOut,bUseTransition:this.option("bUseTimingFunction")}},_createMorph:function(){this._htMorph={};var t=this._getTransitionOption(),e=this;this._htMorph=new jindo.m.Morph(t).attach({end:function(){e._setContentPos(),e._setHeaderPos(),e._setNavPos(),e._setEnd()}})},_setMoveCss:function(t,e){this._bMove=!0,this._bShow||this._htWElement.nav.show();var i=this._bShow;return this.fireEvent("before"+(this._bShow?"Hide":"Show"))?(e="undefined"!=typeof e&&e>=0?e:null||this.option("nDuration"),this._setMoveCssDetail(e),void this._htMorph.play()):(this._bShow=i,!1)},_setMoveCssDetail:function(t){var e=this._getPosInfo();this._bUseCss3d&&(this._sTranslateStart="translate3d(",this._sTranslateEnd=",0px)");var i=[this._htWElement.header.$value(),{"@transform":this._sTranslateStart+e.nHeader.X+"px, "+e.nHeader.Y+"px"+this._sTranslateEnd},this._htWElement.content.$value(),{"@transform":this._sTranslateStart+e.nContent.X+"px, "+e.nContent.Y+"px"+this._sTranslateEnd}];this._bNavInHeader||i.push(this._htWElement.nav.$value(),{"@transform":this._sTranslateStart+e.nNav.X+"px, "+e.nNav.Y+"px"+this._sTranslateEnd}),this._htMorph.pushAnimate.apply(this._htMorph,[t,i])},_setEnd:function(){this._htMorph.clear();var t="",e=this._bShow?!0:!1;this._bMove&&(t=this._bShow?"hide":"show",e=this._bShow?!1:!0,this._bMove=!1),e||"down"==this.option("sDirection")||this._htWElement.nav.hide();this.fireEvent(t),this._bShow=e},_setContentPos:function(){if(this.option("bUseOffsetBug")){var t=this._getPosInfo();this._htWElement.content.css(this._sCssPrefix+"Transform",""),this._htWElement.content.css({left:t.nLeftPos+"px",top:t.nLastContent+"px"})}},_setHeaderPos:function(){if(this.option("bUseOffsetBug")){var t=this._getPosInfo();this._htWElement.header.css(this._sCssPrefix+"Transform",""),this._htWElement.header.css({left:t.nLeftPos+"px",top:t.nLastHeader+"px"})}},_setNavPos:function(){var t={overflow:"",width:"",height:"",position:""};if(this.option("bUseOffsetBug")){var e=this._getPosInfo();this._htWElement.nav.css(this._sCssPrefix+"Transform",""),this._htWElement.nav.css({left:e.nNavLeftPos+"px",top:e.nLastNav+"px"})}this._bShow||(t=this._getWrapStyle()),this._htWElement.wrap&&"down"!=this.option("sDirection")&&this._htWElement.wrap.css(t)},_onActivate:function(){this._setWrapperElement(),this._initVar(!0),this._setMaxClientSize({bInit:!0}),this._setInitStyle(!0),this._createMorph(),this._attachEvent()},_setMaxClientSize:function(t){var e=this;jindo.m._maxClientSize(function(i){e._htSize=i,t&&"function"==typeof t.fFunction&&t.fFunction()},t.bInit?!0:!1)},_onDeactivate:function(){jindo.m.unbindRotate(this._htEvent.rotate),jindo.m.unbindPageshow(this._htEvent.rotate);for(var t in this._htInstance)this._htInstance[t]&&this._htInstance[t].destroy();this._bShow=this._sCssPrefix=this._htEvent=this._htSize=this._nNavHeight=null,this._htWElement=this._htEvent=this._htMorph=this._htInstance=null},destroy:function(){this.deactivate()}}).extend(jindo.m.UIComponent),jindo.m.CubeReveal=jindo.$Class({$init:function(t){this.option(t||{})},_initVar:function(t){jindo.m.RevealCommon.prototype._initVar.call(this,t),this._htTmpNavSizeInfo={}},_setWrapperElement:function(){return jindo.m.RevealCommon.prototype._setWrapperElement.call(this),this._htWElement.header.indexOf(this._htWElement.nav)>-1?(console.error("Should not have to navigation in the header"),!1):void(this._bNavInHeader=!1)},_setHeaderStyle:function(){"down"==this.option("sDirection")&&this._htWElement.header.css("top",this._bShow&&this.option("bUseOffsetBug")?0:-this._nNavHeight)},_setNavStyle:function(t,e){var i={};e&&(i[this._sCssPrefix+"Transform"]=this._sTranslateStart+"0px, 0px"+this._sTranslateEnd+" rotate"+t.sRotate+"("+t.sRotateValue+"deg)"),"down"==this.option("sDirection")?i[this._sCssPrefix+"TransformOrigin"]="50% "+this._nNavHeight+"px":"left"==this.option("sDirection")?i[this._sCssPrefix+"TransformOrigin"]="0px 50% ":"right"==this.option("sDirection")&&(i[this._sCssPrefix+"TransformOrigin"]="right 50% "),i[this._sCssPrefix+"BackfaceVisibility"]="hidden",this._htWElement.nav.css(i);var n={width:this._getNaviWidth()+"px"};
"down"!=this.option("sDirection")&&("left"==this.option("sDirection")?n.left=this._htSize.width:"right"==this.option("sDirection")&&(n.left=this._getHideWidth()),this._htWElement.nav.css(n),this._htWElement.nav.parent().css({position:"absolute"}))},_getPosInfo:function(){switch(this.option("sDirection")){case"down":return{sRotateValue:90,sRotate:"X",nHeader:{Y:this._nNavHeight*(this._bShow?0:1),X:0},nNav:{Y:this._nNavHeight*(this._bShow?0:1),X:0},nContent:{Y:this._nNavHeight*(this._bShow?0:1),X:0},nNavHeight:this._nNavHeight};case"left":return{sRotateValue:45,sRotate:"Y",nDefaultNavPos:this._getNaviWidth()*(this._bShow?0:1),nHeader:{Y:this._bShow?0:0,X:this._getNaviWidth()*(this._bShow?0:-1)},nContent:{Y:this._bShow?0:-parseInt(0|this._htWElement.content.css("top"),10),X:this._getNaviWidth()*(this._bShow?0:-1)},nNav:{Y:0,X:this._bShow?0:this._htSize.width*(this._bShow?0:-1)},nMarginLeftPos:this._getNaviWidth(),nLeftPos:this._bShow?0:this._getHideWidth(),nNavHeight:0};case"right":return{sRotateValue:-45,sRotate:"Y",nDefaultNavPos:this._getNaviWidth()*(this._bShow?0:-1),nHeader:{Y:this._bShow?0:0,X:this._getNaviWidth()*(this._bShow?0:1)},nContent:{Y:this._bShow?0:-parseInt(0|this._htWElement.content.css("top"),10),X:this._getNaviWidth()*(this._bShow?0:1)},nNav:{Y:0,X:this._bShow?0:this._getNaviWidth()*(this._bShow?0:1)},nMarginLeftPos:-this._getNaviWidth(),nLeftPos:this._bShow?0:this._getHideWidth(),nNavHeight:0}}},_getNaviWidth:function(){return this.option("bFixNaviSize")?this.option("nMargin"):this._htSize.width-this.option("nMargin")},_getHideWidth:function(){return this.option("bFixNaviSize")?-this.option("nMargin"):-this._htSize.width+this.option("nMargin")},_getTransitionOption:function(){return{fEffect:jindo.m.Effect.cubicEaseOut,bUseTransition:this.option("useTimingFunction")}},_setMoveCssDetail:function(t){var e=this.option("sDirection"),i=this._getPosInfo();this.setNavHeight(jindo.$Document().clientSize().height),this._htWElement.nav.parent().css(this._sCssPrefix+"Perspective",this._htWElement.content.width()/2+"px");var n=[];if("down"==e)n.push(this._htWElement.nav.$value(),this._bShow?{"@transform":this._sTranslateStart+"0px, 0px"+this._sTranslateEnd+" rotate"+i.sRotate+"(75deg)"}:{"@transform":this._sTranslateStart+"0px, 0px"+this._sTranslateEnd+" rotate"+i.sRotate+"(0deg)"});else{this._htTmpNavSizeInfo.height=this._htWElement.nav.css("height"),this._htWElement.nav.css({height:this._htNavSize.height+"px",overflow:"hidden"}),this._htWElement.nav.parent().css({height:this._htNavSize.height+"px"});var s=0;this.option("bFixNaviSize")||(s=i.nNav.X),s+="left"==e?this.option("nMargin")*(this.option("bFixNaviSize")?-1:1):this.option("bFixNaviSize")?this.option("nMargin"):0,n.push(this._htWElement.nav.$value(),this._bShow?{"@transform":this._sTranslateStart+"0px, 0px"+this._sTranslateEnd+" rotate"+i.sRotate+"("+i.sRotateValue+"deg)"}:{"@transform":this._sTranslateStart+s+"px, "+i.nNav.Y+"px"+this._sTranslateEnd+" rotate"+i.sRotate+"(0deg)"})}n.push(this._htWElement.header.$value(),{"@transform":this._sTranslateStart+i.nHeader.X+"px, "+i.nHeader.Y+"px"+this._sTranslateEnd},this._htWElement.content.$value(),{"@transform":this._sTranslateStart+i.nContent.X+"px, "+i.nContent.Y+"px"+this._sTranslateEnd}),this._htMorph.pushAnimate.apply(this._htMorph,[t,n])},_setContentPos:function(){},_setHeaderPos:function(){},_setNavPos:function(){var t=(this._getPosInfo(),{overflow:"",width:"",height:"",position:""});this._htWElement.nav.css({height:this._htTmpNavSizeInfo.height,overflow:""}),this._htWElement.nav.parent().css({height:this._htTmpNavSizeInfo.height}),this._bShow?this._htWElement.nav.css(this._sCssPrefix+"TransitionDuration",""):t=this._getWrapStyle(),this._htWElement.wrap&&"down"!=this.option("sDirection")&&this._htWElement.wrap.css(t)}}).extend(jindo.m.RevealCommon),jindo.m.Validator=jindo.$Class({validate:function(t,e){var i=this._getCorrectedValue(t,e),n={bValid:this._isValid(i,e),sCorrectedValue:null};return i!==t&&(n.sCorrectedValue=i),n}}),jindo.m.NumberValidator=jindo.$Class({rx:/^[+\-]?(\d{1,3},)?(\d{3},)*(\d)+(\.\d+)?$/,_isValid:function(t){return this.rx.test(t)},_getCorrectedValue:function(t,e){return t=this._filterNumber(t),e&&(t=this._applyComma(t)),t},_applyComma:function(t){var e="",i=0,n=null,s=null,o=t.indexOf("."),h=-1!==o?t.substring(0,o):t,a=-1!==o?t.substr(o):"";if(h.length>3){for(var r=h.length-1;r>=0;r--,i++)n=h.charAt(r),s=h.charCodeAt(r),e=0!==i&&i%3===0&&s>47&&58>s?n+","+e:n+e;return""!==a?e+a:e}return t},_filterNumber:function(t){var e,i,n,s;return t=t.replace(/[^\d\.\-]/g,""),e=t.charAt(0),t=t.replace(/-/g,""),t="-"===e?e+t:t,t.length<=0||"-"===t?t:(i=t.split("."),i.length>1?(n=i.shift(),e=n.charAt(0),n=""===n?0:parseInt(n,10),"-"===e&&0===n&&(n="-"+n),s=i.join(""),t=n+"."+s):t=String(parseFloat(i.join(""),10)),t)}}).extend(jindo.m.Validator),jindo.m.CurrencyValidator=jindo.$Class({rx:/^[+\-]?[^\s\t\v\d]+(\d{1,3},)?(\d{3},)*(\d)+(\.\d+)?$/,_getCorrectedValue:function(t,e){return t=this._applyComma(this._filterNumber(t)),e=e||"\\",t="-"===t.charAt(0)?"-"+e+t.substring(1):e+t}}).extend(jindo.m.NumberValidator),jindo.m.DateValidator=jindo.$Class({_isValid:function(t,e){e=e||"yyyy-mm-dd",t=t.replace(/[\.\-]/g,"");var i=e.replace(/[\d\.\-]/g,""),n=1*t.substr(i.indexOf("yyyy"),4),s=1*t.substr(i.indexOf("mm"),2),o=1*t.substr(i.indexOf("dd"),2);return s>=1&&12>=s&&o>=1&&31>=o&&n>=1e3?!0:!1},_getCorrectedValue:function(t,e){e=e||"yyyy-mm-dd";var i=e.replace(/[\d\.\-]/g,"");return t=t.replace(/[^\d]/g,"").substr(0,i.length),t.length>=i.length-1&&(t=this._getFormatted(t,e)),t},_getFormatted:function(t,e){var i=e.replace(/[\.\-]/g,""),n=t.substr(i.indexOf("yyyy"),4),s=t.substr(i.indexOf("mm"),2),o=t.substr(i.indexOf("dd"),2);return e.replace(/(yyyy|mm|dd)/gi,function(t){switch(t){case"yyyy":return n;case"mm":return s;case"dd":return o}})}}).extend(jindo.m.Validator),jindo.m.Datepicker=jindo.$Class({$init:function(t,e){this.option({sClassPrefix:"calendar-",sFormat:"yyyy-mm-dd",bActivateOnload:!0,bAutoHide:!1}),this.option(e||{}),this._initVar(),this._initCalendar(t),this.option("bActivateOnload")&&this.activate()},$static:{INDEX_ATTR:"data-datepickerid"},_initVar:function(){this._oCalendar=null,this._htDatePickerSet={},this._htSelectedDatePickerSet=null},_initCalendar:function(t){var e=(this.option("sClassPrefix"),this.option());e.bActivateOnload=!0,this._oCalendar=new jindo.m.Calendar(jindo.$Element(t)?jindo.$Element(t):this._insertCalendarTemplate(),e)},_isSelectable:function(t,e){return this._oCalendar.isBetween(e,t.htSelectableDateFrom,t.htSelectableDateTo)},addDatePickerSet:function(t,e){if("undefined"==typeof t)return this;var i="DATEPICKER_"+(new Date).getTime()+"_"+Math.floor(100*Math.random()),n=jindo.$Element(t),s=this._oCalendar.option(),o={nYear:s.htToday.nYear,nMonth:s.htToday.nMonth,nDate:s.htToday.nDate,htSelectableDateFrom:{nYear:1900,nMonth:1,nDate:1},htSelectableDateTo:{nYear:2100,nMonth:12,nDate:31},sPosition:"bottomLeft",zIndex:50,sDatePikerSetId:i,elButton:""};if("undefined"!=typeof e)for(var h in e)"undefined"!=typeof o[h]&&(o[h]=e[h]);return e=o,n.wrap("<span style='position:relative;display:inline-block;'></span>"),n=jindo.$Element(t),n.attr("readOnly",!0).attr(jindo.m.Datepicker.INDEX_ATTR,i),e.elInput=n.$value(),e.wfFocusFunc=this._attachFocusEvent(n),o.elButton&&(e.wfClickFunc=jindo.$Fn(jindo.$Fn(this._onClick,this).bind(i),this).attach(o.elButton,"click")),this._htSelectedDatePickerSet=this._htDatePickerSet[i]=e,this},removeDatePickerSet:function(t){var e=jindo.$Element(t),i=e.attr(jindo.m.Datepicker.INDEX_ATTR),n=this._htDatePickerSet[i];return this._detachFocusEvent(n.wfFocusFunc,e),n===this._htSelectedDatePickerSet&&(this._htSelectedDatePickerSet=null),delete this._htDatePickerSet[i],this},_onActivate:function(){this._attachEvent()},_onDeactivate:function(){this.hide(),this._detachEvent()},_attachEvent:function(){this._htEvent={},this.option("bAutoHide")&&(this._htEvent.document=jindo.$Fn(this._onDocument,this).attach(document,"touchend")),this._htEvent.selectDate=jindo.$Fn(this._onSelectDate,this).bind(),this._htEvent.deliveryEvent=jindo.$Fn(this._onDeliveryEvent,this).bind(),this._oCalendar.attach({selectDate:this._htEvent.selectDate,beforeMoveDate:this._htEvent.deliveryEvent,moveDate:this._htEvent.deliveryEvent,beforeHideCalendar:this._htEvent.deliveryEvent,hideCalendar:this._htEvent.deliveryEvent,beforeShowCalendar:this._htEvent.deliveryEvent,showCalendar:this._htEvent.deliveryEvent})},_insertCalendarTemplate:function(){var t=[],e=jindo.$Element("jmc_calt"),i=this.option("sClassPrefix");return e||(t.push("<div>"),t.push('<a href="javascript:void(0)" class="'+i+"btn "+i+'btn-prev-year">&lt;&lt;</a>'),t.push('<a href="javascript:void(0)" class="'+i+"btn "+i+'btn-prev-mon">&lt;</a>'),t.push('<strong class="'+i+'title"></strong>'),t.push('<a href="javascript:void(0)" class="'+i+"btn "+i+'btn-next-mon">&gt;</a>'),t.push('<a href="javascript:void(0)" class="'+i+"btn "+i+'btn-next-year">&gt;&gt;</a>'),t.push('</div><table cellspacing="0" cellpadding="0" style="'),t.push("-"+jindo.m.getCssPrefix()+'-tap-highlight-color:transparent;"><thead><tr>'),t.push('<th class="'+i+'sun">일</th><th>월</th><th>화</th><th>수</th><th>목</th><th>금</th><th class="'+i+'sat">토</th>'),t.push("</tr></thead><tbody>"),t.push('<tr class="'+i+'week">'),t.push('<td><a href="javascript:void(0)" class="'+i+'date"></a></td>'),t.push('<td><a href="javascript:void(0)" class="'+i+'date"></a></td>'),t.push('<td><a href="javascript:void(0)" class="'+i+'date"></a></td>'),t.push('<td><a href="javascript:void(0)" class="'+i+'date"></a></td>'),t.push('<td><a href="javascript:void(0)" class="'+i+'date"></a></td>'),t.push('<td><a href="javascript:void(0)" class="'+i+'date"></a></td>'),t.push('<td><a href="javascript:void(0)" class="'+i+'date"></a></td>'),t.push("</tr></tbody></table>"),t.push('<div class="'+i+'bottom"><a href="javascript:void(0)" class="'+i+"btn "+i+'btn-close">닫기</a></div>'),e=jindo.$Element('<div id="jmc_calt" class="'+i+'base" style="position:absolute;display:none"></div>'),e.html(t.join("")),e.appendTo(document.body)),e},_detachEvent:function(){var t=null;this.option("bAutoHide")&&this._htEvent.document.detach(document,"touchend");for(var e in this._htDatePickerSet)t=this._htDatePickerSet[e],this._detachFocusEvent(t.wfFocusFunc,t.elInput),this._detachClickEvent(t.wfClickFunc,t.elButton);this._oCalendar.detachAll(),this._htSelectedDatePickerSet=null,this._htEvent=null},_onFocus:function(t){return this.isActivating()?void this.show(t.element):!1},_onClick:function(t){return this.isActivating()?void this.show(this._htDatePickerSet[t].elInput):!1},_onDocument:function(t){var e=t.element,i=jindo.$Element(e),n=this._oCalendar.getCalendarBase(),s=i.attr(jindo.m.Datepicker.INDEX_ATTR),o=null;return this._htSelectedDatePickerSet=s?this._htDatePickerSet[s]:this._htSelectedDatePickerSet,o=this._htSelectedDatePickerSet.elInput,n.$value()==e||n.isParentOf(i)||o==e||(this.hide(),o&&o.blur()),!0},_onSelectDate:function(t){if(this._oCalendar.isVisible()){if(t.wel.hasClass(this.option("sClassPrefix")+"unselectable"))return t.stop(),!1;if(this._isSelectable(this._htSelectedDatePickerSet,t.oSelectDate)){var e=this._htSelectedDatePickerSet.elInput;return this.fireEvent("selectDate",{oSelectDate:t.oSelectDate,oCalendar:this._oCalendar})?(this.setDate(e,t.oSelectDate),e.blur(),!0):(t.stop(),!1)}return t.stop(jindo.$Event.CANCEL_ALL),!1}},_onDeliveryEvent:function(t){return this.fireEvent(t.sType,t)?(t.oCalendar=this._oCalendar,!0):(t.stop(),!1)},setDate:function(t,e){if(!this.isActivating())return!1;var i=t?t.getAttribute(jindo.m.Datepicker.INDEX_ATTR):null,n=this._htDatePickerSet[i];return i&&this._isSelectable(n,e)?(t.value=this._formatDate(e),n.nYear=e.nYear,n.nMonth=e.nMonth,n.nDate=e.nDate,void(this._htDatePickerSet[i]=n)):!1},_formatDate:function(t){var e=new Date(t.nYear,t.nMonth-1,t.nDate),i=this._oCalendar.getDayName(e.getDay());return this.option("sFormat").replace(/(yyyy|yy|mm|dd|day)/gi,function(t){switch(t){case"yyyy":return e.getFullYear();case"yy":return e.getFullYear().toString().substr(2);case"mm":var n=e.getMonth()+1+"";return n=1===n.length?"0"+n:n;case"dd":var s=e.getDate()+"";return s=1===s.length?"0"+s:s;case"day":return i}})},deleteDate:function(t){if(t){var e=jindo.$Element(t),i=this._htDatePickerSet[e.attr(jindo.m.Datepicker.INDEX_ATTR)],n=new Date;t.value="",i.nYear=n.getFullYear(),i.nMonth=n.getMonth()+1,i.nDate=n.getDate(),this._isCurrentDatePicker(e.$value())&&this.hide(),this.fireEvent("clear",{oCalendar:this._oCalendar})}},_isCurrentDatePicker:function(t){var e=t?t.getAttribute(jindo.m.Datepicker.INDEX_ATTR):null,i=this._htSelectedDatePickerSet.sDatePikerSetId;return e==i},enable:function(t){if(t){var e=jindo.$Element(t);e.$value().disabled=!1}else{var i=this._htDatePickerSet;for(var n in i)i[n].elInput.disabled=!1}this.fireEvent("enable",{oCalendar:this._oCalendar})},_attachFocusEvent:function(t){return jindo.$Fn(this._onFocus,this).attach(t,"focus")},_detachFocusEvent:function(t,e){t.detach(e,"focus")},_detachClickEvent:function(t,e){t.detach(e,"click")},disable:function(t){var e=this._htDatePickerSet;if(t){var i=jindo.$Element(t);i.$value().disabled=!0}else for(var n in e)e[n].elInput.disabled=!0;this.hide(),this.fireEvent("disable",{oCalendar:this._oCalendar})},setPosition:function(t,e){var i=jindo.$Element(t),n=this._htDatePickerSet[i.attr(jindo.m.Datepicker.INDEX_ATTR)],s=this._oCalendar.getCalendarBase(),o={},h=s.$value(),a=s.visible();a||(s.css("left","-999px"),s.show());var r=s.height(),l=s.width(),_=i.height(),c=i.width();switch(e=e||n.sPosition,h.style.left=null,h.style.right=null,h.style.top=null,a||s.hide(),e){case"leftTop":o.top="0px",o.left="-"+l+"px";break;case"leftBottom":o.top="-"+(r-_)+"px",o.left="-"+l+"px";break;case"rightTop":o.top="0px",o.left=c+"px";break;case"rightBottom":o.top="-"+(r-_)+"px",o.left=c+"px";break;case"bottomLeft":o.top=_+"px",o.left="0px";break;case"bottomRight":o.top=_+"px",o.right="0px";break;case"topLeft":o.top="-"+r+"px",o.left="0px";break;case"topRight":o.top="-"+r+"px",o.right="0px"}n.sPosition=e,s.css(o)},show:function(t){var e=jindo.$Element(t),i=this._oCalendar.getCalendarBase(),n=this._htDatePickerSet[e.attr(jindo.m.Datepicker.INDEX_ATTR)],s={nYear:n.nYear,nMonth:n.nMonth,nDate:n.nDate};this._htSelectedDatePickerSet=n,e.parent().append(i),"none"!=n.zIndex&&i.css("zIndex",n.zIndex),this.setPosition(t,n.sPosition),n.htSelectableDateFrom&&n.htSelectableDateTo&&this._oCalendar.setSelectableDate(n.htSelectableDateFrom,n.htSelectableDateTo),this._oCalendar.show(s,t.value?s:0)},hide:function(){this._oCalendar.isVisible()&&this._oCalendar.hide()},destroy:function(){this.deactivate(),this._oCalendar=null,this._htDatePickerSet=null}}).extend(jindo.m.UIComponent),jindo.m.PopEffect=jindo.$Class({sEffectName:"pop",getCommand:function(t,e){var i=e.sDirection?e.sDirection:"in",n=e.htTo||{};"undefined"==typeof n.opacity&&(n.opacity="in"==i?1:.1);var s="in"==i?1:this.bIos3||this.bAndroid3Up?.1:0,o={};"out"==i&&(o.htStyle={},o.htStyle["@display"]="none",o.htStyle["@opacity"]=this._htLayerInfo.nOpacity,o.htStyle["@transform"]="scale(1)");var h="scale("+s+")";this.bAndroid3Up,n.transformOrigin="50% 50%",n.transform=h;var a={};return this.getTranslateStyle(n,a),{sTaskName:this.sEffectName+"-"+i,htStyle:a,fCallback:o}},getBeforeCommand:function(t,e){var i=e.sDirection?e.sDirection:"in",n=e.htFrom||{};"undefined"==typeof n.opacity&&(n.opacity="in"==i?.1:1),n.display=this._htLayerInfo.sDisplay;var s="in"==i?this.bIos3||this.bAndroid3Up?.1:0:1,o="scale("+s+")";this.bAndroid3Up,n.transformOrigin="50% 50%",n.transform=o;var h={};return this.getTranslateStyle(n,h),{htStyle:h}}}).extend(jindo.m._Effect_),jindo.m.FlipEffect=jindo.$Class({sEffectName:"flip",getCommand:function(t,e){var i=e.sDirection?e.sDirection:"left",n="Y";("up"==i||"down"==i)&&(n="X");var s=e.htTo||{},o=jindo.$Element(e.elFlipFrom?e.elFlipFrom:t),h=e.elFlipTo?jindo.$Element(e.elFlipTo):null,a=this._getCssRotate(this._getCssTransform(o));a[n]=a[n]+("left"==i||"down"==i?-180:180);var r="rotateX("+a.X+"deg) rotateY("+a.Y+"deg)";h&&(h.$value().style[this._sCssPrefix+"Transform"]="rotate"+n+"(0deg)",r="rotate"+n+"(0deg)"),s.transformStyle="preserve-3d",s.transform=r;var l={};return this.getTranslateStyle(s,l),e&&e.elBack&&(e.elBack.style[this._sCssPrefix+"BackfaceVisibility"]="hidden",e.elBack.style[this._sCssPrefix+"Transform"]="rotate"+n+"( 180deg )",o.$value().style[this._sCssPrefix+"BackfaceVisibility"]="hidden"),{sTaskName:this.sEffectName+"-"+i,htStyle:l}},getBeforeCommand:function(t,e){var i=e.sDirection?e.sDirection:"left",n=e.htFrom||{},s="Y";("up"==i||"down"==i)&&(s="X");var o=jindo.$Element(e.elFlipFrom?e.elFlipFrom:t),h=e.elFlipTo?jindo.$Element(e.elFlipTo):null,a=o.$value().parentNode;a.style.webkitPerspective="1200";var r=this._getCssRotate(this._getCssTransform(o)),l="rotateX("+r.X+"deg) rotateY("+r.Y+"deg)";h&&(h.$value().style[this._sCssPrefix+"Transform"]="rotate"+s+"(-180deg)",l="rotate"+s+"(-180deg)"),n.perspective="1200",n.transformStyle="preserve-3d",n.transform=l;var _={};return this.getTranslateStyle(n,_),{htStyle:_}},_getCssRotate:function(t){var e=t,i={X:0,Y:0};if(!e)return i;var n=e.match(/rotateX\((\-?\d*)deg/);return n&&n.length>1&&(i.X=1*n[1],i.X%360==0&&(i.X=0)),n=e.match(/rotateY\((\-?\d*)deg/),n&&n.length>1&&(i.Y=1*n[1],i.Y%360==0&&(i.Y=0)),i},_getCssTransform:function(t){return t.css(this._sCssPrefix+"Transform")||""}}).extend(jindo.m._Effect_),jindo.m.Dialog=jindo.$Class({$init:function(t){var e={bActivateOnload:!0,sClassPrefix:"dialog-",sPosition:"center",bUseEffect:!0,bAutoClose:!1,bAutoReposition:!0,sFoggyColor:"gray",nFoggyOpacity:.5,sEffectType:"pop",nEffectDuration:500,sDialogColor:"white"};this.option(e),this.option(t||{}),this._setWrapperElement(),this._initVar(),this._setDeviceSize(),this._initElement(),this.option("bActivateOnload")&&this.activate()},_setWrapperElement:function(){this._htWElement={},this._htWElement.dialog_container=jindo.$Element('<div class="'+this.option("sClassPrefix")+'container"></div>'),this._htWElement.dialog_foggy=jindo.$Element('<div class="'+this.option("sClassPrefix")+'fog"></div>'),this._htWElement.dialog_layer=jindo.$Element('<div class="'+this.option("sClassPrefix")+'layer"></div>'),this._htWElement.dialog_clone=jindo.$Element('<div class="'+this.option("sClassPrefix")+'clone"></div>')},_initVar:function(){this._htDialogSize={width:0,height:0},this._sTemplate=null,this._bIsShown=!1,this._bProcessingShow=!1,this._bProcessingHide=!1,this._htDeviceInfo=jindo.m.getDeviceInfo(),this._bIOS=this._htDeviceInfo.iphone||this._htDeviceInfo.ipad?!0:!1,this._bIsRenderBug=!0,this._bAndroid=this._htDeviceInfo.android?!0:!1},_setDeviceSize:function(){this._htDeviceSize=this._bIOS||this._bAndroid||!jindo.$Agent().navigator().mobile?jindo.$Document().clientSize():{width:window.screen.width,height:window.screen.height}},_initContainerTop:function(){var t=0,e=this.option("bUseEffect"),i=this.option("sEffectType");!e||"slide-up"!=i&&"slide-down"!=i||(t=this._htDeviceSize.height*("slide-up"==i?1:-1)),t+=window.pageYOffset,this._htWElement.dialog_container.css("top",t+"px")},_initElement:function(){this._htWElement.dialog_foggy.css({position:"absolute",padding:"0px",margin:"0px",border:"0px",backgroundColor:this.option("sFoggyColor"),opacity:this.option("nFoggyOpacity"),width:this._htDeviceSize.width+"px",height:this._htDeviceSize.height+"px",left:"0px",top:"0px"}),this._htWElement.dialog_foggy.appendTo(this._getContainer()),this._htWElement.dialog_layer.css({position:"relative",backgroundColor:this.option("sDialogColor")}),this._htWElement.dialog_layer.appendTo(this._getContainer()),this._htWElement.dialog_container.css({position:"absolute",overflow:"hidden",width:this._htDeviceSize.width+"px",height:this._htDeviceSize.height+"px",left:"0px",zIndex:2050}),this._initContainerTop(),this._htWElement.dialog_container.hide(),this._htWElement.dialog_container.appendTo(document.body),this.option("bUseEffect")&&(this._oLayerEffect=new jindo.m.LayerEffect(this._getContainer())),this._htWElement.dialog_clone.css({position:"absolute",left:"-1000px",top:"-1000px"}),this._htWElement.dialog_clone.appendTo(document.body),this._htWElement.dialog_clone.hide()},_onActivate:function(){this._attachEvent()},_onDeactivate:function(){this._detachEventAll()},_attachEvent:function(){this._htEvent={},this._htEvent.click={ref:jindo.$Fn(this._onClick,this).attach(this.getDialog(),"click"),el:this.getDialog()},this._htEvent.touchend={ref:jindo.$Fn(this._onClick,this).attach(this._getFoggy(),"touchend"),el:this._getFoggy()},this._htEvent.touchmove={ref:jindo.$Fn(this._onTouchMove,this).attach(this._getContainer(),"touchmove"),el:this._getContainer()},this.option("bAutoReposition")&&(this._htEvent.rotate=jindo.$Fn(this._onResize,this).bind(),jindo.m.bindRotate(this._htEvent.rotate))},_detachEvent:function(t){if(t){var e=this._htEvent[t];e.ref&&e.ref.detach(e.el,t)}},_detachEventAll:function(){for(var t in this._htEvent)this._detachEvent(t);jindo.m.unbindRotate(this._htEvent.rotate),this._htEvent=null},_onClick:function(t){var e,i,n,s,o,h=this.option("sClassPrefix");if(e=jindo.m.getClosest("."+h+"close",t.element))this.fireEvent("close",{sType:"close",elLayer:this.getDialog()})&&this.hide();else if(i=jindo.m.getClosest("."+h+"confirm",t.element))this.fireEvent("confirm",{sType:"confirm",elLayer:this.getDialog()})&&this.hide();else if(n=jindo.m.getClosest("."+h+"cancel",t.element))this.fireEvent("cancel",{sType:"cancel",elLayer:this.getDialog()})&&this.hide();else if(s=jindo.m.getClosest("."+h+"layer",t.element)){if(o=jindo.m.getClosest("a",t.element))return!1}else this.option("bAutoClose")&&this.hide();return t.stop(),!1},_onTouchStart:function(t){var e,i=this.option("sClassPrefix");return(e=jindo.m.getClosest("."+i+"layer",t.element))?void 0:(t.stop(jindo.$Event.CANCEL_ALL),!1)},_onTouchMove:function(t){return t.stop(jindo.$Event.CANCEL_ALL),!1},_onResize:function(){(this._bProcessingShow||this._bProcessingHide)&&(this.option("bUseEffect")?this._getLayerEffect().stop():this._bProcessingShow?this._endShowEffect():this._endHideEffect()),this._oTimeout&&(clearTimeout(this._oTimeout),this._oTimeout=null),this.isShown()&&this._bIsRenderBug&&this._htWElement.dialog_container.hide(),this._oTimeout=setTimeout(jindo.$Fn(function(){this._resizeDocument(),this.isShown()&&this._bIsRenderBug&&this._htWElement.dialog_container.show(),this.option("bUseEffect")&&this._getLayerEffect().setSize()},this).bind(),300)},_resizeDocument:function(){this._setDeviceSize(),this._htWElement.dialog_container.css({width:this._htDeviceSize.width+"px",height:this._htDeviceSize.height+"px"}),this._htWElement.dialog_foggy.css({width:this._htDeviceSize.width+"px",height:this._htDeviceSize.height+"px"}),this._resizeDialog(!0),this.option("bUseEffect")&&this._getLayerEffect().setSize()},_resizeDialog:function(t){(this._setDialogSize()||t)&&this._repositionDialog()},_getLayerEffect:function(){return this._oLayerEffect},_getContainer:function(){return this._htWElement.dialog_container.$value()},_getFoggy:function(){return this._htWElement.dialog_foggy.$value()},getDialog:function(){return this._htWElement.dialog_layer.$value()},setTemplate:function(t){this._sTemplate=t,this._oTemplate=jindo.$Template(this._sTemplate),this._htWElement.dialog_clone.html(t),this._resizeDialog()},getTemplate:function(){return this._sTemplate},_setDialogSize:function(){var t,e;return"all"==this.option("sPosition")?(t=this._htDeviceSize.width,e=this._htDeviceSize.height):(this._htWElement.dialog_clone.show(),t=Math.min(this._htWElement.dialog_clone.width(),this._htDeviceSize.width),e=Math.min(this._htWElement.dialog_clone.height(),this._htDeviceSize.height),this._htWElement.dialog_clone.hide()),this._htDialogSize.width==t&&this._htDialogSize.height==e?!1:(this._htDialogSize={width:t,height:e},this._htWElement.dialog_layer.css({width:t+"px",height:e+"px"}),this._htDialogSize)},_getDialogSize:function(){return this._htDialogSize},_repositionDialog:function(){var t=this._getDialogPosition();if(this._htWElement.dialog_layer.css({top:t.top+"px",left:t.left+"px"}),this._htWElement.dialog_container.css({top:window.pageYOffset+"px",left:window.pageXOffset+"px"}),!this.isShown()){var e=this.option("sEffectType");("slide-up"==e||"slide-down"==e)&&this._initContainerTop()}},_getDialogPosition:function(){var t=this._htDeviceSize.width,e=this._htDeviceSize.height,i=this._getDialogSize().width,n=this._getDialogSize().height,s={};switch(this.option("sPosition")){case"top":s.top=0,s.left=parseInt((t-i)/2,10);break;case"center":s.top=parseInt((e-n)/2,10),s.left=parseInt((t-i)/2,10);break;case"bottom":s.top=parseInt(e-n,10),s.left=parseInt((t-i)/2,10);break;case"all":s.top=0,s.left=0}return s},setPosition:function(t){("top"==t||"center"==t||"bottom"==t||"all"==t)&&this.option("sPosition",t),this._resizeDialog()},useEffect:function(){return this.option("bUseEffect")?!1:(this.option("bUseEffect",!0),void this._initContainerTop())},unuseEffect:function(){return this.option("bUseEffect")?(this.option("bUseEffect",!1),void this._initContainerTop()):!1},setEffectType:function(t){this.useEffect(),("pop"==t||"slide-up"==t||"slide-down"==t||"flip"==t)&&(this.option("sEffectType",t),this._initContainerTop())},setEffectDuration:function(t){this.useEffect(),t&&t>99&&this.option("nEffectDuration",t)},setEffect:function(t){this.useEffect(),t.type&&this.setEffectType(t.type),t.duration&&this.setEffectDuration(t.duration)},isShown:function(){return this._bIsShown},show:function(t,e){return this.isShown()?!1:(this._bProcessingShow=!0,this._htEvent.touchstart={ref:jindo.$Fn(this._onTouchStart,this).attach(document,"touchstart"),el:document},e&&(this._showAttachedEvent=e,this.attach(e)),this._resizeDocument(),"undefined"==typeof t?t={}:(this._htWElement.dialog_clone.html(this._oTemplate.process(t)),this._resizeDialog()),this._htWElement.dialog_layer.html(this._oTemplate.process(t)),void(this.fireEvent("beforeShow",{sType:"beforeShow",elLayer:this.getDialog()})&&this._showDialogLayer()))},_showDialogLayer:function(){this.option("bUseEffect")?(this._getLayerEffect().attach("afterEffect",jindo.$Fn(this._endShowEffect,this).bind()),this._startShowEffect()):(this._htWElement.dialog_container.show(),this._endShowEffect())},_startShowEffect:function(){var t=this.option("sEffectType"),e=this.option("nEffectDuration");switch(t){case"slide-up":this._htWElement.dialog_container.show(),this._getLayerEffect().setSize(),this._getLayerEffect().slide({sDirection:"up",nDuration:e});break;case"slide-down":this._htWElement.dialog_container.show(),this._getLayerEffect().setSize(),this._getLayerEffect().slide({sDirection:"down",nDuration:e});break;case"pop":this._getLayerEffect().pop({sDirection:"in",nDuration:e,htFrom:{opacity:1}});break;case"flip":this._htWElement.dialog_container.show(),this._getLayerEffect().flip({nDuration:e,elFlipFrom:this._getContainer(),elFlipTo:this._getContainer(),htFrom:{opacity:0},htTo:{opacity:1}})}},_endShowEffect:function(){this.option("bUseEffect")&&this._getLayerEffect().detachAll("afterEffect"),this.fireEvent("show",{sType:"show",elLayer:this.getDialog()}),this._bIsShown=!0,this._bProcessingShow=!1},hide:function(){return this.isShown()?(this._bProcessingHide=!0,void(this.fireEvent("beforeHide",{sType:"beforeHide",elLayer:this.getDialog()})&&this._hideDialogLayer())):!1},_hideDialogLayer:function(){this.option("bUseEffect")?(this._getLayerEffect().attach("afterEffect",jindo.$Fn(this._endHideEffect,this).bind()),this._startHideEffect()):(this._htWElement.dialog_container.hide(),this._endHideEffect())},_startHideEffect:function(){var t=this.option("sEffectType"),e=this.option("nEffectDuration");switch(t){case"slide-up":this._getLayerEffect().slide({sDirection:"down",nDuration:e});break;case"slide-down":this._getLayerEffect().slide({sDirection:"up",nDuration:e});break;case"pop":this._getLayerEffect().pop({sDirection:"out",nDuration:e,htTo:{opacity:0}});break;case"flip":this._getLayerEffect().flip({nDuration:e,elFlipFrom:this._getContainer(),elFlipTo:this._getContainer(),htTo:{opacity:0}})}},_endHideEffect:function(){if(this.option("bUseEffect")&&this._getLayerEffect().detachAll("afterEffect"),this.fireEvent("hide",{sType:"hide",elLayer:this.getDialog()}),this._showAttachedEvent){for(var t in this._showAttachedEvent)this.detachAll(t);this._showAttachedEvent=null}this._detachEvent("touchstart"),this._htWElement.dialog_container.hide(),this._htWElement.dialog_container.css("opacity",1),(window.pageYOffset||window.pageXOffset)&&this._htWElement.dialog_container.css({top:"0px",left:"0px"}),this._bIsShown=!1,this._bProcessingHide=!1},destroy:function(){this._detachEventAll(),this.option("bUseEffect")&&(this._getLayerEffect().destroy(),this._oLayerEffect=null),this._htWElement.dialog_container.leave(),this._htWElement.dialog_clone.leave(),this._htWElement=null,this._htDeviceSize=null,this._htDialogSize=null,this._sTemplate=null,this._oTemplate=null,this._bIsShown=null,this._bProcessingShow=null,this._bProcessingHide=null,this._oTimeout=null,this._htDeviceInfo=null,this._bIOS=null,this._bIsRenderBug=null,this._bAndroid=null}}).extend(jindo.m.UIComponent),jindo.m.DragArea=jindo.$Class({$init:function(t,e){this.option({sClassPrefix:"drag-",bFlowOut:!1,nThreshold:10,nMoveThreshold:3,bActivateOnload:!0}),this.option(e||{}),this._initVar(),this._setWrapperElement(t),this._initTouch(),this._setAnchorElement(),this.option("bActivateOnload")&&this.activate()},_initVar:function(){this._oTouch=null,this._sDragClass="."+this.option("sClassPrefix")+"dragging",this._sHandleClass="."+this.option("sClassPrefix")+"handle",this._htInfo={elDrag:null,elHandle:null,nStartX:null,nStartY:null,nX:null,nY:null,bDragStart:!1,nCount:0,bPrepared:!1},this._htTans=jindo.m.useCss3d()?{open:"3d(",end:",0)"}:{open:"(",end:")"},this._sCssUserSelect="-"+jindo.m.getCssPrefix()+"-user-select",this._sCssUserSelectValue=document.body.style[this._sCssUserSelect];var t=jindo.m.getDeviceInfo();this._isIos=t.iphone||t.ipad,this._aAnchor=null,this._fnDummyFnc=function(){return!1},this._bBlocked=!1;var e=parseFloat(t.version,10);this._bTouchStop=!1,this._bTouchStop=t.android&&(2.1==e||e>=3),this._bTouchStop||(this._bTouchStop=t.iphone&&e>=3&&4>e)},_setWrapperElement:function(t){this._htWElement={},t=jindo.$(t),this._htWElement.base=jindo.$Element(t)},_initTouch:function(){this._oTouch||(this._oTouch=new jindo.m.Touch(this._htWElement.base.$value(),{nUseDiagonal:1,nSlopeThreshold:1,nMoveThreshold:this.option("nMoveThreshold"),bActivateOnload:!1}),this._oTouch.setSlope(-1,-1))},_getDragElement:function(t){if(jindo.$$.test(t,"input[type=text], textarea, select"))return null;var e=function(t,e){return e?t===document||t===e?!0:jindo.$Element(t).isParentOf(e):!1},i=jindo.$$.test(t,this._sDragClass)?t:jindo.m.getClosest(this._sDragClass,t);e(this._htWElement.base,i)||(i=null);var n=null;if(i){try{n=jindo.$$.getSingle(this._sHandleClass,i)}catch(s){}n&&(e(n,t)||(i=null))}return{elDrag:i,elHandle:n}},_onStart:function(t){if(this.isActivating()&&!this._htInfo.bPrepared){this._initInfo();var e=this._getDragElement(t.element,this._sHandleClass);if(e.elDrag){var i={elHandle:e.elHandle,elDrag:e.elDrag,oEvent:t.oEvent};if(this.fireEvent("handleDown",i)){this._bTouchStop&&t.oEvent.stop(),this._htInfo.bPrepared=!0,this._clearAnchor(),this._htInfo.welDrag=jindo.$Element(i.elDrag),this._htInfo.elHandle=i.elHandle;var n=this._htInfo.welDrag.offset();this._htInfo.nStartX=n.left,this._htInfo.nStartY=n.top,this._htInfo.welDrag.offset(0,0),this._htInfo.welDrag.css(jindo.m.getCssPrefix()+"Transition","-webkit-transform 0ms"),this._htInfo.welDrag.css(jindo.m.getCssPrefix()+"Transform","translate"+this._htTans.open+this._htInfo.nStartX+"px,"+this._htInfo.nStartY+"px"+this._htTans.end),this._htInfo.welDrag.css("position","absolute"),this._htInfo.nX=this._htInfo.nStartX,this._htInfo.nY=this._htInfo.nStartY,this._oTouch.attach({touchMove:this._htEvent.touchMove,touchEnd:this._htEvent.touchEnd}),document.body.style[this._sCssUserSelect]="none"
}}}},_onMove:function(t){if(t.oEvent.stop(),this._htInfo.bPrepared){var e=t.nDistanceX,i=t.nDistanceY;if(!(Math.abs(e)+Math.abs(i)<this.option("nThreshold"))){var n={nX:this._htInfo.nStartX+e,nY:this._htInfo.nStartY+i};if(!this.option("bFlowOut")){var s=this._onReCalculateOffset(this._htInfo.welDrag.$value(),n.nX,n.nY);n.nX=s.nX,n.nY=s.nY}var o={nX:n.nX,nY:n.nY,elDrag:this._htInfo.welDrag.$value(),elHandle:this._htInfo.elHandle,nGapX:e,nGapY:i,nDragCount:this._htInfo.nCount,nTouchX:t.nX,nTouchY:t.nY};if(!this._htInfo.bDragStart&&!this.fireEvent("dragStart",o))return void(this._htInfo.bPrepared=!1);this._htInfo.bDragStart=!0,this.fireEvent("beforeDrag",o)&&(this._htInfo.welDrag.css(jindo.m.getCssPrefix()+"Transform","translate"+this._htTans.open+o.nX+"px,"+o.nY+"px"+this._htTans.end),this._htInfo.nX=o.nX,this._htInfo.nY=o.nY,this._htInfo.nCount++,this.fireEvent("drag",o))}}},_onReCalculateOffset:function(t,e,i){var n=this._htWElement.base,s=n.offset(),o={nX:s.left,nY:s.top,nWidth:n.$value().offsetWidth,nHeight:n.$value().offsetHeight},h={nWidth:t.offsetWidth,nHeight:t.offsetHeight},a=Math.max(e,o.nX);a=Math.min(a,o.nX+o.nWidth-h.nWidth);var r=Math.max(i,o.nY);return r=Math.min(r,o.nY+o.nHeight-h.nHeight),{nX:a,nY:r}},_onEnd:function(t){if(this._htInfo.bPrepared){if(this._stopDrag(!1),this._htInfo.welDrag.css(jindo.m.getCssPrefix()+"Transform",""),this._htInfo.welDrag.css(jindo.m.getCssPrefix()+"Translate",""),this._htInfo.welDrag.offset(this._htInfo.nY,this._htInfo.nX),(t.sMoveType===jindo.m.MOVETYPE[3]||t.sMoveType===jindo.m.MOVETYPE[4])&&this._restoreAnchor(),this._htInfo.welDrag){var e={elDrag:this._htInfo.welDrag.$value(),elHandle:this._htInfo.elHandle};this.fireEvent("handleUp",e)}this._initInfo()}},isDragging:function(){return this._htInfo.bDragStart},stopDragging:function(){this._stopDrag(!0)},_stopDrag:function(t){if("undefined"==typeof t&&(t=!1),this._oTouch.detach({touchMove:this._htEvent.touchMove,touchEnd:this._htEvent.touchEnd}),document.body.style[this._sCssUserSelect]=this._sCssUserSelectValue?this._sCssUserSelectValue:"",this.isDragging()){var e={nX:parseInt(this._htInfo.welDrag.css("left"),10)||0,nY:parseInt(this._htInfo.welDrag.css("top"),10)||0,elDrag:this._htInfo.welDrag.$value(),elHandle:this._htInfo.elHandle,bInterupted:t};this.fireEvent("dragEnd",e),this._htInfo.bDragStart=!1}},_setAnchorElement:function(){this._isIos&&(this._aAnchor=jindo.$$("A",this._htWElement.base.$value()))},_clearAnchor:function(){if(this._aAnchor&&!this._bBlocked){for(var t=null,e=0,i=this._aAnchor.length;i>e;e++){this._fnDummyFnc!==this._aAnchor[e].onclick&&(this._aAnchor[e]._onclick=this._aAnchor[e].onclick),this._aAnchor[e].onclick=this._fnDummyFnc,t=this._aAnchor[e].___listeners___||[];for(var n=0,s=t.length;s>n;n++)___Old__removeEventListener___.call(this._aAnchor[e],"click",t[n].listener,t[n].useCapture)}this._bBlocked=!0}},_restoreAnchor:function(){if(this._aAnchor&&this._bBlocked){for(var t=null,e=0,i=this._aAnchor.length;i>e;e++){this._aAnchor[e].onclick=this._fnDummyFnc!==this._aAnchor[e]._onclick?this._aAnchor[e]._onclick:null,t=this._aAnchor[e].___listeners___||[];for(var n=0,s=t.length;s>n;n++)___Old__addEventListener___.call(this._aAnchor[e],"click",t[n].listener,t[n].useCapture)}this._bBlocked=!1}},_initInfo:function(){this._htInfo.welDrag=null,this._htInfo.elHandle=null,this._htInfo.nStartX=null,this._htInfo.nStartY=null,this._htInfo.nX=null,this._htInfo.nY=null,this._htInfo.bDragStart=!1,this._htInfo.bPrepared=!1,this._htInfo.nCount=0},_onActivate:function(){this._attachEvent(),this._oTouch.activate()},_onDeactivate:function(){this._detachEvent(),this._oTouch.deactivate()},_attachEvent:function(){this._htEvent={},this._htEvent.touchMove=jindo.$Fn(this._onMove,this).bind(),this._htEvent.touchEnd=jindo.$Fn(this._onEnd,this).bind(),this._htEvent.touchStart=jindo.$Fn(this._onStart,this).bind(),this._oTouch.attach("touchStart",this._htEvent.touchStart)},_detachEvent:function(){this._oTouch.detachAll();for(var t in this._htEvent)this._htEvent[t]=null;this._htEvent=null},destroy:function(){this.deactivate();for(var t in this._htWElement)this._htWElement[t]=null;for(t in this._htInfo)this._htInfo[t]=null;this._htWElement=null,this._htInfo=null,this._isIos=null,this._aAnchor=null,this._fnDummyFnc=null,this._bBlocked=null,this._bTouchStop=null}}).extend(jindo.m.UIComponent),jindo.m.DropArea=jindo.$Class({$init:function(t,e){this.option({sClassPrefix:"drop-",oDragInstance:null,bActivateOnload:!0,bUseTouchPoint:!1}),this.option(e||{}),this._initVar(),this._setWrapperElement(t),this.option("bActivateOnload")&&this.activate()},_initVar:function(){this._waOveredDroppableElement=jindo.$A([]),this._sEvent="ontouchstart"in window?"touchmove":"mousemove",this._sDropClassName="."+this.option("sClassPrefix")+"area",this._aItem=null,this._aItemRect=null,this._elHandle=null,this._elDragging=null;var t=jindo.m.getDeviceInfo();this._bReCalculateOffset=(t.iphone||t.ipad)&&t.bInapp?!1:!0},_setWrapperElement:function(t){this._htWElement={},t=jindo.$(t),this._htWElement.base=jindo.$Element(t)},_getRectInfo:function(t){var e=jindo.$Element(t).offset(),i=0,n=0;return this._bReCalculateOffset&&jindo.$Element(t).parent(function(t){var e=jindo.m.getCssOffset(t.$value());i+=e.left,n+=e.top}),{nLeft:e.left+i,nTop:e.top+n,nRight:e.left+i+t.offsetWidth,nBottom:e.top+n+t.offsetHeight}},_reCalculate:function(){var t=this._htWElement.base.$value(),e=jindo.$$(this._sDropClassName,t);t.tagName&&jindo.$$.test(t,this._sDropClassName)&&e.push(t),this._aItem=e,this._aItemRect=[];for(var i,n=0;i=e[n];n++)this._aItemRect.push(this._getRectInfo(i))},_findDroppableElement:function(t){var e=jindo.$$.test(t,this._sDropClassName)?t:jindo.m.getClosest(this._sDropClassName,t);return this._isChildOfDropArea(t)||(e=null),e},_isChildOfDropArea:function(t){return this._el===document||this._el===t?!0:this._htWElement.base.isParentOf(t)},_isDropMove:function(t,e,i,n){var s,o,h,a=this._aItem,r=this._aItemRect;if(this.option("bUseTouchPoint"))for(s=0;(o=r[s])&&(h=a[s]);s++)o.nLeft<=t&&t<=o.nRight&&o.nTop<=e&&e<=o.nBottom?(this._addOveredDroppableElement(h),this._fireMoveEvent(h,o,{nX:t,nY:e})):this._removeOveredDroppableElement(h);else for(s=0;(o=r[s])&&(h=a[s]);s++){var l=this._checkOverArea({nMin:o.nLeft,nMax:o.nRight},{nMin:t,nMax:i}),_=this._checkOverArea({nMin:o.nTop,nMax:o.nBottom},{nMin:e,nMax:n});l&&_?(this._addOveredDroppableElement(h),this._fireMoveEvent(h,o,{nX:t,nY:e})):this._removeOveredDroppableElement(h)}},_checkOverArea:function(t,e){if(e.nMin<t.nMin){if(e.nMax>t.nMin)return!0}else if(e.nMin<t.nMax)return!0;return!1},_fireMoveEvent:function(t,e,i){var n=(i.nX-e.nLeft)/(e.nRight-e.nLeft),s=(i.nY-e.nTop)/(e.nBottom-e.nTop);this.fireEvent("move",{elHandle:this._elHandle,elDrag:this._elDragging,elDrop:t,nRatioX:n,nRatioY:s})},_addOveredDroppableElement:function(t){-1==this._waOveredDroppableElement.indexOf(t)&&(this._waOveredDroppableElement.push(t),this.fireEvent("over",{elHandle:this._elHandle,elDrag:this._elDragging,elDrop:t}))},_removeOveredDroppableElement:function(t){var e=this._waOveredDroppableElement.indexOf(t);-1!=e&&(this._waOveredDroppableElement.splice(e,1),this.fireEvent("out",{elHandle:this._elHandle,elDrag:this._elDragging,elDrop:t}))},_clearOveredDroppableElement:function(){for(var t;t=this._waOveredDroppableElement.$value()[0];)this._waOveredDroppableElement.splice(0,1),this.fireEvent("drop",{elHandle:this._elHandle,elDrag:this._elDragging,elDrop:t})},getOveredLists:function(){return this._waOveredDroppableElement?this._waOveredDroppableElement.$value():[]},_onActivate:function(){if(this._attachEvent(),this.option("oDragInstance")){var t=this.option("oDragInstance"),e=this;t.attach({handleDown:function(t){e._elHandle=t.elHandle,e._elDragging=t.elDrag,e._waOveredDroppableElement.empty(),e.fireEvent(t.sType,t)},dragStart:function(t){e.fireEvent(t.sType,t)?e._reCalculate():t.stop()},beforeDrag:function(t){e.fireEvent(t.sType,t)},drag:function(t){e._elDragging=t.elDrag;var i=jindo.$Element(t.elDrag),n=e.option("bUseTouchPoint")?t.nTouchY:t.nY,s=e.option("bUseTouchPoint")?t.nTouchX:t.nX,o=s+i.width(),h=n+i.height();e._isDropMove(s,n,o,h),e.fireEvent(t.sType,t)},dragEnd:function(t){var i={};i.aElDrop=e.getOveredLists().concat();for(var n in t)i[n]=t[n];e._clearOveredDroppableElement(),e.fireEvent(t.sType,i)},handleUp:function(){e.fireEvent("handleUp",{elHandle:e._elHandle,elDrag:e._elDragging}),e._elHandle=null,e._elDragging=null}})}},_onDeactivate:function(){if(this._detachEvent(),this.option("oDragInstance")){var t=this.option("oDragInstance");t.detachAll()}},_attachEvent:function(){this._htEvent={}},_detachEvent:function(){this._htEvent=null},destroy:function(){this.deactivate();for(var t in this._htWElement)this._htWElement[t]=null;this._htWElement=null}}).extend(jindo.m.UIComponent),jindo.m.EmailValidator=jindo.$Class({rx:/^(([\w\-]+\.)+[\w\-]+|([a-zA-Z]{1}|[\w\-]{2,}))@((([0-1]?[0-9]{1,2}|25[0-5]|2[0-4][0-9])\.([0-1]?[0-9]{1,2}|25[0-5]|2[0-4][0-9])\.([0-1]?[0-9]{1,2}|25[0-5]|2[0-4][0-9])\.([0-1]?[0-9]{1,2}|25[0-5]|2[0-4][0-9])){1}|([a-zA-Z]+[\w\-]+\.)+[a-zA-Z]{2,4})$/,_isValid:function(t){return this.rx.test(t)?!0:!1},_getCorrectedValue:function(t){t=t.replace(/[^\w\.\@]/g,"").replace(/\.{2,}/g,".");var e=t.split("@");return e.length>2&&(t=e.shift()+"@"+e.join("")),t}}).extend(jindo.m.Validator),jindo.m.ExpandEffect=jindo.$Class({sEffectName:"expand",getCommand:function(t,e){var i=e.sDirection?e.sDirection:"down",n="width",s=this._htLayerInfo.nWidth;("up"==i||"down"==i)&&(n="height",s=this._htLayerInfo.nHeight);var o=e.htTo||{};o[n]=(e.nDistance||s)+"px","left"==i&&(o.marginLeft=(e.nDistance?parseInt(this._htLayerInfo.nMarginLeft,10)+s-e.nDistance:this._htLayerInfo.nMarginLeft)+"px"),"up"==i&&(o.marginTop=(e.nDistance?parseInt(this._htLayerInfo.nMarginTop,10)+s-e.nDistance:this._htLayerInfo.nMarginTop)+"px");var h={};return this.getTranslateStyle(o,h),{sTaskName:this.sEffectName+"-"+i,htStyle:h,htTransform:{}}},getBeforeCommand:function(t,e){var i=e.sDirection?e.sDirection:"down",n="width";("up"==i||"down"==i)&&(n="height");var s=e.htFrom||{};s[n]="0",s.overflow="hidden","left"==i&&(s.marginLeft=this._htLayerInfo.nWidth+this._htLayerInfo.nMarginLeft+"px"),"up"==i&&(s.marginTop=this._htLayerInfo.nHeight+this._htLayerInfo.nMarginTop+"px");var o={};return this.getTranslateStyle(s,o),{htStyle:o,htTransform:{}}}}).extend(jindo.m._Effect_),jindo.m.FadeEffect=jindo.$Class({sEffectName:"fade",getCommand:function(t,e){e.htTo||(e.htTo={}),e.nDistance&&(e.htTo.opacity=e.nDistance);var i=e.sDirection?e.sDirection:"in",n=e.htTo||{},s="in"==i?1:0;n.opacity="undefined"!=typeof n.opacity?n.opacity:s;var o={};"out"==i&&(o.htStyle={},o.htStyle["@display"]="none",o.htStyle["@opacity"]=this._htLayerInfo.nOpacity);var h={};return this.getTranslateStyle(n,h),{sTaskName:this.sEffectName+"-"+i,htStyle:h,fCallback:o}},getBeforeCommand:function(t,e){var i=e.sDirection?e.sDirection:"in",n=e.htFrom||{},s="in"==i?0:1;n.display=this._htLayerInfo.sDisplay,n.opacity="undefined"==typeof n.opacity?s:n.opacity;var o={};return this.getTranslateStyle(n,o),{htStyle:o,htTransform:{}}}}).extend(jindo.m._Effect_),jindo.m.LayerPosition=jindo.$Class({$init:function(t,e,i){arguments.length<3&&(!e||e&&!e.nodeType&&"string"!=typeof e)?(this._setBaseLayer(document.body),i=e||{},e=t):this._setBaseLayer(t),this.option({bActivateOnload:!0,bAutoReposition:!0,sPosition:"center",nLeftMargin:0,nRightMargin:0,nTopMargin:0,nBottomMargin:0,bUseFixed:!0}),this.option(i||{}),this._initVar(),this._setWrapperElement(e),this.option("bActivateOnload")&&this.activate()},isUseFixed:function(){return this._bUseFixedProperty},_onActivate:function(){this._isVertical=jindo.m.isVertical(),this.option("bAutoReposition")&&this._attachEvent(),this.setPosition()},_onDeactivate:function(){this.option("bAutoReposition")&&this._detachEvent()},_initVar:function(){var t=this.option("nLeftMargin"),e=this.option("nTopMargin");this._htMargin={nLeft:t,nRight:this.option("nRightMargin"),nTop:e,nBottom:this.option("nBottomMargin")},this._sPosition=this.option("sPosition"),this._htOldPosition={nTop:null,nLeft:null,nBottom:null},this._htPosition={nTop:null,nLeft:null,nBottom:null},this._bUseFixedProperty=this.option("bAutoReposition")&&this.option("bUseFixed")&&jindo.m._isUseFixed(),this._isVertical=null,this._hasOrientationChange=jindo.m.getDeviceInfo().ipad||jindo.m.getDeviceInfo().iphone||jindo.m.getDeviceInfo().bChrome,this._nPreWidth=-1},getPosition:function(){return this._sPosition},getMargin:function(){return this._htMargin},getLayer:function(){return this._htWElement.element.$value()},getCurrentPosition:function(){return this._htPosition},_setWrapperElement:function(t){this._htWElement={},this.setLayer(t)},setLayer:function(t){return this._htWElement.element=jindo.$Element(t),this._bUseFixedProperty?this._htWElement.element.css("position","fixed"):this._htWElement.element.css("position","absolute"),this._htWElement.element.parent().isEqual(document.body)||this._htWElement.element.appendTo(document.body),this},top:function(t){this.setPosition("top",t)},bottom:function(t){this.setPosition("bottom",t)},center:function(t){this.setPosition("center",t)},all:function(t){this.setPosition("all",t)},_fixedLayerSize:function(t,e){var i=parseInt(this._htMargin.nLeft,10),n=parseInt(this._htMargin.nTop,10),s={"padding-top":parseInt(this._htWElement.element.css("padding-top"),10),"padding-bottom":parseInt(this._htWElement.element.css("padding-bottom"),10),"padding-left":parseInt(this._htWElement.element.css("padding-left"),10),"padding-right":parseInt(this._htWElement.element.css("padding-right"),10)},o={"border-top-width":parseInt(this._htWElement.element.css("border-top-width"),10),"border-bottom-width":parseInt(this._htWElement.element.css("border-bottom-width"),10),"border-left-width":parseInt(this._htWElement.element.css("border-left-width"),10),"border-right-width":parseInt(this._htWElement.element.css("border-right-width"),10)};return t-=s["padding-left"]+s["padding-right"]+o["border-left-width"]+o["border-right-width"]+i+parseInt(this._htMargin.nRight,10),e-=s["padding-top"]+s["padding-bottom"]+o["border-top-width"]+o["border-bottom-width"]+n+parseInt(this._htMargin.nBottom,10),this._htWElement.element.css({width:t+"px",height:e+"px"}),{nTop:n,nLeft:i}},_setBaseLayer:function(t){return this._wel=this._el=jindo.$(t),this._el&&(this._wel=jindo.$Element(t)),this},getBaseLayer:function(){return this._el},_getPosition:function(){var t,e=this.getBaseLayer(),i=jindo.$Element(e),n=this.getLayer(),s=i.offset(),o=e.offsetWidth,h=e.offsetHeight,a=n.offsetWidth,r=n.offsetHeight,l={nTop:s.top,nLeft:s.left};if(e==document.body&&(t=jindo.$Document().clientSize(),o=t.width,h=t.height),a+=parseInt(this._htWElement.element.css("marginLeft"),10)+parseInt(this._htWElement.element.css("marginRight"),10)||0,r+=parseInt(this._htWElement.element.css("marginTop"),10)+parseInt(this._htWElement.element.css("marginBottom"),10)||0,"all"===this._sPosition)s=this._fixedLayerSize(o,h);else{switch(s.nLeft=l.nLeft+parseInt((o-a)/2,10)+parseInt(this._htMargin.nLeft,10),this._sPosition){case"top":s.nTop=l.nTop+parseInt(this._htMargin.nTop,10);break;case"center":s.nTop=l.nTop+parseInt((h-r)/2,10)+parseInt(this._htMargin.nTop,10);break;case"bottom":s.nTop=l.nTop+parseInt(h-r,10)-parseInt(this._htMargin.nBottom,10)}this._bUseFixedProperty||(s=this._adjustScrollPosition(s))}return s},_adjustScrollPosition:function(t){var e=jindo.$Document().scrollPosition();return t.nTop+=e.top,t.nLeft+=e.left,t},setPosition:function(t,e){if(this.isActivating()&&(this._htMargin=e||this._htMargin,this._sPosition=t||this._sPosition,this._fireEvent("beforePosition"))){var i=this._htWElement.element.visible();i||this._htWElement.element.css({left:"-9999px"}).show(),this._htOldPosition=this._htPosition,this._htPosition=this._getPosition(),i||this._htWElement.element.hide(),i&&this._htOldPosition.nLeft===this._htPosition.nLeft&&this._htOldPosition.nTop===this._htPosition.nTop&&this._htOldPosition.nBottom===this._htPosition.nBottom||("undefined"==typeof this._htPosition.nTop?this._htWElement.element.$value().style.top=null:"undefined"==typeof this._htPosition.nBottom&&(this._htWElement.element.$value().style.bottom=null),this._htWElement.element.css({left:this._htPosition.nLeft+"px",top:this._htPosition.nTop+"px",bottom:this._htPosition.nBottom+"px"})),this._fireEvent("position")}},_attachEvent:function(){this._htEvent={},this._htEvent.actionEvent=jindo.$Fn(this._onEvent,this),this._htEvent.pageShow=jindo.$Fn(this._onPageShow,this).bind(),this._bUseFixedProperty?this._htEvent.actionEvent.attach(window,"resize"):this._htEvent.actionEvent.attach(window,"scroll").attach(window,"resize"),jindo.m.bindPageshow(this._htEvent.pageShow),this._hasOrientationChange&&(this._htEvent.rotate=jindo.$Fn(this._onOrientationChange,this).attach(window,"orientationchange"))},_detachEvent:function(){this._htEvent.actionEvent.detach(window,"scroll").detach(window,"resize"),jindo.m.unbindPageshow(this._htEvent.pageShow),this._hasOrientationChange&&this._htEvent.rotate.detach(window,"orientationchange"),this._htEvent=null},_onEvent:function(){jindo.m._isUseFixed()&&jindo.m.getDeviceInfo().android&&this._htWElement.element.css("left",this._htWElement.element.css("left")),this._htWElement.element.visible()&&this.setPosition()},_onOrientationChange:function(){if(this._htWElement.element.visible()){var t=this;window.innerWidth<this._htWElement.element.width()?(this._nPreWidth=this._htWElement.element.width(),this._htWElement.element.width(window.innerWidth)):-1!==this._nPreWidth&&this._htWElement.element.width(this._nPreWidth),this._htWElement.element.hide(),this.setPosition(),jindo.m.getDeviceInfo().android&&!jindo.m.getDeviceInfo().bChrome?this._htWElement.element.show():setTimeout(function(){t.setPosition(),t._htWElement.element.show()},10)}},_onPageShow:function(){this.isActivating()&&this.setPosition()},_fireEvent:function(t){return this.fireEvent(t,{elLayer:this.getLayer(),htMargin:this.getMargin(),htPosition:this.getCurrentPosition()})},destroy:function(){this.deactivate();for(var t in this._htWElement)this._htWElement[t]=null;delete this._htWElement,delete this._htMargin,delete this._sPosition,delete this._htPosition,delete this._htOldPosition,delete this._bUseFixedProperty}}).extend(jindo.m.UIComponent),jindo.m.ScrollEnd=jindo.$Class({$init:function(t){this._initVar(),this._setWrapperElement(t),this._attachEvent()},_initVar:function(){this._bIOS=jindo.m.getDeviceInfo().iphone||jindo.m.getDeviceInfo().ipad,this._nType=this._getDetectType(),2===this._nType&&(this._nScrollTimer=-1),this._isTouched=!1,this._isMoved=!1,this._nObserver=null,this._nScrollEndTimer=null,this._nPreLeft=null,this._nPreTop=null,this._bMoveIOS=0},_getDetectType:function(){var t=0;return jindo.m.getDeviceInfo().android?t=parseInt(jindo.m.getDeviceInfo().version,10)>=3?2:1:jindo.m.getDeviceInfo().win?parseInt(jindo.m.getDeviceInfo().version,10)>=8&&(t=2):this._bIOS&&parseInt(jindo.m.getDeviceInfo().version,10)>=8&&(t=2),t},_setWrapperElement:function(){this._htElement={},this._htElement.body=document.body},_attachEvent:function(){this._htEvent={},this._htEvent.event_scroll={ref:jindo.$Fn(this._onScroll,this).attach(window,"scroll"),el:window},0==this._nType&&this._bIOS&&parseInt(jindo.m.getDeviceInfo().version,10)<=7&&(this._htEvent.event_touchmove={ref:jindo.$Fn(this._onMoveForIOS,this).attach(this._htElement.body,"touchmove"),el:this._htElement.body}),1==this._nType&&(this._htEvent.event_touchstart={ref:jindo.$Fn(this._onStartForAndroid,this).attach(this._htElement.body,"touchstart"),el:this._htElement.body},this._htEvent.event_touchmove={ref:jindo.$Fn(this._onMoveForAndroid,this).attach(this._htElement.body,"touchmove"),el:this._htElement.body},this._htEvent.event_touchend={ref:jindo.$Fn(this._onEndForAndroid,this).attach(this._htElement.body,"touchend"),el:this._htElement.body})},_onMoveForIOS:function(){this._bMoveIOS=0},_detachEvent:function(){for(var t in this._htEvent){var e=this._htEvent[t];e.ref.detach(e.el,t.substring(t.lastIndexOf("_")))}},_startObserver:function(){var t=this;this._stopObserver(),this._nObserver=setInterval(function(){t._observe()},100)},_observe:function(){this._isTouched||this._nPreTop!==window.pageYOffset||this._nPreLeft!==window.pageXOffset?(this._nPreTop=window.pageYOffset,this._nPreLeft=window.pageXOffset):(this._stopObserver(),this._fireEventScrollEnd())},_stopObserver:function(){clearInterval(this._nObserver),this._nObserver=null},_onScroll:function(){switch(this._nType){case 0:if(this._bIOS&&this._bMoveIOS>0)return!1;this._fireEventScrollEnd(),this._bMoveIOS++;break;case 1:this._startObserver();break;case 2:var t=this;clearTimeout(this._nScrollTimer),this._nScrollTimer=setTimeout(function(){t._fireEventScrollEnd()},350)}},_onStartForAndroid:function(){this._isTouched=!0,this._isMoved=!1,this._nPreTop=null,this._nPreLeft=null},_onMoveForAndroid:function(){this._isMoved=!0},_onEndForAndroid:function(){this._isTouched=!1,this._isMoved&&this._startObserver()},_fireEventScrollEnd:function(){this.fireEvent("scrollEnd",{nTop:window.pageYOffset,nLeft:window.pageXOffset})},_fireEventScrollEndForAndroid:function(){var t=this;clearTimeout(this._nScrollEndTimer),this._nScrollEndTimer=setTimeout(function(){t._fireEventScrollEnd()},500)},destroy:function(){this._detachEvent(),this._nType=-1,this._isTouched=null,this._isMoved=null,this._nObserver=null,this._nPreLeft=null,this._nPreTop=null}}).extend(jindo.m.Component),jindo.m.FloatingLayer=jindo.$Class({$init:function(t,e){this.option({bActivateOnload:!0,sPosition:"bottom",sDirection:"up",nSlideDuration:500,sSlideTimingFunction:"ease-in-out",nFadeInDuration:0,sFadeInTimingFunction:"ease-in-out",nFadeOutDuration:200,sFadeOutTimingFunction:"ease-in-out",bUseHideUI:!0,bUseFixed:!1,nTimeout:-1}),this.option(e||{}),this._initVar(),this._setWrapperElement(t),this.option("bActivateOnload")&&this.activate()},_initVar:function(){this._oFloatingEffect=null,this._oFadeinEffect=null,this._oLayerPosition=null,this._oScrollEnd=null,this._nTimeoutTimer=-1,this._isFixed=!1,this._isLayerOn=!1,this._isMoving=!1},_setWrapperElement:function(t){this._htWElement={},this._htWElement.element=jindo.$Element(t),this._htWElement.viewElement=jindo.$Element(this._createView())},_initComponent:function(){var t=this,e=this._htWElement.element.$value();this._oLayerPosition=new jindo.m.LayerPosition(this._htWElement.viewElement,{sPosition:this.option("sPosition"),bActivateOnload:!1,bUseFixed:this.option("bUseFixed"),bAutoReposition:!0}),this._oFloatingEffect=new jindo.m.LayerEffect(e),this.option("bUseHideUI")&&0!==this.option("nFadeInDuration")&&(this._oFadeinEffect=new jindo.m.LayerEffect(this._htWElement.viewElement.$value(),{nDuration:this.option("nFadeInDuration")}).attach("afterEffect",function(){t._startHideTimer()})),this._isFixed=this._oLayerPosition.isUseFixed(),this._oScrollEnd=new jindo.m.ScrollEnd},getLayer:function(){return this._htWElement.element.$value()},_createView:function(){var t=this._htWElement.element.visible(),e="_"+Math.floor(1e4*Math.random()),i=jindo.$Element("<div class='_floatingLayer_view_divtag"+e+"' style='display:none;'>"),n="",s="";return t||this._htWElement.element.css({left:"-9999px"}).show(),n=-1!=this._htWElement.element.css("width").indexOf("%")?this._htWElement.element.css("width"):this._htWElement.element.width()+"px",s=-1!=this._htWElement.element.css("height").indexOf("%")?this._htWElement.element.css("height"):this._htWElement.element.height()+"px",i.css({width:n,height:s,zIndex:2050}),t||this._htWElement.element.hide(),i},resize:function(t,e){this._htWElement.viewElement.css({width:t+"px",height:e+"px"}),this._oLayerPosition.setPosition()},show:function(){this._fireEvent("beforeShow")&&(this._oLayerPosition.isActivating()||this._oLayerPosition.activate(),this._setFloatingEffect(!0),this._htWElement.element.show(),this._htWElement.viewElement.show(),this._oFloatingEffect.slide({sDirection:this.option("sDirection"),nDuration:this.option("nSlideDuration"),sTransitionTimingFunction:this.option("sSlideTimingFunction"),elBaseLayer:this._htWElement.viewElement.$value()}))},hide:function(){this._fireEvent("beforeHide")&&(this._stopHideTimer(),this._oLayerPosition.isActivating()&&this._oLayerPosition.deactivate(),this._detachFloatingEvent(),this._setFloatingEffect(!1),0!==this.option("nFadeOutDuration")?this._oFloatingEffect.fade({sDirection:"out",nDuration:this.option("nFadeOutDuration"),sTransitionTimingFunction:this.option("sFadeOutTimingFunction")}):(this._htWElement.viewElement.hide(),this._fireEvent("hide")))},_fireEvent:function(t){return this.fireEvent(t,{welLayer:this._htWElement.element})},_startHideTimer:function(){if(this.option("nTimeout")>-1){var t=this;this._stopHideTimer(),this._nTimeoutTimer=setTimeout(function(){t.hide()},this.option("nTimeout"))}},_stopHideTimer:function(){clearTimeout(this._nTimeoutTimer),this._nTimeoutTimer=-1},_onTouchStart:function(t){this._initFloatingData(),this._isLayer(t.element)?(this._isLayerOn=!0,this._htWElement.viewElement.show()):(this._htWElement.viewElement.hide(),this._htWElement.viewElement.css("left",this._htWElement.viewElement.css("left")+"px"))},_onScrollEnd:function(){this.option("bUseHideUI")?this._isFixed?this._startHideTimer():this._runFadeIn():(this._oLayerPosition.setPosition(),this._startHideTimer())},_onTouchMove:function(){this._isMoving=!0},_onTouchEnd:function(){return this._isLayerOn?void this._oLayerPosition.setPosition():void(this._isMoving||this._runFadeIn())},_runFadeIn:function(){this._htWElement.viewElement.visible()||(this._isLayerOn?this._startHideTimer():this._fadeIn())},_fadeIn:function(){this._oLayerPosition.setPosition(),this._oFadeinEffect?(this._oFadeinEffect.clearEffect(!0),this._oFadeinEffect.fade({sDirection:"in",sTransitionTimingFunction:this.option("sFadeInTimingFunction")})):(this._htWElement.viewElement.show(),this._startHideTimer())},_isLayer:function(t){return t&&(this._htWElement.element.isEqual(t)||this._htWElement.viewElement.isEqual(t)||this._htWElement.viewElement.isParentOf(t))?!0:!1},_initFloatingData:function(){this._stopHideTimer(),this._oFloatingEffect&&0!==this.option("nFadeOutDuration")&&this._oFloatingEffect.clearEffect(!0),this._oFadeinEffect&&this._oFadeinEffect.clearEffect(!0),this._isMoving=!1,this._isLayerOn=!1},_onActivate:function(){this._initComponent()},_onDeactivate:function(){this._detachEvent(),this._oFadeinEffect&&(this._oFadeinEffect.detachAll("afterEffect"),this._oFadeinEffect.destroy()),this._oFloatingEffect.destroy(),this._oScrollEnd.destroy(),this._oLayerPosition.destroy(),this._htWElement.element.appendTo(document.body),this._htWElement.viewElement.leave()},_attachFloatingEvent:function(){if(this._htEvent={},this.option("bUseHideUI")&&!this._isFixed){var t=jindo.m._getTouchEventName();this._htEvent[t.start]={el:document.body,fn:jindo.$Fn(this._onTouchStart,this).bind()},this._htEvent[t.move]={el:document.body,fn:jindo.$Fn(this._onTouchMove,this).bind()},this._htEvent[t.end]={el:document.body,fn:jindo.$Fn(this._onTouchEnd,this).bind()},t.cancel&&(this._htEvent[t.cancel]={el:document.body,fn:jindo.$Fn(this._onTouchEnd,this).bind()});for(var e in this._htEvent)this._htEvent[e].fn&&(this._htEvent[e].ref=jindo.m._attachFakeJindo(this._htEvent[e].el,this._htEvent[e].fn,e))}this._oScrollEnd.attach("scrollEnd",jindo.$Fn(this._onScrollEnd,this).bind())},_detachEvent:function(){this._detachFloatingEvent()},_setFloatingEffect:function(t){var e=this;this._oFloatingEffect.detachAll("afterEffect"),this._oFloatingEffect.clearEffect(!0),this._oFadeinEffect&&this._oFadeinEffect.clearEffect(!0),t?this._oFloatingEffect.attach("afterEffect",function(){e._attachFloatingEvent(),e._startHideTimer(),e._fireEvent("show")}):0!==this.option("nFadeOutDuration")&&this._oFloatingEffect.attach("afterEffect",function(){e._htWElement.viewElement.hide(),e._fireEvent("hide")})},_detachFloatingEvent:function(){for(var t in this._htEvent){var e=this._htEvent[t];e.ref&&e.ref.detach(e.el,t)}this._oScrollEnd.detachAll("scrollEnd"),this._htEvent=null},destroy:function(){this.deactivate();for(var t in this._htWElement)this._htWElement[t]=null;delete this._htWElement,this._initFloatingData()}}).extend(jindo.m.UIComponent),jindo.m.IndexScroll=jindo.$Class({$init:function(){this.option("bUseTimingFunction",!1),this instanceof jindo.m.IndexScroll&&this.option("bActivateOnload")&&this.activate()},_initVar:function(){this.$super._initVar(),this._aIndexInfo=null,this._bUseIndex=!0,this._sEvent=(jindo.m.getDeviceInfo().iphone||jindo.m.getDeviceInfo().ipad)&&parseInt(jindo.m.getDeviceInfo().version,10)<5?"click":"touchstart"},_setWrapperElement:function(t){this.$super._setWrapperElement(t),this._createFixedIndex(),this._createIndexView()},_refreshIndexInfo:function(){for(var t=this._htWElement.scroller.queryAll("."+this.option("sClassPrefix")+"index"),e=[],i=this._htWElement.wrapper.offset().top,n=0,s=t.length;s>n;n++)e.push(this._getIndexInfo(jindo.$Element(t[n]),i));for(n=0,s=e.length-1;s>n;n++)e[n].nNextTop=e[n+1].nTop,e[n].nLast=e[n+1].nTop-e[n].nHeight;this._aIndexInfo=e,this.option("bUseIndexView")&&this._refreshIndexView()},_createIndexView:function(){var t=this.option("sClassPrefix")+"_indexview__";this._htWElement.indexview=jindo.$Element(t),this._htWElement.indexview||(this._htWElement.indexview=jindo.$Element("<ul id='"+t+"' class='"+this.option("sClassPrefix")+"indexview' style='position:absolute;z-index:2002;-"+jindo.m.getCssPrefix()+"-tap-highlight-color:transparent;'>"),this._htWElement.indexview.appendTo(document.body))},showIndexView:function(){this.option("bUseIndexView")&&this._htWElement.indexview&&this._htWElement.indexview.show()},hideIndexView:function(){this.option("bUseIndexView")&&this._htWElement.indexview&&this._htWElement.indexview.hide()},_refreshIndexView:function(){for(var t,e,i,n,s=this._htWElement.wrapper.offset(),o="",h=0,a=this._aIndexInfo.length;a>h;h++)e=this._aIndexInfo[h].wel,t=e.attr("data-text")?e.attr("data-text"):e.text(),o+="<li class='"+this.option("sClassPrefix")+"indexview_item' data-index='"+h+"'>"+t+"</li>";this._htWElement.indexview.html(o),i=s.top+this._htWElement.wrapper.height()/2,n=s.left+this._htWElement.wrapper.width(),this._htWElement.indexview.css({top:i-this._htWElement.indexview.height()/2+"px",left:n-this._htWElement.indexview.width()-10+"px"})},_attachEvent:function(){this.$super._attachEvent(),this._htEvent.position=jindo.$Fn(this._onPosition,this).bind(),this.attach("position",this._htEvent.position),this.option("bUseIndexView")&&(this._htEvent.indexview=jindo.$Fn(this._onIndexView,this).attach(this._htWElement.indexview,this._sEvent))},_detachEvent:function(){this.detach("position",this._htEvent.position),this.option("bUseIndexView")&&this._htEvent.indexview.detach(this._htWElement.indexview,this._sEvent)},_onIndexView:function(t){if("LI"==t.element.tagName){var e=jindo.$Element(t.element),i=e.attr("data-index");this.scrollTo(0,this._aIndexInfo[i].nTop)}},_onPosition:function(t){this._bUseIndex&&this._setPosFixedIndex(-t.nTop)},_getIndexInfo:function(t,e){var i={};return i.wel=t,i.nTop=t.offset().top-e,i.nHeight=t.height(),i.nBottom=i.nTop+i.nHeight,i},_setPosFixedIndex:function(t){var e,i=this._nBeforeIndex,n=this._getCurrentIdx(t),s=this._aIndexInfo[n];-1==n?(this._htWElement.index_top.hide(),this._htWElement.index_bottom.hide()):s.nLast&&s.nLast<=t&&t<s.nNextTop?(e=s.nLast-t,i!=n&&this._htWElement.index_top.html(s.wel.outerHTML()),this._htWElement.index_top.css(this.sCssPrefix+"Transform","translate"+this.sTranOpen+"0, "+e+"px"+this.sTranEnd).show(),i!=n&&(this._htWElement.index_bottom.html(this._aIndexInfo[n+1].wel.outerHTML()).show(),this._bShowIndex=!0),this._htWElement.index_bottom.css(this.sCssPrefix+"Transform","translate"+this.sTranOpen+"0, "+(e+s.nHeight)+"px"+this.sTranEnd)):(i!=n||this._bShowIndex)&&(this._htWElement.index_top.html(s.wel.outerHTML()).css(this.sCssPrefix+"Transform","translate"+this.sTranOpen+"0, 0"+this.sTranEnd).css("display","block"),this._htWElement.index_bottom.hide(),this._bShowIndex=!1),this._nBeforeIndex=n
},hideIndex:function(){this._bUseIndex=!1,this._htWElement.index_top.hide(),this._htWElement.index_bottom.hide()},showIndex:function(){this._bUseIndex=!0,this._setPosFixedIndex(this._nTop),this._htWElement.index_top.show()},_getCurrentIdx:function(t){for(var e=0,i=this._aIndexInfo.length;i>e&&!(this._aIndexInfo[e].nTop>t);e++);return e-1},_createFixedIndex:function(){var t="position:absolute;width:100%;top:0;z-index:2001; display:none";this._htWElement.index_top=jindo.$Element(this._htWElement.wrapper.query("._scroller_index_scroll_top_")),this._htWElement.index_top||(this._htWElement.index_top=jindo.$Element("<div style='"+t+"' class='_scroller_index_scroll_top_'></div>"),this._htWElement.wrapper.append(this._htWElement.index_top)),this._htWElement.index_bottom=jindo.$Element(this._htWElement.wrapper.query("._scroller_index_scroll_bottom_")),this._htWElement.index_bottom||(this._htWElement.index_bottom=jindo.$Element("<div style='"+t+"' class='_scroller_index_scroll_bottom_'></div>"),this._htWElement.wrapper.append(this._htWElement.index_bottom))},refresh:function(){this.option("bUsePullDown")&&this.option("bUsePullDown",!1),this.option("bUsePullUp")&&this.option("bUsePullUp",!1),this.option("bUseHScroll")&&this.option("bUseHScroll",!1),this.option("bUseCss3d",!1),this.$super.refresh(),this._refreshIndexInfo()}}).extend(jindo.m.Scroll),jindo.m.InfiniteCard=jindo.$Class({$init:function(t,e){this.option({nCardCount:10,sClassName:"wrp_cds",sExcludeClass:"",nExpandSize:0,bUseCss3d:jindo.m.useCss3d(),sSizePrefix:"",bUseDebug:!1,bUseRecycle:!0,nCardWidth:0,bActivateOnload:!0}),this.option(e||{}),this._initVar(),this._setWrapperElement(t),this._bInfinite?this._setInfiniteDom():this._setDom(),this.resizeView(),this.option("bActivateOnload")&&this.activate()},$static:{FOR_SIZE_CLASS:"__infinite_for_size__"},_initVar:function(){this._aData=[],this._aCards=[],this._htSelected={},this._welTmpDf=jindo.$Element(document.createDocumentFragment()),this._htCursor={min:-1,visibleMin:-1,max:-1,visibleMax:-1},this._htBeforeCursor={min:-2,max:-2},this._htSizeInfo={height:-1,width:-1,cardWidth:0,viewTop:0,curPos:0},this._sKey=jindo.m.isVertical()?"v":"h",this._isPrepareMode=""!=this.option("sSizePrefix"),this._sExcludeClass=this.option("sExcludeClass"),this._hasExcludeClass=""!=this._sExcludeClass,this._bInfinite=this.option("bUseRecycle"),this._bFixedWidth=0!=this.option("nCardWidth"),this._hasOffsetBug=jindo.m.hasOffsetBug(),this._htHeight={v:0,h:0},this._htCache={v:-1,h:-1,vPos:-1,hPos:-1},this._nRepaintTimer=-1,this._nSizeTimer=-1,this._isRepainting=!1,this._nUnpreparedCount=0,this._fnUnPreparedHandler=jindo.$Fn(this._onCheckPrepared,this).bind()},_setWrapperElement:function(t){this._htWElement={},this._htWElement.view=jindo.$Element(t).css("position","relative"),this._htWElement.size=null,this._htWElement.window=window},_attachEvent:function(){this._htEvent={},this._htEvent.updater=jindo.$Fn(this._onUpdate,this),this._htEvent.updater.attach(this._htWElement.window,"scroll")},_detachEvent:function(){this._htEvent.updater.detach(this._htWElement.window,"scroll")},setHeight:function(t,e){var i=this._aData[t],n={nVHeight:i.vHeight,nHHeight:i.hHeight,bVertical:"v"==this._sKey},s={v:-1,h:-1};return"number"==typeof e?s[this._sKey]=e:"object"==typeof e&&void 0==e.length&&("number"==typeof e.nVHeight&&(s.v=e.nVHeight),"number"==typeof e.nHHeight&&(s.h=e.nHHeight)),i.vHeight!=s.v&&-1!=s.v&&(i.vHeight=s.v,this._htCache.vPos=Math.min.call(null,this._htCache.vPos,t)),i.hHeight!=s.h&&-1!=s.h&&(i.hHeight=s.h,this._htCache.hPos=Math.min.call(null,this._htCache.hPos,t)),n},setContent:function(t,e,i){var n="object"==typeof i?jindo.$Jindo.mixin({},i):{},s=this._aData[t],o=s.data,h=this.getElement(t);return s.data=e instanceof jindo.$Element?e.html():e,n.bRedraw&&h&&h.html(s.data),n.bModifiedSize&&(s.vHeight=-1,this._htCache.vPos=Math.min.call(null,this._htCache.vPos,t-1),this._htCache.v=Math.min.call(null,this._htCache.v,t-1),s.hHeight=-1,this._htCache.hPos=Math.min.call(null,this._htCache.hPos,t-1),this._htCache.h=Math.min.call(null,this._htCache.h,t-1)),o},get:function(t,e){if(t>=0&&t<this._aData.length){var i=this._aData[t];return e?i:{index:t,data:i.data,height:i[this._sKey+"Height"],x:i[this._sKey+"X"],y:i[this._sKey+"Y"],offsetX:i[this._sKey+"X"],offsetY:i[this._sKey+"Y"]+this._htSizeInfo.viewTop}}return null},getColumnCount:function(){if(this._htSizeInfo.cardWidth=this._getCardWidth(),0==this._htSizeInfo.cardWidth)return console.warn("카드의 사이즈를 정상적으로 구할수 없습니다. sClassName 옵션을 잘못 지정하였거나, Element의 visible이 false인 경우 카드의 크기를 정상적으로 구할수 없습니다."),1;var t=this._htSizeInfo.width/this._htSizeInfo.cardWidth;return this._bFixedWidth?parseInt(t):Math.round(t)},length:function(){return this._aData.length},getIndex:function(t){t=jindo.$Element(t);var e,i=this.option("sClassName");if(t.hasClass(i))e=t;else{var n=t.parent(function(t){return t.hasClass(i)});n=n.length>0?n[0]:null,n&&(e=n)}return e?parseInt(e.attr("index"),10):-1},getElement:function(t){var e,i,n=this._aCards.length;if("undefined"==typeof t){var s,o=[];for(e=0;n>e;e++)i=this._aCards[e],s=i.attr("index"),-1!=s&&o.push({wel:i,nIndex:s,bVisible:this._isVisible(s)});return o}for(e=0;n>e;e++)if(i=this._aCards[e],t==i.attr("index"))return i;return null},append:function(t,e){if(!this._isRepainting){var i={};"number"==typeof e||"string"==typeof e?i.nHeight=e:"object"==typeof e&&(i=jindo.$Jindo.mixin(i,e));var n={data:t instanceof jindo.$Element?t.html():t,vHeight:-1,hHeight:-1,vX:-1,vY:-1,hX:-1,hY:-1,isExclude:"undefined"==typeof i.isExclude?!1:i.isExclude};if("undefined"!=typeof i.nHeight){var s=parseInt(i.nHeight,10);this._bFixedWidth?n.vHeight=n.hHeight=s:n[this._sKey+"Height"]=s}this._aData.push(n)}},prepend:function(t,e){if(!this._isRepainting){var i={};"number"==typeof e||"string"==typeof e?i.nHeight=e:"object"==typeof e&&(i=jindo.$Jindo.mixin(i,e));var n={data:t instanceof jindo.$Element?t.html():t,vHeight:-1,hHeight:-1,vX:-1,vY:-1,hX:-1,hY:-1,isExclude:"undefined"==typeof i.isExclude?!1:i.isExclude};if("undefined"!=i.nHeight){var s=parseInt(i.nHeight,10);this._bFixedWidth?n.vHeight=n.hHeight=s:n[this._sKey+"Height"]=s}else this._htCache[this._sKey]=-1;this._aData.unshift(n),this._aCards.forEach(function(t){t.attr("index",parseInt(t.attr("index"),10)+1)},this),this._htCache[this._sKey+"Pos"]=-1,this._htSelected={}}},_getUnprepared:function(t){for(var e,i,n,s,o,h=this.option("sSizePrefix")+"width",a=this.option("sSizePrefix")+"height",r=t.queryAll(this._isPrepareMode?"["+h+"]":"img"),l=[],_=0,c=r.length;c>_;_++)o=jindo.$Element(r[_]),this._isPrepareMode?(e=o.attr(h),i=o.attr(a),null!=e&&null!=i?""==e||""==i?(this.option("bUseDebug")&&console.error(o.attr("id"),"의 사이즈 정보가 존재하지 않습니다"),l.push(o)):(s=s||o._element.clientWidth,n=Math.ceil(s*i/e),o._element.style.height=n+"px",o._element.style.width=s+"px"):l.push(o)):!o._element.complete&&l.push(o);return l.length>0?l:null},_releaseFixedSize:function(t){t.style.cssText&&(t.style.width&&-1==t.style.width.indexOf("%")&&(t.style.width=null),t.style.height&&-1==t.style.height.indexOf("%")&&(t.style.height=null))},_releaseChildFixedSize:function(t){jindo.$A(t.queryAll("["+this.option("sSizePrefix")+"width]")).forEach(function(t){this._releaseFixedSize(jindo.$Element(t)._element)},this)},_getCardSize:function(t,e,i){var n=!1,s=this.getElement(t);s?n=!0:(s=this._htWElement.size,s.html(e));var o=this._getUnprepared(s);if(o){cancelAnimationFrame(this._nSizeTimer);var h=this,a=jindo.$A(o);!function r(){a=a.filter(function(t){return t=jindo.$Element(t),t._element.complete?!1:!0}),0==a.length()?(i(s.height()),s=null):h._nSizeTimer=requestAnimationFrame(r)}()}else i(s.height()),n&&this._isPrepareMode&&this._releaseChildFixedSize(s),s=null},_createDomForSize:function(){var t="position:absolute;opacity:0;left:-200%;top:0;",e=jindo.m.getCssPrefix();this._bFixedWidth&&(t+="width:"+this._getCardWidth()+"px;"),this._hasOffsetBug||(t+="-"+e+"-transition-property:-webkit-transform;",t+="-"+e+"-transform:"+jindo.m._getTranslate(0,0,this.option("bUseCss3d"))),this._htWElement.size=jindo.$Element(this._htWElement.view.query("."+jindo.m.InfiniteCard.FOR_SIZE_CLASS)||jindo.$Element("<div class='"+this.option("sClassName")+" "+jindo.m.InfiniteCard.FOR_SIZE_CLASS+"'style='"+t+"'></div>")),this._htWElement.view.append(this._htWElement.size)},_createDom:function(t,e){if(t>=e)return null;var i=this.option("sClassName"),n="<div class='"+i+"' style='position:absolute;top:0px;",s=jindo.m.getCssPrefix();this._bFixedWidth&&(n+="width:"+this._getCardWidth()+"px;"),this._hasOffsetBug?n+="left:-200%;":(n+="left:0px;",n+="-"+s+"-transition-property:-webkit-transform;",n+="-"+s+"-transform:"+jindo.m._getTranslate("-200%",0,this.option("bUseCss3d"))),n+="' index='-1'></div>";for(var o,h=t,a=this._aData.length;e>h;h++)o=jindo.$Element(n),this._welTmpDf.append(o),a>h&&o.attr("index",h).html(this._aData[h].data),this._aCards.push(o);return this._htWElement.view.append(this._welTmpDf),{start:t,end:h-1}},_setDom:function(){var t=jindo.$A(this._htWElement.view.child());t.forEach(function(t,e){this._aCards.push(t.attr("index",e)),this._bFixedWidth&&t.width(this._getCardWidth()),this.append(t)},this)},_setInfiniteDom:function(){var t,e=[],i=parseInt(this.option("nCardCount"),10),n=jindo.$A(this._htWElement.view.child());n.forEach(function(n,s){t=this._hasExcludeClass&&n.hasClass(this._sExcludeClass),i>s?this._aCards.push(n.attr("index",s)):e.push(n),this.append(n,{isExclude:t}),this._bFixedWidth&&n.width(this._getCardWidth())},this),this._createDom(this._aData.length,i),e.length>0&&jindo.$A(e).forEach(function(t){t.leave()}),this._createDomForSize()},_drawGrid:function(t){t=t||this._p(!1),this._calculate(this._htCache[t.sKey]+1,this._getXPos(),Math.min(this._aCards.length,this._aData.length),t,!0),this._draw(t),this._isPrepareMode&&this._releaseChildFixedSize(this._htWElement.view),this._fireRepaintEvent({bUpdate:!1,bRotate:t.bRotate})},_onCheckPrepared:function(){this._nUnpreparedCount--,!this._isWaiting&&this._nUnpreparedCount<=0&&(this._detachPreparedEvent(),this._drawGrid())},_attachPreparedEvent:function(t){this._nUnpreparedCount=t,this._htWElement.view._element.addEventListener("load",this._fnUnPreparedHandler,!0),this._htWElement.view._element.addEventListener("error",this._fnUnPreparedHandler,!0)},_detachPreparedEvent:function(){this._htWElement.view._element.removeEventListener("load",this._fnUnPreparedHandler,!0),this._htWElement.view._element.removeEventListener("error",this._fnUnPreparedHandler,!0),this._nUnpreparedCount=0},_initRepaint:function(){this._htWElement.view.css("visibility","hidden");var t=(this._repaintForRotate(),this._getUnprepared(this._htWElement.view));this._htWElement.view.css("visibility",""),t?this._attachPreparedEvent(t.length):this._drawGrid()},_calculate:function(t,e,i,n,s){for(var o,h,a=this._getYPos(e,t),r=t;i>r;r++)h=this._aData[r],o=a.indexOf(Math.min.apply(null,a)),h[n.sX]=e[o],h[n.sY]=a[o],s&&((this._bInfinite||!this._bInfinite&&-1==h[n.sHeight])&&(h[n.sHeight]=this._aCards[r].height()),this._bFixedWidth&&(h.vHeight=h.hHeight=h[n.sHeight])),a[o]+=h[n.sHeight];this._setCachePos(n.sPos,a,i),s&&this._setCacheSize(i)},_draw:function(t){for(var e,i=0,n=Math.min(this._aCards.length,this._aData.length);n>i;i++)e=this._aData[i],this._drawCard(this._aCards[i],e[t.sX],e[t.sY]),this._htSelected[i]=!0;this._htCursor.min=this._htBeforeCursor.min=this._htCursor.visibleMin=0,this._htCursor.max=this._htBeforeCursor.max=this._htCursor.visibleMax=n-1},_drawCard:function(t,e,i){var n={position:"absolute",left:"0px",top:"0px"};this._hasOffsetBug?(n.left=e+"px",n.top=i+"px"):(n[jindo.m._toPrefixStr("transitionProperty")]="-webkit-transform",n[jindo.m._toPrefixStr("transform")]=jindo.m._getTranslate(e+"px",i+"px",this.option("bUseCss3d"))),t.css(n)},_getRangeData:function(t,e){for(var i,n=this._sKey+"Y",s=this._sKey+"Height",o=this._aData.length,h={min:0,max:o-1},a=0;o>a;a++)if(i=this._aData[a],i[n]+i[s]>=t){h.min=a;break}if("undefined"!=typeof e)for(a=h.min;o>a&&(i=this._aData[a],i[n]<=e);a++)h.max=a;return h},_updateRange:function(t){"undefined"==typeof t&&(this._htSizeInfo.curTop=t=document.body.scrollTop);var e=t-this._htSizeInfo.viewTop;if(this._htSizeInfo.curPos==e&&0!=jindo.$H(this._htSelected).keys().length)return!1;var i=void 0==this._htSizeInfo.curPos?!0:this._htSizeInfo.curPos<=e;this._htSizeInfo.curPos=e;var n=this.option("nExpandSize"),s=e-n,o=(s>0?s:0)+this._htSizeInfo.height+2*n,h=this._getRangeData(s,o),a=this._getRangeData(e,e+this._htSizeInfo.height),r=h.min,l=h.max,_=!1;this._htCursor.visibleMin=a.min,this._htCursor.visibleMax=a.max;var c=this._correctRange(r,l,this._htCursor.visibleMin,this._htCursor.visibleMax,i);return(this._htCursor.min!=c.nMin||this._htCursor.max!=c.nMax)&&(this._htBeforeCursor.min=this._htCursor.min,this._htBeforeCursor.max=this._htCursor.max,this._htCursor.min=c.nMin,this._htCursor.max=c.nMax,_=!0),_||0==jindo.$H(this._htSelected).keys().length},_correctRange:function(t,e,i,n,s){var o=this.option("nCardCount"),h=o-(e-t+1),a=[];this._hasExcludeClass&&this._aCards.forEach(function(t){t.hasClass(this._sExcludeClass)&&a.push(t)},this);var r,l,_=a.length,c=this._aData.length-1;if(0>h)e+=h,this.option("bUseDebug")&&0>h&&console.warn("지정한 범위(nExpandSize)에 맞게 카드를 배치하기 위해서는 ",-h,"개의 카드가 더 필요합니다.\nnCardCount값을 늘려주시기거나 nExpandSize를 줄여주시기 바랍니다.");else{for(r=0;h>r;r++)s?c>e?e++:t--:t>0?t--:e++;t=0>t?0:t,e=e>c?c:e}for(r=0;_>r;r++)l=jindo.$Element(a[r]).attr("index"),(t>l||l>e)&&(s?t++:e--);if(t>i||n>e){var u=e-t;t=i,e=t+u,t=0>t?0:t,e=e>c?c:e}return{nMin:t,nMax:e}},_removeWel:function(t){delete this._htSelected[t];var e=this.getElement(t);return this._isExcludeWel(e)?null:(e.attr("index",-1),e)},_isExcludeWel:function(t){return this._hasExcludeClass?t.hasClass(this._sExcludeClass):!1},getVisibleIndex:function(){return{min:this._htCursor.visibleMin,max:this._htCursor.visibleMax}},_getWel:function(t){var e=this.getElement(t),i=!1;return e?i=!0:(e=this.getElement(-1),e||console.warn("index가 -1인 엘리먼트가 없네요",t)),{wel:e,isReuse:i}},_onUpdate:function(){this.update()},update:function(t){if(this.option("bUseDebug")&&console.time(" - update time"),this._bInfinite&&!this._isRepainting){var e=0==jindo.$H(this._htSelected).keys().length;if(this._updateRange(t)){for(var i,n=0,s=this._aCards.length;s>n;n++)i=this._aCards[n].attr("index"),-1!=i&&(this._htCursor.min>i||this._htCursor.max<i)&&this._removeWel(i);this._htWElement.view.css("visibility","hidden");for(var o=this._htCursor.min;o<=this._htCursor.max;o++)this._htSelected[o]||this._setPos(o,e);this._htWElement.view.css("visibility","")}this.option("bUseDebug")&&console.timeEnd(" - update time")}},_setPos:function(t,e){var i=this._getWel(t),n=this._aData[t],s={wel:i.wel,nIndex:t,bRepaint:e,bReuse:i.isReuse,bVisible:this._isVisible(t),nX:n[this._sKey+"X"],nY:n[this._sKey+"Y"]};if(i.wel){if(i.wel.attr("index",t),this._hasExcludeClass&&n.isExclude&&i.wel.addClass(this._sExcludeClass),!i.isReuse){var o={wel:s.wel,nIndex:t,bRepaint:e,bVisible:s.bVisible,sData:n.data,nX:s.nX,nY:s.nY};this.fireEvent("beforeDraw",jindo.$Jindo.mixin({},o))&&(i.wel.html(n.data),this.fireEvent("draw",jindo.$Jindo.mixin({},o)))}this.fireEvent("position",s),(e||n.isExclude||!i.isReuse)&&this._drawCard(i.wel,s.nX,s.nY),this._htSelected[t]=!0}},_isVisible:function(t){return this._htCursor.visibleMin<=t&&this._htCursor.visibleMax>=t},_fireRepaintEvent:function(t){t=t||{},t.nViewHeight=this._htHeight[this._sKey],t.bRotate="undefined"==typeof t.bRotate?!1:t.bRotate,t.bRotate=-1!=this._htCursor.visibleMin&&t.bRotate,t.bUpdate="undefined"==typeof t.bUpdate?!0:t.bUpdate,!this._bInfinite&&(t.bUpdate=!1),t.bCached=!!t.bCached,t.bUseAdjustPosition&&-1!=this._htCursor.visibleMin&&window.scrollTo(0,this._aData[this._htCursor.visibleMin][this._sKey+"Y"]+this._htSizeInfo.viewTop),this._isRepainting=!1,this._htSelected={},this._htWElement.view._element.style.height=t.nViewHeight+"px",this._bFixedWidth&&this._htWElement.view.css("marginLeft",this._htSizeInfo.width%(this._getCardWidth()*this.getColumnCount())/2+"px"),this.fireEvent("repaint",t)&&t.bUpdate&&this.update(),this.option("bUseDebug")&&console.timeEnd(" - repaint time")},isRepainting:function(){return this._isRepainting},resizeView:function(){this._bFixedWidth&&this._htWElement.view.css({marginLeft:0,marginRight:0}),this._htSizeInfo={height:window.innerHeight,width:this._htWElement.view.width()+parseInt(this._htWElement.view.css("marginLeft"),10)+parseInt(this._htWElement.view.css("marginRight"),10),cardWidth:this._getCardWidth(!0),viewTop:this._htWElement.view.offset().top,curTop:document.body.scrollTop},this._htSizeInfo.curPos=this._htSizeInfo.curTop-this._htSizeInfo.viewTop},_getCardWidth:function(t){return!t&&this._htSizeInfo&&this._htSizeInfo.cardWidth?this._htSizeInfo.cardWidth:this._bFixedWidth?this.option("nCardWidth"):(this._htSizeInfo.cardWidth=this._bInfinite?this._htWElement.size.width():this._aCards.length>0?this._aCards[0].width():0,this._htSizeInfo.cardWidth)},getSizeInfo:function(){return{nWidth:this._htSizeInfo.width,nHeight:this._htSizeInfo.height,nCardWidth:this._htSizeInfo.cardWidth,nScrollTop:this._htSizeInfo.curTop,nViewHeight:this._htHeight[this._sKey]}},_setCachePos:function(t,e,i){this._htHeight[this._sKey]=Math.max.apply(null,e),this._htCache[t]=i-1},_setCacheSize:function(t){this._bFixedWidth?this._htCache.v=this._htCache.h=t-1:this._htCache[this._sKey]=t-1},_recalculateAsync:function(t,e,i,n,s){var o,h,a=!0,r=this,l=t,_=this._getYPos(e,t);cancelAnimationFrame(r._nRepaintTimer),this.option("bUseDebug")&&console.debug("[repaint-"+this._sKey+"] 사이즈, 위치 다 재계산 : ",t,"~",i-1,"(",i-t,")"),function c(){if(i>l){if(a)if(a=!1,h=r._aData[l],o=_.indexOf(Math.min.apply(null,_)),s.bForce||-1==h[n.sHeight])r._getCardSize(l,h.data,function(t){r._bFixedWidth?h.vHeight=h.hHeight=t:h[n.sHeight]=t,h[n.sX]=e[o],h[n.sY]=_[o],_[o]+=h[n.sHeight],a=!0,l++});else{for(;i>l&&-1!=h[n.sHeight];l++,o=_.indexOf(Math.min.apply(null,_)),h=r._aData[l])h[n.sX]=e[o],h[n.sY]=_[o],_[o]+=h[n.sHeight];a=!0}r._nRepaintTimer=requestAnimationFrame(c)}else r._setCachePos(n.sPos,_,i),r._setCacheSize(i),r._fireRepaintEvent({bRotate:n.bRotate,bAdjustPosition:s.bAdjustPosition,bCached:!1})}()},_recalculateSync:function(t,e,i,n,s){this.option("bUseDebug")&&console.debug("[repaint-"+this._sKey+" prepared mode] 사이즈, 위치 다 재계산 : ",t,"~",i-1,"(",i-t,")");for(var o,h,a=t,r=this._getYPos(e,t),l=this;i>a;a++)if(o=this._aData[a],h=r.indexOf(Math.min.apply(null,r)),s.bForce||-1==o[n.sHeight])this._getCardSize(a,o.data,function(t){l._bFixedWidth?o.vHeight=o.hHeight=t:o[n.sHeight]=t,o[n.sX]=e[h],o[n.sY]=r[h],r[h]+=o[n.sHeight]});else for(;i>a;a++,h=r.indexOf(Math.min.apply(null,r)),o=this._aData[a]){if(-1==o[n.sHeight]){a--;break}o[n.sX]=e[h],o[n.sY]=r[h],r[h]+=o[n.sHeight]}this._setCachePos(n.sPos,r,i),this._setCacheSize(i),this._fireRepaintEvent({bRotate:n.bRotate,bAdjustPosition:s.bAdjustPosition,bCached:!1})},_recalculateNoInfinite:function(t,e,i){this.option("bUseDebug")&&console.debug("[repaint-"+this._sKey+"] 사이즈, 위치 다 재계산 [no infinite mode] : ",t,"~",e,"(",e-t+1,")");for(var n,s=t,o=[],h=e;h>s;s++)n=this._getUnprepared(this._aCards[s]),n&&(o=o.concat(n));0!=o.length?this._attachPreparedEvent(o.length):this._drawGrid(i)},repaint:function(){this._isRepainting||(this._isRepainting=!0,this._initRepaint(),this.repaint=function(t){if(!this._isRepainting){this._isRepainting=!0,this.option("bUseDebug")&&console.time(" - repaint time");var e=this._repaintForRotate(),i={};"object"==typeof t&&(i=jindo.$Jindo.mixin(i,t)),i.bAdjustPosition="undefined"==typeof i.bAdjustPosition?e.bRotate:i.bAdjustPosition,i.bSync="undefined"==typeof i.bSync?e.bRotate:i.bSync,this._bInfinite?this._repaintForInfinite(i,e):this._repaintForNoInfinite(i,e)}})},_repaintForNoInfinite:function(t,e){var i,n=this._createDom(this._aCards.length,this._aData.length);if(n)this._recalculateNoInfinite(n.start,n.end,e);else{var s=this._aData.length;if(this._htCache[e.sKey]==s-1){var o=!0;this._htCache[e.sPos]==s-1?this.option("bUseDebug")&&console.debug("[repaint-"+e.sKey+"] 모두 캐싱되어있음"):(i=this._htCache[e.sPos]+1,this.option("bUseDebug")&&console.debug("[repaint-"+e.sKey+"] 위치만 재계산 : ",i,"~",s-1,"(",s-i,")"),this._calculate(i,this._getXPos(),s,e),o=!1),this._draw(e),this._fireRepaintEvent({bRotate:e.bRotate,bCached:o})}else i=this._htCache[e.sKey]+1,this._recalculateNoInfinite(this._htCache[e.sKey]+1,s,e)}},_repaintForInfinite:function(t,e){t.bForce&&(this._htCache[e.sKey]=-1,this._htCache[e.sPos]=-1,this.option("bUseDebug")&&console.debug("-- repaint 강제 호출 --"));var i,n=this._getXPos(),s=this._aData.length;if(this._htCache[e.sKey]==s-1){var o=!0;this._htCache[e.sPos]==s-1?this.option("bUseDebug")&&console.debug("[repaint-"+e.sKey+"] 모두 캐싱되어있음"):(i=this._htCache[e.sPos]+1,this.option("bUseDebug")&&console.debug("[repaint-"+e.sKey+"] 위치만 재계산 : ",i,"~",s-1,"(",s-i,")"),this._calculate(i,n,s,e),o=!1),this._fireRepaintEvent({bRotate:e.bRotate,bAdjustPosition:t.bAdjustPosition,bCached:o})}else{i=this._htCache[e.sKey]+1;var h,a,r=0,l=i,_=this._aCards.length;if(!e.bRotate&&_>r&&s>l){for(this._htWElement.view.css("visibility","hidden");_>r&&s>l;)h=this._aCards[r].attr("index"),(-1==h||this._htCursor.visibleMin>h)&&(a=this._aCards[r],a&&!this._isExcludeWel(a)&&(a.html(this._aData[l].data).attr("index",l),l++)),r++;this._htWElement.view.css("visibility","")}this._isPrepareMode||t.bSync?this._recalculateSync(i,n,s,e,t):this._recalculateAsync(i,n,s,e,t)}},_p:function(t){return{bRotate:t,sKey:this._sKey,sX:this._sKey+"X",sY:this._sKey+"Y",sHeight:this._sKey+"Height",sPos:this._sKey+"Pos"}},_repaintForRotate:function(){var t=jindo.m.isVertical()?"v":"h";return this._sKey==t?this._p(!1):(this._sKey=t,this.resizeView(),this._p(!0))},_onActivate:function(){this._bInfinite&&this._attachEvent()},_onDeactivate:function(){this._bInfinite&&this._detachEvent()},_getXPos:function(){var t=this.getColumnCount();if(t>1){for(var e=[],i=0,n=0;t>n;n++)i+=0==n?0:this._htSizeInfo.cardWidth,e.push(i);return e}return[0]},_getYPos:function(t,e){for(var i,n,s,o=Array.apply(null,Array(t.length)).map(function(){return 0}),h=t.concat([]),a=0,r=0,l=t.length;l>r&&(i=e-(a+1),i>=0);a++)n=this._aData[i],s=h.indexOf(n[this._sKey+"X"]),-1!=s&&(h[s]=-1,o[s]=n[this._sKey+"Y"]+n[this._sKey+"Height"],r++);return o},isCached:function(t){var e=this._aData.length;return t?this._htCache[this._sKey]==e-1:this._htCache[this._sKey]==e-1&&this._htCache[this._sKey+"Pos"]==e-1},destroy:function(){this._aData.length=0,this._aCards.length=0,this._htSelected={},this._welTmpDf=null,this._bInfinite&&this._detachEvent(),this._detachPreparedEvent()}}).extend(jindo.m.UIComponent),jindo.m.Keyframe=jindo.$Class({$init:function(t){this._nCurValue=null,this._nCurIdx=null,this._aKeyframeLists=[],this._oPreprocessed=null,this._bPreprocessed=!1,this._oRAF=null;var e=jindo.$Agent(),i=e.os(),n=e.navigator();this._bHasTransformRenderBug=i.ios&&5===parseInt(i.version,10)&&n.msafari,this.option({fEffect:jindo.m.Effect.linear,nAnimationDuration:0}),this.option(t||{}),this._fDefaultEffect=this.option("fEffect")()},_loop:function(t,e,i,n){!function s(o){return i(o),++o<e?void(t?(window.requestAnimationFrame||window.setTimeout)(function(){s(o)},1e3/60):s(o)):void n()}(0)},_preprocessKeyframes:function(t){if(this._bPreprocessed)return void this.fireEvent("preprocessEnd");if(!this._oPreprocessed){this._oPreprocessed={objs:{},frames:null};var e=this._aKeyframeLists.sort(function(t,e){return t.frame-e.frame}),i={},n=[],s={},o={},h=this,a=function(){h._loop(t,e.length,function(t){var a,r=e[t],l=r.frame,_=h._toPropObj(r.propLists),c=i[l]={frame:l,dynamic:{},"static":{}};n.push(c);for(a in _)if(_.hasOwnProperty(a)){var u=l,f=_[a],d=h._fDefaultEffect;"function"==typeof f&&(d=f,f=f.end);var m=s[a];m&&(m.effect=d,m.frames[1]=u,m.vals[1]=f,d.effectConstructor===jindo.m.Effect.stepEnd&&(m.vals[1]=m.vals[0])),a in o||(o[a]=f),s[a]={effect:null,frames:[u],vals:[f]}}for(a in s)s.hasOwnProperty(a)&&(i[l].dynamic[a]=s[a])},r)},r=function(){h._loop(t,n.length,function(t){var e=n[t];for(var i in o)if(o.hasOwnProperty(i)){if(i in e.dynamic)continue;e["static"][i]=o[i]}},l)},l=function(){h._oPreprocessed.frames=n;var t=h._oPreprocessed.objs;for(var e in t)if(t.hasOwnProperty(e))try{delete t[e].__KEYFRAME_UNIQ}catch(s){t[e].__KEYFRAME_UNIQ=void 0}i=null,h._bPreprocessed=!0,h.fireEvent("preprocessEnd")};a()}},preprocess:function(t){return this._preprocessKeyframes(!!t),this},_getPropLists:function(t,e){for(var i,n=this._oPreprocessed.frames,s=n.length-1,o=0;i=n[o];o++)if(i.frame>t){s=Math.max(0,o-1);break}var h=n[s],a={};return a=this._getDynamicProps(a,t,h),(e||this._nCurIdx!==s)&&(a=this._getStaticProps(a,t,h)),this._nCurIdx=s,a},_get:function(t,e){if(!this._bPreprocessed)throw new Error("First, you need to call preprocess().");var i,n,s=this._getPropLists(t,e),o=this._oPreprocessed.objs,h=[];for(var a in s)s.hasOwnProperty(a)&&(i=o[a],n=s[a],h.push(i,n));return h},get:function(t){return this._get(t,!0)},frame:function(t,e){var i=this,n=this._nCurValue;if(e||t!==n){this._nCurValue=t,this._oRAF&&(cancelAnimationFrame(this._oRAF),this._oRAF=null),i._bPlaying&&i._frame(n,e);var s=this.option("nAnimationDuration");if(s&&null!==n){var o=jindo.m.Effect.easeOut(Math.round(1e6*n)/1e6,Math.round(1e6*t)/1e6),h=(new Date).getTime(),a=!0;return i._bPlaying=!0,void function r(){i._oRAF=requestAnimationFrame(function(){var t=Math.max(0,Math.min(1,(new Date-h)/s));return i._frame(o(t),a),a=!1,i.oRAF=null,1>t?r():void(i._bPlaying=!1)})}()}return this._frame(t,e)}},_frame:function(t,e){for(var i,n,s,o,h=this._bHasTransformRenderBug,a=this._get(t,e),r=null,l=this,_=0,c=a.length;c>_;_+=2)if(i=a[_],i="function"==typeof i?i():i,n=a[_+1],r=r||function(t,e){s=jindo.$Element(t);for(var i in e)e.hasOwnProperty(i)&&(o=e[i],/^@(.*)$/.test(i)?(i=RegExp.$1,/transition/.test(i)&&(o=l._getCSSVal(o)),h&&"@transform"===i&&("@left"in e||"@top"in e)&&t.clientHeight,s.$value().style[l._getCSSKey(i)]=o):t[i]=o)},i instanceof Array)for(var u=0,f=i.length;f>u;u++)r(i[u],n);else r(i,n)},_getStaticProps:function(t,e,i){var n=i["static"];for(var s in n)if(/^(.+):(.+)$/.test(s)){var o=RegExp.$1,h=RegExp.$2,a=n[s];t[o]=t[o]||{},t[o][h]=a}return t},_getDynamicProps:function(t,e,i){var n=i.dynamic,s=i["static"],o=[];for(var h in n)if(/^(.+):(.+)$/.test(h)){var a=RegExp.$1,r=RegExp.$2,l=n[h],_=l.effect,c=l.vals[0],u=l.vals[1];if(!_||c===u){s[h]=c,o.push(h);continue}_.start=c,_.end=u,/^@transform/.test(r)&&(_=this._getTransformFunction(_));var f=Math.max(0,Math.min(1,(e-l.frames[0])/(l.frames[1]-l.frames[0])));try{l=_(f)}catch(d){if(!/^unit error/.test(d.message))throw d;s[h]=c,o.push(h);continue}t[a]=t[a]||{},t[a][r]=l}for(var m=0,p=o.length;p>m;m++)delete n[o[m]];return o.length=null,t},_toPropObj:function(t){function e(t){var e;if("object"==typeof t)e=t.__KEYFRAME_UNIQ=t.__KEYFRAME_UNIQ||Math.floor(Math.random()*(new Date).getTime())+"";else{for(var i in n)if(n.hasOwnProperty(i)&&n[i]===t)return i;e=Math.floor(Math.random()*(new Date).getTime())+""}return n[e]=t,e}for(var i={},n=this._oPreprocessed.objs,s=0,o=t.length;o>s;s+=2){var h=t[s];if(h){var a=t[s+1],r=e(h);for(var l in a)a.hasOwnProperty(l)&&(i[r+":"+l]=a[l])}}return i},set:function(t,e){if("number"==typeof t)return this._aKeyframeLists.push({frame:t,propLists:e}),this._oPreprocessed=null,this._bPreprocessed=!1,this._nCurIdx=null,this;var i,n=t,s=e,o={},h=null;for(var a in s)if(s.hasOwnProperty(a)){h=h||(isNaN(a)?1:2);var r=s[a];for(var l in r)r.hasOwnProperty(l)&&(t=1===h?l:a,i=1===h?a:l,o[t]=o[t]||{},o[t][i]=r[l])}for(var _ in o)o.hasOwnProperty(_)&&(t=1*_,this.set(t,[n,o[_]]));return this},_oProperPrefix:{},_getProperPrefix:function(t){var e=this._oProperPrefix;if(t in e)return e[t];for(var i,n,s=document.body.style,o=["webkit","","Moz","O","ms"],h=function(t){return t.toUpperCase()},a=0,r=o.length;r>a;a++)if(i=o[a],n=i+(i?t.replace(/^[a-z]/,h):t),n in s)return e[t]=i;return e[t]=""},_getCSSKey:function(t){var e=this,i="",n=t.replace(/^(\-(webkit|o|moz|ms)\-)?([a-z]+)/,function(t,n,s,o){return i=s||e._getProperPrefix(o),i&&(o=o.replace(/^[a-z]/,function(t){return t.toUpperCase()})),o}).replace(/\-(\w)/g,function(t,e){return e.toUpperCase()});return({o:"O",moz:"Moz",webkit:"Webkit"}[i]||i)+n},_getCSSVal:function(t){var e=this,i=t.replace(/(^|\s)(\-(webkit|moz|o|ms)\-)?([a-z]+)/g,function(t,i,n,s,o){return s=s||e._getProperPrefix(o),i+(s&&"-"+s+"-")+o});return i},_parseTransformText:function(t){t=t||"";var e={};return t.replace(/([\w\-]+)\(([^\)]*)\)/g,function(t,i,n){var s=n.split(/\s*,\s*/);switch(i){case"translate3d":case"scale3d":case"skew3d":i=i.replace(/3d$/,""),e[i+"Z"]=s[2];case"translate":case"scale":case"skew":e[i+"X"]=s[0],"undefined"==typeof s[1]?"scale"===i&&(e[i+"Y"]=s[0]):e[i+"Y"]=s[1];break;default:e[i]=s.join(",")}}),e},_getTransformFunction:function(t){var e,i=t.start,n=t.end,s=this._parseTransformText(i),o=this._parseTransformText(n),h={};for(e in s)s.hasOwnProperty(e)&&(h[e]=[s[e],o[e]||(/^scale/.test(e)?1:0)]);for(e in o)!o.hasOwnProperty(e)||e in s||(h[e]=[s[e]||(/^scale/.test(e)?1:0),o[e]]);var a=function(e){var i=[],n=[t.start,t.end];for(var s in h)h.hasOwnProperty(s)&&(t.start=h[s][0],t.end=h[s][1],i.push(s+"("+t(e)+")"));return t.start=n[0],t.end=n[1],i.join(" ")};return a.start=i,a.end=n,a}}).extend(jindo.m.Component),jindo.m.LayerManager=jindo.$Class({$init:function(t,e){jindo.m.getDeviceInfo();this.option({bActivateOnload:!0}),this.option(e||{}),this._initVar(),this._setWrapperElement(t),this.option("bActivateOnload")&&this.activate()},_initVar:function(){this._aLink=[],this._oTouch=null},_setWrapperElement:function(t){this._htWElement={},this.setLayer(t)},_onActivate:function(){this._attachEvent()},_onDeactivate:function(){this._detachEvent()},setLayer:function(t){return t="string"==typeof t?jindo.$(t):t,this._htWElement.element=jindo.$Element(t),this._htWElement.element.css("position","absolute"),this},getVisible:function(){return this._htWElement.element.visible()},getLayer:function(){return this._htWElement.element.$value()},getLinks:function(){return this._aLink},link:function(t){if(arguments.length>1){for(var e=0,i=arguments.length;i>e;e++)this.link(arguments[e]);return this}return-1!=this._find(t)?this:(this._aLink.push(t),this)},unlink:function(t){if(arguments.length>1){for(var e=0,i=arguments.length;i>e;e++)this.unlink(arguments[e]);return this}var n=this._find(t);return n>-1&&this._aLink.splice(n,1),this},_check:function(t){for(var e,i,n=jindo.$Element(t),s=0;e=this._aLink[s];s++)if(i=jindo.$Element(e),i&&(e=i.$value(),e&&(t==e||n.isChildOf(e))))return!0;return!1},_find:function(t){for(var e,i=0;e=this._aLink[i];i++)if(e==t)return i;return-1},_fireEventBeforeShow:function(){return this.fireEvent("beforeShow",{elLayer:this.getLayer(),aLinkedElement:this.getLinks()})},_fireEventShow:function(){this.fireEvent("show",{elLayer:this.getLayer(),aLinkedElement:this.getLinks()})},_fireEventBeforeHide:function(t){return this.fireEvent("beforeHide",{elTarget:t,elLayer:this.getLayer(),aLinkedElement:this.getLinks()})},_fireEventHide:function(t){this.fireEvent("hide",{elTarget:t,elLayer:this.getLayer(),aLinkedElement:this.getLinks()})},show:function(){return this.getVisible()||this._fireEventBeforeShow()&&(this._htWElement.element.show(),this._fireEventShow()),this},hide:function(t){return this.getVisible()&&this._fireEventBeforeHide(t)&&(this._htWElement.element.hide(),this._fireEventHide(t)),this},toggle:function(){return this.getVisible()?this.hide():this.show(),this},_onEvent:function(t){var e=t.element;if(this.getVisible()){if(!this._check(e))return this.hide(e),!0;this.fireEvent("ignore",{elTarget:e}),t.stop()}},_attachEvent:function(){var t=this;this._oTouch=new jindo.m.Touch(document).attach("touchEnd",function(e){e.sMoveType===jindo.m.MOVETYPE[3]&&t._onEvent(e)})},_detachEvent:function(){this._oTouch&&this._oTouch.detachAll("touchEnd")},destroy:function(){this.deactivate();for(var t in this._htWElement)this._htWElement[t]=null;
this._htWElement=null,delete this._aLink,delete this._oTouch}}).extend(jindo.m.UIComponent),jindo.m.Loading=jindo.$Class({$init:function(t,e){this.option({bActivateOnload:!0,nWidth:31,nHeight:31,sDefaultForeground:"black",sDefaultBackground:"transparent",sLoadingText:"로딩중입니다",bUseFoggy:t?!1:!0,sFoggyColor:"gray",nFoggyOpacity:.3}),this.option(e||{}),this._setWrapperElement(t),this.option("bActivateOnload")&&this.activate()},$static:{DELAY:["0","-.9167s","-.833s","-.75s","-.667s","-.5833s","-.5s","-.41667s","-.333s","-.25s","-.1667s","-.0833s"],ANIMATION_STYLE:"_loading_animation_sytle_",CONTAINER_CLASS:"_loading_container_class_"},_setWrapperElement:function(t){this._htWElement={},this._htWElement.base=jindo.$Element(jindo.$(t)?jindo.$(t):document.body),this._createLoading()},_createLoading:function(){this._createLoadingStyle(),this._htWElement.container=jindo.$Element("<div style='zIndex: 2100'>").addClass(jindo.m.Loading.CONTAINER_CLASS),this.option("bUseFoggy")&&this._createFoggy().appendTo(this._htWElement.container),this._createLoadingElement(),this._htWElement.loadingbox=jindo.$Element("<div>").css({zIndex:2100,position:"absolute"}).append(this._htWElement.loading),this.option("sLoadingText")&&this._createLoadingText().appendTo(this._htWElement.loadingbox),this._htWElement.loadingbox.appendTo(this._htWElement.container)},_createFoggy:function(){return this._htWElement.foggy=jindo.$Element("<div>").css({position:"absolute",padding:"0px",margin:"0px",border:"0px",backgroundColor:this.option("sFoggyColor"),opacity:this.option("nFoggyOpacity"),width:"100%",height:"100%",left:"0px",top:"0px",zIndex:2099}),this._htWElement.foggy},_setPosition:function(){var t,e=this._htWElement.loadingbox.width(),i=this._htWElement.loadingbox.height();this._isBody()?(t=jindo.$Document().scrollPosition(),this._htWElement.container.css({left:t.left+"px",top:t.top+"px",width:window.innerWidth+"px",height:window.innerHeight+"px"})):(this._htWElement.container.width()<e&&this._htWElement.container.width(e),this._htWElement.container.height()<i&&this._htWElement.container.height(i)),this._htWElement.loadingbox.css({top:"50%",left:"50%","margin-left":-parseInt(e/2,10)+"px","margin-top":-parseInt(i/2,10)+"px"})},_isBody:function(){return this._htWElement.base.isEqual(document.body)},show:function(){if(this.fireEvent("beforeShow")){for(var t=this._htWElement.loading.queryAll("span"),e=jindo.m.getCssPrefix(),i=0;i<t.length;i++)jindo.$Element(t[i]).css(e+"Animation","loadingfade 1s linear "+jindo.m.Loading.DELAY[i]+" infinite");this._attachEvent(),this._isBody()&&this._htWElement.container.css({width:window.innerWidth+"px",height:window.innerHeight+"px"}),this._htWElement.container.show(),this._setPosition(),this.fireEvent("show")}},hide:function(){if(this.fireEvent("beforeHide")){for(var t=this._htWElement.loading.queryAll("span"),e=jindo.m.getCssPrefix(),i=0;i<t.length;i++)jindo.$Element(t[i]).css(e+"Animation","");this._detachEvent(),this._htWElement.container.hide(),this.fireEvent("hide")}},_onPrevent:function(t){return t.stop(jindo.$Event.CANCEL_ALL),!1},_onRotate:function(){if(this._htWElement.container.visible())if(jindo.m.getDeviceInfo().andorid)this._setPosition();else{this._htWElement.container.hide();var t=this;setTimeout(function(){t._htWElement.container.show(),t._setPosition()},0)}},_attachEvent:function(){this._htEvent.rotate=jindo.$Fn(this._onRotate,this).bind(),this._htEvent.prevent=jindo.$Fn(this._onPrevent,this).attach(this._htWElement.container,"touchstart").attach(this._htWElement.container,"touchmove"),jindo.m.bindRotate(this._htEvent.rotate)},_detachEvent:function(){this._htEvent.prevent&&this._htEvent.prevent.detach(this._htWElement.container,"touchmove").detach(this._htWElement.container,"touchstart"),jindo.m.unbindRotate(this._htEvent.rotate)},_createLoadingStyle:function(){if(!jindo.$(jindo.m.Loading.ANIMATION_STYLE)){var t=document.createElement("style");if(t){t.setAttribute("type","text/css"),t.setAttribute("id",jindo.m.Loading.ANIMATION_STYLE);var e="@-"+jindo.m.getCssPrefix()+"-keyframes loadingfade{from{opacity:1}to{opacity:0}}",i=document.createTextNode(e);t.styleSheet?t.styleSheet.cssText=i.nodeValue:t.appendChild(i);var n=document.getElementsByTagName("head")[0];n&&n.appendChild(t)}}},_createLoadingElement:function(){for(var t=jindo.m.getCssPrefix(),e=[],i=jindo.m.useCss3d()?{open:"3d(",end:",0)"}:{open:"(",end:")"},n=0;12>n;n++)e.push("<span style='display:block;position:absolute;top:40%;left:48%;width:11%;height:24%;border-radius:6px;background:"),e.push(this.option("sDefaultForeground")),e.push("; opacity:0; -"),e.push(t),e.push("-transform:rotate("),e.push(30*n),e.push("deg) translate"+i.open+"0,-140%"+i.end+";'></span>");this._htWElement.loading=jindo.$Element("<div>").css({position:"relative",margin:"0 auto"}).html(e.join(""))},refresh:function(){this._htWElement.loading.css({width:this.option("nWidth")+"px",height:this.option("nHeight")+"px",background:this.option("sDefaultBackground")}),this._htWElement.text&&this._htWElement.text.html(this.option("sLoadingText"))},_createLoadingText:function(){return this._htWElement.text=jindo.$Element("<div>").css({margin:"2px 0 0 0",bottom:0,width:"100%","text-align":"center"}),this._htWElement.text},_onActivate:function(){this._htEvent={},this._htWElement.container.appendTo(this._htWElement.base),this._isBody()?this._htWElement.container.css({position:"absolute",top:0,left:0,width:"100%",height:"100%"}).hide():this._htWElement.container.css({position:"relative"}).hide(),this.refresh()},_onDeactivate:function(){this._detachEvent(),this._htWElement.container.leave()},destroy:function(){this.deactivate();for(var t in this._htWElement)this._htWElement[t]=null;this._htWElement=null}}).extend(jindo.m.UIComponent),jindo.m.MoreContentButton=jindo.$Class({$init:function(t,e){this.option({sClassPrefix:"more_",nTotalItem:10,nShowMaxItem:10,nItemPerPage:10,nPage:1,bActivateOnload:!0,htAjax:{}}),this.option(e||{}),this.option("nItem",this.option("nShowMaxItem")),this._initVar(),this._setWrapperElement(t),this.option("bActivateOnload")&&(this.activate(),this._nCurrentPage=this.option("nPage"),this.updateInfo())},_initVar:function(){var t={sApi:null,htAjaxOption:{type:"xhr"},htQuery:{},sStart:"start",sDisplay:"display"},e=this.option("htAjax");if(!e)return void this.option("htAjax",t);for(var i in t)"undefined"==typeof e[i]&&(e[i]=t[i]);for(i in t.htAjaxOption)"undefined"==typeof e.htAjaxOption[i]&&(e.htAjaxOption[i]=t.htAjaxOption[i]);for(i in t.htQuery)"undefined"==typeof e.htQuery[i]&&(e.htQuery[i]=t.htQuery[i]);e.sApi&&(this.oAjax=new jindo.$Ajax(e.sApi,e.htAjaxOption))},_setWrapperElement:function(t){this._htWElement={};var e="."+this.option("sClassPrefix");this._htWElement.elBase=jindo.$Element(t),this._htWElement.elMoreButton=jindo.$Element(this._htWElement.elBase.query(e+"button")),this._htWElement.elTop=jindo.$Element(this._htWElement.elBase.query(e+"top")),this._htWElement.elLoading=jindo.$Element(this._htWElement.elBase.query(e+"loading")),this._htWElement.elMoreCnt=jindo.$Element(this._htWElement.elBase.query(e+"moreCnt")),this._htWElement.elTotal=jindo.$Element(this._htWElement.elBase.query(e+"total")),this._htWElement.elCurrent=jindo.$Element(this._htWElement.elBase.query(e+"current")),this._htWElement.elRemainder=jindo.$Element(this._htWElement.elBase.query(e+"remainder")),this._htWElement.elLast=jindo.$Element(this._htWElement.elBase.query(e+"last")),this._htWElement.elLast&&(this._htWElement.elLastTotal=jindo.$Element(this._htWElement.elLast.query(e+"total")),this._htWElement.elLastCurrent=jindo.$Element(this._htWElement.elLast.query(e+"current")),this._htWElement.elLastRemainder=jindo.$Element(this._htWElement.elLast.query(e+"remainder")))},_onClickMore:function(t){t.stop(jindo.$Event.CANCEL_DEFAULT),this.hasNextPage()&&this.more()},_onClickTop:function(t){t.stop(jindo.$Event.CANCEL_DEFAULT),this.fireEvent("goTop",{element:t.element})},more:function(t){"undefined"==typeof t&&(t=!0);var e=this._nCurrentPage+1,i=this.getCurrentPage();if(!t||this.fireEvent("beforeMore",{nPage:e,nCurrentPage:i})){var n=this.getPageItemIndex(e);if(!n)return void this.updateInfo();this.showLoadingImg(),this.option("htAjax").sApi?this._callAjax(e,!0,t):(this._move(e),t&&this.fireEvent("more",{nPage:e,nStartIndex:n.nStart,nEndIndex:n.nEnd}),this.updateInfo())}},movePageTo:function(t,e){"undefined"==typeof e&&(e=!0);var i=this.getCurrentPage();if(!e||this.fireEvent("beforeMovePage",{nPage:t,nCurrentPage:i})){var n=this.getPageItemIndex(t);if(!n)return void this.updateInfo();this.showLoadingImg(),this.option("htAjax").sApi?this._callAjax(t,!1,e):(this._move(t),e&&this.fireEvent("movePage",{nPage:t,nBeforePage:i,nStartIndex:0,nEndIndex:n.nEnd}),this.updateInfo())}},_move:function(t){var e=this._convertToAvailPage(t);e!=this._nCurrentPage&&(this._nCurrentPage=e)},updateInfo:function(){var t=this.getCurrentPage(),e=this.getPageItemIndex(t);if(this.hideLoadingImg(),t>=this.getTotalPages()?(this._htWElement.elBase&&this._htWElement.elBase.addClass("u_pg_end"),this._htWElement.elMoreButton&&this._htWElement.elMoreButton.hide(),this._htWElement.elLast&&this._htWElement.elLast.show("block")):(this._htWElement.elBase&&this._htWElement.elBase.removeClass("u_pg_end"),this._htWElement.elMoreButton&&this._htWElement.elMoreButton.show("block"),this._htWElement.elLast&&this._htWElement.elLast.hide()),this._htWElement.elCurrent&&e){var i=e.nEnd+1;this._htWElement.elCurrent.text(this._setNumberFormat(i))}if("undefined"!=typeof this._htWElement.elLastCurrent&&this._htWElement.elLastCurrent&&e&&this._htWElement.elLastCurrent.text(this._setNumberFormat(e.nEnd+1)),this._htWElement.elRemainder&&e&&this._htWElement.elRemainder.text(this._setNumberFormat(parseInt(this.option("nTotalItem"),10)-(e.nEnd+1))),this._htWElement.elLastRemainder&&e&&this._htWElement.elLastRemainder.text(this._setNumberFormat(parseInt(this.option("nTotalItem"),10)-(e.nEnd+1))),this._htWElement.elTotal&&this._htWElement.elTotal.text(this._setNumberFormat(this.option("nTotalItem"))),"undefined"!=typeof this._htWElement.elLastTotal&&this._htWElement.elLastTotal&&this._htWElement.elLastTotal.text(this._setNumberFormat(this.option("nTotalItem"))),this._htWElement.elMoreCnt&&e){var n=Math.min(this.getItemPerPage(),this.getItemCount()-e.nEnd-1);this._htWElement.elMoreCnt.text(this._setNumberFormat(n))}},_callAjax:function(t,e,i){var n=this;this.oAjax.option("onload",null),this.oAjax.option("onload",function(s){n._onAjaxResponse(s,t,e,i)}),this.oAjax.request(this._getQueryString(t,e))},_onAjaxResponse:function(t,e,i,n){if(n){this._move(e);var s=i?"more":"movePage",o=this.getPageItemIndex(e);this.fireEvent(s,{oResponse:t,nPage:e,nStartIndex:i?o.nStart:0,nEndIndex:o.nEnd})}this.updateInfo()},_getQueryString:function(t,e){"undefined"==typeof e&&(e=!0);var i=this.option("htAjax").htQuery||{},n=this.getPageItemIndex(t);return i[this.option("htAjax").sStart]=e?n.nStart:0,i[this.option("htAjax").sDisplay]=Math.min(this.getItemPerPage(),this.getShowMaxItem()-n.nStart),i},_setNumberFormat:function(t){t=t.toString();for(var e="",i=0,n=t.length,s=n;s>=0;s--){var o=t.charAt(s);s>n?e=o+e:/[0-9]/.test(o)&&(i>=3&&(e=","+e,i=0),i++,e=o+e)}return e},showLoadingImg:function(){this._htWElement.elLoading&&this._htWElement.elLoading.show()},hideLoadingImg:function(){this._htWElement.elLoading&&this._htWElement.elLoading.hide()},reset:function(t){"undefined"==typeof t&&(t=this.option("nShowMaxItem")),this.setShowMaxItem(t),this.movePageTo(1,!1)},getTotalItem:function(){return this.option("nTotalItem")},setTotalItem:function(t){this.option("nTotalItem",t)},getShowMaxItem:function(){return this.option("nShowMaxItem")},setShowMaxItem:function(t){this.option("nShowMaxItem",t),this.option("nItem",t)},_onActivate:function(){this._attachEvent()},_onDeactivate:function(){this._detachEvent()},_attachEvent:function(){this._htEvent={},this._htWElement.elMoreButton&&(this._htEvent.click_More={ref:jindo.$Fn(this._onClickMore,this).attach(this._htWElement.elMoreButton,"click"),el:this._htWElement.elMoreButton.$value()}),this._htWElement.elTop&&(this._htEvent.click_Top={ref:jindo.$Fn(this._onClickTop,this).attach(this._htWElement.elTop,"click"),el:this._htWElement.elTop.$value()})},_detachEvent:function(){for(var t in this._htEvent){var e=this._htEvent[t];e.ref.detach(e.el,t.substring(0,t.indexOf("_")))}this._htEvent=null},header:function(t,e){return this.oAjax?this.oAjax.header(t,e):void 0},destroy:function(){this._detachEvent();for(var t in this._htWElement)this._htWElement[t]=null;this._htWElement=null}}).extend(jindo.m.CorePagination),jindo.m.MovableCoord=jindo.$Class({$init:function(t,e){var i=this;this._sRandKey="__MOVABLECOORD_"+Math.round(Math.random()*(new Date).getTime()),this._aPos=t||[0,0],this.option({nDeceleration:6e-4,aMin:[0,0],aMax:[100,100],aBounce:[10,10,10,10],aMargin:[0,0,0,0],aCircular:[!1,!1,!1,!1]}),this.option(e||{}),this._subOptions={_htOption:{_htSetter:{}}},setTimeout(function(){i.fireEvent("change",{aPos:[i._aPos[0],i._aPos[1]],bHolding:!1})},0)},_grap:function(){var t=this._aPos,e=this._oAnimating;e&&(this._frame(e,t),this._oAnimating=null,this._oRaf&&cancelAnimationFrame(this._oRaf),this._oRaf=null)},setTo:function(t,e,i){var n=this;i===!0&&(i=1/0),this._grap();var s=this.option("aMin"),o=this.option("aMax"),h=this.option("aCircular");if(i){var a=[this._aPos[0],this._aPos[1]];null!==t&&(a[0]=t),null!==e&&(a[1]=e),this._move(a,!1,!1,i)}else{null!==t&&(h[3]||(t=Math.max(s[0],t)),h[1]||(t=Math.min(o[0],t))),null!==e&&(h[0]||(e=Math.max(s[1],e)),h[2]||(e=Math.min(o[1],e)));var r=this._adjustCircularPos([t,e],s,o,h);null!==t&&(this._aPos[0]=r[0]),null!==e&&(this._aPos[1]=r[1]),n.fireEvent("change",{aPos:[this._aPos[0],this._aPos[1]],bHolding:!1})}return this},setBy:function(t,e,i){return this._grap(),this.setTo(null!==t?this._aPos[0]+t:null,null!==e?this._aPos[1]+e:null,i)},get:function(){return[this._aPos[0],this._aPos[1]]},bind:function(t,e){var i=this,n=this._sRandKey;t=t instanceof jindo.$Element?t.$value():t;var s={nDirection:31,aScale:[1,1],nMaximumSpeed:1/0};if(e)for(var o in e)e.hasOwnProperty(o)&&(s[o]=e[o]);t[n]&&this.unbind(t);var h=16&s.nDirection?2:2&s.nDirection||8&s.nDirection?1:0,a=4&s.nDirection||8&s.nDirection,r=1&s.nDirection||2&s.nDirection;return t[n]=new jindo.m.Touch(t,{nDeceleration:this.option("nDeceleration"),nUseDiagonal:h,nMoveThreshold:0,nSlopeThreshold:5,nTapThreshold:1,bHorizental:!!r,bVertical:!!a}).attach({touchStart:function(t){i._subOptions=s,i._touchStart(t)},touchMove:function(t){i._touchMove(t)},touchEnd:function(t){i._touchEnd(t)}}),this},unbind:function(t){var e=this._sRandKey;return t=t instanceof jindo.$Element?t.$value():t,t[e]&&(t[e].deactivate(),t[e]=null),this},_touchStart:function(t){var e=this._aPos,i=this.option("aMin"),n=this.option("aMax"),s=this._oAnimating;s&&this._frame(s,e),this._oAnimating=null,this._oRaf&&cancelAnimationFrame(this._oRaf),this._oRaf=null,this.fireEvent("hold",{oEvent:t.oEvent,aPos:[e[0],e[1]]}),this._bGrapOutside=e[0]<i[0]||e[1]<i[1]||e[0]>n[0]||e[1]>n[1],this._aMovingPos=[e[0],e[1]],this._aDirFilter=null},_easeOutQuint:jindo.m.Effect.easeOutQuint(0,1),_adjustCircularPos:function(t,e,i,n){return e=e||this.option("aMin"),i=i||this.option("aMax"),n=n||this.option("aCircular"),n[0]&&t[1]<e[1]&&(t[1]=(t[1]-e[1])%(i[1]-e[1]+1)+i[1]),n[1]&&t[0]>i[0]&&(t[0]=(t[0]-e[0])%(i[0]-e[0]+1)+e[0]),n[2]&&t[1]>i[1]&&(t[1]=(t[1]-e[1])%(i[1]-e[1]+1)+e[1]),n[3]&&t[0]<e[0]&&(t[0]=(t[0]-e[0])%(i[0]-e[0]+1)+i[0]),t},_touchMove:function(t){if("tap"!==t.sMoveType&&t.sMoveTypeAgree&&this._aMovingPos){var e,i,n,s=this._aPos,o=this._aMovingPos,h=this.option("aMin"),a=this.option("aMax"),r=this.option("aBounce"),l=this.option("aMargin"),_=this._subOptions.nDirection,c=this._subOptions.aScale,u=this._easeOutQuint,f=7.5,d=this._aDirFilter;if(!d)switch(d=this._aDirFilter=[!1,!1],t.sStartMoveType){case"hScroll":d[0]=1&_,d[1]=2&_;break;case"vScroll":d[1]=4&_,d[0]=8&_;break;case"dScroll":d[0]=d[1]=16&_}d[0]&&(o[0]+=t.nVectorX*c[0]),d[1]&&(o[1]+=t.nVectorY*c[1]),s[0]=o[0],s[1]=o[1],s=this._adjustCircularPos(s,h,a),this._bGrapOutside&&s[0]>=h[0]&&s[0]<=a[0]&&s[1]>=h[1]&&s[1]<=a[1]&&(this._bGrapOutside=!1);var m=l[0]+r[0],p=l[1]+r[1],g=l[2]+r[2],v=l[3]+r[3];this._bGrapOutside?(i=h[0]-v,n=a[0]+p,e=s[0],s[0]=e>n?n:i>e?i:e,i=h[1]-m,n=a[1]+g,e=s[1],s[1]=e>n?n:i>e?i:e):(s[1]<h[1]?(e=(h[1]-s[1])/(m*f),s[1]=h[1]-u(e>1?1:e)*m):s[1]>a[1]&&(e=(s[1]-a[1])/(g*f),s[1]=a[1]+u(e>1?1:e)*g),s[0]<h[0]?(e=(h[0]-s[0])/(v*f),s[0]=h[0]-u(e>1?1:e)*v):s[0]>a[0]&&(e=(s[0]-a[0])/(p*f),s[0]=a[0]+u(e>1?1:e)*p)),this.fireEvent("change",{aPos:s,bHolding:!0}),t.oEvent.stopDefault()}},_touchEnd:function(t){if(this._aMovingPos){var e=(this._aPos,this.option("aBounce"),this._subOptions.nMaximumSpeed),i=this._subOptions.aScale,n=t.htMomentum,s=this._aDirFilter||[!1,!1];s[0]||(n.nSpeedX=0),s[1]||(n.nSpeedY=0);var o=this._getRelPosFromSpeed([n.nSpeedX*(n.nDistanceX<0?-1:1)*i[0],n.nSpeedY*(n.nDistanceY<0?-1:1)*i[1]],e);this._move(o,!0,!1,1/0),this._aMovingPos=null,this._aDirFilter=null}},_move:function(t,e,i,n){var s=this;this[e?"_animateBy":"_animateTo"](t,function(){var t=[],e=s._aPos,i=s.option("aMin"),o=s.option("aMax");t[0]=Math.min(o[0],Math.max(i[0],e[0])),t[1]=Math.min(o[1],Math.max(i[1],e[1])),s._animateTo(t,function(){s.fireEvent("animationEnd")},!0,!1,n)},i,!0,n)},_getRelPosFromSpeed:function(t,e){var i=-this.option("nDeceleration"),n=Math.min(e||1/0,Math.sqrt(t[0]*t[0]+t[1]*t[1])),s=Math.abs(n/i);return[t[0]/2*s,t[1]/2*s]},_getDurationFromRelPos:function(t){var e=this.option("nDeceleration"),i=Math.sqrt(t[0]*t[0]+t[1]*t[1]);return Math.sqrt(i/e*2)},_getPointOfIntersection:function(t,e,i,n,s){e=[e[0],e[1]];var o=e[0]-t[0],h=e[1]-t[1];return s[3]||(e[0]=Math.max(i[0],e[0])),s[1]||(e[0]=Math.min(n[0],e[0])),e[1]=o?t[1]+h/o*(e[0]-t[0]):e[1],s[0]||(e[1]=Math.max(i[1],e[1])),s[2]||(e[1]=Math.min(n[1],e[1])),e[0]=h?t[0]+o/h*(e[1]-t[1]):e[0],e},_animateBy:function(t,e,i,n,s){var o=this._aPos;return this._animateTo([o[0]+t[0],o[1]+t[1]],e,i,n,s)},_animateTo:function(t,e,i,n,s){var o,h,a,r,l,_=this,c=this._aPos,u=[t[0],t[1]];o=this.option("aBounce"),h=this.option("aMargin"),a=this.option("aCircular"),r=this.option("aMin"),l=this.option("aMax"),u=this._getPointOfIntersection(c,u,[r[0]-o[3],r[1]-o[0]],[l[0]+o[1],l[1]+o[2]],a);var f={aDepaPos:[c[0],c[1]],aDestPos:u,bBounce:i};i||this.fireEvent("release",f),o=this.option("aBounce"),h=this.option("aMargin"),r=this.option("aMin"),l=this.option("aMax"),u=f.aDestPos;var d=a[0]&&u[1]<r[1]||a[1]&&u[0]>l[0]||a[2]&&u[1]>l[1]||a[3]&&u[0]<r[0];(c[0]<r[0]||c[0]>l[0]||c[1]<r[1]||c[1]>l[1])&&(u[0]<r[0]||u[0]>l[0]||u[1]<r[1]||u[1]>l[1])&&(u=c);var m=[Math.abs(u[0]-c[0]),Math.abs(u[1]-c[1])],p=Math.min(s,this._getDurationFromRelPos(m));10>p&&(p=0);var g=function(){_._oAnimating=null,c[0]=Math.round(u[0]),c[1]=Math.round(u[1]),c=_._adjustCircularPos(c,r,l,a),e&&e()};if(!p)return g();f={nDuration:p,fEffect:jindo.m.Effect.cubicBezier(.18,.35,.56,1),aDepaPos:[c[0],c[1]],aDestPos:u,bBounce:i,bCircular:d,fDone:g};var v=this.fireEvent("animation",f);if(d&&!v)throw new Error("Can't stop the 'animation' event when 'bCircular' is true.");if(f.aDepaPos=c,f.nStartTime=(new Date).getTime(),this._oAnimating=f,v===!0){var E=this._oAnimating;!function b(){return _._oRaf=null,_._frame(E)>=1?g():void(_._oRaf=requestAnimationFrame(b))}()}},_frame:function(t,e){var i=Math.min(1,(new Date-t.nStartTime)/t.nDuration);return e=e||[],e[0]=1*t.fEffect(t.aDepaPos[0],t.aDestPos[0])(i),e[1]=1*t.fEffect(t.aDepaPos[1],t.aDestPos[1])(i),e=this._adjustCircularPos(e),this.fireEvent("change",{aPos:e,bHolding:!1}),i}}).extend(jindo.m.Component),jindo.m._FlickingAnimation_=jindo.$Class({$init:function(t,e){this.option(e||{}),this._setWrapperElement(t),this._initVar(),this._initTouch(),this._createDummyTag(),this.option("bActivateOnload")&&this.activate()},_initVar:function(){this._oTouch=null,this._doFlicking=!1,this._bTouchStart=!1,this._bMove=!1;var t=this.option("nDefaultIndex")||0;this._checkIndex(t)||(t=0),this.option("bUseCircular")&&(t%=3),this._htIndexInfo={nContentIndex:t,nNextContentIndex:t,welElement:this._htWElement.aPanel[t],welNextElement:this._htWElement.aPanel[t],sDirection:null};var e=jindo.m.getDeviceInfo();this._isIos=e.iphone||e.ipad,this._bAndroid=e.android&&!e.bChrome,this._nVersion=e.version,this._fnDummyFnc=function(){return!1},this._bClickBug=jindo.m.hasClickBug(),this._sCssPrefix=jindo.m.getCssPrefix(),this._elTransition=null,this._wfTransitionEnd=jindo.$Fn(this._onTransitionEnd,this).bind(),this._bDummyTagException=this._bAndroid&&this._nVersion<"3"},_setWrapperElement:function(t){this._htWElement={};var e=jindo.$(t),i="."+this.option("sClassPrefix");this._htWElement.base=jindo.$Element(e).css("zIndex",this.option("nZIndex")),this._htWElement.container=jindo.$Element(jindo.$$.getSingle(i+"container",e));var n=jindo.$$(i+this.option("sContentClass"),e);this._htWElement.aPanel=jindo.$A(n).forEach(function(t,e,i){i[e]=jindo.$Element(t)}).$value()},_initFlicking:function(){this._setElementStyle(),this._setElementSize()},_setElementStyle:function(){},_setElementSize:function(){},_initTouch:function(){this._oTouch=new jindo.m.Touch(this._htWElement.base.$value(),{nSlopeThreshold:4,nMoveThreshold:0,nEndEventThreshold:jindo.m.getDeviceInfo().win?400:0,bActivateOnload:!1,bHorizental:this.option("bHorizontal"),bVertical:!1})},_createDummyTag:function(){if(this._bDummyTagException){this._htWElement.aDummyTag=[];for(var t=0,e=this._htWElement.aPanel.length;e>t;t++){var i=this._htWElement.aPanel[t],n=jindo.$$.getSingle("._cflick_dummy_atag_",i.$value());n||(n=jindo.$("<a href='javascript:void(0);' class='_cflick_dummy_atag_'></a>"),n.style.position="absolute",n.style.left="-1000px",n.style.top="-1000px",n.style.width=0,n.style.height=0,i.append(n)),this._htWElement.aDummyTag.push(n)}}},_focusFixedBug:function(){if(this._htWElement&&"undefined"!=typeof this._htWElement.aDummyTag)for(var t=0,e=this._htWElement.aDummyTag.length;e>t;t++)this._htWElement.aDummyTag[t].focus()},_onStart:function(t){if(!this._doFlicking){if(!this.fireEvent("touchStart",t))return void t.stop();this._bTouchStart=!0,this._clearAnchor(),this._onAfterStart()}},_onAfterStart:function(){},_onMove:function(t){var e=this.option("bHorizontal"),i=t.oEvent;if(t.sMoveType===jindo.m.MOVETYPE[0]){if(!e)return this.fireEvent("scroll"),void(this._bTouchStart=!1);i.stop(jindo.$Event.CANCEL_ALL)}else if(t.sMoveType===jindo.m.MOVETYPE[1]){if(e)return this.fireEvent("scroll"),void(this._bTouchStart=!1);i.stop(jindo.$Event.CANCEL_ALL)}else if(t.sMoveType===jindo.m.MOVETYPE[2]){if(!this.option("bUseDiagonalTouch"))return this.fireEvent("scroll"),void(this._bTouchStart=!1);i.stop(jindo.$Event.CANCEL_ALL)}if(!this._doFlicking&&this._bTouchStart){this.fireEvent("touchMove",t);var n=e?t.nDistanceX:t.nDistanceY,s=e?t.nVectorX:t.nVectorY,o=e?t.nX:t.nY;this._onAfterMove(n,s,o),this._bMove=!0}},_onAfterMove:function(){},_onEnd:function(t,e){if(!this._doFlicking&&this._bTouchStart){this._doFlicking=!0;var i=this.option("bHorizontal");this._bAndroid&&this._nVersion>="4.1"||(t.sMoveType===jindo.m.MOVETYPE[0]||t.sMoveType===jindo.m.MOVETYPE[1]||t.sMoveType===jindo.m.MOVETYPE[2])&&t.oEvent.stop(jindo.$Event.CANCEL_DEFAULT),(t.sMoveType===jindo.m.MOVETYPE[3]||t.sMoveType===jindo.m.MOVETYPE[4])&&this._restoreAnchor();var n=this.option("nDuration"),s=this._getSnap(t.nDistanceX,t.nDistanceY,n,t.sMoveType),o=i?t.nDistanceX:t.nDistanceY,h=i?t.nVectorX:t.nVectorY,a=i?t.nX:t.nY;null===s.sDirection&&(n=this.option("nBounceDuration"),(0===o||t.sMoveType===jindo.m.MOVETYPE[2]&&!this.option("bUseDiagonalTouch"))&&this._endAnimation(!1));var r={nContentsIndex:this.getContentIndex(),nContentsNextIndex:s.nContentIndex};if(null!==this._bFlickLeft&&(this.option("bHorizontal")?r.bLeft=this._bFlickLeft:r.bTop=this._bFlickLeft),null!==s.sDirection){if(!this.fireEvent("beforeFlicking",r))return void this.restorePosition()}else if(!this.fireEvent("beforeRestore",{nContentsIndex:this.getContentIndex()}))return;this._htIndexInfo.nNextContentIndex=s.nContentIndex,this._htIndexInfo.welNextElement=s.welElement,this._htIndexInfo.sDirection=s.sDirection,o=i?t.nDistanceX:t.nDistanceY,h=i?t.nVectorX:t.nVectorY,a=i?t.nX:t.nY,this._onAfterEnd(o,h,a,e),this.fireEvent("touchEnd",t)}},_onAfterEnd:function(){},_endAnimation:function(t){var e=this;"undefined"==typeof t&&(t=!0),this._doFlicking=!1,this._bTouchStart=!1,this._bMove=!1;var i=null==this._htIndexInfo.sDirection&&this._htIndexInfo.nContentIndex===this._htIndexInfo.nNextContentIndex?!0:!1;this._resetIndexInfo(this._htIndexInfo.nNextContentIndex,this._htIndexInfo.welNextElement),t&&this._fireCustomEvent("afterFlicking"),i&&this.fireEvent("restore",{nContentsIndex:this._htIndexInfo.nContentIndex}),this._restoreAnchor(),this._setAnchorElement(),setTimeout(function(){e._createDummyTag(),e._focusFixedBug()},5),this._bFlickLeft=null},_resetIndexInfo:function(t,e){this._htIndexInfo.nContentIndex=t,this._htIndexInfo.nNextContentIndex=t,"undefined"==typeof e&&(this.option("bUseCircular")&&(t%=3),e=this._htWElement.aPanel[t]),this._htIndexInfo.welElement=e,this._htIndexInfo.welNextElement=e,this._htIndexInfo.sDirection=null},_checkIndex:function(t){var e=!0;(isNaN(1*t)||0>t)&&(e=!1);var i=this.getTotalContents()-1;return t>i&&(e=!1),e},refresh:function(t,e,i){var n=this;"undefined"==typeof t&&(t=this.getContentIndex()),this._checkIndex(t)&&("undefined"==typeof e&&(e=!0),"undefined"==typeof i&&(i=!0),(!i||this._fireCustomEvent("beforeMove",{nContentsIndex:this.getContentIndex(),nContentsNextIndex:t}))&&(this._refresh(t,e),this._resetIndexInfo(t),i&&this._fireCustomEvent("move"),this._restoreAnchor(),this._setAnchorElement(),this._createDummyTag(),setTimeout(function(){n._focusFixedBug()},100)))},_refresh:function(){},moveTo:function(t,e,i){"undefined"!=typeof t&&t!=this.getContentIndex()&&(0>t||t>=this.getTotalContents()||("undefined"==typeof e&&(e=this.option("nDuration")),"undefined"==typeof i&&(i=!0),this._moveTo(t,e,i)))},_getSnap:function(t,e,i,n){var s=this.option("bHorizontal")?t:e,o=this._htIndexInfo.welElement,h=this.getContentIndex(),a=null;return(n!==jindo.m.MOVETYPE[2]||this.option("bUseDiagonalTouch"))&&this._bMove&&Math.abs(s)>=this.option("nFlickThreshold")&&(0>s?(o=this.getNextElement(),h=this.getNextIndex(),this._bFlickLeft=!0,a="next"):(o=this.getPrevElement(),h=this.getPrevIndex(),this._bFlickLeft=!1,a="prev")),this._htIndexInfo.welElement.$value()===o.$value()&&(a=null),{elElement:o.$value(),welElement:o,nContentIndex:h,sDirection:a}},_onResize:function(t){this.option("bAutoResize")&&this.refresh(this.getContentIndex(),!0,!1),this.fireEvent("rotate",{isVertical:t.isVertical})},_fireCustomEvent:function(t,e){return"undefined"==typeof e&&(e={nContentsIndex:this._htIndexInfo.nContentIndex},this._bFlickLeft&&(this.option("bHorizontal")?e.bLeft=this._bFlickLeft:e.bTop=this._bFlickLeft)),this.fireEvent(t,e)},restorePosition:function(){this._onAfterEnd()},movePrev:function(t){if(!this._doFlicking){var e=this.getPrevElement();e.$value()!==this.getElement().$value()&&("undefined"==typeof t&&(t=this.option("nDuration")),this._bTouchStart=!0,this._bMove=!0,this._movePrev(t))}},_movePrev:function(t){var e=this.option("nFlickThreshold");this._onEnd({nDistanceX:e+10,nDistanceY:e+10,nX:10,nY:10},t)},moveNext:function(t){if(!this._doFlicking){var e=this.getNextElement();e.$value()!==this.getElement().$value()&&("undefined"==typeof t&&(t=this.option("nDuration")),this._bTouchStart=!0,this._bMove=!0,this._moveNext(t))}},_moveNext:function(t){{var e=-1*this.option("nFlickThreshold");this.option("bHorizontal")?this._htWElement.base.width():this._htWElement.base.height()}this._onEnd({nDistanceX:e-10,nDistanceY:e-10,nX:10,nY:10},t)},_attachTransitionEnd:function(t,e){if(t!==this._elTransition){this._elTransition=t;var i=this;0===e?setTimeout(function(){i._onTransitionEnd()},10):jindo.m.attachTransitionEnd(t,this._wfTransitionEnd)}},_detachTarnsitonEnd:function(){this._elTransition&&(jindo.m.detachTransitionEnd(this._elTransition,this._wfTransitionEnd),this._elTransition=null)},getIndexByElement:function(t){for(var e=-1,i=0,n=this._htWElement.aPanel.length;n>i;i++)if(this._htWElement.aPanel[i].$value()===t){e=i;break}return e},getElement:function(){return this._htIndexInfo.welElement},getContentElement:function(){return this.getElement()},getContentIndex:function(){return this._htIndexInfo.nContentIndex},getNextElement:function(){var t=this.getNextIndex();return this.option("bUseCircular")&&(t=this.getIndexByElement(this.getElement().$value()),t=t+1>2?0:t+1),this._htWElement.aPanel[t]},getPrevElement:function(){var t=this.getPrevIndex();return this.option("bUseCircular")&&(t=this.getIndexByElement(this.getElement().$value()),t=0>t-1?2:t-1),this._htWElement.aPanel[t]},getTotalContents:function(){var t=this._htWElement.aPanel.length;return this.option("bUseCircular")&&(t="undefined"==typeof this.option("nTotalContents")?3:this.option("nTotalContents")),t},getTotalPanels:function(){return this.option("bUseCircular")?3:this.getTotalContents()},getPanels:function(){return this._htWElement.aPanel},getPrevIndex:function(){var t=this.getContentIndex()-1;return this.option("bUseCircular")&&0>t&&(t=this.getTotalContents()-1),t=Math.max(0,t)},getNextIndex:function(){var t=this.getContentIndex()+1,e=this.getTotalContents()-1;return this.option("bUseCircular")&&t>e&&(t=0),t=Math.min(e,t)},_onTransitionEnd:function(){},_setAnchorElement:function(){this._bClickBug&&(this._aAnchor=jindo.$$("A",this._htWElement.container.$value()))},_clearAnchor:function(){if(this._aAnchor&&!this._bBlocked){for(var t=null,e=0,i=this._aAnchor.length;i>e;e++){this._fnDummyFnc!==this._aAnchor[e].onclick&&(this._aAnchor[e]._onclick=this._aAnchor[e].onclick),this._aAnchor[e].onclick=this._fnDummyFnc,t=this._aAnchor[e].___listeners___||[];for(var n=0,s=t.length;s>n;n++)___Old__removeEventListener___.call(this._aAnchor[e],"click",t[n].listener,t[n].useCapture)}this._bBlocked=!0}},_restoreAnchor:function(){if(this._aAnchor&&this._bBlocked){for(var t=null,e=0,i=this._aAnchor.length;i>e;e++){this._aAnchor[e].onclick=this._fnDummyFnc!==this._aAnchor[e]._onclick?this._aAnchor[e]._onclick:null,t=this._aAnchor[e].___listeners___||[];for(var n=0,s=t.length;s>n;n++)___Old__addEventListener___.call(this._aAnchor[e],"click",t[n].listener,t[n].useCapture)}this._bBlocked=!1}},_onActivate:function(){this._attachEvent(),this._setAnchorElement(),this._oTouch.activate()},_onDeactivate:function(){this._detachEvent(),this._oTouch.deactivate()},_attachEvent:function(){this._htEvent={},this._htEvent.touchMove=jindo.$Fn(this._onMove,this).bind(),this._htEvent.touchEnd=jindo.$Fn(this._onEnd,this).bind(),this._htEvent.touchStart=jindo.$Fn(this._onStart,this).bind(),this._oTouch.attach("touchStart",this._htEvent.touchStart),this._oTouch.attach("touchMove",this._htEvent.touchMove),this._oTouch.attach("touchEnd",this._htEvent.touchEnd),this._htEvent.rotate=jindo.$Fn(this._onResize,this).bind(),jindo.m.bindRotate(this._htEvent.rotate),jindo.m.bindPageshow(this._htEvent.rotate)},_detachEvent:function(){this._oTouch.detachAll(),jindo.m.unbindRotate(this._htEvent.rotate),jindo.m.unbindPageshow(this._htEvent.rotate);for(var t in this._htEvent){var e=this._htEvent[t];"undefined"!=typeof e.ref&&e.ref.detach(e.el,t)}this._htEvent=null},destroy:function(){this.deactivate();for(var t in this._htWElement)this._htWElement[t]=null;this._htWElement=null,this._oTouch=null,this._o_FlickingAnimation_=null;for(var e in this._htIndexInfo)this._htIndexInfo[t]=null;this._isIos=null,this._bAndroid=null,this._nVersion=null,this._fnDummyFnc=null,this._doFlicking=null,this._bClickBug=null,this._b3dExecption=null,this._bDummyTagException=null}}).extend(jindo.m.UIComponent),jindo.m._AlignFlipFlicking_=jindo.$Class({sAnimationName:"alignFlip",$init:function(){this._bMoveDirection=null,this._bMove=!1,this._initFlicking()},_initFlicking:function(){this._setElementSize(),this._setElementStyle()
},_setElementStyle:function(){this._htWElement.base.css("overflow","hidden").css("position","relative"),jindo.$A(this._htWElement.aPanel).forEach(function(t){var e=t;e.css("position","absolute").css("width","100%").css("height","100%")}),this._htWElement.base.css(this._sCssPrefix+"Perspective",1200)},_setElementSize:function(){this.nWidth=this._htWElement.base.width(),this.nHeight=this._htWElement.base.height()},_setFlipElement:function(){var t=90,e=this._getFlipElement();this._setFlipAlign(e),"prev"===this._bMoveDirection?"left"===this._htOption.sFlipAlign?this._rotate(e,-1*t):"top"===this._htOption.sFlipAlign&&this._rotate(e,t):"next"===this._bMoveDirection&&("bottom"===this._htOption.sFlipAlign?this._rotate(e,-1*t):"right"===this._htOption.sFlipAlign&&this._rotate(e,t)),e.show().css("zIndex",110);var i="prev"===this._bMoveDirection?this.getPrevElement():this.getNextElement();i.$value()!==e.$value()&&i.show().css("zIndex",90)},_getFlipElement:function(){var t=this.getContentElement();return"prev"===this._bMoveDirection?("left"===this.option("sFlipAlign")||"top"==this.option("sFlipAlign"))&&(t=this.getPrevElement()):"next"===this._bMoveDirection&&("right"===this.option("sFlipAlign")||"bottom"==this.option("sFlipAlign"))&&(t=this.getNextElement()),t},_setFlipAlign:function(t){var e="";e=this.option("bHorizontal")?this.option("sFlipAlign")+" center":"center "+this.option("sFlipAlign"),t.css(this._sCssPrefix+"TransformOrigin",e)},_rotate:function(t,e){if(t){var i=this.option("bHorizontal")?"rotateY("+e+"deg)":"rotateX("+e+"deg)",n={};n[this._sCssPrefix+"Transition"]=this._sCssPrefix+"-transform 0s linear",n[this._sCssPrefix+"Transform"]="perspective(500px) "+i+" rotateZ(0deg)",t.css(n)}return t},_setPrevRotate:function(t,e){var i=this.option("bHorizontal")?e:-e,n=0;"left"===this.option("sFlipAlign")?n=-70:"top"===this.option("sFlipAlign")&&(n=80);var s=n+i;s="right"===this.option("sFlipAlign")?Math.min(90,s):"bottom"===this.option("sFlipAlign")?Math.max(-90,s):"left"===this.option("sFlipAlign")?Math.min(0,s):Math.max(0,s),this._rotate(t,s).css("zIndex",110)},_setNextRotate:function(t,e){var i=this.option("bHorizontal")?-e:e,n=0;"right"===this.option("sFlipAlign")?n=70:"bottom"===this.option("sFlipAlign")&&(n=-80);var s=n+i;s="top"===this.option("sFlipAlign")?Math.min(90,s):"left"===this.option("sFlipAlign")?Math.max(-90,s):"bottom"===this.option("sFlipAlign")?Math.min(0,s):Math.max(0,s),this._rotate(t,s).css("zIndex",110)},_onAfterStart:function(){this._resetInfo()},_onAfterMove:function(t){if(null===this._bMoveDirection){if(t>0)this._bMoveDirection="prev";else{if(!(0>t))return;this._bMoveDirection="next"}this._setFlipElement(),this._restoreAnchor(),this._setAnchorElement(),this._clearAnchor()}else{var e=this.option("bHorizontal")?this.nWidth:this.nHeight,i=this.getContentElement();"prev"===this._bMoveDirection?(("left"===this.option("sFlipAlign")||"top"===this.option("sFlipAlign"))&&(i=this.getPrevElement()),this._nDeg=Math.max(0,Math.min(70,Math.round(1*t/e*70))),this._setPrevRotate(i,this._nDeg)):"next"===this._bMoveDirection&&(("right"===this.option("sFlipAlign")||"bottom"===this.option("sFlipAlign"))&&(i=this.getNextElement()),this._nDeg=Math.max(0,Math.min(70,Math.round(-1*t/e*70))),this._setNextRotate(i,this._nDeg))}this._bMove=!0},_onAfterEnd:function(){this._bFinished=!1;var t=null===this._htIndexInfo.sDirection?!0:!1;this._bMoveDirection!==this._htIndexInfo.sDirection&&(t=!0,this._htIndexInfo.sDirection=null,this._htIndexInfo.nNextContentIndex=this._htIndexInfo.nContentIndex,this._htIndexInfo.welNextElement=this._htIndexInfo.welElement),"prev"===this._bMoveDirection&&this.getElement().$value()===this.getPrevElement()&&(t=!0,this._htIndexInfo.sDirection=null,this._htIndexInfo.nNextContentIndex=this._htIndexInfo.nContentIndex,this._htIndexInfo.welNextElement=this._htIndexInfo.welElement),"next"===this._bMoveDirection&&this.getElement().$value()===this.getNextElement().$value()&&(t=!0,this._htIndexInfo.sDirection=null,this._htIndexInfo.nNextContentIndex=this._htIndexInfo.nContentIndex,this._htIndexInfo.welNextElement=this._htIndexInfo.welElement);var e=this._getFlipElement(),i=this,n=this.option(t?"nBounceDuration":"nDuration"),s=t?0:90;if(0===this._nDeg)this._bFinished=!0,setTimeout(function(){i._onTransitionEnd()},10);else{var o=(new Date).getTime(),h=this._nDeg,a=90;!function r(){var t,l=(new Date).getTime();if(l>=o+n)return cancelAnimationFrame(i._nTimerAnimate),"next"===i._bMoveDirection?i._setNextRotate(e,s):i._setPrevRotate(e,s),void i._onTransitionEnd();l=(l-o)/n-1,t=Math.sqrt(1-Math.pow(l,2));var _=(s-h)*t+h;i._nDeg=Math.min(_,a),"next"===i._bMoveDirection?i._setNextRotate(e,i._nDeg):i._setPrevRotate(e,i._nDeg),i._nTimerAnimate=requestAnimationFrame(r)}()}},_resetInfo:function(){this._bMoveDirection=null,this._bMove=!1,this._nDeg=-1,this._bFinished=!0},_onTransitionEnd:function(){this._detachTarnsitonEnd();var t=!0;null===this._htIndexInfo.sDirection&&(t=!1),this._restorePanel(this._htIndexInfo.welNextElement.$value()),this._resetInfo(),this._endAnimation(t)},_restorePanel:function(t){jindo.$A(this._htWElement.aPanel).forEach(function(e){e.$value().style[this._sCssPrefix+"TransitionDuration"]=null,e.$value().style[this._sCssPrefix+"Transform"]="",e.$value()===t?e.show().css("zIndex",10):e.hide().css("zIndex",1)},this)},_refresh:function(t,e){"undefined"==typeof t&&(t=this.getContentIndex());var i=t;this.option("bUseCircular")&&(i=t%3),e&&this._setElementSize(),this._htWElement.base.css(this._sCssPrefix+"PerspectiveOrigin","50% 50%");for(var n=0,s=this._htWElement.aPanel.length;s>n;n++)n===i?this._htWElement.aPanel[n].show().css("zIndex",10):this._htWElement.aPanel[n].hide().css("zIndex",1);this._htIndexInfo.nContentIndex=t,this._htIndexInfo.welElement=this._htWElement.aPanel[i]},_moveTo:function(t,e,i){this.refresh(t,!1,i)},_movePrev:function(t){this._bMoveDirection="prev",this._bMove=!0,this._nDeg=1;var e=this.option("nFlickThreshold");this._setFlipElement(),this._onEnd({nDistanceX:e+10,nDistanceY:e+10,nX:10,nY:10},t)},_moveNext:function(t){this._bMoveDirection="next",this._bMove=!0,this._nDeg=1,this._setFlipElement();var e=-1*this.option("nFlickThreshold"),i=this.option("bHorizontal")?this._htWElement.base.width():this._htWElement.base.height();this._onEnd({nDistanceX:e-10,nDistanceY:e-10,nX:i-10,nY:i-10},t)}}).extend(jindo.m._FlickingAnimation_),jindo.m._FlipFlicking_=jindo.$Class({sAnimationName:"flip",$init:function(){this._bMoveDirection=null,this._bMove=!1,this._initFlicking()},_initFlicking:function(){this._setElementSize(),this._setElementStyle(),this._prepareFlip()},_prepareFlip:function(){if("undefined"==typeof this._htWElement.left){this._htWElement.base.css(this._sCssPrefix+"Perspective",1200);var t=this.option("sClassPrefix")+"left",e=this.option("sClassPrefix")+"right";this._htWElement.container.append(jindo.$('<div class="'+t+'" style="position:absolute;overflow:hidden;left:0px;top:0px;outline:1px solid rgba(255, 0, 0, .0);"></div>')),this._htWElement.container.append(jindo.$('<div class="'+e+'"  style="position:absolute;overflow:hidden;left:0px;top:0px;outline:1px solid rgba(255, 0, 0, .0);"></div>')),this._htWElement.container.height(this._htWElement.base.height()),this._htWElement.left=jindo.$Element(jindo.$$.getSingle("."+t,this._htWElement.container.$value())),this._htWElement.right=jindo.$Element(jindo.$$.getSingle("."+e,this._htWElement.container.$value())),this.option("bHorizontal")?(this._htWElement.left.css("height","100%"),this._htWElement.right.css("height","100%")):(this._htWElement.left.css("width","100%"),this._htWElement.right.css("width","100%"))}this.option("bHorizontal")?(this._htWElement.left.width(this.nCenter),this._htWElement.right.width(this.nCenter)):(this._htWElement.left.height(this.nCenter),this._htWElement.right.height(this.nCenter))},_setElementStyle:function(){this._htWElement.base.css("overflow","hidden"),this._htWElement.container.css("position","relative").height(this.nHeight),jindo.$A(this._htWElement.aPanel).forEach(function(t){var e=t;e.css("position","absolute").css("width","100%").css("height","100%")})},_setElementSize:function(){this.nWidth=this._htWElement.base.width(),this.nHeight=this._htWElement.base.height(),this.nCenter=Math.round((this.option("bHorizontal")?this.nWidth:this.nHeight)/2)},_refresh:function(t,e){"undefined"==typeof t&&(t=this.getContentIndex());var i=t;this.option("bUseCircular")&&(i=t%3),e&&(this._setElementSize(),this._prepareFlip()),this._htWElement.left.hide().show(),this._htWElement.right.hide().show(),this._htWElement.right.css(this.option("bHorizontal")?"left":"top",this.nCenter+"px");var n={};n[this._sCssPrefix+"PerspectiveOrigin"]="50% 50%",this._htWElement.base.css(n);for(var s=0,o=this._htWElement.aPanel.length;o>s;s++)s===i?this._htWElement.aPanel[s].show().css("zIndex",10):this._htWElement.aPanel[s].hide().css("zIndex",1);this._htIndexInfo.nContentIndex=t,this._htIndexInfo.welElement=this._htWElement.aPanel[i]},_setCloneElement:function(){var t,e=this.option("bHorizontal"),i=this.getContentElement();"prev"===this._bMoveDirection?(t=this.getPrevElement(),this._htWElement.left.empty().append(t.$value()===i.$value()?jindo.$Element(jindo.$("<div></div>")).show().width(this.nWidth):jindo.$Element(t.$value().cloneNode(!0)).show().width(this.nWidth)),this._htWElement.right.empty().append(jindo.$Element(i.$value().cloneNode(!0)).css(e?"margin-left":"margin-top","-"+this.nCenter+"px").width(this.nWidth).height(this.nHeight)),t.before(this._htWElement.left).after(this._htWElement.right)):"next"===this._bMoveDirection&&(t=this.getNextElement(),this._htWElement.left.empty().append(jindo.$Element(i.$value().cloneNode(!0)).show().width(this.nWidth)),this._htWElement.right.empty().append(t.$value()===i.$value()?jindo.$Element(jindo.$("<div></div>")).show().css(e?"margin-left":"margin-top","-"+this.nCenter+"px").width(this.nWidth).height(this.nHeight):jindo.$Element(t.$value().cloneNode(!0)).show().css(e?"margin-left":"margin-top","-"+this.nCenter+"px").width(this.nWidth).height(this.nHeight)),i.before(this._htWElement.left).after(this._htWElement.right))},_onAfterMove:function(t){if(null===this._bMoveDirection){if(t>0)this._bMoveDirection="prev";else{if(!(0>t))return;this._bMoveDirection="next"}this._setCloneElement(),this._restoreAnchor(),this._setAnchorElement(),this._clearAnchor()}else{var e,i,n=this.option("bHorizontal")?this.nWidth:this.nHeight,s=this.getContentElement();"prev"===this._bMoveDirection?(e=this.getPrevElement(),i=e.$value()===s.$value()?60:180,this._nDeg=Math.max(0,Math.min(i,Math.round(1*t/n*i))),this._setPrevRotate(s,e,this._htWElement.left,this._htWElement.right,this._nDeg)):"next"===this._bMoveDirection&&(e=this.getNextElement(),i=e.$value()===s.$value()?60:180,this._nDeg=Math.max(0,Math.min(i,Math.round(-1*t/n*i))),this._setNextRotate(s,e,this._htWElement.left,this._htWElement.right,this._nDeg))}this._bMove=!0},_onAfterEnd:function(){this._bMove&&this._flipAnimate()},_rotate:function(t,e){if(t){var i=this.option("bHorizontal")?"rotateY("+e+"deg)":"rotateX("+e+"deg)",n={};n[this._sCssPrefix+"Transition"]=this._sCssPrefix+"-transform 0s linear",n[this._sCssPrefix+"Transform"]="perspective(500px) "+i+" rotateZ(0deg)",t.css(n)}return t},_setBackgroundShadow:function(t,e){var i,n=e>90?180-e:e,s="#000000";return i=Number(Math.round(n/90*255)).toString(16),i.length<2&&(i+=i),s="#"+i+i+i,t.css("background-image","-webkit-gradient(linear, 100% 0%, 0% 0%, from("+s+"), to("+s+"))"),t.css("background-image","-ms-gradient(linear, 100% 0%, 0% 0%, from("+s+"), to("+s+"))"),t},_clearBackgrond:function(t){return t.css({"background-image":"","background-color":"#fff"})},_setNextRotate:function(t,e,i,n,s){var o=this.option("bHorizontal")?-s:s,h=this.option("bHorizontal")?180-s:-(180-s);t.$value()===e.$value()&&(e=null),this._rotate(t,o).addClass("gradient"),e&&this._rotate(e,h).addClass("gradient"),0===s?(i.hide(),n.hide(),e&&this._rotate(e,0).hide()):90>s?(setTimeout(function(){},0),i.show("inline-block"),n.show(),i.css("zIndex",110),t.css("zIndex",100),n.css("zIndex",90),this._clearBackgrond(i.first()),this._setBackgroundShadow(n.first(),s),t.show(),e&&e.hide()):180>s?(e.show().css("zIndex",100),t.hide(),i.show().css("zIndex",90),n.show().css("zIndex",110),this._setBackgroundShadow(i.first(),s),this._clearBackgrond(n.first()),e.show(),t.hide()):(i.hide(),n.hide())},_setPrevRotate:function(t,e,i,n,s){var o=this.option("bHorizontal"),h=o?s:-s,a=o?-(180-s):180-s;t.$value()===e.$value()&&(e=null),this._rotate(t,h).addClass("gradient"),e&&this._rotate(e,a).addClass("gradient"),0===s?(i.hide(),n.hide(),t.removeClass("gradient"),e&&this._rotate(e,0).hide().removeClass("gradient")):90>s?(i.show().css("zIndex",90),n.show().css("zIndex",110),this._setBackgroundShadow(i.first(),s),this._clearBackgrond(n.first()),t.show().css("zIndex",100),e&&e.hide()):180>s?(i.show().css("zIndex",110),n.show().css("zIndex",90),this._clearBackgrond(i.first()),this._setBackgroundShadow(n.first()),t.hide(),e&&e.show().css("zIndex",100)):(i.hide(),n.hide(),e&&e.removeClass("gradient"))},_flipAnimate:function(){this._bFinished=!1;var t=null===this._htIndexInfo.sDirection?!0:!1,e=this.getContentElement(),i=this,n=null;"next"===this._bMoveDirection?n=this.getNextElement():"prev"===this._bMoveDirection&&(n=this.getPrevElement()),e.$value()===n.$value()&&(t=!0,this._htIndexInfo.sDirection=null);var s=this.option(t?"nBounceDuration":"nDuration"),o=t?0:180;if(0===this._nDeg)this._bFinished=!0,setTimeout(function(){i._onTransitionEnd()},10);else{var h=(new Date).getTime(),a=this._nDeg;!function r(){var t,l=(new Date).getTime();if(l>=h+s)return cancelAnimationFrame(i._nTimerAnimate),void i._onTransitionEnd();l=(l-h)/s-1,t=Math.sqrt(1-Math.pow(l,2));var _=(o-a)*t+a;i._nDeg=Math.min(_,180),"next"===i._bMoveDirection?i._setNextRotate(e,n,i._htWElement.left,i._htWElement.right,i._nDeg):i._setPrevRotate(e,n,i._htWElement.left,i._htWElement.right,i._nDeg),i._nTimerAnimate=requestAnimationFrame(r)}()}},_onAfterStart:function(){this._resetInfo()},_resetInfo:function(){this._bMoveDirection=null,this._bMove=!1,this._nDeg=-1,this._bFinished=!0,this._htWElement.left.css("zIndex",1),this._htWElement.right.css("zIndex",1)},_onTransitionEnd:function(){var t=!0;null===this._htIndexInfo.sDirection&&(t=!1),jindo.$A(this._htWElement.aPanel).forEach(function(t){t.$value().style[this._sCssPrefix+"TransitionDuration"]=null,t.$value().style[this._sCssPrefix+"Transform"]=""},this),this._resetInfo(),this._endAnimation(t)},_movePrev:function(t){this._bMoveDirection="prev",this._bMove=!0,this._nDeg=1,this._setCloneElement();var e=this.option("nFlickThreshold");this._onEnd({nDistanceX:e+10,nDistanceY:e+10,nX:10,nY:10},t)},_moveNext:function(t){this._bMoveDirection="next",this._bMove=!0,this._nDeg=1,this._setCloneElement();var e=-1*this.option("nFlickThreshold"),i=this.option("bHorizontal")?this._htWElement.base.width():this._htWElement.base.height();this._onEnd({nDistanceX:e-10,nDistanceY:e-10,nX:i-10,nY:i-10},t)}}).extend(jindo.m._FlickingAnimation_),jindo.m.PageLayoutUI=jindo.$Class({$init:function(t){this._initVar(t),this._showDefaultPage(),this.showLoading(),this._checkLayout(),this._rebuildLayout(),t&&t.fnDomReady&&"function"==typeof t.fnDomReady&&t.fnDomReady({welRoot:this.getRoot()}),this._initScrollManager(),this._bMultiPage?this._initMultiPage(this._aPages,this._nDefaultIndex):this._initPage(this._aPages[0],0),this._bUseFlicking||(this._bMultiPage?this._setMultiPagePosition():this._bMultiContent&&this._setMultiContentPosition()),this._bUseFlicking&&this._initFlicking(this._welFlickView.$value()),this._attachEvent(),this._bUseAjaxHistory&&this._initAjaxHistory()},_initVar:function(t){t=t||{},this._htEvent={},this._nCurrentIndex=t.nDefaultIndex||0,this._htScrollOption=t.htScrollOption||{},this._htFlickingOption=t.htFlickingOption||{},this._htFlickingOption.sClassPrefix=this._htFlickingOption.sClassPrefix||"flick-",this._htFlickingOption.sContentClass=this._htFlickingOption.sContentClass||"ct",this._htHistoryOption=t.htHistoryOption||{},this._bUseLoading=t.bUseLoading||!1,this._htLoadingOption=t.htLoadingOption||{},this._bUseFullScreen=t.bUseFullScreen||!1,this._oTimeout=null,this._oClientSize=jindo.$Document().clientSize(),this._welRoot=jindo.$Element(t.vBaseElement?t.vBaseElement:document.body),this._bUseRebuild=this._welRoot.attr("markup")&&"DETAILED"==this._welRoot.attr("markup").toUpperCase()?!1:!0,this._aPages=jindo.$ElementList(this._welRoot.queryAll(".jmc-page")).$value(),this._nPageCount=this._aPages.length,this._aContents=jindo.$ElementList(this._welRoot.queryAll(".jmc-content")).$value(),this._nContentCount=this._aContents.length,this._bMultiPage=this._nPageCount>1?!0:!1,this._bMultiContent=this._nContentCount>1?!0:!1},_showDefaultPage:function(){this._bMultiPage&&this._aPages[this._nCurrentIndex].show(),this._bMultiContent&&this._aPages[0].show()},_checkLayout:function(){var t=this._welRoot.attr("flicking")&&"YES"==this._welRoot.attr("flicking").toUpperCase()?!0:!1;this._bUseFlicking=this._bMultiPage&&t?!0:!this._bMultiPage&&this._nContentCount>1&&t?!0:!1,this._bUseAjaxHistory=this._bMultiPage||this._bMultiContent?!0:!1},_rebuildLayout:function(){if(this._bUseRebuild){var t,e,i=document.createDocumentFragment();this._bMultiPage&&this._bUseFlicking&&(this._welFlickView=jindo.$Element('<div class="'+this._htFlickingOption.sClassPrefix+'view"></div>'),e=jindo.$Element('<div class="'+this._htFlickingOption.sClassPrefix+'container"></div>'),this._welFlickView.appendTo(i),e.appendTo(this._welFlickView.$value()));for(var n=0;n<this._nPageCount;n++){var s=this._rebuildPage(this._aPages[n]);this._aPages[n].append(s),this._bMultiPage&&this._bUseFlicking&&(t=jindo.$Element('<div class="'+this._htFlickingOption.sClassPrefix+this._htFlickingOption.sContentClass+'"></div>'),t.appendTo(e.$value()),this._aPages[n].appendTo(t.$value())),this._aPages[n].show()}this._welRoot.append(i)}else this._bUseFlicking&&(this._welFlickView=jindo.$Element(this._welRoot.query("."+this._htFlickingOption.sClassPrefix+"view"))),!this._bMultiPage&&this._bMultiContent&&(this._welContentView=jindo.$Element(this._welRoot.query(".jmc-content-view")))},_rebuildPage:function(t){var e=document.createDocumentFragment(),i=jindo.$Element('<div class="scroll-wrapper"></div>'),n=jindo.$Element('<div class="scroller"></div>'),s=jindo.$Element(t.query(".jmc-header")),o=s&&"fixed"==s.attr("position")?!0:!1;if(o?s&&s.appendTo(e):s&&s.appendTo(n.$value()),!this._bMultiPage&&this._bMultiContent){var h=jindo.$ElementList(t.queryAll(".jmc-content")).$value(),a=this._rebuildFlickingContent(h);e.appendChild(a)}else{var r=jindo.$Element(t.query(".jmc-content"));i.appendTo(e),n.appendTo(i.$value()),r.appendTo(n.$value())}var l=jindo.$Element(t.query(".jmc-footer")),_=l&&"fixed"==l.attr("position")?!0:!1;return _?l&&l.appendTo(e):l&&l.appendTo(n.$value()),e},_rebuildFlickingContent:function(t){var e,i=document.createDocumentFragment();this._bUseFlicking?(this._welFlickView=jindo.$Element('<div class="'+this._htFlickingOption.sClassPrefix+'view"></div>'),e=jindo.$Element('<div class="'+this._htFlickingOption.sClassPrefix+'container"></div>'),this._welFlickView.appendTo(i),e.appendTo(this._welFlickView.$value())):(this._welContentView=jindo.$Element('<div class="jmc-content-view"></div>'),this._welContentView.appendTo(i));for(var n,s,o,h,a=0,r=t.length;r>a;a++)o=jindo.$Element('<div class="scroll-wrapper"></div>'),h=jindo.$Element('<div class="scroller"></div>'),this._bUseFlicking?(n=jindo.$Element('<div class="'+this._htFlickingOption.sClassPrefix+this._htFlickingOption.sContentClass+'"></div>'),n.appendTo(e.$value()),o.appendTo(n.$value())):(s=jindo.$Element('<div class="jmc-content-ct" style="background-color:#fff;"></div>'),s.appendTo(this._welContentView.$value()),o.appendTo(s.$value())),h.appendTo(o.$value()),t[a].appendTo(h.$value());return i},_attachEvent:function(){this._htEvent.rotate=jindo.$Fn(this._onResize,this).bind(),jindo.m.bindRotate(this._htEvent.rotate),this._htEvent.load=jindo.$Fn(this._onLoad,this).attach(window,"load")},_onLoad:function(){var t=jindo.$Document().clientSize(),e=this;jindo.m._maxClientSize(function(i){t=i,e._onResize()}),this._oClientSize.height!=t.height||this._oClientSize.width!=t.width?this._onResize():this.hideLoading()},_onResize:function(){this._oTimeout&&(clearTimeout(this._oTimeout),this._oTimeout=null),this._oClientSize=jindo.$Document().clientSize();var t=this;jindo.m._maxClientSize(function(e){t._oClientSize=e,t._setSizeWhenResize()}),this._setSizeWhenResize(),this.hideLoading(),this._hideAddress()},_setSizeWhenResize:function(){this._bMultiPage?this._bUseFlicking?(this._resizeFlicking(),this._resizePage(),this._resizeScroll()):(this._resizePage(),this._resizeScroll()):this._bMultiContent?this._bUseFlicking?(this._resizePage(),this._resizeFlicking(),this._resizeScroll()):(this._resizePage(),this._resizeContentView(),this._resizeScroll()):(this._resizePage(),this._resizeScroll())},_hideAddress:function(){this._bUseFullScreen&&setTimeout(function(){window.scrollTo(0,1)},500)},_resizePage:function(){for(var t=0;t<this.getPageCount();t++)this._aPages[t].oPage.resize(this._oClientSize)},_resizeContentView:function(){var t=this._getFlickSize();this._welContentView.css({position:"relative",width:t.width+"px",height:t.height+"px"})},_resizeFlicking:function(){if(!this._bUseFlicking)return!1;var t=this._getFlickSize();this._oFlicking.resize({nFlickWidth:t.width,nFlickHeight:t.height})},_resizeScroll:function(){for(var t=[],e=0;e<this.getPageCount();e++)t.push({nScrollWidth:this._aPages[e].oPage.getNoneFixedWidth(),nScrollHeight:this._aPages[e].oPage.getNoneFixedHeight()});this._oScroll.resize(t)},_initLoading:function(){return this._bUseLoading?(this._oLoading=new jindo.m.Loading(null,this._htLoadingOption),void this._oLoading.show()):!1},_initScrollManager:function(){this._oScroll=new jindo.m.PageLayoutUI.ScrollManager({oPageLayout:this,htOption:this._htScrollOption})},addScroll:function(t){this._oScroll.addScroll(t)},_initMultiPage:function(t){for(var e=0;e<this.getPageCount();e++)this._initPage(t[e],e)},_setMultiContentPosition:function(){if(!this._bMultiContent)return!1;this._resizeContentView(),this._aContentCT=jindo.$ElementList(this._welRoot.queryAll(".jmc-content-ct")).$value();for(var t,e=0;e<this.getContentCount();e++)t=e===this._nCurrentIndex?10:1,this._aContentCT[e].css({top:"0px",left:"0px",position:"absolute",overflow:"hidden",zIndex:t})},_setMultiPagePosition:function(){if(!this._bMultiPage)return!1;for(var t,e=0;e<this.getPageCount();e++)t=e===this._nCurrentIndex?10:1,this._aPages[e].welPage.css({top:"0px",left:"0px",position:"absolute",overflow:"hidden",zIndex:t})},_initPage:function(t,e){this._aPages[e]={welPage:t,oPage:new jindo.m.PageLayoutUI.Page(t.$value(),{oPageLayout:this,nIndex:e,nCurrentIndex:this._nCurrentIndex,htPageSize:this._oClientSize})}},_initFlicking:function(t){var e=this._getFlickSize();this._oFlicking=jindo.m.PageLayoutUI.Flicking,this._oFlicking.init(t,{oPageLayout:this,nDefaultIndex:this._nCurrentIndex,nFlickWidth:e.width,nFlickHeight:e.height,htOption:this._htFlickingOption})},_initAjaxHistory:function(){this._oAjaxHistory=jindo.m.PageLayoutUI.AjaxHistory,this._oAjaxHistory.init({oPageLayout:this,htOption:this._htHistoryOption})},_getFlickSize:function(){var t={};return this._bMultiPage?t=this._oClientSize:(t.width=this._aPages[0].oPage.getNoneFixedWidth(),t.height=this._aPages[0].oPage.getNoneFixedHeight()),t},getCurrentIndex:function(){return this._bUseFlicking&&(this._nCurrentIndex=this._oFlicking.getCurrentIndex()),this._nCurrentIndex},getPageCount:function(){return this._nPageCount},getContentCount:function(){var t;return t=this._bMultiPage?this.getPageCount():this._oScroll.getScrollCount()},getContentCT:function(t){return this._aContentCT[t]},getRoot:function(){var t;return t=this._bMultiPage&&this._bUseFlicking?this._welFlickView:this._welRoot},getPage:function(t){var e;if("undefined"==typeof t){e=[];for(var i=0;i<this.getContentCount();i++)e.push(this._getPage(i))}else e=this._getPage(t);return e},_getPage:function(t){var e;e=this._bMultiPage?t:0;var i=this._aPages[e].oPage,n={welHeader:jindo.$Element(i.getHeader()),welContent:this._oScroll.getScrollContent(t),welFooter:jindo.$Element(i.getFooter())};return n},refresh:function(){this._onResize()},addHistory:function(){this._oAjaxHistory.addHistory()},changeHistory:function(t){this._bUseFlicking?this._oFlicking.moveTo(t):this.moveTo(t)},moveTo:function(t){if("undefined"==typeof t)return!1;if(this._bUseFlicking)this._oFlicking.moveTo(t);else{if(!this.onBeforeMovePage({nContentsIndex:this.getCurrentIndex(),nContentsNextIndex:t}))return;this.show(t),this.onAfterMovePage({nContentsIndex:t})}},show:function(t){return"undefined"==typeof t?!1:(this.hide(this.getCurrentIndex()),this._bMultiPage?this._aPages[t].oPage.show():this._bMultiContent&&this._aPages[0].oPage.showContentView(t),void(this._nCurrentIndex=t))},hide:function(t){"undefined"==typeof t&&(t=this._nCurrentIndex),this._bMultiPage?this._aPages[t].oPage.hide():this._bMultiContent&&this._aPages[0].oPage.hideContentView(t)},showLoading:function(){return this._bUseLoading?(this._oLoading||this._initLoading(),void this._oLoading.show()):!1},hideLoading:function(){return this._bUseLoading?void this._oLoading.hide():!1},onTouchStartFlicking:function(t){return this.fireEvent("touchStart",{sType:"touchStart",element:t.element,nX:t.nX,nY:t.nY})},onBeforeMovePage:function(t){return this.fireEvent("beforeMovePage",{sType:"beforeMovePage",nCurrentPage:t.nContentsIndex,nPage:t.nContentsNextIndex,bLeft:t.bLeft})},onAfterMovePage:function(t){this._bUseAjaxHistory&&this.addHistory(),this.fireEvent("afterMovePage",{sType:"afterMovePage",nCurrentPage:t.nContentsIndex})}}).extend(jindo.m.Component),jindo.m.PageLayoutUI.Page=jindo.$Class({$init:function(t,e){this._initVar(t,e),this._setWrapperElement(),this._setFixedArea(),this._initScroll()},_initVar:function(t,e){this._welPage=jindo.$Element(t),this._oPageLayout=e.oPageLayout,this._nIndex=e.nIndex,this._htPageSize=e.htPageSize,this._htWElement={}},_setWrapperElement:function(){this._htWElement.header=jindo.$Element(this._welPage.query(".jmc-header")),this._htWElement.footer=jindo.$Element(this._welPage.query(".jmc-footer"))},_onActivate:function(){},_onDeactivate:function(){},_setFixedArea:function(){this._bHeaderFixed=this._htWElement.header&&"fixed"==this._htWElement.header.attr("position")?!0:!1,this._bFooterFixed=this._htWElement.footer&&"fixed"==this._htWElement.footer.attr("position")?!0:!1},_initScroll:function(){this._oPageLayout.addScroll({welBaseElement:this._welPage,nScrollWidth:this.getNoneFixedWidth(),nScrollHeight:this.getNoneFixedHeight()})},_getHeight:function(t){var e=t.$value().offsetHeight;return e+=parseInt(t.css("marginTop"),10)+parseInt(t.css("marginBottom"),10)||0},_getHeaderHeight:function(){var t=this._getHeight(this._htWElement.header);return t},_getFooterHeight:function(){var t=this._getHeight(this._htWElement.footer);return t},resize:function(t){this._htPageSize=t||jindo.$Document().clientSize()},getNoneFixedWidth:function(){var t=this._htPageSize.width;return t},getNoneFixedHeight:function(){var t,e=this._htPageSize.height;return t=this._bHeaderFixed?this._bFooterFixed?parseInt(e-this._getHeaderHeight()-this._getFooterHeight(),10):parseInt(e-this._getHeaderHeight(),10):this._bFooterFixed?parseInt(e-this._getFooterHeight(),10):e},getHeader:function(){return this._htWElement.header?this._htWElement.header.$value():null},getFooter:function(){return this._htWElement.footer?this._htWElement.footer.$value():null},showContentView:function(t){var e=this._oPageLayout.getContentCT(t);e.css({zIndex:10})},hideContentView:function(t){var e=this._oPageLayout.getContentCT(t);e.css({zIndex:1})},show:function(){this._welPage.css({zIndex:10})},hide:function(){this._welPage.css({zIndex:1})}}),jindo.m.PageLayoutUI.ScrollManager=jindo.$Class({$init:function(t){this._initVar(t)},_initVar:function(t){this._aScrolls=[],this._aScrollOptions=[],this._oPageLayout=t.oPageLayout,this._htOption=t.htOption,this._nTotalScrollCnt=0},addScroll:function(t){this._aScrollWrappers=jindo.$ElementList(t.welBaseElement.queryAll(".scroll-wrapper")).$value(),this._nTotalScrollCnt+=this._aScrollWrappers.length;var e,i,n,s,o,h=t.nScrollWidth,a=t.nScrollHeight;o=this._htOption||{},o.nWidth=h,o.nHeight=a;for(var r=0,l=this._aScrollWrappers.length;l>r;r++)e=this._aScrollWrappers[r],s=new jindo.m.Scroll(e.$value(),o),n=jindo.$Element(e.query(".jmc-content")),n.show(),s.refresh(),s.hasVScroll()||(i=jindo.$Element(e.query(".scroller")),i.css({width:h+"px",height:a-1+"px"})),this._aScrolls.push(s),o={welWrapper:e,welScroller:i,welContent:n,nWidth:h,nHeight:a},this._aScrollOptions.push(o)},getScrollCount:function(){return this._aScrolls.length},getScrollWrapper:function(t){var e;return e="undefined"==typeof t?this._aScrollWrappers:this._aScrollWrappers[t]},getScrollContent:function(t){var e;if("undefined"==typeof t){e=[];for(var i=0,n=this._aScrollOptions.length;n>i;i++)e.push(this._aScrollOptions[t].welContent)}else e=this._aScrollOptions[t].welContent;return e},resize:function(t){for(var e,i,n,s=0,o=this._aScrolls.length;o>s;s++)e=t[s]||t[0],i=e.nScrollWidth,n=e.nScrollHeight,this._aScrolls[s].hasVScroll()||this._aScrollOptions[s].welScroller.css({width:i+"px",height:n+"px"}),this._aScrolls[s].option({nWidth:i,nHeight:n}),this._aScrolls[s].refresh(),this._aScrollOptions[s].nWidth=i,this._aScrollOptions[s].nHeight=n}}),jindo.m.PageLayoutUI.Flicking={init:function(t,e){this._initVar(t,e),this._setFlickingArea(),e=this._htOption,e.bAutoResize=!1,e.nDefaultIndex=this._nCurrentIndex,e.bUseDiagonalTouch=!1,this._oFlicking=new jindo.m.Flicking(this._welFlickView.$value(),e),this._oFlicking.attach({touchStart:jindo.$Fn(this._onTouchStartFlicking,this).bind(),beforeFlicking:jindo.$Fn(this._onStartFlicking,this).bind(),afterFlicking:jindo.$Fn(this._onEndFlicking,this).bind(),move:jindo.$Fn(this._onEndFlicking,this).bind()})},_initVar:function(t,e){this._welFlickView=jindo.$Element(t),this._oPageLayout=e.oPageLayout,this._nWidth=e.nFlickWidth,this._nHeight=e.nFlickHeight,this._nCurrentIndex=e.nDefaultIndex,this._htOption=e.htOption||{},this._aFlickingContents=jindo.$ElementList(this._welFlickView.queryAll("."+this._htOption.sClassPrefix+this._htOption.sContentClass)).$value(),this._aInnerContents=jindo.$ElementList(this._welFlickView.queryAll(".jmc-content")).$value()},_setFlickingArea:function(){this._welFlickView.css({width:this._nWidth+"px",height:this._nHeight+"px"});for(var t,e=0,i=this._aFlickingContents.length;i>e;e++)t=this._aFlickingContents[e],t.css({"float":"left",width:"100%",height:"100%"})},_onTouchStartFlicking:function(t){return this._oPageLayout.onTouchStartFlicking(t)?!0:t.stop?void t.stop():!1},_onStartFlicking:function(t){return this._oPageLayout.onBeforeMovePage(t)?!0:t.stop?void t.stop():!1},_onEndFlicking:function(t){t.nContentsIndex;this._oPageLayout.onAfterMovePage(t)},resize:function(t){this._nWidth=t.nFlickWidth,this._nHeight=t.nFlickHeight,this._welFlickView.css({width:this._nWidth+"px",height:this._nHeight+"px"}),this._oFlicking.refresh()},getCurrentIndex:function(){return this._oFlicking.getContentIndex()},moveTo:function(t,e){return"undefined"==typeof t?!1:void(this._onStartFlicking({nContentsIndex:this._oFlicking.getContentIndex(),nContentsNextIndex:t})&&this._oFlicking.moveTo(t,e))}},jindo.m.PageLayoutUI.AjaxHistory={init:function(t){this._initVar(t),this._oAjaxHistory=new jindo.m.AjaxHistory(this._htOption),this._oAjaxHistory.attach({load:jindo.$Fn(this._onLoadHistory,this).bind(),change:jindo.$Fn(this._onChangeHistory,this).bind()}),this._oAjaxHistory.initialize()},_initVar:function(t){this._oPageLayout=t.oPageLayout,this._htOption=t.htOption},_onLoadHistory:function(){this.addHistory(!0)},_onChangeHistory:function(t){var e=jindo.$Json(t.htHistoryData).toObject();this._oPageLayout.changeHistory(e.page)
},addHistory:function(t){this._oAjaxHistory.addHistory({page:this._oPageLayout.getCurrentIndex()},t)}},jindo.m.PageNavigation=jindo.$Class({$init:function(t,e){this.option({sClassPrefix:"page_",nItem:10,nItemPerPage:10,nPage:1,bActivateOnload:!0,sInfoTemplate:"{=PAGE} / {=TOTALPAGE}",bUseCircular:!1,htAjax:{}}),this.option(e||{}),this._initVar(),this._setWrapperElement(t),this.option("bActivateOnload")&&(this.activate(),this._nCurrentPage=this.option("nPage"))},_initVar:function(){var t={sApi:null,htAjaxOption:{type:"xhr"},htQuery:{},sPage:"page",sDisplay:"display"},e=this.option("htAjax");if(!e)return void this.option("htAjax",t);for(var i in t)"undefined"==typeof e[i]&&(e[i]=t[i]);for(i in t.htAjaxOption)"undefined"==typeof e.htAjaxOption[i]&&(e.htAjaxOption[i]=t.htAjaxOption[i]);for(i in t.htQuery)"undefined"==typeof e.htQuery[i]&&(e.htQuery[i]=t.htQuery[i]);e.sApi&&(this.oAjax=new jindo.$Ajax(e.sApi,e.htAjaxOption))},_setWrapperElement:function(t){this._htWElement={},t=jindo.$(t);var e="."+this.option("sClassPrefix");this._htWElement.elBase=jindo.$Element(t),this._htWElement.elPrev=jindo.$Element(jindo.$$.getSingle(e+"prev",t)),this._htWElement.elNext=jindo.$Element(jindo.$$.getSingle(e+"next",t)),this._htWElement.elPrevOff=jindo.$Element(jindo.$$.getSingle(e+"prev-off",t)),this._htWElement.elNextOff=jindo.$Element(jindo.$$.getSingle(e+"next-off",t)),this._htWElement.elInfo=jindo.$Element(jindo.$$.getSingle(e+"info",t))},_onClickPrev:function(t){if(t.stop(jindo.$Event.CANCEL_DEFAULT),!this.hasPreviousPage())return void(this.option("bUseCircular")&&this.movePageTo(this.getTotalPages()));var e=this.getCurrentPage();this.movePageTo(e-1)},_onClickNext:function(t){if(t.stop(jindo.$Event.CANCEL_DEFAULT),!this.hasNextPage())return void(this.option("bUseCircular")&&this.movePageTo(1));var e=this.getCurrentPage();this.movePageTo(e+1)},movePageTo:function(t,e){"undefined"==typeof e&&(e=!0),(!e||this._fireEventBefore(t))&&(this.option("htAjax").sApi?this._callAjax(t,e):(this._move(t),e&&this._fireEventEnd(),this.updateInfo(),this.updateNavigation()))},_move:function(t){var e=this._convertToAvailPage(t);e!=this._nCurrentPage&&(this._nCurrentPage=e)},_callAjax:function(t,e){var i=this;this.oAjax.option("onload",null),this.oAjax.option("onload",function(n){i._onAjaxResponse(n,t,e)}),this.oAjax.request(this._getQueryString(t))},_fireEventBefore:function(t){return this.fireEvent("beforeMove",{nPage:t,nCurrentPage:this.getCurrentPage(),nItemCount:this.getItemCount(),nItemPerPage:this.getItemPerPage(),nTotalPages:this.getTotalPages()})},_fireEventEnd:function(t){"undefined"==typeof t&&(t=null);var e=this.getCurrentPage(),i=this.getPageItemIndex(e);return this.fireEvent("move",{nPage:this.getCurrentPage(),nStartIndex:i.nStart,nEndIndex:i.nEnd,oResponse:t,nItemCount:this.getItemCount(),nItemPerPage:this.getItemPerPage(),nTotalPages:this.getTotalPages()})},_onAjaxResponse:function(t,e,i){this._move(e),i&&this._fireEventEnd(t),this.updateInfo(),this.updateNavigation()},_getQueryString:function(t){var e=this.option("htAjax").htQuery||{},i=this.getPageItemIndex(t);return e[this.option("htAjax").sPage]=t,e[this.option("htAjax").sDisplay]=Math.min(this.getItemPerPage(),this.getItemCount()-i.nStart),e},updateInfo:function(){if(this._htWElement.elInfo){var t=this.getCurrentPage(),e=this.getPageItemIndex(t),i=this.option("sInfoTemplate").replace(/\{=PAGE\}/,t).replace(/\{=TOTALPAGE\}/,this.getTotalPages()).replace(/\{=ITEMCOUT\}/,this.option("nItem")).replace(/\{=STARTINDEX\}/,e.nStart+1).replace(/\{=ENDINDEX\}/,e.nEnd+1);this._htWElement.elInfo.html(i)}},updateNavigation:function(){var t=this.getCurrentPage();this._htWElement.elPrev&&this._htWElement.elPrev.hide(),this._htWElement.elNext&&this._htWElement.elNext.hide(),this._htWElement.elPrevOff&&this._htWElement.elPrevOff.hide(),this._htWElement.elNextOff&&this._htWElement.elNextOff.hide(),1!=this.getTotalPages()&&(this.option("bUseCircular")?(this._htWElement.elPrev&&this._htWElement.elPrev.show("inline-block"),this._htWElement.elNext&&this._htWElement.elNext.show("inline-block")):1==t?(this._htWElement.elPrevOff&&this._htWElement.elPrevOff.show("inline-block"),this._htWElement.elNext&&this._htWElement.elNext.show("inline-block")):t==this.getTotalPages()?(this._htWElement.elNextOff&&this._htWElement.elNextOff.show("inline-block"),this._htWElement.elPrev&&this._htWElement.elPrev.show("inline-block")):(this._htWElement.elPrev&&this._htWElement.elPrev.show("inline-block"),this._htWElement.elNext&&this._htWElement.elNext.show("inline-block")))},reset:function(t){"undefined"==typeof t&&(t=this.option("nItem")),this.setItemCount(t),this.movePageTo(1,!1)},_onActivate:function(){this._attachEvent()},_onDeactivate:function(){this._detachEvent()},_attachEvent:function(){this._htEvent={},this._htWElement.elNext&&(this._htEvent.click_Next={ref:jindo.$Fn(this._onClickNext,this).attach(this._htWElement.elNext,"click"),el:this._htWElement.elNext.$value()}),this._htWElement.elPrev&&(this._htEvent.click_Prev={ref:jindo.$Fn(this._onClickPrev,this).attach(this._htWElement.elPrev,"click"),el:this._htWElement.elPrev.$value()})},_detachEvent:function(){for(var t in this._htEvent){var e=this._htEvent[t];e.ref.detach(e.el,t.substring(0,t.indexOf("_")))}this._htEvent=null},destroy:function(){this.deactivate();for(var t in this._htWElement)this._htWElement[t]=null;this._htWElement=null}}).extend(jindo.m.CorePagination),jindo.m.PreventClickEvent=jindo.$Class({$init:function(t,e){this.option({bActivateOnload:!0,sClassPrefix:"evt-"}),this.option(e||{}),this._setWrapperElement(t),this.option("bActivateOnload")&&this.activate()},_setWrapperElement:function(t){this._htWElement={},this._htWElement.target=jindo.$Element(t)},_onDeactivate:function(){this._detachEvents()},_onActivate:function(){this._attachEvents()},_attachEvents:function(){this._htEvent={},this._htEvent.prevent=jindo.$Fn(this._onPrevent,this).attach(this._htWElement.target,"touchstart")},_detachEvents:function(){this._htEvent.prevent.detach(this._htWElement.target,"touchstart"),this._htEvent.prevent=null},_onPrevent:function(t){var e=jindo.$Element(jindo.m.getNodeElement(t.element));return e.hasClass(this.option("sClassPrefix")+"except")?void this.fireEvent("pass",{wel:e}):(t.stop(jindo.$Event.CANCEL_ALL),this.fireEvent("prevent",{wel:e}),!1)},destroy:function(){this.deactivate();for(var t in this._htWElement)this._htWElement[t]=null;this._htWElement=null,this._htEvent=null}}).extend(jindo.m.UIComponent),jindo.m.PreviewFlicking=jindo.$Class({$init:function(t,e){this.option({nTotalContents:5,nWidthPer:50}),this.option(e||{}),this._initVar(),this._setWrapperElement(t),this.option("bActivateOnload")&&this.activate()},_initVar:function(){jindo.m.Flick.prototype._initVar.apply(this),this._nDefaultPanel=5},_onActivate:function(){jindo.m.Flick.prototype._onActivate.apply(this);var t=this;this.set(new jindo.m.Slide(this._getAnimationOption()).attach({set:function(e){t._setStyle(e.css)}}),this._htWElement.container)},_setStyle:function(t){{var e={},i=this._bUseH?"width":"height";this._bUseH?"left":"top"}for(var n in t)e[n]=t[n];if(e.position="relative",this._bUseCircular&&(t.position="absolute"),this._bUseH)e.clear="both",t["float"]="left",this._htWElement.base.css("margin","0 auto");else{var s=this._htWElement.view.height(),o=(s-this._htWElement.aPanel[0].height())/2;this._htWElement.base.css("marginTop",o+"px")}if(this.option("nMinWidth")){var h=i.charAt(0).toUpperCase()+i.substr(1);this._htWElement.base.css("min"+h,this.option("nMinWidth").replace(/\D/gi,"")+"px")}this._htWElement.base.css({position:"relative"}),this._htWElement.base.css(i,this.option("nWidthPer")+"%"),this._htWElement.container.css(e);var a=this;jindo.$A(this._htWElement.aPanel).forEach(function(e){var n=e;a._bUseCircular&&n.css("position","absolute"),this._bUseH?t[i]=100/a._htWElement.aPanel.length+"%":t.width="100%",n.css(t)},this)},_setWrapperElement:function(t){jindo.m.SwipeCommon.prototype._setWrapperElement.call(this,t);this.option("bHorizontal")?"height":"width";this._htWElement.aPanel=this._htWElement.container.queryAll("."+this.option("sClassPrefix")+this.option("sContentClass"));for(var e in this._htWElement.aPanel)this._htWElement.aPanel[e]=jindo.$Element(this._htWElement.aPanel[e]);this._htWElement.container.css({left:"",top:""})},resize:function(){jindo.m.SwipeCommon.prototype.resize.call(this),this._restorePanel();{var t=this._bUseH?"width":"height";this._htWElement.view[t]()}this._htWElement.container.css(t,100*this._htWElement.aPanel.length+"%"),this._nRange=this._bUseH?this._htWElement.aPanel[0].width():this._htWElement.aPanel[0].height(),this._refreshPanelInfo(),this._bUseH?(this._htSize.maxX=(this.option("nTotalContents")-1)*-this._nRange,this._nX=this._aPos[this.getContentIndex()]):(this._htSize.maxY=(this.option("nTotalContents")-1)*-this._nRange,this._nY=this._aPos[this.getContentIndex()]),this._updateFlickInfo(),this._bUseCircular||this._oAnimation.move(this._nX,this._nY)},_restorePanel:function(t){t=t||this.getElement();var e=this.getTotalPanels(),i=this._bUseH?"left":"top",n=this._getIndexByElement(t);this._htWElement.container.css(this._oAnimation.p("Transform"),this._getTranslate(0));for(var s=0,o=Math.floor(e/2),h=0;e>h;h++)s=h-n,this._bUseCircular&&(s>o?s-=e:-o>s&&(s+=e)),this._htWElement.aPanel[h].css(i,20*s+"%"),0==s?this._htWElement.aPanel[h].css("zIndex",10):this._htWElement.aPanel[h].css("zIndex",1)},_getPosValue:function(t){return this._hasOffsetBug()?t:this._getTranslate(t)},_panelEndAfterCall:function(){this._bUseCircular&&this._restorePanel()},_moveAfterCall:function(t){this._oAnimation.move(this._nX,this._nY,0,this._makeOption({next:t.bNext,startIndex:this._nPosToIndex}))},getIndexByElement:function(t){for(var e=-1,i=0,n=this._htWElement.aPanel.length;n>i;i++)if(this._htWElement.aPanel[i].$value()===t){e=i;break}return e},destroy:function(){jindo.m.Flick.prototype.destroy.apply(this)}}).extend(jindo.m.Flick),jindo.m.PullPlugin=jindo.$Class({$init:function(t){this.option(t.option()),this._initVar(t),this._initPullDownFunc(),this._initPullUpFunc()},_initVar:function(t){this._oParent=t,this._htWElement=t._htWElement,this._isPullDown=!1,this._isPullUp=!1,this._isUpdating=!1,this._nOrgMaxScrollTop=null,this._htWElement.pullDown=jindo.$Element(this._htWElement.wrapper.query("."+this.option("sClassPrefix")+"pullDown")),this._htWElement.pullUp=jindo.$Element(this._htWElement.wrapper.query("."+this.option("sClassPrefix")+"pullUp"))},refresh:function(){this.option(this._oParent.option()),this._isUpdating=!1,this._nOrgMaxScrollTop=null,this._isPullDown=this.option("bUsePullDown")&&this.option("bUseVScroll")&&!this.option("bUseHScroll")&&this.option("bUseBounce")&&null!==this._htWElement.pullDown,this._isPullUp=this.option("bUsePullUp")&&this.option("bUseVScroll")&&!this.option("bUseHScroll")&&this.option("bUseBounce")&&null!==this._htWElement.pullUp,this._isPullDown&&this.option("fnPullDownIdle")&&(this._htWElement.pullDown._isReady_=!1,this._htWElement.pullDown.show(),this.option("fnPullDownIdle")(this._htWElement.pullDown)),this._isPullUp&&this.option("fnPullUpIdle")&&(this._htWElement.pullUp._isReady_=!1,this._htWElement.pullUp.show(),this.option("fnPullUpIdle")(this._htWElement.pullUp)),this.option("bUseVScroll")||(null!==this._htWElement.pullDown&&this._htWElement.pullDown.hide(),null!==this._htWElement.pullUp&&this._htWElement.pullUp.hide()),this._oParent.nScrollW=this._htWElement.scroller.width(),this._oParent.nScrollH=this._htWElement.scroller.height()-this._getBottomMargin(),this._oParent.nMinScrollTop=-this._getTopMargin(),this._oParent.nMaxScrollTop=this._oParent.nWrapperH-this._oParent.nScrollH},_getTopMargin:function(){return(this._isPullDown?this._htWElement.pullDown.height():0)+this.option("nOffsetTop")},_getBottomMargin:function(){return(this._isPullUp?this._htWElement.pullUp.height():0)+this.option("nOffsetBottom")},_initPullDownFunc:function(){this.option("bUsePullDown")===!0&&(this.option("fnPullDownIdle")||this.option("fnPullDownIdle",function(t){t.html("업데이트하시려면 아래로 내려주세요")}),this.option("fnPullDownBeforeUpdate")||this.option("fnPullDownBeforeUpdate",function(t){t.html("업데이트 합니다")}),this.option("fnPullDownUpdating")||this.option("fnPullDownUpdating",function(t){t.html("업데이트 중입니다...")}))},_initPullUpFunc:function(){this.option("bUsePullUp")===!0&&(this.option("fnPullUpIdle")||this.option("fnPullUpIdle",function(t){t.html("더 보시려면 위로 올려주세요")}),this.option("fnPullUpBeforeUpdate")||this.option("fnPullUpBeforeUpdate",function(t){t.html("로드 합니다")}),this.option("fnPullUpUpdating")||this.option("fnPullUpUpdating",function(t){t.html("로드 중...")}))},touchMoveForUpdate:function(t,e){if(!this._isUpdating){var i=this._getTopMargin(),n=this._getBottomMargin();e=this._nOrgMaxScrollTop||e,this._isPullDown&&(this._htWElement.pullDown._isReady_?i>this._oParent._nTop&&(this._htWElement.pullDown._isReady_=!1,this.option("fnPullDownIdle")&&(this.option("fnPullDownIdle")(this._htWElement.pullDown),this._oParent.nMinScrollTop=-i)):this._oParent._nTop>i&&(this._htWElement.pullDown._isReady_=!0,this.option("fnPullDownBeforeUpdate")&&(this.option("fnPullDownBeforeUpdate")(this._htWElement.pullDown),this._oParent.nMinScrollTop=0))),this._isPullUp&&(this._htWElement.pullUp._isReady_?this._oParent._nTop>=e-n&&(this._htWElement.pullUp._isReady_=!1,this.option("fnPullUpIdle")&&(this.option("fnPullUpIdle")(this._htWElement.pullUp),this._oParent.nMaxScrollTop=e)):this._oParent._nTop<this._oParent.nMaxScrollTop-n&&(this._htWElement.pullUp._isReady_=!0,this.option("fnPullUpBeforeUpdate")&&(this.option("fnPullUpBeforeUpdate")(this._htWElement.pullUp),this._nOrgMaxScrollTop=e,this._oParent.nMaxScrollTop=e-n)))}},pullUploading:function(){var t=null,e=null;if(this._isPullDown&&this._htWElement.pullDown._isReady_&&(e=this._htWElement.pullDown,t=t||!1),this._isPullUp&&this._htWElement.pullUp._isReady_&&(e=this._htWElement.pullUp,t=t||!0),!e)return!1;var i=this.option(t?"fnPullUpUpdating":"fnPullDownUpdating"),n=this;this._isUpdating=!0,e._isReady_=!1,i&&setTimeout(function(){i(e),t?n._fireEventPullUp():n._fireEventPullDown()},0)},_fireEventPullDown:function(){this._htWElement&&this._oParent.fireEvent("pullDown",{welElement:this._htWElement.pullDown,oScroll:this._oParent})},_fireEventPullUp:function(){this._htWElement&&this._oParent.fireEvent("pullUp",{welElement:this._htWElement.pullUp,oScroll:this._oParent})}}).extend(jindo.m.Component),jindo.m.RadioButton=jindo.$Class({$init:function(t,e){this.option({sClassPrefix:"frb-",sType:"v",bActivateOnload:!0,sUncheckBgColor:"transparent"}),this.option(e||{}),this._initVar(),this._setWrapperElement(t,this.option("sClassPrefix")),this._initRadioLoad(),this.option("bActivateOnload")&&this.activate()},_initVar:function(){this.$super._initVar("radio","radiobtn"),this._nPreSelectIdx=-1},_initRadioLoad:function(){for(var t=this._aWElFormList,e=0;e<t.length;e++)if(t[e].$value().checked){this._setChecked(e);break}},_afterCheck:function(t){var e=-1;e=this._htWElement.container.indexOf(t),this._setChecked(e)},_onFormClick:function(t){var e=this._sUnitClass,i=jindo.$Element(t.element);i=i.parent(function(t){return t.hasClass(e)})[0];var n=i.attr("data-cb-checked");t.element.checked=n&&"on"==n?!0:!1;var s=this._htWElement.container.indexOf(i);t.element.checked&&this._nPreSelectIdx!=s&&this._onCheck(t)},_setChecked:function(t){var e=this._aWElFormList[t].$value(),i=this._aWElUnitList[t];if(e.disabled)return!1;var n=this.option("sCheckBgColor"),s=null,o=null;this._nPreSelectIdx>-1&&(n=n?this.option("sUncheckBgColor"):null,s=this._aWElUnitList[this._nPreSelectIdx].$value(),o=this._aWElFormList[this._nPreSelectIdx].$value(),this._aWElUnitList[this._nPreSelectIdx].removeClass(this._sOnClass),o.checked=!1,n&&this._aWElUnitList[this._nPreSelectIdx].css("backgroundColor",n+" !important")),i.addClass(this._sOnClass),i.attr("data-cb-checked","on"),e.checked=!0,n=this.option("sCheckBgColor"),n&&i.css("backgroundColor",n+" !important"),this._nPreSelectIdx=t,this.fireEvent("checked",{elPreRadioButtonUnit:s,elPreRadioButton:o,elRadioButtonUnit:i.$value(),elRadioButton:e})},getCheckedValue:function(){var t="";return this._nPreSelectIdx>-1&&(this._aWElFormList[this._nPreSelectIdx].$value().disabled||(t=this._aWElFormList[this._nPreSelectIdx].$value().value)),t},setCheckedButton:function(t){var e=this._getFormIdx(t);e.length>0&&this._setChecked(e[0])},enable:function(t){var e=this._useSettingForm(t,!0);this.fireEvent("enable",{aRadioButtonList:e.aFormList,aRadioButtonUnitList:e.aUnitList})},disable:function(t){var e=this._useSettingForm(t,!1);this.fireEvent("disable",{aRadioButtonList:e.aFormList,aRadioButtonUnitList:e.aUnitList})},getElementByIndex:function(t){return{elRadioButton:this._aWElFormList[t].$value(),elRadioButtonUnit:this._aWElUnitList[t].$value()}},destroy:function(){this.$super.destroy()}}).extend(jindo.m.CheckRadioCore),jindo.m.RequireValidator=jindo.$Class({validate:function(t){t=jindo.$S(t).trim().toString();var e={bValid:!1,sCorrectedValue:null};return e.bValid=""!=t?!0:!1,e}}).extend(jindo.m.Validator),jindo.m.SlideReveal=jindo.$Class({$init:function(t){this.option(t||{})},_initVar:function(t){if(jindo.m.RevealCommon.prototype._initVar.call(this,t),t){var e={};e[this._sCssPrefix+"Transform"]=this._sTranslateStart+"0px, 0px"+this._sTranslateEnd,this._htWElement.nav.css(e)}},_getPosInfo:function(){var t=this._getNaviWidth();switch(this.option("sDirection")){case"down":return{nHeader:{Y:this._nNavHeight*(this._bShow?this.option("bUseOffsetBug")?-1:0:1),X:0},nNav:{Y:this._nNavHeight*(this._bShow?this.option("bUseOffsetBug")?-1:0:1),X:0},nContent:{Y:this._nNavHeight*(this._bShow?this.option("bUseOffsetBug")?-1:0:1),X:0},nLastHeader:this._nNavHeight*(this._bShow?this._bNavInHeader?-1:0:this._bNavInHeader?0:1),nLastNav:this._nNavHeight*(this._bShow&&this.option("bUseOffsetBug")?-1:0),nLastContent:this._nNavHeight*(this._bShow?0:1),nLeftPos:0,nNavHeight:this._nNavHeight};case"left":return{nHeader:{Y:this._bShow?0:this.option("bUseOffsetBug")?-parseInt(0|this._htWElement.content.css("top"),10):0,X:t*(this._bShow?this.option("bUseOffsetBug")?1:0:-1)},nContent:{Y:this._bShow?0:this.option("bUseOffsetBug")?-parseInt(0|this._htWElement.content.css("top"),10):0,X:t*(this._bShow?this.option("bUseOffsetBug")?1:0:-1)},nNav:{Y:0,X:this._bShow?this.option("bUseOffsetBug")?t:0:t*(this._bShow?0:-1)},nDefaultNavPos:t*(this._bShow?0:1),nMarginLeftPos:t,nLeftPos:this._bShow?0:this._getHideWidth(),nNavHeight:0,nNavLeftPos:this._bShow?this._htSize.width:this.option("bFixNaviSize")?this._htSize.width-this.option("nMargin"):this.option("nMargin")};case"right":var e=this._getHideWidth();return{nHeader:{Y:this._bShow?0:this.option("bUseOffsetBug")?-parseInt(0|this._htWElement.content.css("top"),10):0,X:t*(this._bShow?this.option("bUseOffsetBug")?-1:0:1)},nContent:{Y:this._bShow?0:this.option("bUseOffsetBug")?-parseInt(0|this._htWElement.content.css("top"),10):0,X:t*(this._bShow?this.option("bUseOffsetBug")?-1:0:1)},nNav:{Y:0,X:this._bShow?this.option("bUseOffsetBug")?e:0:t*(this._bShow?0:1)},nDefaultNavPos:t*(this._bShow?0:1),nMarginLeftPos:-t,nLeftPos:this._bShow?0:t,nNavHeight:0,nNavLeftPos:this._bShow?e:0}}},_getNaviWidth:function(){return this.option("bFixNaviSize")?this.option("nMargin"):this._htSize.width-this.option("nMargin")},_getHideWidth:function(){return this.option("bFixNaviSize")?-this.option("nMargin"):-this._htSize.width+this.option("nMargin")}}).extend(jindo.m.RevealCommon),jindo.m.RevealSidebarUI=jindo.$Class({$init:function(t,e){this.option({bActivateOnload:!0,nSildeThreshold:50,sDefaultArea:"main",htScrollOption:{},nSlideDuration:200,bUseCss3d:jindo.m._isUseCss3d(),bUseTimingFunction:jindo.m._isUseTimingFunction()}),this.option(e||{}),this._initVar(),this._setWrapperElement(t),this._initComponent(),this.option("bActivateOnload")&&this.activate()},_initVar:function(){this._sStatus=this.option("sDefaultArea"),this._oLeftLayoutInfo=null,this._oRightLayoutInfo=null,this._oLeftScroll=null,this._oRightScroll=null,this._oSize={},this._bUseRebuild=!1,this._oSlideReveal={}},_setWrapperElement:function(t){this._htWElement={},t=jindo.$Element(t),this._htWElement.body=jindo.$Element(jindo.$$.getSingle(".rs-body")).css({overflow:"hidden"}),"static"==this._htWElement.body.css("position")&&this._htWElement.body.css("position","relative"),this._bUseRebuild=this._htWElement.body.attr("markup")&&"DETAILED"==this._htWElement.body.attr("markup").toUpperCase()?!1:!0,this._htWElement.main=jindo.$Element(this._htWElement.body.query(".rs-main")),this._bUseRebuild&&t&&!t.isEqual(this._htWElement.body)&&(this._htWElement.main.hide(),this._htWElement.main=t,this._htWElement.main.addClass("rs-main")),this._htWElement.main.css({position:"absolute",zIndex:10,left:0}),this._htWElement.left=jindo.$Element(this._htWElement.body.query(".rs-left")),this._htWElement.left&&this._htWElement.left.css({position:"absolute",zIndex:5,left:0,top:0}).show(),this._htWElement.right=jindo.$Element(this._htWElement.body.query(".rs-right")),this._htWElement.right&&this._htWElement.right.css({position:"absolute",zIndex:5,left:this.option("nSildeThreshold")+"px",top:0}).show(),this._htWElement.blocker=jindo.$Element("<div style='position:absolute;opacity:0;display:none;z-index:1000;opacity:0;-webkit-tap-highlight-color:transparent;top:0px;'>"),this._htWElement.blocker.appendTo(this._htWElement.body),this._htWElement.left&&(this._oLeftLayoutInfo=this._setLayout(this._htWElement.left)),this._htWElement.right&&(this._oRightLayoutInfo=this._setLayout(this._htWElement.right))},resize:function(){this._oSize=jindo.$Document().clientSize();var t=this;jindo.m._maxClientSize(function(e){t._oSize=e,t._setSizeWhenResize()}),this._setSizeWhenResize()},_setSizeWhenResize:function(){this._htWElement.right&&this._htWElement.right.show(),this._htWElement.left&&this._htWElement.left.show();var t=this._getScrollSize(this._oLeftLayoutInfo),e=this._getScrollSize(this._oRightLayoutInfo),i=this._getPos(this._sStatus);switch(this._htWElement.body.css({width:"100%",height:this._oSize.height+"px"}),this._htWElement.blocker.css({width:this.option("nSildeThreshold")+"px",height:this._oSize.height+"px",left:"left"==this._sStatus?i+"px":"0px"}),this._htWElement.main.css({width:this._oSize.width+"px",height:this._oSize.height+"px"}),this._oLeftScroll&&(this._oLeftScroll.option({nWidth:t.nWidth,nHeight:t.nHeight}),this._oLeftScroll.refresh()),this._oRightScroll&&(this._oRightScroll.option({nWidth:e.nWidth,nHeight:e.nHeight}),this._oRightScroll.refresh()),this._sStatus){case"left":this._htWElement.right&&this._htWElement.right.hide();break;case"right":this._htWElement.left&&this._htWElement.left.hide();break;case"main":this._htWElement.left&&this._htWElement.left.hide(),this._htWElement.right&&this._htWElement.right.hide()}},_onRotate:function(t){return"pageShow"!=t.sType||t.$value().persisted?void this.resize():!1},_initComponent:function(){this._oLeftScroll=this._initScroll(this._oLeftLayoutInfo),this._oRightScroll=this._initScroll(this._oRightLayoutInfo)},_initScroll:function(t){return t?new jindo.m.Scroll(t.welWrapper,this.option("htScrollOption")):null},_setLayout:function(t){var e=jindo.$Element(t.query(".rs-header")),i=jindo.$Element(t.query(".rs-footer")),n=jindo.$Element(t.query(".rs-content")),s=e&&"fixed"==e.attr("position"),o=i&&"fixed"==i.attr("position"),h=null;return h=this._bUseRebuild?this._arrangeDom({welContent:n,bHeaderFixed:s,bFooterFixed:o,welHeader:e,welFooter:i}):jindo.$Element(t.query(".scroller")),{welWrapper:h,welHeader:e,welFooter:i,bHeaderFixed:s,bFooterFixed:o}},_getScrollSize:function(t){if(!t)return{nWidth:0,nHeight:0};var e=0,i=this._oSize.height,n=t.welWrapper.visible();return n||(e=t.welWrapper.css("left"),t.welWrapper.css("left","-999px").show()),t.bHeaderFixed&&(i-=t.welHeader.height()),t.bFooterFixed&&(i-=t.welFooter.height()),n||t.welWrapper.css("left",e).hide(),{nWidth:this._oSize.width-this.option("nSildeThreshold"),nHeight:i}},_arrangeDom:function(t){t.welContent.wrap("<div>").wrap("<div>");var e=t.welContent.parent();return!t.bHeaderFixed&&t.welHeader&&e.prepend(t.welHeader),!t.bFooterFixed&&t.welFooter&&e.append(t.welFooter),e.parent()},_slide:function(t,e){if(!this._oSlideReveal.left.isPlaying()||!this._oSlideReveal.right.isPlaying()){var i=this._getPos(t?"right":"left"),n=this;e="undefined"==typeof e?this.option("nSlideDuration"):e,this.fireEvent("beforeSlide",{sStatus:this._sStatus})&&(n._htWElement.blocker.show(),t?(this._htWElement.left&&this._htWElement.left.css("zIndex",5),this._htWElement.right&&this._htWElement.right.css("zIndex",6).show(),n._htWElement.blocker.css("left","0px"),this._sStatus="right"):(this._htWElement.right&&this._htWElement.right.css("zIndex",5),this._htWElement.left&&this._htWElement.left.css("zIndex",6).show(),n._htWElement.blocker.css("left",i+"px"),this._sStatus="left"),t?(this._htWElement.left&&this._oSlideReveal.left.hide(e/2),this._htWElement.right&&this._oSlideReveal.right.show(e)):(this._htWElement.right&&this._oSlideReveal.right.hide(e/2),this._htWElement.left&&this._oSlideReveal.left.show(e)))}},_getPos:function(t){var e=parseInt(this._oSize.width-this.option("nSildeThreshold"),10);switch(t){case"left":break;case"main":e=0;break;case"right":e=-e}return e},move:function(t,e){switch(e="undefined"==typeof e?this.option("nSlideDuration"):e,t){case"left":this._slide(!1,e);break;case"main":this.restore(e);break;case"right":this._slide(!0,e)}},toggleSlide:function(t){return"main"!=this._sStatus?void this.restore():void this._slide(t)},restore:function(t){this._oSlideReveal.left.isPlaying()&&this._oSlideReveal.right.isPlaying()||(t="undefined"==typeof t?this.option("nSlideDuration"):t,this.fireEvent("beforeRestore",{sStatus:this._sStatus})&&("right"==this._sStatus?this._oSlideReveal.right.hide(t):this._oSlideReveal.left.hide(t)))},_onRevealShow:function(){"left"==this._sStatus&&this._oSlideReveal[this._sStatus]&&(this._oSlideReveal.right._bShow=!1,this._htWElement.right.hide()),"right"==this._sStatus&&this._oSlideReveal[this._sStatus]&&(this._oSlideReveal.left._bShow=!1,this._htWElement.left.hide()),this.fireEvent("slide",{sStatus:this._sStatus})},_onRevealRestore:function(t){this._sStatus="main",this._htWElement.blocker.hide(),"left"==t&&this._htWElement.left&&this._htWElement.left.hide(),"right"==t&&this._htWElement.right&&this._htWElement.right.hide(),this.fireEvent("restore",{sStatus:this._sStatus})},_initSlideReveal:function(){var t=this,e={nDuration:this.option("nSlideDuration"),nMargin:this.option("nSildeThreshold"),bUseTimingFunction:this.option("bUseTimingFunction")};this._htWElement.left&&(this._htWElement.main.addClass("revealLeft-contents"),this._htWElement.left.addClass("revealLeft-nav"),this._oSlideReveal.left=new jindo.m.SlideReveal(jindo.$Jindo.mixin(e,{sClassPrefix:"revealLeft-",sDirection:"right"})).attach({show:function(){t._onRevealShow()},hide:function(){t._onRevealRestore("left")}})),this._htWElement.right&&(this._htWElement.main.addClass("revealRight-contents"),this._htWElement.right.addClass("revealRight-nav"),this._oSlideReveal.right=new jindo.m.SlideReveal(jindo.$Jindo.mixin(e,{sClassPrefix:"revealRight-",sDirection:"left"})).attach({show:function(){t._onRevealShow()},hide:function(){t._onRevealRestore("right")}}))},_onActivate:function(){this._attachEvent(),this.resize(),this._initSlideReveal()},_onDeactivate:function(){this._detachEvent()},_attachEvent:function(){this._htEvent={},this._htEvent.restore=jindo.$Fn(this._onRestore,this).attach(this._htWElement.blocker,"click"),this._htEvent.rotate=jindo.$Fn(this._onRotate,this).bind(),jindo.m.bindRotate(this._htEvent.rotate),jindo.m.bindPageshow(this._htEvent.rotate)},_detachEvent:function(){this._htEvent.restore.detach(this._htWElement.blocker,"click"),jindo.m.unbindRotate(this._htEvent.rotate),jindo.m.unbindPageshow(this._htEvent.rotate),this._htEvent=null},_onRestore:function(){this.restore()},destroy:function(){this.deactivate(),this._oLeftScroll.destroy(),this._oLeftScroll=null,this._oRightScroll.destroy(),this._oRightScroll=null}}).extend(jindo.m.UIComponent),jindo.m.Selectbox=jindo.$Class({$init:function(t,e){this.option({bActivateOnload:!0,sClassPrefix:"select-",sPlaceholder:"선택해주세요",nHeight:80,sItemTag:"li",nDefaultIndex:-1}),this.option(e||{}),this._initVar(),this._setWrapperElement(t),this._init(),this.option("bActivateOnload")&&(this.activate(),this.select(this.option("nDefaultIndex")))},_initVar:function(){this._isNative=!1,this._oScroll=null,this._sClassPrefix=this.option("sClassPrefix"),this._aItems=null,this._nCurrentIdx=-1},_setWrapperElement:function(t){this._htWElement={},this._htWElement.base=jindo.$Element(t),this._htWElement.content=jindo.$Element(this._htWElement.base.query("."+this._sClassPrefix+"content")),this._htWElement.arrow=jindo.$Element(this._htWElement.base.query("."+this._sClassPrefix+"arrow")),this._htWElement.selectmenu=jindo.$Element(this._htWElement.base.query("."+this._sClassPrefix+"selectmenu"))},_init:function(){this._isNative="SELECT"==this._htWElement.selectmenu.$value().tagName?!0:!1,this._htWElement.base.css({position:"relative",display:"-webkit-box","-webkit-box-align":"center","-webkit-box-pack":"center","-webkit-tap-highlight-color":"transparent"}),this._htWElement.content.css({display:"block",overflow:"hidden","text-overflow":"ellipsis",cursor:"pointer","text-align":"center",width:"90%"}),this._htWElement.arrow&&this._htWElement.arrow.css({position:"relative","text-align":"right",display:"block","text-algn":"right"}),this._htWElement.selectmenu.css({position:"absolute",left:"0px",margin:"0px",zIndex:100}),this._isNative?this._htWElement.selectmenu.css({opacity:"0.0001",height:"100%","min-height":"100%",width:"100%"}):(this._htWElement.selectmenu.css({width:"100%"}).hide(),this._htWElement.selectmenu.first().css("width","100%"),this._oScroll=new jindo.m.Scroll(this._htWElement.selectmenu.$value(),{nHeight:this.option("nHeight"),bUseScrollbar:!1,bUseMomentum:!0,bUseHighlight:!1,bUseBounce:!0})),this._refreshItems()},_onActivate:function(){this._attachEvent()},_onDeactivate:function(){this._detachEvent()},_attachEvent:function(){this._htEvent={},this._isNative?this._htWElement.selectmenu.show():(this._htEvent.selectmenu=jindo.$Fn(this._onShow,this).attach(this._htWElement.base,"click"),this._htEvent.document=jindo.$Fn(this._onDocumentStart,this).attach(document,"touchstart")),this._htEvent.select=jindo.$Fn(this._onSelect,this).attach(this._htWElement.selectmenu,this._isNative?"change":"click")},_detachEvent:function(){this._isNative?this._htWElement.selectmenu.hide():(this._htEvent.selectmenu.detach(this._htWElement.base,"click"),this._htEvent.document.detach(document,"touchstart")),this._htEvent.select.detach(this._htWElement.selectmenu,this._isNative?"change":"click"),this._htEvent=null},_onShow:function(){this._showMenuForCustom()},_onSelect:function(t){if(this._isNative)this.select(t.element.selectedIndex);else{var e=jindo.$Element(t.element).parent();this.select(e.indexOf(t.element))}t.stop()},_onDocumentStart:function(t){if(this._htWElement.selectmenu.visible()){if(this._htWElement.selectmenu.isParentOf(t.element)||this._htWElement.selectmenu.isEqual(t.element))return!0;this._hideMenuForCustom()}},select:function(t){if(t>=0&&t<this._aItems.length){if(t!=this._nCurrentIdx&&this.fireEvent("beforeSelect",{nCurrentIdx:this._nCurrentIdx,sValue:this.getValue()})){if(this._isNative)this._aItems[t].selected=!0,this._setValue(this._aItems[t].value);else{var e=jindo.$Element(this._aItems[t]);this._aItems[this._nCurrentIdx]&&jindo.$Element(this._aItems[this._nCurrentIdx]).removeClass(this._sClassPrefix+"selected"),e.addClass(this._sClassPrefix+"selected"),this._setValue(e.text()),this._hideMenuForCustom()}var i=this._nCurrentIdx;this._nCurrentIdx=t,this.fireEvent("select",{nPrevIdx:i,sPrevValue:this.getValue(i),nCurrentIdx:this._nCurrentIdx,sValue:this.getValue()})}}else this._setValue(this.option("sPlaceholder"))},_showMenuForCustom:function(){if(!this._isNative&&!this._htWElement.selectmenu.visible()){this._htWElement.selectmenu.show();
var t=jindo.$Element(this._htWElement.selectmenu.query(this.option("sItemTag"))).height();this._oScroll.refresh(),this._oScroll.scrollTo(0,this._nCurrentIdx<0?0:-this._nCurrentIdx*t),this._htEvent.selectmenu.detach(this._htWElement.base,"click")}},_hideMenuForCustom:function(){!this._isNative&&this._htWElement.selectmenu.visible()&&(this._htWElement.selectmenu.hide(),this._htEvent.selectmenu.attach(this._htWElement.base,"click"))},_refreshItems:function(){this._aItems=this._isNative?this._htWElement.selectmenu.$value().options:this._htWElement.selectmenu.queryAll(this.option("sItemTag"))},refresh:function(t){for(var e="",i=this._isNative?"option":this.option("sItemTag"),n=0,s=t.length;s>n;n++)e+="<",e+=i,e+=">",e+=t[n],e+="</",e+=i,e+=">";this._isNative?this._htWElement.selectmenu.html(e):this._htWElement.selectmenu.first().html(e),this._refreshItems(),this._nCurrentIdx=-1,this.select(this._nCurrentIdx)},_setValue:function(t){this._htWElement.content.text(t)},getCurrentIdx:function(){return this._nCurrentIdx},getValue:function(t){var e="";return t="undefined"==typeof t?this._nCurrentIdx:t,t>=0&&t<this._aItems.length&&(e=this._isNative?this._aItems[t].value:jindo.$Element(this._aItems[t]).text()),e},disable:function(){var t=this._sClassPrefix+"disable";this._htWElement.base.hasClass(t)||(this._htWElement.base.addClass(t),this._isNative?this._htWElement.selectmenu.hide():(this._htWElement.selectmenu.hide(),this._htEvent.selectmenu.detach(this._htWElement.base,"click")))},enable:function(){var t=this._sClassPrefix+"disable";this._htWElement.base.hasClass(t)&&(this._htWElement.base.removeClass(this._sClassPrefix+"disable"),this._isNative?this._htWElement.selectmenu.show():this._htEvent.selectmenu.attach(this._htWElement.base,"click"))},destroy:function(){this.deactivate(),this._oScroll&&this._oScroll.destroy()}}).extend(jindo.m.UIComponent),jindo.m.SlideTab=jindo.$Class({$init:function(t,e){this.option({nSlideDuration:200,sTimingFunction:"ease-in-out",nCountPerVeiw:3}),this.option(e||{}),this._initData(),this.option("bActivateOnload")&&(this.resize(),this.activate()),this.select(this.option("nDefaultIndex"),{bEffect:!1})},_initVar:function(){this.$super._initVar(),this._nCurrentPage=1,this._nTotalPage=1,this._nPageWidth=0,this._aDummyTab=[],this._oEffect=null,this._isNext=null},_setWrapperElement:function(t){var e=this._sPrefix;this.$super._setWrapperElement(t),this._htWElement.tab_view=jindo.$Element(this._htWElement.baseElement.query("."+e+"tabview")),this._htWElement.tab_container=jindo.$Element(this._htWElement.baseElement.query("."+e+"tab-cont")),this._htWElement.prev=jindo.$Element(this._htWElement.baseElement.query("."+e+"prev")),this._htWElement.next=jindo.$Element(this._htWElement.baseElement.query("."+e+"next")),this._htWElement.baseElement.css("position","relative"),this._htWElement.tab_view.css("overflow","hidden")},_initData:function(){this.$super._initData();var t,e=this.option("nCountPerVeiw"),i=null;this._nTotalPage=parseInt(this._aTab.length/e,10),t=this._aTab.length%e,t>0&&this._nTotalPage++,t=0==t?e:t;for(var n=0,s=e-t;s>n;n++)i=jindo.$("<li></li>"),this._aDummyTab.push(jindo.$Element(i)),this._htWElement.tab_container.append(i);this._oEffect=new jindo.m.LayerEffect(this._htWElement.tab_container.$value())},getCurrentPage:function(){return this._nCurrentPage},getTotalPage:function(){return this._nTotalPage},resize:function(){var t,e=this._nPageWidth;this._nPageWidth=this._htWElement.tab_view.width()-this._htWElement.prev.width()-this._htWElement.next.width(),t=this._nPageWidth/this.option("nCountPerVeiw"),e>this._nPageWidth?(this._setTabWidth(t),this._htWElement.tab_container.width(this._nPageWidth*this._nTotalPage)):(this._htWElement.tab_container.width(this._nPageWidth*this._nTotalPage),this._setTabWidth(t)),this._htWElement.tab_container.css("left",(this._nCurrentPage-1)*-this._nPageWidth)},_setTabWidth:function(t){jindo.$A(this._aTab).forEach(function(e){e.width(t)}),jindo.$A(this._aDummyTab).forEach(function(e){e.width(t)})},_fireEventBeforePrev:function(){return this.fireEvent("beforePrev",{nPage:this._nCurrentPage,nIndex:this._nCurrentIndex,nTotalPage:this._nTotalPage})},_fireEventPrev:function(){this.fireEvent("prev",{nPage:this._nCurrentPage,nIndex:this._nCurrentIndex,nTotalPage:this._nTotalPage})},_fireEventBeforeNext:function(){return this.fireEvent("beforeNext",{nPage:this._nCurrentPage,nIndex:this._nCurrentIndex,nTotalPage:this._nTotalPage})},_fireEventNext:function(){this.fireEvent("next",{nPage:this._nCurrentPage,nIndex:this._nCurrentIndex,nTotalPage:this._nTotalPage})},_onAfterSelect:function(t){this.select(this._getIdx(t))},_beforeSelect:function(){},select:function(t,e){this.$super.select(t);var i=parseInt(t/~~this.option("nCountPerVeiw"),10)+1,n=i-this.getCurrentPage();n>0?this.next(n,e):0>n&&this.prev(-n,e)},_attachEvent:function(){this.$super._attachEvent(),this._htEvent.prev_click={ref:jindo.$Fn(this._onPrev,this).attach(this._htWElement.prev,"click"),el:this._htWElement.prev},this._htEvent.next_click={ref:jindo.$Fn(this._onNext,this).attach(this._htWElement.next,"click"),el:this._htWElement.next},this._oEffect.attach("afterEffect",jindo.$Fn(this._onAfterEffect,this).bind())},_detachEvent:function(){this._oEffect.detachAll(),this.$super._detachEvent()},_onAfterEffect:function(){this._isNext?(this._nCurrentPage++,this._fireEventNext()):(this._nCurrentPage--,this._fireEventPrev()),this._isNext=null,this._bSelect&&this.select((this._nCurrentPage-1)*this.option("nCountPerVeiw"))},_onPrev:function(t){return this._oPanelEffect&&this._oPanelEffect.isPlaying()?(t.stop(jindo.$Event.CANCEL_ALL),!1):void this.prev(1,{bSelect:!0})},prev:function(t,e){if(void 0!=t&&0>=t)return!1;t=t||1,e=e?e:{},this._bSelect=e.bSelect||!1;var i=this._nCurrentPage-t+1;i>1&&!this._oEffect.isPlaying()&&(e.bEffect||void 0==e.bEffect?this._fireEventBeforePrev()&&this._oEffect.slide({sDirection:"right",nDuration:this.option("nSlideDuration"),sTransitionTimingFunction:this.option("sTimingFunction"),nSize:this._nPageWidth*t}):(this._htWElement.tab_container.css("left",this._nPageWidth*t),this._onAfterEffect()),this._nCurrentPage=i,this._isNext=!1)},_onNext:function(t){return this._oPanelEffect&&this._oPanelEffect.isPlaying()?(t.stop(jindo.$Event.CANCEL_ALL),!1):void this.next(1,{bSelect:!0})},next:function(t,e){if(void 0!=t&&0>=t)return!1;t=t||1,e=e?e:{},this._bSelect=e.bSelect||!1;var i=this._nCurrentPage+t-1;i<this._nTotalPage&&!this._oEffect.isPlaying()&&this._fireEventBeforeNext()&&(this._nCurrentPage=i,this._isNext=!0,e.bEffect||void 0==e.bEffect?this._oEffect.slide({sDirection:"left",nDuration:this.option("nSlideDuration"),sTransitionTimingFunction:this.option("sTimingFunction"),nSize:this._nPageWidth*t}):(this._htWElement.tab_container.css("left",-this._nPageWidth*t),this._onAfterEffect()))},destroy:function(){this.deactivate();for(var t in this._aDummyTab)this._aDummyTab[t]=null;this._aDummyTab=null,this._initVar(),this._oEffect&&(this._oEffect.destroy(),this._oEffect=null),this.$super.destroy()}}).extend(jindo.m.CoreTab),jindo.m.Slider=jindo.$Class({$init:function(t,e){this.option({sClassPrefix:"slider-",bVertical:!1,nMinValue:0,nMaxValue:100,nDefaultValue:0,nMoveThreshold:0,nSlopeThreshold:5,bActivateOnload:!0}),this.option(e||{}),this._setWrapperElement(t),this._initVar(),this.option("bActivateOnload")&&(this.activate(),this.setValue(this.option("nDefaultValue")))},_initVar:function(){this._oTouch=new jindo.m.Touch(this._htWElement.track.$value(),{nTapThreshold:1,nMoveThreshold:this.option("nMoveThreshold"),nSlopeThreshold:this.option("nSlopeThreshold"),bHorizental:!this.option("bVertical"),bVertical:this.option("bVertical"),nEndEventThreshold:jindo.m.getDeviceInfo().win8?100:0,bActivateOnload:!1}),this._oTouch.attach({touchMove:jindo.$Fn(this._onMove,this).bind(),touchEnd:jindo.$Fn(this._onMove,this).bind(),touchStart:jindo.$Fn(this._onStart,this).bind()}),this._htSwap={left:this.option("bVertical")?"top":"left",width:this.option("bVertical")?"height":"width",nX:this.option("bVertical")?"nY":"nX"},this._nPos=this._nBeforeValue=0;var t=this._htWElement.thumb[this._htSwap.width]()/2;this._htWElement.thumb.css("margin-"+this._htSwap.left,-1*t)},_setWrapperElement:function(t){this._htWElement={},t=jindo.$(t);var e="."+this.option("sClassPrefix");this._htWElement.track=jindo.$Element(t);var i=jindo.$$.getSingle(e+"thumb",t);this._htWElement.thumb=i?jindo.$Element(i):null;var n=jindo.$$.getSingle(e+"range",t);this._htWElement.range=n?jindo.$Element(n):null},_onStart:function(t){var e={nValue:this.getValue(),nPosition:this.getPosition()};this.fireEvent("touchStart",e)&&t.oEvent.stop(jindo.$Event.CANCEL_DEFAULT)},_onMove:function(t){if("touchMove"==t.sType&&t.oEvent.stop(jindo.$Event.CANCEL_DEFAULT),"touchEnd"==t.sType&&t.element==this._htWElement.thumb.$value())return void this._fireEvent(t);var e=t[this._htSwap.nX]-this._htWElement.track.offset()[this._htSwap.left]-this._htWElement.thumb[this._htSwap.width]()/2,i=this._getAdjustedPos(e);this._move(i),this._fireEvent(t)},_fireEvent:function(t){this.fireEvent(t.sType,{nValue:this.getValue(),nPosition:this.getPosition()})},_move:function(t,e){if("undefined"==typeof e&&(e=!0),this._nPos!=t||e){var i=this.getValue(t),n=Math.round(t),s=this.getValue(n);this._nBeforeValue=i,this._nPos=t;var o={nValue:i,nPosition:t,nAdjustValue:s,nAdjustPosition:n};(!e||this._fireBeforeEvent(o))&&(o.nAdjustValue!=s&&(o.nAdjustPosition=this._getPositionFromValue(o.nAdjustValue)),this._moveThumb(o.nAdjustPosition),e&&this._fireChangeEvent(o),this._htWElement.range&&this._htWElement.range.css(this._htSwap.width,o.nAdjustPosition+"%"))}},_fireBeforeEvent:function(t){return this.fireEvent("beforeChange",t)},_fireChangeEvent:function(t){this.fireEvent("change",t)},_moveThumb:function(t){t>100||0>t||(this._htWElement.thumb.css("webkitTransitionDuration","0ms"),this._htWElement.thumb.css("webkitTransitionProperty",this._htSwap.left),this._htWElement.thumb.css(this._htSwap.left,t+"%"))},_getTrackInfo:function(){var t=this.option("bVertical")?this._htWElement.track.height():this._htWElement.track.width(),e=this.option("bVertical")?this._htWElement.thumb.height():this._htWElement.thumb.width(),i=t-e/2;return{maxPos:i,max:1*this.option("nMaxValue"),min:1*this.option("nMinValue")}},getValue:function(t){"undefined"==typeof t&&(t=this.getPosition());var e=this._getTrackInfo(),i=e.min+(e.max-e.min)*(t/100);return i},setValue:function(t,e){t=1*t;var i=this._getPositionFromValue(t);"undefined"==typeof e&&(e=!1),this._nBeforeValue!=t&&(e=!0),this._move(i,e)},_getAdjustedPos:function(t){var e=this._getTrackInfo(),i=100*t/e.maxPos;return i=Math.max(0,i),i=Math.min(i,100)},getPosition:function(){var t=this._htWElement.thumb.css(this._htSwap.left);return"auto"==t?0:parseFloat(t,10)},setPosition:function(t,e){"undefined"==typeof e&&(e=!0),this._move(t,e)},_getPositionFromValue:function(t){var e=this._getTrackInfo(),i=100*(t-e.min)/(e.max-e.min);return i=isNaN(i)?100:i,i=Math.max(0,i),i=Math.min(100,i)},_onClick:function(t){t.stop()},_attachEvent:function(){this._htEvent={}},_detachEvent:function(t){if(t){var e=this._htEvent[t];e.ref.detach(e.el,t)}},_onActivate:function(){this._attachEvent(),this._oTouch.activate()},_onDeactivate:function(){this._detachEvent(),this._oTouch.deactivate()},destroy:function(){this.deactivate();for(var t in this._htWElement)this._htWElement[t]=null;this._htWElement=null;for(t in this._htSwap)this._htSwap[t]=null;this._htSwap=null,this._oTouch.detachAll()}}).extend(jindo.m.UIComponent),jindo.m.Tab=jindo.$Class({$init:function(t,e){this.option({sMoreText:"더보기",nCountOnList:0}),this.option(e||{}),this._initData(),this.option("bActivateOnload")&&this.activate(),this.select(this.option("nDefaultIndex"))},_initVar:function(){this.$super._initVar(),this._isMore=!1,this._nCurrentMoreTab=-1},_initData:function(){this.$super._initData();var t=this.option("nCountOnList");t>0&&this._aTab.length>t&&this._makeMoreContainer(t)},_makeMoreContainer:function(t){this._htWElement.more_tab=jindo.$Element('<li class="'+this._sPrefix+'more-tab"><a style="display: block; height: 100%">'+this.option("sMoreText")+' <span class="'+this._sPrefix+'arrow-down"></span></a></li>'),this._htWElement.more_container_wrap=jindo.$Element('<div style="position:relative; width:100%;z-index:10">'),this._htWElement.more_container=jindo.$Element('<ul class="'+this._sPrefix+'more-cont" style="display:none; position: absolute">');for(var e=t,i=this._aTab.length;i>e;e++)this._tab2more(e);this._htWElement.more_container_wrap.append(this._htWElement.more_container),this._htWElement.more_tab.append(this._htWElement.more_container_wrap),this._htWElement.tab_container.append(this._htWElement.more_tab),this._htWElement.more_arrow=jindo.$Element(this._htWElement.more_tab.query("span")),this._nCurrentMoreTab=t-1,this._isMore=!0},_attachMoreContainerEvent:function(){this._htEvent.more_click={el:this._htWElement.more_container,ref:jindo.$Fn(this._onClickMore,this).attach(this._htWElement.more_container,"click")}},_onClickMore:function(t){if(this._isMore){var e=jindo.$Element(t.element),i=this._sPrefix+"more-li";e.hasClass(i)||(e=e.parent(function(t){return t.hasClass(i)},1)[0]),this.select(this._getIdx(e)),t.stop(jindo.$Event.CANCEL_BUBBLE)}},_tab2more:function(t){var e,i=this._htWElement.more_container.first(),n=!1;for(this._aTab[t].className(this._sPrefix+"more-li"),this._aTab[t].first().className(this._sPrefix+"more-lia");i;){if(e=this._getIdx(i),e>t){i.before(this._aTab[t]),n=!0;break}i=i.next()}n||this._htWElement.more_container.append(this._aTab[t])},_more2tab:function(t){this._aTab[t].className(this._sPrefix+"tab"),this._aTab[t].first().className(this._sPrefix+"taba"),this._htWElement.more_tab.before(this._aTab[t]),this._nCurrentMoreTab=t},_onAfterSelect:function(t){if(t.hasClass(this._sPrefix+"more-tab")){var e=this._htWElement.more_container.visible();this._fireEventBefore(e?"beforeHide":"beforeShow")&&(this._htWElement.more_container.toggle(),this._htWElement.more_tab.toggleClass(this._sPrefix+"more-on"),this._htWElement.more_arrow.toggleClass(this._sPrefix+"arrow-down",this._sPrefix+"arrow-up"),this._fireEventBefore(e?"hide":"show"))}else this._hideMoreList(),this.select(this._getIdx(t))},_hideMoreList:function(){this._isMore&&this._fireEventBefore("beforeHide")&&(this._htWElement.more_container.hide(),this._htWElement.more_tab.removeClass(this._sPrefix+"more-on"),this._htWElement.more_arrow.className(this._sPrefix+"arrow-up"),this._fireEventBefore("hide"))},_beforeSelect:function(t){this._isMore&&t>=this.option("nCountOnList")-1&&this._nCurrentMoreTab!=t&&(this._hideMoreList(),this._tab2more(this._nCurrentMoreTab),this._more2tab(t))},_attachEvent:function(){this.$super._attachEvent(),this._isMore&&this._attachMoreContainerEvent()},_detachEvent:function(){this.$super._detachEvent()},destroy:function(){this.deactivate(),this.$super.destroy()}}).extend(jindo.m.CoreTab),jindo.m.TelValidator=jindo.$Class({rx:/^(\d{2,3})(\d{3,4})(\d{4})$/,_isValid:function(t){if(t=t.replace(/[^\d]/g,""),this.rx.test(t)){var e=t.length,i=!1;return"0"===t.charAt(0)&&(9===e&&"02"===t.substring(0,2)||10===e||11===e)&&(i=!0),i}return!1},_getCorrectedValue:function(t,e){return t=t.replace(/[^\d]/g,""),t=t.length>11?t.substr(0,11):t,this._applyFormat(t,e)},_applyFormat:function(t,e){e=e||"-";var i=t.length;return"0"===t.charAt(0)&&(9===i&&"02"===t.substring(0,2)?t=t.substr(0,2)+e+t.substr(2,3)+e+t.substr(5,4):10===i?t="02"===t.substr(0,2)?t.substr(0,2)+e+t.substr(2,4)+e+t.substr(6,4):t.substr(0,3)+e+t.substr(3,3)+e+t.substr(6,4):11===i&&(t="0505"===t.substr(0,4)?t.substr(0,4)+e+t.substr(4,3)+e+t.substr(7,4):t.substr(0,3)+e+t.substr(3,4)+e+t.substr(7,4))),t}}).extend(jindo.m.Validator),jindo.m.TextArea=jindo.$Class({$init:function(t,e){this.option({bActivateOnload:!0,sClassPrefix:"fta-",bUseRadius:!1,sRadiusSize:"0.5em",bUseAutoHeight:!1,nExpandHeight:30,nMaxHeight:-1}),this.option(e||{}),this._initVar(),this._setWrapperElement(t),this.option("bUseRadius")&&this._applyRadiusStyle(this.option("sRadiusSize")),this.option("bActivateOnload")&&this.activate()},_initVar:function(){this._bTouchTextArea=!1,this._touchMoved=!1,this._sBeforeValue="",this._nInitHeight=-1},_setWrapperElement:function(t){this._htWElement={};this.option("sClassPrefix");t="string"==typeof t?jindo.$(t):t,this._htWElement.textarea=jindo.$Element(t),this._nInitHeight=this._htWElement.textarea.height()},_applyRadiusStyle:function(t){var e=(jindo.m.getCssPrefix()+"BorderRadius",{sCssName:t,borderRadius:t});this._htWElement.textarea.css(e)},_onActivate:function(){this._attachEvent()},_onDeactivate:function(){this._detachEvent()},_attachEvent:function(){this._htEvent={};var t=this._htWElement.textarea.$value();this._htEvent.textarea_focus={el:t,ref:jindo.$Fn(this._onFocus,this).attach(t,"focus")},this._htEvent.textarea_blur={el:t,ref:jindo.$Fn(this._onBlur,this).attach(t,"blur")},this._htEvent.textarea_input={el:t,ref:jindo.$Fn(this._checkHeightAndExpand,this).attach(t,"input")}},_detachEvent:function(){for(var t in this._htEvent){var e=this._htEvent[t];e.ref.detach(e.el,t.substring(t.lastIndexOf("_")+1))}this._htEvent=null},_onFocus:function(){this._htWElement.textarea.addClass(this.option("sClassPrefix")+"textarea-focus"),this.fireEvent("focus",{elTextArea:this._htWElement.textarea.$value()})},_onBlur:function(){this._htWElement.textarea.removeClass(this.option("sClassPrefix")+"textarea-focus"),this.fireEvent("blur",{elTextArea:this._htWElement.textarea.$value()})},_checkHeightAndExpand:function(){var t=this._htWElement.textarea.$value().value;this._adjustHeight(),t!=this._sBeforeValue&&(this._sBeforeValue=t,this.fireEvent("change",{elTextArea:this._htWElement.textarea.$value()}))},_adjustHeight:function(){var t=this._htWElement.textarea.$value(),e=this.option("nExpandHeight"),i=t.clientHeight,n=t.scrollHeight,s=this.option("nMaxHeight"),o=this._sBeforeValue.split("\n").length,h=t.value.split("\n").length,a=parseInt(this._htWElement.textarea.css("line-height"),10),r=0;if(o>h){if(this.option("bUseAutoHeight")){if(r=a*h,-1!=s&&r>s)return;t.style.height=this._nInitHeight<=r?r+"px":this._nInitHeight+"px"}}else h>o&&this.option("bUseAutoHeight")&&n>i&&(r=n+e,-1==s||s>=r?(t.style.height=r+"px",this.fireEvent("expand",{elTextArea:this._htWElement.textarea.$value()})):(-1==s||r>s)&&n!=s&&(t.style.height=s+"px",this.fireEvent("expand",{elTextArea:this._htWElement.textarea.$value()})))},_expandHeight:function(){var t=this._htWElement.textarea.$value(),e=this.option("nMaxHeight"),i=this.option("nExpandHeight"),n=parseInt(t.scrollHeight,10),s=parseInt(t.style.height,10),o=n+i;e>0&&s==e||(t.style.height=e>0&&o>e?e+"px":o+"px")},getValue:function(){return this._htWElement.textarea.$value().value},setValue:function(t){this._htWElement.textarea.$value().value=t,this._checkHeightAndExpand()},deleteValue:function(){this._htWElement.textarea.$value().value=""},enable:function(){var t=this._htWElement.textarea.$value();t.disabled=!1,this._htWElement.textarea.removeClass(this.option("sClassPrefix")+"textarea-disable"),this.fireEvent("enable",{elTextArea:t})},disable:function(){var t=this._htWElement.textarea.$value();t.disabled=!0,this._htWElement.textarea.addClass(this.option("sClassPrefix")+"textarea-disable"),this.fireEvent("disable",{elTextArea:t})},setExpandHeight:function(t){this.option("nExpandHeight",t)},getExpandHeight:function(){return this.option("nExpandHeight")},setMaxHeight:function(t){this.option("nMaxHeight",t);var e=this._htWElement.textarea.$value(),i=e.scrollHeight;t>0&&i>t&&(e.style.height=t+"px")},getMaxHeight:function(){return this.option("nMaxHeight")},destroy:function(){this.deactivate();for(var t in this._htWElement)this._htWElement[t]=null;this._htWElement=null,this._bTouchTextArea=null,this._touchMoved=null}}).extend(jindo.m.UIComponent),jindo.m.UrlValidator=jindo.$Class({rx:/(^(http:\/\/)|^(https:\/\/)|(^[A-Za-z0-9\.\-]+))+([A-Za-z0-9\.\-])*(\.[A-Za-z]{2,}(\/([A-Za-z0-9\.\-])*)*)$/,_isValid:function(t){return this.rx.test(t)?!0:!1},_getCorrectedValue:function(t){return t.replace(/[^A-Za-z0-9-\?&\.\:\/]/g,"").replace(/\.{2,}/g,"").replace(/\?{2,}/g,"").replace(/&{2,}/g,"").replace(/\:{3,}/g,"")}}).extend(jindo.m.Validator),jindo.m.Validation=jindo.$Class({$init:function(){},$static:{_htValidator:{},_htValidatorType:{email:"jindo.m.EmailValidator",url:"jindo.m.UrlValidator",tel:"jindo.m.TelValidator",date:"jindo.m.DateValidator",number:"jindo.m.NumberValidator",currency:"jindo.m.CurrencyValidator",require:"jindo.m.RequireValidator"},_createValidator:function(sType){jindo.m.Validation._htValidatorType[sType]&&!jindo.m.Validation._htValidator[sType]&&(jindo.m.Validation._htValidator[sType]=eval("new "+jindo.m.Validation._htValidatorType[sType]+"()"))},add:function(t,e){jindo.m.Validation._htValidatorType[t]=e},remove:function(t){delete jindo.m.Validation._htValidatorType[t]},_parse:function(t){for(var e,i,n=t.split(";"),s={},o=0,h=n.length;h>o;o++){var a=n[o].split(":");a&&(e=a[0],i=a.length>1?a[1]:null,s[e]=s[e]||i,jindo.m.Validation._createValidator(e))}return s},validate:function(t,e){var i,n=jindo.m.Validation._parse(t);if("require"in n){if(i=jindo.m.Validation._htValidator.require.validate(e),!i.bValid)return{bValid:!1,sType:"require",sPreValue:e};delete n.require}if(""==jindo.$S(e).trim())return null;for(var s in n)if(i=jindo.m.Validation._htValidator[s].validate(e,n[s]),!i.bValid)return i.sType=s,i.sPreValue=e,i;return i.bValid=!0,i.sPreValue=e,i}}}),jindo.m.TextInput=jindo.$Class({$init:function(t,e){this.option({sClassPrefix:"fit-",bUseValidate:!1,bActivateOnload:!0}),this.option(e||{}),this._initVar(),this._setWrapperElement(t),this._init(),this.option("bActivateOnload")&&this.activate()},$static:{INDEX_ATTR:"data-index",VALIDATE_ATTR:"data-validate"},_initVar:function(){this._aTextInput=[],this._sPreValue=null,this._sClickEvent=jindo.m.getDeviceInfo().iphone||jindo.m.getDeviceInfo().ipad||jindo.m.getDeviceInfo().android?"touchstart":"mousedown",this._nBlurTimer=null},_setWrapperElement:function(t){this._htWElement={},this._htWElement.baseElement=jindo.$Element(t)},_init:function(){var t,e,i,n;n=this._htWElement.baseElement.queryAll("."+this.option("sClassPrefix")+"textinput-unit");for(var s=0,o=n.length;o>s;s++)t=jindo.$Element(n[s]),t.attr(jindo.m.TextInput.INDEX_ATTR,s).css("position","relative"),e=jindo.$Element(t.query("input")),e.attr(jindo.m.TextInput.INDEX_ATTR,s),i=t.query("."+this.option("sClassPrefix")+"clear-btn"),i&&(i=jindo.$Element(i),i.attr(jindo.m.TextInput.INDEX_ATTR,s).css({position:"absolute",zIndex:100,cursor:"pointer",right:"0px",top:"0px"}).hide()),this._aTextInput.push({welUnit:t,welInput:e,welDel:i})},_attachEvent:function(){this._htEvent={},this._htEvent.focus=jindo.$Fn(this._onFocus,this),this._htEvent.blur=jindo.$Fn(this._onBlur,this),this._htEvent.clear=jindo.$Fn(this._onClear,this),this._htEvent.input=jindo.$Fn(this._onChange,this);for(var t=0,e=this._aTextInput.length;e>t;t++)this._attachUnitEvent(this._aTextInput[t])},_attachUnitEvent:function(t){this._htEvent.focus.attach(t.welInput,"focus"),this._htEvent.blur.attach(t.welInput,"blur"),this._htEvent.input.attach(t.welInput,"input"),t.welDel&&this._htEvent.clear.attach(t.welDel,this._sClickEvent)},_detachEvent:function(){for(var t=0,e=this._aTextInput.length;e>t;t++)this._detachUnitEvent(this._aTextInput[t]);for(var i in this._htEvent)this._htEvent[i]=null;this._htEvent=null},_detachUnitEvent:function(t){this._htEvent.focus.detach(t.welInput,"focus"),this._htEvent.blur.detach(t.welInput,"blur"),this._htEvent.input.detach(t.welInput,"input"),t.welDel&&this._htEvent.clear.detach(t.welDel,this._sClickEvent)},_displayClearBtn:function(t){var e=this.getIndex(t),i=this._aTextInput[e].welDel;i&&(""!=jindo.$S(t.$value().value).trim()?!i.visible()&&this.fireEvent("beforeShowClearBtn",{nIndex:e,welClearBtn:i})&&(i.show(),this.fireEvent("showClearBtn",{nIndex:e,welClearBtn:i})):i.visible()&&this.fireEvent("beforeHideClearBtn",{nIndex:e,welClearBtn:i})&&(i.hide(),this.fireEvent("hideClearBtn",{nIndex:e,welClearBtn:i})))},_validate:function(t){var e=t.attr(jindo.m.TextInput.VALIDATE_ATTR);if(e){var i=t.$value().value,n=jindo.m.Validation.validate(e,i),s=this.getIndex(t);n&&("undefined"!=typeof n.sCorrectedValue&&null!==n.sCorrectedValue&&(t.$value().value=this._sPreValue=n.sCorrectedValue),this.fireEvent(n.bValid?"valid":"invalid",{htValidate:n,htTextInput:this._aTextInput[s],nIndex:s}))}},_onFocus:function(t){var e=this.getIndex(t.element);this._processFocus(e)},_processFocus:function(t){var e=this._aTextInput[t],i=e.welUnit,n=this.option("sClassPrefix")+"focus";i.hasClass(n)||i.addClass(n),this.fireEvent("focus",{nIndex:t,htTextInput:e})},_onBlur:function(t){var e=this.getIndex(t.element),i=this;jindo.m.getDeviceInfo().android?(clearTimeout(this._nBlurTimer),this._nBlurTimer=setTimeout(function(){i._processBlur(e)},100)):i._processBlur(e)},_processBlur:function(t){if(this._aTextInput[t].welUnit.removeClass(this.option("sClassPrefix")+"focus"),this._stopWatcher(),this.option("bUseValidate")){var e=this._aTextInput[t].welInput;this._validate(e),this._displayClearBtn(e)}this.fireEvent("blur",{nIndex:t,htTextInput:this._aTextInput[t]})},_onClear:function(t){var e=this.option("sClassPrefix")+"textinput-unit",i=jindo.$Element(t.element);if(!i.hasClass(e)){var n=i.parent(function(t){return t.hasClass(e)});if(!(n.length>0))return;i=n[0]}var s=this.getIndex(i),o=this._aTextInput[s].welInput,h=jindo.m.getDeviceInfo(),a=parseInt(h.version,10);return o.$value().value="",h.android&&3===a?(this._detachUnitEvent(this._aTextInput[s]),o.$value().blur(),o.$value().focus(),this._attachUnitEvent(this._aTextInput[s])):!h.android&&a>4&&(o.$value().blur(),o.$value().focus()),this._displayClearBtn(o),this.fireEvent("clear",{nIndex:s,htTextInput:this._aTextInput[s]}),t.stop(jindo.$Event.CANCEL_ALL),!1},_stopWatcher:function(){this._sPreValue=null},_onChange:function(t){t=jindo.$Element(t.element);var e=t.$value().value;this._sPreValue!=e?(this._sPreValue=e,this.fireEvent("change",{sPreValue:e,welInput:t,nIndex:this.getIndex(t)}),this._displayClearBtn(t)):this._displayClearBtn(t)},_getTextInputList:function(t){var e,i,n=[];if(t)if(t instanceof Array)for(e=0,i=t.length;i>e;e++)n.push(jindo.$Element(t[e]));else n.push(jindo.$Element(t));else for(e=0,i=this._aTextInput.length;i>e;e++)n.push(this._aTextInput[e].welUnit);return n},_useSettingUnit:function(t,e){var i=this;this._stopWatcher();var n=this._getTextInputList(t);jindo.m.getDeviceInfo().android?setTimeout(function(){i._useSettingUnitCore(n,e)},100):i._useSettingUnitCore(n,e)},_useSettingUnitCore:function(t,e){for(var i=0,n=t.length;n>i;i++)e?this._enableElement(t[i]):this._disableElement(t[i]);this.fireEvent(e?"enable":"disable",{aTextInputUnit:t})},_enableElement:function(t){var e=this.getIndex(t),i=this._aTextInput[e].welInput;this._detachUnitEvent(this._aTextInput[e]),this._attachUnitEvent(this._aTextInput[e]),t.removeClass(this.option("sClassPrefix")+"disable"),i.$value().disabled=!1,this._displayClearBtn(i)},_disableElement:function(t){var e=this.getIndex(t),i=this._aTextInput[e].welInput,n=this._aTextInput[e].welDel;this._detachUnitEvent(this._aTextInput[e]),t.addClass(this.option("sClassPrefix")+"disable"),i.$value().disabled=!0,n&&n.hide()},enable:function(t){this.isActivating()&&this._useSettingUnit(t,!0)},disable:function(t){this.isActivating()&&this._useSettingUnit(t,!1)},getElement:function(t){return t<this._aTextInput.length&&t>=0?this._aTextInput[t].welUnit:void 0},getInputElement:function(t){return t<this._aTextInput.length&&t>=0?this._aTextInput[t].welInput:void 0},getDelElement:function(t){return t<this._aTextInput.length&&t>=0?this._aTextInput[t].welDel:void 0},getIndex:function(t){return parseInt(jindo.$Element(t).attr(jindo.m.TextInput.INDEX_ATTR),10)},getLength:function(){return this._aTextInput.length},_onActivate:function(){this._attachEvent()},_onDeactivate:function(){this._detachEvent(),this._stopWatcher()},destroy:function(){this.deactivate();for(var t in this._htWElement)this._htWElement[t]=null;this._htWElement=null}}).extend(jindo.m.UIComponent),jindo.m.ToggleSlider=jindo.$Class({$init:function(t,e){this.option({sClassPrefix:"tslider-",bUseDrag:!0,bActivateOnload:!0,nOnPosition:50,nOffPosition:0,bStatus:!0,nDuration:100}),this.option(e||{}),this._setWrapperElement(t),this._initVar(),this.option("bActivateOnload")&&(this.activate(),this.option("bStatus")?(this.bStatusOn=!1,this._move(!0,!1)):(this.bStatusOn=!0,this._move(!1,!1)))},_initVar:function(){this._htWElement.track?(this._oTouch=new jindo.m.Touch(this._htWElement.track.$value(),{nSlopeThreshold:1,nMoveGap:2,bActivateOnload:!1}),this._oTouch.attach({touchMove:jindo.$Fn(this._onMove,this).bind(),touchEnd:jindo.$Fn(this._onEnd,this).bind(),touchStart:jindo.$Fn(this._onStart,this).bind()})):this._oTouch=null,this.bMove=!1,this.bStatusOn=this.option("bStatus"),this.htInfo={nMax:Math.max(this.option("nOnPosition"),this.option("nOffPosition")),nMin:Math.min(this.option("nOnPosition"),this.option("nOffPosition")),nGap:Math.round(Math.abs((this.option("nOnPosition")-this.option("nOffPosition"))/2))},this._wfTransitionEnd=jindo.$Fn(this._onTransitionEnd,this).bind(),this._bFireChange=!1},_setWrapperElement:function(t){this._htWElement={},t=jindo.$(t);var e="."+this.option("sClassPrefix");this._htWElement.base=jindo.$Element(t);var i=t?jindo.$$("[name="+this.option("sClassPrefix")+"radio]",t):null;this._htWElement.aRadio=jindo.$A(i).forEach(function(t,e,i){i[e]=jindo.$Element(t)}).$value(),this._htWElement.track=t?jindo.$Element(jindo.$$.getSingle(e+"track",t)):null,this._htWElement.thumb=t?jindo.$Element(jindo.$$.getSingle(e+"thumb",t)):null},_onStart:function(t){t.oEvent.stop(jindo.$Event.CANCEL_DEFAULT)},_onMove:function(t){if(this.option("bUseDrag")){t.oEvent.stop(jindo.$Event.CANCEL_DEFAULT),this.bMove=!0;var e=t.nDistanceX,i=this._getAdjustedPos(e);this._moveThumb(i)}},_onEnd:function(t){if("tap"==t.sMoveType)this.toggle();else if(this.bMove){var e=this.option(this.isOn()?"nOnPosition":"nOffPosition"),i=this._getPosition();Math.abs(e-i)>this.htInfo.nGap?this.toggle():this._move(this.isOn(),!1)}else this.toggle();this.bMove=!1},_move:function(t,e){"undefined"==typeof e&&(e=!0);var i=this.option("nOffPosition");return e&&!this.fireEvent("beforeChange",{bOn:this.isOn()})?!1:(t&&(i=this.option("nOnPosition")),this._bFireChange=e,this.bStatusOn=t,this._moveThumb(i,this.option("nDuration")),void this._updateForm())},toggle:function(){this.isOn()?this.off():this.on()},on:function(){this.isOn()||this._move(!0)},off:function(){this.isOn()&&this._move(!1)},isOn:function(){return this.bStatusOn},_updateForm:function(){if(this._htWElement.aRadio)for(var t=this.isOn()?"on":"off",e=0,i=this._htWElement.aRadio.length;i>e;e++){var n=this._htWElement.aRadio[e];n.$value().checked=n.$value().value==t?!0:!1}},_moveThumb:function(t,e){if(!(t>this.htInfo.nMax||t<this.htInfo.nMin)){"undefined"==typeof e&&(e=0);var i=parseInt(this._htWElement.thumb.css("left"),10);e>0&&i!==t&&this._attachTransitionEnd(),this._htWElement.thumb&&(this._htWElement.thumb.css("webkitTransitionDuration",e+"ms"),this._htWElement.thumb.css("webkitTransitionProperty","left"),this._htWElement.thumb.css("left",t+"%")),(0===e||i===t)&&this._onTransitionEnd()}},_onTransitionEnd:function(){this._detachTransitionEnd(),this._bFireChange&&this.fireEvent("change",{bOn:this.isOn()}),this._bFireChange=!1},_attachTransitionEnd:function(){jindo.m.attachTransitionEnd(this._htWElement.thumb.$value(),this._wfTransitionEnd)},_detachTransitionEnd:function(){jindo.m.detachTransitionEnd(this._htWElement.thumb.$value(),this._wfTransitionEnd)},_getAdjustedPos:function(t){var e=Math.round(100*t/this._htWElement.track.width());return e+=this.option(this.isOn()?"nOnPosition":"nOffPosition"),e=Math.max(this.htInfo.nMin,e),e=Math.min(this.htInfo.nMax,e)},_getPosition:function(){var t=this._htWElement.thumb.css("left");return"auto"==t?0:parseInt(t,10)
},_onClick:function(t){t.stop(jindo.$Event.CANCEL_DEFAULT)},_attachEvent:function(){this._htEvent={},this._htEvent.click={ref:jindo.$Fn(this._onClick,this).attach(this._htWElement.thumb,"click"),el:this._htWElement.thumb}},_detachEvent:function(t){if(t){var e=this._htEvent[t];e.ref.detach(e.el,t)}},_onActivate:function(){this._attachEvent(),this._oTouch&&this._oTouch.activate()},_onDeactivate:function(){this._detachEvent(),this._oTouch&&this._oTouch.deactivate()},destroy:function(){this.deactivate();for(var t in this._htWElement)this._htWElement[t]=null;this._htWElement=null,this._oTouch.detachAll(),this._oTouch=null,this.bMove=null,this.bStatusOn=null,this._wfTransitionEnd=null,this._bFireChange=null}}).extend(jindo.m.UIComponent),jindo.m.Visible=jindo.$Class({$init:function(t,e){this._elWrap=jindo.$(t)||document,this._nTimer=null,this.option({sClassName:"check_visible",nExpandSize:0}),this.option(e||{}),this.refresh()},_supportGetElementsByClassName:function(){var t=this.constructor;return"__supportGetElementsByClassName"in t||(t.__supportGetElementsByClassName=function(){var t=document.createElement("div");if(!t.getElementsByClassName)return!1;var e=t.getElementsByClassName("dummy");return t.innerHTML='<span class="dummy"></span>',1===e}()),t.__supportGetElementsByClassName},refresh:function(){return this._supportGetElementsByClassName()?(this._aTargets=this._elWrap.getElementsByClassName(this.option("sClassName")),this.refresh=function(){}):this._aTargets=jindo.$$("."+this.option("sClassName"),this._elWrap),this},check:function(t){var e=this;return"undefined"==typeof t&&(t=-1),this._nTimer&&(clearTimeout(this._nTimer),this._nTimer=null),0>t?this._check():this._nTimer=setTimeout(function(){e._check(),e._nTimer=null},t),this},_check:function(){var t,e=(new Date,null),i=this._elWrap,n=this._aTargets,s=this.option("nExpandSize"),o={"true":0,"false":0};if(i===document){var h=jindo.$Document(document),a=h.clientSize();e={top:0,left:0,bottom:a.height,right:a.width}}else e=i.getBoundingClientRect(),e={top:e.top,left:e.left,bottom:e.bottom,right:e.right};e.top-=s,e.left-=s,e.bottom+=s,e.right+=s;var r=[];for(t=n.length-1;t>=0;t--){var l=n[t],_=l.getBoundingClientRect();if(this._bSupportQSA||jindo.$Element(l).hasClass(this.option("sClassName"))){var c=!!l.__VISIBLE,u=!(_.bottom<e.top||e.bottom<_.top||_.right<e.left||e.right<_.left);l.__VISIBLE=u,c!==u?(r.push([u,l]),o[!u]++):o[u]++}else delete l.__VISIBLE,n.splice(t,1)}for(t=r.length-1;t>=0;t--){var f=r[t];o[!f[0]]--,o[f[0]]++,this.fireEvent(f[0]?"visible":"invisible",{elTarget:f[1],nVisible:o["true"],nInvisible:o["false"]})}}}).extend(jindo.m.Component);